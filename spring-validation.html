<!DOCTYPE html>
<html>
<head>
    <!-- Document Settings -->
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />

    <!-- Page Meta -->
    <title>ğŸŒ± @Validì™€ @Validated</title>
    <meta name="description" content="ë¸”ë¡œê·¸ ì´ì‚¬ì¤‘... ì•„ì§ ì •ë¦¬ê°€ ì•ˆë˜ì—ˆìŒ..." />

    <!-- Mobile Meta -->
    <meta name="HandheldFriendly" content="True" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <!-- Brand icon -->
    <link rel="shortcut icon" href="/assets/images/favicon.ico" >

    <!-- Styles'n'Scripts -->
    <link rel="stylesheet" type="text/css" href="/assets/css/screen.css" />
    <link rel="stylesheet" type="text/css" href="//fonts.googleapis.com/css?family=Merriweather:300,700,700italic,300italic|Open+Sans:700,400" />
    <link rel="stylesheet" type="text/css" href="/assets/css/syntax.css" />
    <link rel="preconnect" href="https://fonts.gstatic.com">
<link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR&family=Roboto:wght@100&display=swap" rel="stylesheet">
    <link rel="preconnect" href="https://fonts.gstatic.com">
<link rel="preconnect" href="https://fonts.gstatic.com">
<link href="https://fonts.googleapis.com/css2?family=Nanum+Gothic&display=swap" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR&display=swap" rel="stylesheet">
<link rel="preconnect" href="https://fonts.gstatic.com">
<link href="https://fonts.googleapis.com/css2?family=Noto+Sans&display=swap" rel="stylesheet">
<link href="http://cdn.jsdelivr.net/gh/joungkyun/font-d2coding/d2coding.css" rel="stylesheet" type="text/css">
<!--Syntax Highlighter-->
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/highlight.min.js"></script>
<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/styles/androidstudio.min.css">
<style type='text/css'>
    pre, code {
        white-space: pre;
        overflow-x: scroll;
    }
    .hljs
{
    white-space: pre;
    overflow-x: auto;
}
</style>
<script>hljs.initHighlightingOnLoad();</script>
    <!-- Ghost outputs important style and meta data with this tag -->
        <link rel="canonical" href="http://localhost:4000//spring-validation" />
    <meta name="referrer" content="origin" />
    <link rel="next" href="/page2/" />

    <meta property="og:site_name" content="Welcome To New Wisdom's Log !" />
    <meta property="og:type" content="website" />
    <meta property="og:title" content="ğŸŒ± @Validì™€ @Validated" />
    <meta property="og:description" content="ë¸”ë¡œê·¸ ì´ì‚¬ì¤‘... ì•„ì§ ì •ë¦¬ê°€ ì•ˆë˜ì—ˆìŒ..." />
    <meta property="og:url" content="http://localhost:4000//spring-validation" />
    <meta property="og:image" content="/assets/images/woowa.jpg" />

    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="ğŸŒ± @Validì™€ @Validated" />
    <meta name="twitter:description" content="ë¸”ë¡œê·¸ ì´ì‚¬ì¤‘... ì•„ì§ ì •ë¦¬ê°€ ì•ˆë˜ì—ˆìŒ..." />
    <meta name="twitter:url" content="http://localhost:4000//spring-validation" />
    <meta name="twitter:image:src" content="/assets/images/woowa.jpg" />

    <script type="application/ld+json">
{
    "@context": "http://schema.org",
    "@type": "Website",
    "publisher": "Welcome To New Wisdom's Log !",
    "name": "ğŸŒ± @Validì™€ @Validated",
    "url": "http://localhost:4000//spring-validation",
    "image": "/assets/images/woowa.jpg",
    "description": "ë¸”ë¡œê·¸ ì´ì‚¬ì¤‘... ì•„ì§ ì •ë¦¬ê°€ ì•ˆë˜ì—ˆìŒ..."
}
    </script>

    <meta name="generator" content="Jekyll 3.0.0" />
    <link rel="alternate" type="application/rss+xml" title="Welcome To New Wisdom's Log !" href="/feed.xml" />


</head>
<body class="home-template nav-closed">

    <!-- The blog navigation links -->
    <div class="nav">
    <h3 class="nav-title">Menu</h3>
    <a href="#" class="nav-close">
        <span class="hidden">Close</span>
    </a>
    <ul>
        <li class="nav-home " role="presentation"><a href="/">Home</a></li>
        <li class="nav-about " role="presentation"><a href="/about">About</a></li>
        <li class="nav-woowa " role="presentation"><a href="/tag/woowa">WoowaCource</a></li>
        <li class="nav-techotalk " role="presentation"><a href="/tag/techotalk">Techotalk</a></li>
        <li class="nav-java " role="presentation"><a href="/tag/java">Java</a></li>
        <li class="nav-kotlin " role="presentation"><a href="/tag/kotlin">Kotlin</a></li>
        <li class="nav-oop " role="presentation"><a href="/tag/oop">Oop</a></li>
        <li class="nav-springboot " role="presentation"><a href="/tag/springboot">SpringBoot</a></li>
        <li class="nav-ect " role="presentation"><a href="/tag/ect">Ect</a></li>
        <li class="nav-author " role="presentation"><a href="/author/casper">Casper</a></li>
        <li class="nav-author " role="presentation"><a href="/author/edgar">Edgar</a></li>
        <li class="nav-author " role="presentation"><a href="/author/abraham">Abraham</a></li>
        <li class="nav-author " role="presentation"><a href="/author/martin">Martin</a></li>
        <li class="nav-author " role="presentation"><a href="/author/lewis">Lewis</a></li>
    </ul>
    <a class="subscribe-button icon-feed" href="/feed.xml">Subscribe</a>
</div>
<span class="nav-cover"></span>


    <div class="site-wrapper">

        <!-- All the main content gets inserted here, index.hbs, post.hbs, etc -->
        <!-- default -->

<!-- The comment above "< default" means - insert everything in this file into -->
    <!-- the [body] of the default.hbs template, which contains our header/footer. -->

<!-- Everything inside the #post tags pulls data from the post -->
<!-- #post -->

<header class="main-header post-head " style="background-image: url(/assets/images/woowa.jpg) ">
    <nav class="main-nav  overlay  clearfix">
        <a class="blog-logo" href="/"><img src="/assets/images/ghost.png" alt="Blog Logo" /></a>
        
            <a class="menu-button icon-menu" href="#"><span class="word">Menu</span></a>
        
    </nav>
    <div class = "amazzi">    
        <h1 class="post-title">ğŸŒ± @Validì™€ @Validated</h1>
            <section class="post-meta">
            <!-- <a href='/'></a> -->

            
                
                    <a href='/author/amazzi'>âœ¨ new wisdom âœ¨</a>
                
            
            <time class="post-date" datetime="2021-04-30">30 Apr 2021</time>
                <!-- [[tags prefix=" on "]] -->
                
                on
                
                    
                       <a href='/tag/woowa'>Woowa</a>,
                    
                
                    
                       <a href='/tag/springboot'>Springboot</a>
                    
                
                
            </section>
    </div>
</header>

<main class="content" role="main">

    <article class="post tag-woowa">

        <header class="post-header">
            
        </header>
        
        <br>

        <section class="post-content">

            <h2 id="validì™€-validated">@Validì™€ @Validated</h2>

<p>ì„œë¹„ìŠ¤ ê·¼ë¡œì—ì„œ ì¥ë°”êµ¬ë‹ˆ ë¯¸ì…˜ APIë¥¼ ë§Œë“¤ë©° ìš”ì²­ìœ¼ë¡œ ë“¤ì–´ì˜¨ DTOì˜ ê°’ì„ ê²€ì¦í•˜ëŠ” ë°©ë²•ì„ ê³ ë¯¼í•˜ë‹¤ê°€,  Spring Validationì„ ì‚¬ìš©í•´ë³´ê²Œ ë˜ì—ˆë‹¤.<br />
ì´ë²ˆì—ëŠ” DTOì˜ í•„ë“œì— ì œì•½ì„ ê±¸ì–´ì£¼ê³  ì»¨íŠ¸ë¡¤ëŸ¬ì—ì„œ ê²€ì¦ì„ í•´ì£¼ì—ˆëŠ”ë°, ìƒˆë¡­ê²Œ ë°°ìš´ ë‚´ìš©ì´ë‹ˆ ì´ë¥¼ ì •ë¦¬í•´ë³´ë ¤ í•œë‹¤.<br />
ì‚¬ì‹¤ ì˜¬ë°”ë¥´ê²Œ ì‚¬ìš©í•œ ê²ƒì¸ì§€ëŠ” í™•ì‹ ì¼ ì—†ìœ¼ë‚˜, ì´ëŸ° ê²ƒë„ ìˆêµ¬ë‚˜ ë‹¤ë¤„ë³´ë©´ì„œ ì—¬ëŸ¬ ì‹œí–‰ì°©ì˜¤ë¥¼ ê²ªì—ˆê¸°ì— ì¢€ ë” ê³µë¶€í•˜ë©´ì„œ ì •ë¦¬í•´ì•¼ì§€ ğŸ˜‹</p>

<h4 id="dependency-ì¶”ê°€---gradle">Dependency ì¶”ê°€ - gradle</h4>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>implementation 'org.springframework.boot:spring-boot-starter-validation'
</code></pre></div></div>

<hr />

<h2 id="valid">@Valid</h2>

<p>ì´ë²ˆì— ìš°ë¦¬ê°€ ì‚¬ìš©í•œ ì˜ˆì‹œë¥¼ ë³´ë©° í•˜ë‚˜ì”© ì •ë¦¬í•˜ì.</p>

<h4 id="productcontroller">ProductController</h4>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@RestController</span>
<span class="nd">@RequestMapping</span><span class="o">(</span><span class="s">"/api/products"</span><span class="o">)</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">ProductController</span> <span class="o">{</span>

    <span class="kd">private</span> <span class="kd">final</span> <span class="n">ProductService</span> <span class="n">productService</span><span class="o">;</span>

    <span class="kd">public</span> <span class="nf">ProductController</span><span class="o">(</span><span class="kd">final</span> <span class="n">ProductService</span> <span class="n">productService</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">productService</span> <span class="o">=</span> <span class="n">productService</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="nd">@PostMapping</span>
    <span class="kd">public</span> <span class="n">ResponseEntity</span><span class="o">&lt;</span><span class="n">Void</span><span class="o">&gt;</span> <span class="nf">add</span><span class="o">(</span><span class="nd">@Validae</span> <span class="nd">@RequestBody</span> <span class="kd">final</span> <span class="n">ProductDto</span> <span class="n">productDto</span><span class="o">)</span> <span class="o">{</span>
        <span class="kd">final</span> <span class="n">Long</span> <span class="n">productId</span> <span class="o">=</span> <span class="n">productService</span><span class="o">.</span><span class="na">addProduct</span><span class="o">(</span><span class="n">productDto</span><span class="o">);</span>
        <span class="kd">final</span> <span class="n">URI</span> <span class="n">uri</span> <span class="o">=</span> <span class="n">ServletUriComponentsBuilder</span>
                <span class="o">.</span><span class="na">fromCurrentRequest</span><span class="o">()</span>
                <span class="o">.</span><span class="na">path</span><span class="o">(</span><span class="s">"/"</span> <span class="o">+</span> <span class="n">productId</span><span class="o">)</span>
                <span class="o">.</span><span class="na">build</span><span class="o">().</span><span class="na">toUri</span><span class="o">();</span>
        <span class="k">return</span> <span class="n">ResponseEntity</span><span class="o">.</span><span class="na">created</span><span class="o">(</span><span class="n">uri</span><span class="o">).</span><span class="na">build</span><span class="o">();</span>
    <span class="o">}</span>
 		
  	<span class="c1">// ...</span>
<span class="o">}</span>
</code></pre></div></div>

<p>ì»¨íŠ¸ë¡¤ëŸ¬ì—ì„œ @RequestBodyë¥¼ í†µí•´ DTOì— ë§¤í•‘ì„ í•  ë•Œ ê²€ì¦ì„ ì§„í–‰í•  ê³³ì— <code class="highlighter-rouge">@Valid</code> ë¥¼ ë¶™ì—¬ì¤€ë‹¤.<br />
í•´ë‹¹ ìš”ì²­ì´ ë“¤ì–´ì™€ ë©”ì„œë“œê°€ ì‹¤í–‰ë  ì‹œ ìœ íš¨ì„± ê²€ì‚¬ë¥¼ ì§„í–‰í•œë‹¤.<br />
ë§Œì•½ ê²€ì¦ì— ì‹¤íŒ¨í•  ê²½ìš° <code class="highlighter-rouge">MethodArgumentNotValidException</code>ë¥¼ ë˜ì§„ë‹¤.</p>

<h4 id="productdto">ProductDto</h4>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">ProductDto</span> <span class="o">{</span>
    <span class="nd">@NotNull</span>
    <span class="kd">private</span> <span class="n">Long</span> <span class="n">productId</span><span class="o">;</span>

    <span class="nd">@NotBlank</span>
    <span class="kd">private</span> <span class="n">String</span> <span class="n">name</span><span class="o">;</span>

    <span class="nd">@Min</span><span class="o">(</span><span class="n">value</span> <span class="o">=</span> <span class="mi">0</span><span class="o">,</span> <span class="n">message</span> <span class="o">=</span> <span class="s">"ê¸ˆì•¡ì€ ìŒìˆ˜ì¼ ìˆ˜ ì—†ìŠµë‹ˆë‹¤."</span><span class="o">)</span>
    <span class="kd">private</span> <span class="n">Integer</span> <span class="n">price</span><span class="o">;</span>

    <span class="nd">@NotBlank</span>
    <span class="kd">private</span> <span class="n">String</span> <span class="n">imageUrl</span><span class="o">;</span>

    <span class="kd">public</span> <span class="nf">ProductDto</span><span class="o">()</span> <span class="o">{</span>
    <span class="o">}</span>
     
 		<span class="c1">// ...</span>
<span class="o">}</span>
</code></pre></div></div>

<p>DTOì— ì‚¬ìš©ëœ ì–´ë…¸í…Œì´ì…˜ê³¼ ì¢€ ë” ì°¾ì•„ë³¸ ì œì•½ ì¡°ê±´ ì–´ë…¸í…Œì´ì…˜ì„ ì •ë¦¬í•´ë³´ë©´â€¦ âœï¸</p>

<ul>
  <li><code class="highlighter-rouge">@NotNull</code> : ëª¨ë“  ë°ì´í„° íƒ€ì…ì— ëŒ€í•´ nullì„ í—ˆìš©í•˜ì§€ ì•ŠëŠ”ë‹¤.</li>
  <li><code class="highlighter-rouge">@NotEmpty</code> : nullê³¼ â€œâ€œë¥¼ í—ˆìš©í•˜ì§€ ì•ŠëŠ”ë‹¤. (íƒ€ì… - String, Collection. Map, Array)</li>
  <li><code class="highlighter-rouge">@NotBlack</code> : nullê³¼ â€œâ€, â€œ  â€œ(ë¹ˆ ê³µë°± ë¬¸ìì—´)ì„ í—ˆìš©í•˜ì§€ ì•ŠëŠ”ë‹¤.</li>
  <li><code class="highlighter-rouge">@Min(ìˆ«ì)</code> / <code class="highlighter-rouge">@Max(ìˆ«ì)</code> : ìµœì†Œ, ìµœëŒ€ ê°’ì„ ê²€ì¦í•œë‹¤.</li>
</ul>

<p>ë˜í•œ ì œì•½ ì¡°ê±´ ì–´ë…¸í…Œì´ì…˜ì— ì†ì„±ë“¤ë¡œ ì˜ˆì™¸ë¡œ ë˜ì ¸ì¤„ <strong>message</strong> ë“±ì˜ ì˜µì…˜ì„ ì„¤ì •í•  ìˆ˜ ìˆë‹¤.</p>

<h3 id="ì œì•½-ì¡°ê±´-ì–´ë…¸í…Œì´ì…˜">ì œì•½ ì¡°ê±´ ì–´ë…¸í…Œì´ì…˜</h3>

<table>
  <thead>
    <tr>
      <th>Anotation</th>
      <th>ì œì•½ ì¡°ê±´</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>@NotNull</td>
      <td>ëª¨ë“  ë°ì´í„° íƒ€ì…ì— ëŒ€í•´ nullì„ í—ˆìš©í•˜ì§€ ì•ŠëŠ”ë‹¤.</td>
    </tr>
    <tr>
      <td>@NotEmpty</td>
      <td>nullê³¼ â€œâ€œë¥¼ í—ˆìš©í•˜ì§€ ì•ŠëŠ”ë‹¤. (íƒ€ì… - String, Collection. Map, Array)</td>
    </tr>
    <tr>
      <td>@NotBlank</td>
      <td>nullê³¼ â€œâ€, â€œ  â€œ(ë¹ˆ ê³µë°± ë¬¸ìì—´)ì„ í—ˆìš©í•˜ì§€ ì•ŠëŠ”ë‹¤.</td>
    </tr>
    <tr>
      <td>@Null</td>
      <td>Nullë§Œ ì…ë ¥ ê°€ëŠ¥</td>
    </tr>
    <tr>
      <td>@Size(min=,max=)</td>
      <td>ë¬¸ìì—´, ë°°ì—´ë“±ì˜ í¬ê¸° ê²€ì¦</td>
    </tr>
    <tr>
      <td>@Pattern(regex=)</td>
      <td>ì •ê·œì‹ ê²€ì¦</td>
    </tr>
    <tr>
      <td>@Max(ìˆ«ì)</td>
      <td>ìµœëŒ€ê°’ ê²€ì¦</td>
    </tr>
    <tr>
      <td>@Min(ìˆ«ì)</td>
      <td>ìµœì†Œê°’ ê²€ì¦</td>
    </tr>
    <tr>
      <td>@Future</td>
      <td>í˜„ì¬ ë³´ë‹¤ ë¯¸ë˜ì¸ì§€ ê²€ì¦</td>
    </tr>
    <tr>
      <td>@Past</td>
      <td>í˜„ì¬ ë³´ë‹¤ ê³¼ê±°ì¸ì§€ ê²€ì¦</td>
    </tr>
    <tr>
      <td>@Positive</td>
      <td>ì–‘ìˆ˜ë§Œ ê°€ëŠ¥</td>
    </tr>
    <tr>
      <td>@PositiveOrZero</td>
      <td>ì–‘ìˆ˜ì™€ 0ë§Œ ê°€ëŠ¥</td>
    </tr>
    <tr>
      <td>@Negative</td>
      <td>ìŒìˆ˜ë§Œ ê°€ëŠ¥</td>
    </tr>
    <tr>
      <td>@NegativeOrZero</td>
      <td>ìŒìˆ˜ì™€ 0ë§Œ ê°€ëŠ¥</td>
    </tr>
    <tr>
      <td>@Email</td>
      <td>ì´ë©”ì¼ í˜•ì‹ë§Œ ê°€ëŠ¥</td>
    </tr>
    <tr>
      <td>@Digits(integer=, fraction = )</td>
      <td>ëŒ€ìƒ ìˆ˜ê°€ ì§€ì •ëœ ì •ìˆ˜ì™€ ì†Œìˆ˜ ìë¦¬ ìˆ˜ ë³´ë‹¤ ì‘ì€ì§€ ê²€ì¦</td>
    </tr>
    <tr>
      <td>@DecimalMax(value=)</td>
      <td>ì§€ì •ëœ ì‹¤ìˆ˜ ì´í•˜ì¸ì§€ ê²€ì¦</td>
    </tr>
    <tr>
      <td>@DecimalMin(value=)</td>
      <td>ì§€ì •ëœ ì‹¤ìˆ˜ ì´ìƒì¸ì§€ ê²€ì¦</td>
    </tr>
    <tr>
      <td>@AssertFalse</td>
      <td>false ì¸ì§€ ê²€ì¦</td>
    </tr>
    <tr>
      <td>@AssertTrue</td>
      <td>true ì¸ì§€ ê²€ì¦</td>
    </tr>
  </tbody>
</table>

<p>ê·¸ëŸ°ë° ìš°ë¦¬ëŠ” ì–´ë–¤ ìš”ì²­ì—ì„œëŠ” idê°’ë§Œ ì œì•½ì¡°ê±´ì„ ê±¸ê³ , ì–´ë–¤ ìš”ì²­ì—ì„œëŠ” ëª¨ë“  í•„ë“œì— ëŒ€í•œ ì œì•½ì¡°ê±´ì„ ê±¸ê³  ì‹¶ì—ˆë‹¤.<br />
ë‹¹ì—°í•˜ê²Œë„(?) ì œì•½ì¡°ê±´ì— ëŒ€í•´ ê·¸ë£¹í•‘ì„ í•  ìˆ˜ ìˆëŠ” ë°©ë²•ë„ ìˆì—ˆë‹¤!</p>

<hr />

<h2 id="validated">@Validated</h2>

<p><strong>ì œì•½ì¡°ê±´ì— ëŒ€í•œ ê·¸ë£¹ì„ ë§Œë“¤ì–´ ì ìš©</strong>ì‹œí‚¬ ìˆ˜ ìˆë‹¤.<br />
<strong>íŠ¹ì • Validation ê·¸ë£¹</strong>ìœ¼ë¡œ ê²€ì¦í•˜ê¸° ìœ„í•´ì„œëŠ” Group ì¸í„°í˜ì´ìŠ¤ë¥¼ ìƒì„±í•˜ê³  ì´ ì•ˆì— ê·¸ë£¹ì— ëŒ€í•œ ì¸í„°í˜ì´ìŠ¤ë¥¼ ì •ì˜í•œë‹¤.</p>

<h4 id="request">Request</h4>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">interface</span> <span class="nc">Request</span> <span class="o">{</span>
    <span class="kd">interface</span> <span class="nc">id</span> <span class="o">{</span>
    <span class="o">}</span>

    <span class="kd">interface</span> <span class="nc">allProperties</span> <span class="o">{</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<p>ì´ì œ ìš”ì²­ë§ˆë‹¤ <strong>id</strong>, or <strong>ëª¨ë“  í•„ë“œ</strong>ì— ëŒ€í•œ ì œì•½ ì¡°ê±´ì„ ê²€ì‚¬í•˜ê³  ì‹¶ì„ ë•Œë¥¼ ë‚˜ëˆ  ê·¸ë£¹ì„ ì •ì˜í•œë‹¤.</p>

<h4 id="productdto-1">ProductDto</h4>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">ProductDto</span> <span class="o">{</span>
    <span class="nd">@NotNull</span><span class="o">(</span><span class="n">groups</span> <span class="o">=</span> <span class="n">Request</span><span class="o">.</span><span class="na">id</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>
    <span class="kd">private</span> <span class="n">Long</span> <span class="n">productId</span><span class="o">;</span>

    <span class="nd">@NotBlank</span><span class="o">(</span><span class="n">groups</span> <span class="o">=</span> <span class="n">Request</span><span class="o">.</span><span class="na">allProperties</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>
    <span class="kd">private</span> <span class="n">String</span> <span class="n">name</span><span class="o">;</span>

    <span class="nd">@Min</span><span class="o">(</span><span class="n">value</span> <span class="o">=</span> <span class="mi">0</span><span class="o">,</span> <span class="n">message</span> <span class="o">=</span> <span class="s">"ê¸ˆì•¡ì€ ìŒìˆ˜ì¼ ìˆ˜ ì—†ìŠµë‹ˆë‹¤."</span><span class="o">,</span> <span class="n">groups</span> <span class="o">=</span> <span class="n">Request</span><span class="o">.</span><span class="na">allProperties</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>
    <span class="kd">private</span> <span class="n">Integer</span> <span class="n">price</span><span class="o">;</span>

    <span class="nd">@NotBlank</span><span class="o">(</span><span class="n">groups</span> <span class="o">=</span> <span class="n">Request</span><span class="o">.</span><span class="na">allProperties</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>
    <span class="kd">private</span> <span class="n">String</span> <span class="n">imageUrl</span><span class="o">;</span>

    <span class="kd">public</span> <span class="nf">ProductDto</span><span class="o">()</span> <span class="o">{</span>
    <span class="o">}</span>

    <span class="c1">// ...</span>
<span class="o">}</span>
</code></pre></div></div>

<p>ì†ì„± ì œì•½ì¡°ê±´ ì–´ë…¸í…Œì´ì…˜ì˜ ì˜µì…˜ <strong>groups</strong>ì— ê·¸ë£¹ì„ ì§€ì •í•´ì¤€ë‹¤.</p>

<h4 id="productcontroller-1">ProductController</h4>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@RestController</span>
<span class="nd">@RequestMapping</span><span class="o">(</span><span class="s">"/api/products"</span><span class="o">)</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">ProductController</span> <span class="o">{</span>

    <span class="kd">private</span> <span class="kd">final</span> <span class="n">ProductService</span> <span class="n">productService</span><span class="o">;</span>

    <span class="kd">public</span> <span class="nf">ProductController</span><span class="o">(</span><span class="kd">final</span> <span class="n">ProductService</span> <span class="n">productService</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">productService</span> <span class="o">=</span> <span class="n">productService</span><span class="o">;</span>
    <span class="o">}</span>
		
  	<span class="c1">// ...</span>
  
    <span class="nd">@PostMapping</span>
    <span class="kd">public</span> <span class="n">ResponseEntity</span><span class="o">&lt;</span><span class="n">Void</span><span class="o">&gt;</span> <span class="nf">add</span><span class="o">(</span><span class="nd">@Validated</span><span class="o">(</span><span class="n">Request</span><span class="o">.</span><span class="na">allProperties</span><span class="o">.</span><span class="na">class</span><span class="o">)</span> <span class="nd">@RequestBody</span> <span class="kd">final</span> <span class="n">ProductDto</span> <span class="n">productDto</span><span class="o">)</span> <span class="o">{</span>
        <span class="kd">final</span> <span class="n">Long</span> <span class="n">productId</span> <span class="o">=</span> <span class="n">productService</span><span class="o">.</span><span class="na">addProduct</span><span class="o">(</span><span class="n">productDto</span><span class="o">);</span>
        <span class="kd">final</span> <span class="n">URI</span> <span class="n">uri</span> <span class="o">=</span> <span class="n">ServletUriComponentsBuilder</span>
                <span class="o">.</span><span class="na">fromCurrentRequest</span><span class="o">()</span>
                <span class="o">.</span><span class="na">path</span><span class="o">(</span><span class="s">"/"</span> <span class="o">+</span> <span class="n">productId</span><span class="o">)</span>
                <span class="o">.</span><span class="na">build</span><span class="o">().</span><span class="na">toUri</span><span class="o">();</span>
        <span class="k">return</span> <span class="n">ResponseEntity</span><span class="o">.</span><span class="na">created</span><span class="o">(</span><span class="n">uri</span><span class="o">).</span><span class="na">build</span><span class="o">();</span>
    <span class="o">}</span>
		<span class="c1">// ...</span>
<span class="o">}</span>
</code></pre></div></div>

<h4 id="cartitemcontroller">CartItemController</h4>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@RestController</span>
<span class="nd">@RequestMapping</span><span class="o">(</span><span class="s">"/api/customers/{customerName}/carts"</span><span class="o">)</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">CartItemController</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="n">CartService</span> <span class="n">cartService</span><span class="o">;</span>

    <span class="kd">public</span> <span class="nf">CartItemController</span><span class="o">(</span><span class="kd">final</span> <span class="n">CartService</span> <span class="n">cartService</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">cartService</span> <span class="o">=</span> <span class="n">cartService</span><span class="o">;</span>
    <span class="o">}</span>
		<span class="c1">// ...</span>

    <span class="nd">@PostMapping</span>
    <span class="kd">public</span> <span class="n">ResponseEntity</span><span class="o">&lt;</span><span class="n">Void</span><span class="o">&gt;</span> <span class="nf">addCartItem</span><span class="o">(</span><span class="nd">@Validated</span><span class="o">(</span><span class="n">Request</span><span class="o">.</span><span class="na">id</span><span class="o">.</span><span class="na">class</span><span class="o">)</span> <span class="nd">@RequestBody</span> <span class="kd">final</span> <span class="n">ProductDto</span> <span class="n">productDto</span><span class="o">,</span>
                                            <span class="nd">@PathVariable</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">customerName</span><span class="o">)</span> <span class="o">{</span>
        <span class="kd">final</span> <span class="n">Long</span> <span class="n">newId</span> <span class="o">=</span> <span class="n">cartService</span><span class="o">.</span><span class="na">addCart</span><span class="o">(</span><span class="n">productDto</span><span class="o">.</span><span class="na">getProductId</span><span class="o">(),</span> <span class="n">customerName</span><span class="o">);</span>
        <span class="kd">final</span> <span class="n">URI</span> <span class="n">uri</span> <span class="o">=</span> <span class="n">ServletUriComponentsBuilder</span>
                <span class="o">.</span><span class="na">fromCurrentRequest</span><span class="o">()</span>
                <span class="o">.</span><span class="na">path</span><span class="o">(</span><span class="s">"/{cartId}"</span><span class="o">)</span>
                <span class="o">.</span><span class="na">buildAndExpand</span><span class="o">(</span><span class="n">newId</span><span class="o">)</span>
                <span class="o">.</span><span class="na">toUri</span><span class="o">();</span>
        <span class="k">return</span> <span class="n">ResponseEntity</span><span class="o">.</span><span class="na">created</span><span class="o">(</span><span class="n">uri</span><span class="o">).</span><span class="na">build</span><span class="o">();</span>
    <span class="o">}</span>
		<span class="c1">// ...</span>
<span class="o">}</span>
</code></pre></div></div>

<p><code class="highlighter-rouge">@RequestBody</code> ì˜†ì— <code class="highlighter-rouge">@Validated</code>ë¥¼ ì„ ì–¸í•˜ê³  ê´„í˜¸ë¥¼ ì—´ì–´ ì›í•˜ëŠ” ê·¸ë£¹ì„ ë„£ì–´ì¤€ë‹¤.</p>

<hr />

<h2 id="ì»¬ë ‰ì…˜-valid-">ì»¬ë ‰ì…˜ @Valid ?</h2>

<h4 id="orderdetaildto">OrderDetailDto</h4>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">OrderDetailDto</span> <span class="o">{</span>

    <span class="nd">@NotNull</span><span class="o">(</span><span class="n">groups</span> <span class="o">=</span> <span class="n">Request</span><span class="o">.</span><span class="na">allProperties</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>
    <span class="kd">private</span> <span class="n">Long</span> <span class="n">productId</span><span class="o">;</span>
    <span class="kd">private</span> <span class="n">Long</span> <span class="n">cartId</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kt">int</span> <span class="n">price</span><span class="o">;</span>
    <span class="kd">private</span> <span class="n">String</span> <span class="n">name</span><span class="o">;</span>
    <span class="kd">private</span> <span class="n">String</span> <span class="n">imageUrl</span><span class="o">;</span>

    <span class="nd">@Min</span><span class="o">(</span><span class="n">value</span> <span class="o">=</span> <span class="mi">0</span><span class="o">,</span> <span class="n">groups</span> <span class="o">=</span> <span class="n">Request</span><span class="o">.</span><span class="na">allProperties</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>
    <span class="kd">private</span> <span class="kt">int</span> <span class="n">quantity</span><span class="o">;</span>

    <span class="kd">public</span> <span class="nf">OrderDetailDto</span><span class="o">()</span> <span class="o">{</span>
    <span class="o">}</span>

    <span class="c1">// ...</span>
<span class="o">}</span>
</code></pre></div></div>

<p>ìš°ë¦¬ê°€ êµ¬í˜„í•˜ë‹¤ ë¬¸ì œê°€ ëœ ë¶€ë¶„ì€ ë°”ë¡œ ìœ„ì™€ ê°™ì€ <code class="highlighter-rouge">OrderDetailDto</code> ì˜ ì»¬ë ‰ì…˜ì¸ <code class="highlighter-rouge">List&lt;OrderDetailDto&gt; orderDetailRequestDtos</code>ë¡œ ë“¤ì–´ì˜¤ëŠ” ê°’ì„ ê²€ì¦í•˜ê³  ì‹¶ì—ˆëŠ”ë°,  <br />
ì»¬ë ‰ì…˜ì— ì†í•œ ê°ì²´ëŠ” ì†ì„± ì œì•½ ì¡°ê±´ì´ ê²€ì¦ë˜ì§€ ì•Šê³  ê·¸ëƒ¥ í†µê³¼ë˜ì–´ ë²„ë¦¬ëŠ” ê²ƒì´ì—ˆë‹¤.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@RestController</span>
<span class="nd">@RequestMapping</span><span class="o">(</span><span class="s">"/api/customers/{customerName}/orders"</span><span class="o">)</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">OrderController</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="n">OrderService</span> <span class="n">orderService</span><span class="o">;</span>

    <span class="kd">public</span> <span class="nf">OrderController</span><span class="o">(</span><span class="kd">final</span> <span class="n">OrderService</span> <span class="n">orderService</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">orderService</span> <span class="o">=</span> <span class="n">orderService</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="nd">@PostMapping</span>
    <span class="kd">public</span> <span class="n">ResponseEntity</span><span class="o">&lt;</span><span class="n">Void</span><span class="o">&gt;</span> <span class="nf">addOrder</span><span class="o">(</span><span class="nd">@PathVariable</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">customerName</span><span class="o">,</span>
                                         <span class="nd">@RequestBody</span> <span class="nd">@Valid</span> <span class="kd">final</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">OrderDetailDto</span><span class="o">&gt;</span> <span class="n">orderDetailRequestDtos</span><span class="o">)</span> <span class="o">{</span>
        <span class="kt">long</span> <span class="n">orderId</span> <span class="o">=</span> <span class="n">orderService</span><span class="o">.</span><span class="na">addOrder</span><span class="o">(</span><span class="n">orderDetailRequestDtos</span><span class="o">,</span> <span class="n">customerName</span><span class="o">);</span>
        <span class="k">return</span> <span class="n">ResponseEntity</span><span class="o">.</span><span class="na">created</span><span class="o">(</span>
                <span class="n">URI</span><span class="o">.</span><span class="na">create</span><span class="o">(</span><span class="s">"/api/"</span> <span class="o">+</span> <span class="n">customerName</span> <span class="o">+</span> <span class="s">"/orders/"</span> <span class="o">+</span> <span class="n">orderId</span><span class="o">)).</span><span class="na">build</span><span class="o">();</span>
    <span class="o">}</span>

   <span class="c1">// ...</span>
<span class="o">}</span>
</code></pre></div></div>

<h4 id="ì™œ">ì™œâ“</h4>

<p>ì´ìœ ëŠ”<a href="https://stackoverflow.com/questions/17207766/spring-mvc-valid-on-list-of-beans-in-rest-service/35643761#35643761"><code class="highlighter-rouge">@Valid</code>ëŠ” JSR-303ì˜ ì–´ë…¸í…Œì´ì…˜ì´ê³  JSR-303ì€ JavaBeansì— ì ìš©ë˜ëŠ”ë°, ListëŠ” JavaBeansê°€ ì•„ë‹ˆê¸° ë•Œë¬¸ì´ë¼ê³  í•œë‹¤.</a><br />
ìš°ë¦¬ëŠ” Collection DTOë¥¼ ê°ì‹¸ëŠ” ë˜ë‹¤ë¥¸ DTO ê°ì²´ë¥¼ ë§Œë“¤ì–´ì•¼í•˜ë‚˜â€¦ í–ˆìœ¼ë‚˜,  í´ë˜ìŠ¤ ë‹¨ì— <code class="highlighter-rouge">@Validated</code> ì„ ë¶™ì—¬ í•´ê²°í•  ìˆ˜ ìˆì—ˆë‹¤.</p>

<h3 id="ì˜ˆì™¸">ì˜ˆì™¸</h3>

<p>ì—¬ê¸°ì„œ ì£¼ì˜í•  ì ì´ ìˆë‹¤. ë°”ë¡œ ì˜ˆì™¸ì— ê´€í•œ ë¶€ë¶„ì¸ë°,<br />
<strong><code class="highlighter-rouge">@Valid</code> ëŠ” ê²€ì¦ì— ì‹¤íŒ¨í•˜ë©´ <code class="highlighter-rouge">MethodArgumentNotValidException</code> ë¥¼ ë˜ì§€ê³ , <br />
í´ë˜ìŠ¤ ë‹¨ì— ë¶™ì€ <code class="highlighter-rouge">@Validated </code>ëŠ” ê²€ì¦ì— ì‹¤íŒ¨í•˜ë©´ <code class="highlighter-rouge">ConstraintViolationException</code> ë¥¼ ë˜ì§„ë‹¤.</strong></p>

<p>ì§€ê¸ˆìœ¼ë¡œì¨ëŠ” ê° ì˜ˆì™¸ë¥¼ ì¡ì•„ì„œ í•¸ë“¤ë§ í•´ì£¼ì—ˆë‹¤.</p>

<hr />

<p>ê·¼ë¡œí•˜ë©´ì„œ Spring Validationì´ë¼ëŠ” ê²ƒì„ ì²˜ìŒì¨ë´ì„œ ì—¬ëŸ¬ ì‹œë„ë“¤ì„ í•´ë³´ì•˜ê³ , ë•ë¶„ì— ì´ëŸ°ê²ƒë„ ìˆêµ¬ë‚˜ë¥¼ ê¹¨ë‹¬ì„ ìˆ˜ ìˆì—ˆë‹¤.<br />
íŠ¹íˆ ì»¬ë ‰ì…˜ì— ëŒ€í•œ ê²€ì¦ì—ì„œ ì™œì´ëŸ¬ì§€ë¥¼ ê³ ë¯¼í•˜ë©° ì´ìœ ë¥¼ ì°¾ì•„ê°”ì—ˆê³  ë•ë¶„ì— ì •ë§ ë§ì´ ë°°ì› ë‹¤.<br />
ì‚¬ì‹¤ ì¥ë°”êµ¬ë‹ˆ API êµ¬í˜„ì—ì„œ ì‚´ì§ Spring Validationì„ ë‹¤ë£¬ê±°ë¼ ì´ì— ëŒ€í•´ ê¹Šê²Œ ê¹¨ìš°ì¹˜ì§„ ì•Šì•˜ì§€ë§Œ, êµ‰ì¥íˆ ì¢‹ì€ í•™ìŠµì´ì—ˆë‹¤.<br />
ì•„ë§ˆ ì´ ê¸€ì€ ë¯¸ì…˜ì„ ì§„í–‰í•˜ë©´ì„œ ì ì°¨ ì‚´ì´ ë¶™ì„ ê²ƒ ê°™ë‹¤.<br />
ì¼ë‹¨ ì§€ê¸ˆì€ ì´ë²ˆì— ê²½í—˜í•œ ë‚´ìš©ì„ ì •ë¦¬í•˜ëŠ”ë° ì˜ì˜ë¥¼ ë‘”ë‹¤!</p>

<hr />

<h3 id="ì°¸ê³ -ìë£Œ">ì°¸ê³  ìë£Œ</h3>

<ul>
  <li><a href="https://namocom.tistory.com/m/920">[spring] JSR-303 ê³¼ @Valid ê³¼ @Validated</a></li>
  <li><a href="https://meetup.toast.com/posts/223">Validation ì–´ë””ê¹Œì§€ í•´ë´¤ë‹ˆ?</a></li>
</ul>


        </section>

        <footer class="post-footer">

            <!-- Everything inside the #author tags pulls data from the author -->
            <!-- #author-->
            
                
                    
                        <figure class="author-image">
                            <a class="img" href="/author/amazzi" style="background-image: url(/assets/images/amazzi.jpeg)"><span class="hidden">amazzi's Picture</span></a>
                        </figure>
                    

                    <section class="author">
                        <h4><a href="/author/amazzi">âœ¨ new wisdom âœ¨</a></h4>

                        
                            <p> I want to be a person who gives you new wisdom.</p>
                        
                        <div class="author-meta">
                            <span class="author-location icon-location"> Seoul, South Korea</span>
                            <span class="author-link icon-link"><a href="https://newwisdom.github.io/"> newwisdom.github.io/</a></span>
                        </div>
                    </section>

                    <!-- /author  -->

                    <section class="share">
                        <h4>Share this post</h4>
                        <a class="icon-twitter" href="http://twitter.com/share?text=ğŸŒ± @Validì™€ @Validated&amp;url=http://localhost:4000spring-validation"
                            onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;">
                            <span class="hidden">Twitter</span>
                        </a>
                        <a class="icon-facebook" href="https://www.facebook.com/sharer/sharer.php?u=http://localhost:4000spring-validation"
                            onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;">
                            <span class="hidden">Facebook</span>
                        </a>
                        <a class="icon-google-plus" href="https://plus.google.com/share?url=http://localhost:4000spring-validation"
                           onclick="window.open(this.href, 'google-plus-share', 'width=490,height=530');return false;">
                            <span class="hidden">Google+</span>
                        </a>
                    </section>
                
            

            <!-- Add Disqus Comments -->
            

        </footer>

    </article>

</main>

<aside class="read-next">

    <!-- [[! next_post ]] -->
    
        <a class="read-next-story " style="background-image: url(/assets/images/woowa.jpg)" href="/deploy-answer">
            <section class="post">
                <h2>ğŸ“‹ ë°°í¬ 1ë‹¨ê³„ í€´ì¦ˆ ë‹µ</h2>
                <p>## ë¸Œë¼ìš°ì €ì—ì„œ [google.com](https://www.google.com/url?q=http://google.com&sa=D&source=editors&ust=1619888368939000&usg=AFQjCNG8-uuzqgCTbtG39f_utwyeum7dGw)ë¥¼ ìš”ì²­í•  ë•Œ í†µì‹  ê³¼ì •ì´ ì–´ë–»ê²Œ ì´ë£¨ì–´ì§ˆê¹Œìš”? #### 1. ì£¼ì†Œì°½ì— google.comë¥¼ ì…ë ¥í•˜ê³  Enterë¥¼...</p>
            </section>
        </a>
    
    <!-- [[! /next_post ]] -->
    <!-- [[! prev_post ]] -->
    
        <a class="read-next-story prev " style="background-image: url(/assets/images/woowa.jpg)" href="/spring-json-property">
            <section class="post">
                <h2>ğŸŒ± @JsonProperty, @JsonNaming</h2>
                <p>ì´ ê¸€ì„ ì“´ ë°°ê²½â€¦ í´ë¼ì´ì–¸íŠ¸ì—ì„œ HTTP Bodyì— Jsonì„ ì‹¤ì–´ ìš”ì²­ì„ ì‹¤ì–´ ë³´ë‚´ê³  ì´ë¥¼ ë°›ëŠ” DTOë¥¼...</p>
            </section>
        </a>
    
    <!-- [[! /prev_post ]] -->
</aside>

<!-- /post -->


        <!-- The tiny footer at the very bottom -->
        <footer class="site-footer clearfix">
          <section class="copyright"><a href="/">Welcome To New Wisdom's Log !</a> &copy; 2021</section>
          <section class="poweredby">Proudly published with <a href="https://jekyllrb.com/">Jekyll</a> using <a href="https://github.com/jekyller/jasper">Jasper</a></section>
        </footer>
    </div>
    <!-- highlight.js -->
    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.3.0/highlight.min.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>

    <!-- jQuery needs to come before `` so that jQuery can be used in code injection -->
    <script type="text/javascript" src="//code.jquery.com/jquery-1.12.0.min.js"></script>
    <!-- Ghost outputs important scripts and data with this tag -->
    <!--  -->
    <!-- Add Google Analytics  -->
        <!-- Google Analytics Tracking code -->
     <script>
	    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

	    ga('create', 'G-09YB1TZP06', 'auto');
	    ga('send', 'pageview');

     </script>
    <!-- Fitvids makes video embeds responsive and awesome -->
    <script type="text/javascript" src="/assets/js/jquery.fitvids.js"></script>
    <!-- The main JavaScript file for Casper -->
    <script type="text/javascript" src="/assets/js/index.js"></script>

</body>
</html>
