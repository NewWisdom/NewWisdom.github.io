<?xml version="1.0" encoding="UTF-8" ?>

<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
<channel>
   
      <title>NewWisdom.github.io/</title>
   
   <link>http://localhost:4000</link>
   <description>ë¸”ë¡œê·¸ ì´ì‚¬ì¤‘... ì•„ì§ ì •ë¦¬ê°€ ì•ˆë˜ì—ˆìŒ...</description>
   <language>ko-KR</language>
   <managingEditor> </managingEditor>
   <atom:link href="rss" rel="self" type="application/rss+xml" />
   
	<item>
	  <title>ğŸ“š atdd-subway-path ë¯¸ì…˜ ì •ë¦¬</title>
	  <link>//atdd-subway-path-note</link>
	  <author></author>
	  <pubDate>2021-06-11T10:01:00+09:00</pubDate>
	  <guid>//atdd-subway-path-note</guid>
	  <description><![CDATA[
	     <h2 id="step1-2">STEP1, 2</h2>

<h3 id="jwttokenprovider">JwtTokenProvider</h3>

<ul>
  <li>jwt í† í° ìƒì„±, í† í° ê²€ì¦, í† í°ì—ì„œ ì¸ì¦ ì •ë³´ ì¶”ì¶œí•˜ëŠ” ìœ í‹¸ í´ë˜ìŠ¤</li>
</ul>

<h3 id="authorizationextractor">AuthorizationExtractor</h3>

<ul>
  <li>HTTPì˜ <code class="highlighter-rouge">Authorization</code> Headerì—ì„œ Bearer íƒ€ì…ì¸ ê²½ìš° Access Tokenì„ ì¶”ì¶œí•˜ëŠ” ìœ í‹¸ í´ë˜ìŠ¤</li>
</ul>

<h3 id="authenticationprincipalconfig">AuthenticationPrincipalConfig</h3>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Configuration</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">AuthenticationPrincipalConfig</span> <span class="kd">implements</span> <span class="n">WebMvcConfigurer</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="n">AuthService</span> <span class="n">authService</span><span class="o">;</span>

    <span class="kd">public</span> <span class="nf">AuthenticationPrincipalConfig</span><span class="o">(</span><span class="n">AuthService</span> <span class="n">authService</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">authService</span> <span class="o">=</span> <span class="n">authService</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">addArgumentResolvers</span><span class="o">(</span><span class="n">List</span> <span class="n">argumentResolvers</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">argumentResolvers</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">createAuthenticationPrincipalArgumentResolver</span><span class="o">());</span>
    <span class="o">}</span>

    <span class="nd">@Bean</span>
    <span class="kd">public</span> <span class="n">AuthenticationPrincipalArgumentResolver</span> <span class="nf">createAuthenticationPrincipalArgumentResolver</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="k">new</span> <span class="nf">AuthenticationPrincipalArgumentResolver</span><span class="o">(</span><span class="n">authService</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<ul>
  <li>AuthenticationPrincipalArgumentResolverëŠ” ë¹ˆ ë“±ë¡ì´ ë˜ì–´ìˆì§€ ì•ŠìŒ</li>
  <li>í•´ë‹¹ ë¦¬ì¡¸ë²„ë¥¼ í™œìš©í•  ìˆ˜ ìˆë„ë¡ ë“±ë¡í•´ì£¼ëŠ” java config</li>
  <li><code class="highlighter-rouge">AuthenticationPrincipalArgumentResolver</code>ë¥¼ ë§Œë“¤ê³  ë“±ë¡</li>
</ul>

<h3 id="authenticationprincipalargumentresolver">AuthenticationPrincipalArgumentResolver</h3>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">AuthenticationPrincipalArgumentResolver</span> <span class="kd">implements</span> <span class="n">HandlerMethodArgumentResolver</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="n">AuthService</span> <span class="n">authService</span><span class="o">;</span>

    <span class="kd">public</span> <span class="nf">AuthenticationPrincipalArgumentResolver</span><span class="o">(</span><span class="n">AuthService</span> <span class="n">authService</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">authService</span> <span class="o">=</span> <span class="n">authService</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="c1">// resolveArgument ë©”ì„œë“œê°€ ë™ì‘í•˜ëŠ” ì¡°ê±´ì„ ì •ì˜í•˜ëŠ” ë©”ì„œë“œ</span>
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">supportsParameter</span><span class="o">(</span><span class="n">MethodParameter</span> <span class="n">parameter</span><span class="o">)</span> <span class="o">{</span>
        <span class="c1">// íŒŒë¼ë¯¸í„° ì¤‘ @AuthenticationPrincipalì´ ë¶™ì€ ê²½ìš° ë™ì‘í•˜ê²Œ ì„¤ì •</span>
        <span class="k">return</span> <span class="n">parameter</span><span class="o">.</span><span class="na">hasParameterAnnotation</span><span class="o">(</span><span class="n">AuthenticationPrincipal</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="c1">// supportsParameterê°€ trueì¸ ê²½ìš° ë™ì‘</span>
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="n">Member</span> <span class="nf">resolveArgument</span><span class="o">(</span><span class="n">MethodParameter</span> <span class="n">parameter</span><span class="o">,</span> <span class="n">ModelAndViewContainer</span> <span class="n">mavContainer</span><span class="o">,</span> <span class="n">NativeWebRequest</span> <span class="n">webRequest</span><span class="o">,</span> <span class="n">WebDataBinderFactory</span> <span class="n">binderFactory</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">String</span> <span class="n">token</span> <span class="o">=</span> <span class="n">AuthorizationExtractor</span><span class="o">.</span><span class="na">extract</span><span class="o">((</span><span class="n">HttpServletRequest</span><span class="o">)</span> <span class="n">webRequest</span><span class="o">.</span><span class="na">getNativeRequest</span><span class="o">());</span>
        <span class="k">return</span> <span class="n">authService</span><span class="o">.</span><span class="na">findMemberByToken</span><span class="o">(</span><span class="n">token</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<ul>
  <li>
    <p>ì»¨íŠ¸ë¡¤ëŸ¬ ë©”ì„œë“œì—ì„œ íŠ¹ì • ì¡°ê±´ì— ë§ëŠ” íŒŒë¼ë¯¸í„°ê°€ ìˆì„ ë•Œ ì›í•˜ëŠ” ê°’ì„ ë°”ì¸ë”©í•´ì£¼ëŠ” ì¸í„°í˜ì´ìŠ¤</p>
  </li>
  <li>
    <p><code class="highlighter-rouge">resolveArgument</code> ì—ì„œ <code class="highlighter-rouge">Member</code> ë„ë©”ì¸ ìì²´ë¥¼ ë°˜í™˜í–ˆì—ˆìŒ</p>
  </li>
</ul>

<h4 id="ê´€ë ¨-ì •ë¦¬">ê´€ë ¨ ì •ë¦¬</h4>

<ul>
  <li><a href="https://github.com/NewWisdom/TIL/issues/13">Spring MVC Config í•™ìŠµ í…ŒìŠ¤íŠ¸</a></li>
</ul>

<h3 id="authinterceptor">AuthInterceptor</h3>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Component</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">AuthInterceptor</span> <span class="kd">implements</span> <span class="n">HandlerInterceptor</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="n">AuthService</span> <span class="n">authService</span><span class="o">;</span>

    <span class="kd">public</span> <span class="nf">AuthInterceptor</span><span class="o">(</span><span class="n">AuthService</span> <span class="n">authService</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">authService</span> <span class="o">=</span> <span class="n">authService</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">preHandle</span><span class="o">(</span><span class="n">HttpServletRequest</span> <span class="n">request</span><span class="o">,</span> <span class="n">HttpServletResponse</span> <span class="n">response</span><span class="o">,</span> <span class="n">Object</span> <span class="n">handler</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">Exception</span> <span class="o">{</span>
        <span class="n">String</span> <span class="n">token</span> <span class="o">=</span> <span class="n">AuthorizationExtractor</span><span class="o">.</span><span class="na">extract</span><span class="o">(</span><span class="n">request</span><span class="o">);</span>
        <span class="n">authService</span><span class="o">.</span><span class="na">validateToken</span><span class="o">(</span><span class="n">token</span><span class="o">);</span>
        <span class="k">return</span> <span class="kc">true</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<ul>
  <li>
    <p>ì¸ì¦ / ì¸ê°€ì— ëŒ€í•œ í† í° ê²€ì¦ì„ ë‹´ë‹¹</p>
  </li>
  <li>
    <p>í† í°ì´ ìœ íš¨í•˜ë©´ trueë¥¼ ë°˜í™˜í•˜ë„ë¡</p>
  </li>
  <li>
    <p><code class="highlighter-rouge">AuthorizationExtractor.extract()</code> ê°€ ë¦¬ì¡¸ë²„ë‘ ì¤‘ë³µì´ ë˜ëŠ”ë°?</p>

    <ul>
      <li>ì–´ì©” ìˆ˜ ì—†ìŒ. ì´ ë‘˜ì€ ì„œë¡œ ëª¨ë¥´ëŠ” ê´€ê³„ë¡œ ë…ë¦½ì ì´ë‹ˆ</li>
      <li>ë³€ê²½ì˜ ì˜í–¥ë„ ìµœì†Œí™”ë¥¼ ìœ„í•´ JwtProviderê°€ ì•„ë‹Œ JwtProviderë¥¼ í¬í•¨í•œ AuthServiceë¥¼ ê°€ì§€ë„ë¡</li>
    </ul>
  </li>
</ul>

<h2 id="step3">STEP3</h2>

<h4 id="graph---ê·¸ë˜í”„-ì—­í• ì„-í•˜ëŠ”-ë„ë©”ì¸">Graph - ê·¸ë˜í”„ ì—­í• ì„ í•˜ëŠ” ë„ë©”ì¸</h4>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Graph</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="n">WeightedMultigraph</span><span class="o">&lt;</span><span class="n">Station</span><span class="o">,</span> <span class="n">DefaultWeightedEdge</span><span class="o">&gt;</span> <span class="n">graph</span> <span class="o">=</span> <span class="k">new</span> <span class="n">WeightedMultigraph</span><span class="o">(</span><span class="n">DefaultWeightedEdge</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>

    <span class="kd">public</span> <span class="nf">Graph</span><span class="o">(</span><span class="n">List</span><span class="o">&lt;</span><span class="n">Section</span><span class="o">&gt;</span> <span class="n">sections</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">initPath</span><span class="o">(</span><span class="n">sections</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="kd">private</span> <span class="kt">void</span> <span class="nf">initPath</span><span class="o">(</span><span class="n">List</span><span class="o">&lt;</span><span class="n">Section</span><span class="o">&gt;</span> <span class="n">sections</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">for</span> <span class="o">(</span><span class="n">Section</span> <span class="n">section</span> <span class="o">:</span> <span class="n">sections</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">initEdge</span><span class="o">(</span><span class="n">section</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>

    <span class="kd">private</span> <span class="kt">void</span> <span class="nf">initEdge</span><span class="o">(</span><span class="n">Section</span> <span class="n">section</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">addVertex</span><span class="o">(</span><span class="n">section</span><span class="o">.</span><span class="na">getUpStation</span><span class="o">());</span>
        <span class="n">addVertex</span><span class="o">(</span><span class="n">section</span><span class="o">.</span><span class="na">getDownStation</span><span class="o">());</span>
        <span class="n">graph</span><span class="o">.</span><span class="na">setEdgeWeight</span><span class="o">(</span><span class="n">graph</span><span class="o">.</span><span class="na">addEdge</span><span class="o">(</span><span class="n">section</span><span class="o">.</span><span class="na">getUpStation</span><span class="o">(),</span> <span class="n">section</span><span class="o">.</span><span class="na">getDownStation</span><span class="o">()),</span> <span class="n">section</span><span class="o">.</span><span class="na">getDistance</span><span class="o">());</span>
    <span class="o">}</span>

    <span class="kd">private</span> <span class="kt">void</span> <span class="nf">addVertex</span><span class="o">(</span><span class="n">Station</span> <span class="n">station</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">if</span> <span class="o">(!</span><span class="n">graph</span><span class="o">.</span><span class="na">containsVertex</span><span class="o">(</span><span class="n">station</span><span class="o">))</span> <span class="o">{</span>
            <span class="n">graph</span><span class="o">.</span><span class="na">addVertex</span><span class="o">(</span><span class="n">station</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="n">Path</span> <span class="nf">shortestPath</span><span class="o">(</span><span class="n">Station</span> <span class="n">source</span><span class="o">,</span> <span class="n">Station</span> <span class="n">target</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">DijkstraShortestPath</span><span class="o">&lt;</span><span class="n">Station</span><span class="o">,</span> <span class="n">DefaultWeightedEdge</span><span class="o">&gt;</span> <span class="n">dijkstraShortestPath</span> <span class="o">=</span> <span class="k">new</span> <span class="n">DijkstraShortestPath</span><span class="o">&lt;&gt;(</span><span class="n">graph</span><span class="o">);</span>
        <span class="k">return</span> <span class="k">new</span> <span class="nf">Path</span><span class="o">(</span><span class="n">dijkstraShortestPath</span><span class="o">.</span><span class="na">getPath</span><span class="o">(</span><span class="n">source</span><span class="o">,</span> <span class="n">target</span><span class="o">).</span><span class="na">getVertexList</span><span class="o">(),</span> <span class="n">dijkstraShortestPath</span><span class="o">.</span><span class="na">getPathWeight</span><span class="o">(</span><span class="n">source</span><span class="o">,</span> <span class="n">target</span><span class="o">));</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<h4 id="path---ì‚¬ì‹¤ìƒ-dto-ëŠë‚Œ">Path - ì‚¬ì‹¤ìƒ DTO ëŠë‚Œâ€¦</h4>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Path</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">Station</span><span class="o">&gt;</span> <span class="n">stations</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="kt">double</span> <span class="n">distance</span><span class="o">;</span>

    <span class="kd">public</span> <span class="nf">Path</span><span class="o">(</span><span class="n">List</span><span class="o">&lt;</span><span class="n">Station</span><span class="o">&gt;</span> <span class="n">stations</span><span class="o">,</span> <span class="kt">double</span> <span class="n">distance</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">stations</span> <span class="o">=</span> <span class="n">stations</span><span class="o">;</span>
        <span class="k">this</span><span class="o">.</span><span class="na">distance</span> <span class="o">=</span> <span class="n">distance</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">Station</span><span class="o">&gt;</span> <span class="nf">stations</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">stations</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kt">double</span> <span class="nf">distance</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">distance</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<h4 id="ì²˜ìŒ-êµ¬í˜„í•œ-ë¡œì§---ëª¨ë“ -lineì„-ë¶ˆëŸ¬ì™€-ìµœë‹¨-ê±°ë¦¬-ì¡°íšŒ">ì²˜ìŒ êµ¬í˜„í•œ ë¡œì§ - ëª¨ë“  Lineì„ ë¶ˆëŸ¬ì™€ ìµœë‹¨ ê±°ë¦¬ ì¡°íšŒ</h4>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="n">PathResponse</span> <span class="nf">findPath</span><span class="o">(</span><span class="n">Long</span> <span class="n">sourceId</span><span class="o">,</span> <span class="n">Long</span> <span class="n">targetId</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">List</span><span class="o">&lt;</span><span class="n">Line</span><span class="o">&gt;</span> <span class="n">lines</span> <span class="o">=</span> <span class="n">lineDao</span><span class="o">.</span><span class="na">findAll</span><span class="o">();</span>
        <span class="n">Graph</span> <span class="n">graph</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Graph</span><span class="o">(</span><span class="n">lines</span><span class="o">);</span>
        <span class="n">Path</span> <span class="n">path</span> <span class="o">=</span> <span class="n">graph</span><span class="o">.</span><span class="na">shortestPath</span><span class="o">(</span><span class="n">stationDao</span><span class="o">.</span><span class="na">findById</span><span class="o">(</span><span class="n">sourceId</span><span class="o">),</span> <span class="n">stationDao</span><span class="o">.</span><span class="na">findById</span><span class="o">(</span><span class="n">targetId</span><span class="o">));</span>
        <span class="k">return</span> <span class="k">new</span> <span class="nf">PathResponse</span><span class="o">(</span><span class="n">StationResponse</span><span class="o">.</span><span class="na">listOf</span><span class="o">(</span><span class="n">path</span><span class="o">.</span><span class="na">stations</span><span class="o">()),</span> <span class="o">(</span><span class="kt">int</span><span class="o">)</span> <span class="n">path</span><span class="o">.</span><span class="na">distance</span><span class="o">());</span>
    <span class="o">}</span>
</code></pre></div></div>

<p><img src="https://images.velog.io/images/new_wisdom/post/452f11f4-a8e7-4365-a71c-9c2be5f6435a/image.png" style="zoom:50%;" /></p>

<ul>
  <li>ì‚¬ì‹¤ ì²˜ìŒì—ëŠ” sectionsë§Œ ê°€ì ¸ì™€ì„œ ê·¸ë˜í”„ë¥¼ ê·¸ë ¸ìœ¼ë‚˜, ì´ë ‡ê²Œ ë˜ë©´ í•´ë‹¹ ì—­ì˜ ì´ë¦„ë“¤ì„ ê°€ì ¸ì˜¬ ìˆ˜ ì—†ì—ˆìŒ</li>
  <li>ê¸°ì¡´ ì½”ë“œë¥¼ ì‚¬ìš©í•˜ë ¤ê³  ì¼ë‹¨ LineDaoë¥¼ ì´ìš©í–ˆì—ˆëŠ”ë°, ì¬ì—°ë§ì˜ ë¦¬ë·°ëŒ€ë¡œ ëª¨ë“  Lineì„ ì¡°íšŒí•˜ê¸° ë³´ë‹¤ í•„ìš”í•œ Sectionsë§Œ ì¡°íšŒí•˜ë„ë¡ ë¦¬íŒ©í† ë§</li>
</ul>

<p><img src="https://images.velog.io/images/new_wisdom/post/88d775c4-942a-4437-8f62-a7b0215a96a1/image.png" style="zoom:50%;" /></p>

<ul>
  <li>ì´ ë¶€ë¶„ì€ DMìœ¼ë¡œ ì´ì•¼ê¸°ë¥¼ ë‚˜ëˆ´ëŠ”ë°,</li>
</ul>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Service</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">PathService</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="n">SectionDao</span> <span class="n">sectionDao</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="n">StationDao</span> <span class="n">stationDao</span><span class="o">;</span>

    <span class="kd">public</span> <span class="nf">PathService</span><span class="o">(</span><span class="n">SectionDao</span> <span class="n">sectionDao</span><span class="o">,</span> <span class="n">StationDao</span> <span class="n">stationDao</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">sectionDao</span> <span class="o">=</span> <span class="n">sectionDao</span><span class="o">;</span>
        <span class="k">this</span><span class="o">.</span><span class="na">stationDao</span> <span class="o">=</span> <span class="n">stationDao</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="n">PathResponse</span> <span class="nf">findPath</span><span class="o">(</span><span class="n">Long</span> <span class="n">sourceId</span><span class="o">,</span> <span class="n">Long</span> <span class="n">targetId</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">List</span><span class="o">&lt;</span><span class="n">Section</span><span class="o">&gt;</span> <span class="n">sections</span> <span class="o">=</span> <span class="n">sectionDao</span><span class="o">.</span><span class="na">findByStationIds</span><span class="o">(</span><span class="n">Arrays</span><span class="o">.</span><span class="na">asList</span><span class="o">(</span><span class="n">sourceId</span><span class="o">,</span> <span class="n">targetId</span><span class="o">));</span>
        <span class="n">Graph</span> <span class="n">graph</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Graph</span><span class="o">(</span><span class="n">sections</span><span class="o">);</span>
        <span class="n">Path</span> <span class="n">path</span> <span class="o">=</span> <span class="n">graph</span><span class="o">.</span><span class="na">shortestPath</span><span class="o">(</span><span class="k">new</span> <span class="n">Station</span><span class="o">(</span><span class="n">sourceId</span><span class="o">),</span> <span class="k">new</span> <span class="n">Station</span><span class="o">(</span><span class="n">targetId</span><span class="o">));</span>
        <span class="k">return</span> <span class="k">new</span> <span class="nf">PathResponse</span><span class="o">(</span><span class="n">StationResponse</span><span class="o">.</span><span class="na">listOf</span><span class="o">(</span><span class="n">combineStationById</span><span class="o">(</span><span class="n">path</span><span class="o">)),</span> <span class="o">(</span><span class="kt">int</span><span class="o">)</span> <span class="n">path</span><span class="o">.</span><span class="na">distance</span><span class="o">());</span>
    <span class="o">}</span>

    <span class="kd">private</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">Station</span><span class="o">&gt;</span> <span class="nf">combineStationById</span><span class="o">(</span><span class="n">Path</span> <span class="n">path</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">List</span><span class="o">&lt;</span><span class="n">Long</span><span class="o">&gt;</span> <span class="n">stationIds</span> <span class="o">=</span> <span class="n">path</span><span class="o">.</span><span class="na">stations</span><span class="o">()</span>
                <span class="o">.</span><span class="na">stream</span><span class="o">()</span>
                <span class="o">.</span><span class="na">map</span><span class="o">(</span><span class="nl">Station:</span><span class="o">:</span><span class="n">getId</span><span class="o">)</span>
                <span class="o">.</span><span class="na">collect</span><span class="o">(</span><span class="n">Collectors</span><span class="o">.</span><span class="na">toList</span><span class="o">());</span>
        <span class="k">return</span> <span class="n">stationDao</span><span class="o">.</span><span class="na">findByIds</span><span class="o">(</span><span class="n">stationIds</span><span class="o">).</span><span class="na">sortedStation</span><span class="o">(</span><span class="n">stationIds</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<h2 id="cors-ì´ìŠˆ-í•´ê²°-ë²•">CORS ì´ìŠˆ í•´ê²° ë²•</h2>

<ul>
  <li>ë‚˜ê°™ì€ ê²½ìš°ëŠ” frontìª½ì— í”„ë¡ì‹œ ì„œë²„ë¥¼ ë‘ì–´ í•´ë‹¹ ì´ìŠˆê°€ ë°œìƒí•˜ì§€ ì•Šë„ë¡ í•˜ì˜€ìŒ</li>
</ul>

<h4 id="ì •ë¦¬">ì •ë¦¬</h4>

<ul>
  <li><a href="https://github.com/NewWisdom/TIL/issues/54">ë‚´ê°€ CORS ì´ìŠˆë¥¼ í•´ê²°í•œ ë°©ë²• - Proxy </a></li>
</ul>

<h2 id="cookie-vs-localstorage">Cookie vs LocalStorage</h2>

<p><img src="https://images.velog.io/images/new_wisdom/post/4d9503c2-642a-4ed5-9531-acfc39e6f29b/image.png" style="zoom:50%;" /></p>

<ul>
  <li><a href="https://woowacourse.github.io/javable/post/2020-08-31-where_to_store_token/">í† í°ì„ ì–´ë””ì— ì €ì¥í• ê¹Œ?</a> ê¸€ì„ ë³´ê³  í† í°ì„ ì¿ í‚¤ì— ì €ì¥</li>
  <li>ì¬ì—°ë§ì˜ ë¦¬ë·°ë¡œ ì¿ í‚¤ë¥¼ ì‚¬ìš©í–ˆì„ ë•Œì˜ ë¬¸ì œì ì„ ì•Œì•„ë´„</li>
  <li>XSS ê³µê²©ì„ ë§‰ì„ ìˆ˜ ìˆëŠ” HTTP-Only ì¿ í‚¤ë¥¼ ê³ ë ¤</li>
  <li>í•˜ì§€ë§Œ ì´ëŠ” JSì—ì„œ êº¼ë‚´ ì“¸ ìˆ˜ ì—†ì–´ í—¤ë”ì— í† í°ì„ ì‹¤ì–´ ë³´ë‚¼ ìˆ˜ ì—†ëŠ” ì´ìŠˆ</li>
  <li>(ë¯¸ì…˜ ìš”êµ¬ì‚¬í•­ê³¼ OAuth í‘œì¤€ ë“±ì„ ê³ ë ¤í•´) ì¬ì—°ë§ê³¼ ë‚˜ëˆˆ DM ë‚´ìš©ê³¼ ê°™ì´ ë‹¤ìŒê³¼ ê°™ì€ ë¬¸ì œë“¤ë¡œ ì¿ í‚¤ ëŒ€ì‹  LocalStorageì— í† í°ì„ ì €ì¥í•˜ë„ë¡ ë³€ê²½</li>
</ul>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>* ì›¹ ì´ì™¸ì˜ í´ë¼ì´ì–¸íŠ¸ê¹Œì§€ ê³ ë ¤í•˜ëŠ” ê²ƒì´ ì¢‹ë‹¤ê³  ìƒê°
* OAuth í‘œì¤€ì„ ì§€í‚¤ê¸° ìœ„í•¨
* ì‚¬ì‹¤ HttpOnlyë¥¼ í†µí•´ ë³´í˜¸í•˜ì—¬ë„, í•˜ì´ì¬í‚¹ ë“± ë§ì€ ë³´ì•ˆì  ìœ„í—˜ì´ ì¡´ì¬í•˜ê¸° ë•Œë¬¸ì— ì•…ì˜ì ì¸ ì˜ë„ë¥¼ ê°€ì§„ ì‚¬ëŒì´ ë¶ˆí¸í•´ì§ˆ ë¿ ë³´ì•ˆì ìœ¼ë¡œ ì™„ë²½í•˜ê²Œ ì²˜ë¦¬ë˜ì§€ ì•ŠìŒ
* MDNì—ì„œë„ HTML5 ì´í›„ë¶€í„° Cookieë¥¼ ì €ì¥ì†Œì™€ ê°™ì€ ìš©ë„ë¡œ ì‚¬ìš©í•˜ì§€ ì•Šì„ ê²ƒì„ ê¶Œì¥
</code></pre></div></div>

<h4 id="ì •ë¦¬-1">ì •ë¦¬</h4>

<ul>
  <li><a href="https://github.com/NewWisdom/TIL/issues/21">XSS, CSRF</a></li>
  <li><a href="https://github.com/NewWisdom/TIL/issues/22">SameSite Cookie</a></li>
  <li><a href="https://github.com/NewWisdom/TIL/issues/33">Cookie VS Local Storage</a></li>
</ul>

<h2 id="front">Front</h2>

<p><img src="https://images.velog.io/images/new_wisdom/post/a00c23b4-79f3-46f2-891d-863f25e8a418/image.png" style="zoom:50%;" /></p>

<ul>
  <li><code class="highlighter-rouge">vue.config</code>ë¥¼ í†µí•´ ì¤‘ë³µë˜ëŠ” URLì— ëŒ€í•œ ì„¤ì •</li>
  <li>ì¤‘ë³µë˜ëŠ” fetchëŠ” ëª¨ë“ˆë¡œ ë”°ë¡œ ë§Œë“¤ì–´ì„œ(fetch.js) ì‚¬ìš©í•˜ë„ë¡ ë³€ê²½</li>
</ul>

<p><img src="https://images.velog.io/images/new_wisdom/post/4b5e5a10-0ebf-4d5b-8750-b6a5ccf92652/image.png" style="zoom:50%;" /></p>

<h2 id="argumentresolverì™€-authinterceptor">ArgumentResolverì™€ AuthInterceptor</h2>

<p><img src="https://images.velog.io/images/new_wisdom/post/336584ce-5eaf-45d6-ab2f-c4066eb03ab1/image.png" style="zoom:50%;" /></p>

<h4 id="argumentresolver">ArgumentResolver</h4>
<blockquote>
  <p>Strategy interface for resolving method parameters into argument values in the context of a given request.</p>
  <ul>
    <li>ë§¤ê°œë³€ìˆ˜ì˜ ë¦¬ì¡¸ë¹™</li>
    <li>ì»¨íŠ¸ë¡¤ëŸ¬ì—ì„œ íŒŒë¼ë¯¸í„°ë¥¼ ë°”ì¸ë”© í•´ì£¼ëŠ” ì—­í• 
      <h4 id="authinterceptor-1">AuthInterceptor</h4>
      <p>Workflow interface that allows for customized handler execution chains. Applications can register any number of existing or custom interceptors for certain groups of handlers, to add common preprocessing behavior without needing to modify each handler implementation.
A HandlerInterceptor gets called before the appropriate HandlerAdapter triggers the execution of the handler itself. This mechanism can be used for a large field of preprocessing aspects, e.g. for authorization checks, or common handler behavior like locale or theme changes. Its main purpose is to allow for factoring out repetitive handler code.</p>
    </li>
    <li>ê¶Œí•œ í™•ì¸ ë˜ëŠ” ë¡œì¼€ì¼ ë˜ëŠ” í…Œë§ˆ ë³€ê²½ê³¼ ê°™ì€ ì¼ë°˜ì ì¸ í•¸ë“¤ëŸ¬ ë™ì‘ê³¼ ê°™ì€ ì „ì²˜ë¦¬ ì¸¡ë©´ì˜ ë„“ì€ ë¶„ì•¼ì— ì‚¬ìš©</li>
    <li>ì¸ì¦ / ì¸ê°€ì— ëŒ€í•œ ê²€ì‚¬</li>
    <li>ì£¼ìš” ëª©ì ì€ ë°˜ë³µì  ì¸ í•¸ë“¤ëŸ¬ ì½”ë“œë¥¼ ì œê±°í•˜ëŠ” ê²ƒ</li>
    <li>Spring docì—ì„œ ê³µì‹ì ìœ¼ë¡œ authorization checksë¥¼ í•˜ëŠ” ì• ë¼ê³  ì§€ì •í•´ì¤€ ì¡´ì¬</li>
    <li><a href="https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/web/servlet/HandlerInterceptor.html">ê³µì‹ë¬¸ì„œ</a></li>
  </ul>
</blockquote>

<p><strong>ì¸í„°ì…‰í„°ì™€ ë¦¬ì¡¸ë²„ëŠ” ì„œë¡œë¥¼ ëª¨ë¥´ëŠ” ê´€ê³„ì´ê³  ë…ë¦½ì ìœ¼ë¡œ ê°€ì•¼í•¨</strong></p>
<h4 id="ì°¸ê³ í• -ê¸€">ì°¸ê³ í•  ê¸€</h4>
<ul>
  <li><a href="https://velog.io/@sa833591/Spring-Filter-Interceptor-AOP-%EC%B0%A8%EC%9D%B4-yvmv4k96">Filter, Interceptor, AOP ì°¨ì´
</a></li>
</ul>

<h4 id="ì •ë¦¬-2">ì •ë¦¬</h4>

<ul>
  <li><a href="https://github.com/NewWisdom/TIL/issues/28">HandlerInterceptor</a></li>
</ul>

<h2 id="ë‹¤ì‹œ-êµ¬í˜„í•œë‹¤ë©´">ë‹¤ì‹œ êµ¬í˜„í•œë‹¤ë©´?</h2>

<h4 id="argumentresolver-ì—ì„œ-dtoì¸-loginmemberë¥¼-ë°˜í™˜í•˜ê²Œ-í• ê±¸">ArgumentResolver ì—ì„œ DTOì¸ LoginMemberë¥¼ ë°˜í™˜í•˜ê²Œ í• ê±¸!</h4>

<ul>
  <li>ë„ë©”ì¸ì„ ë°˜í™˜í•˜ë©´ ë·°ì™€ ì»¨íŠ¸ë¡¤ëŸ¬ì— ë…¸ì¶œì‹œí‚¤ê³  ë„ë©”ì¸ì„ ì¡°ì‘í•  ê°€ëŠ¥ì„±ì´ ìˆìŒ</li>
  <li>ë˜ ë¶ˆí•„ìš”í•œ pw í•„ë“œë„ ê°€ì§€ê²Œ ë¨</li>
</ul>

<h4 id="ë¹„ë²ˆ-ì•”í˜¸í™”ì™€-member-ê°ì²´ì—ì„œ-ë¹„ë²ˆì„-í™•ì¸í•˜ê²Œ-í• ê±¸">ë¹„ë²ˆ ì•”í˜¸í™”ì™€ member ê°ì²´ì—ì„œ ë¹„ë²ˆì„ í™•ì¸í•˜ê²Œ í• ê±¸!</h4>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="n">TokenResponse</span> <span class="nf">createToken</span><span class="o">(</span><span class="n">TokenRequest</span> <span class="n">tokenRequest</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">Member</span> <span class="n">member</span> <span class="o">=</span> <span class="n">memberDao</span><span class="o">.</span><span class="na">findByEmailAndPassword</span><span class="o">(</span><span class="n">tokenRequest</span><span class="o">.</span><span class="na">getEmail</span><span class="o">(),</span> <span class="n">tokenRequest</span><span class="o">.</span><span class="na">getPassword</span><span class="o">())</span>
            <span class="o">.</span><span class="na">orElseThrow</span><span class="o">(()</span> <span class="o">-&gt;</span> <span class="k">new</span> <span class="n">AuthorizationException</span><span class="o">(</span><span class="s">"ë¡œê·¸ì¸ ì‹¤íŒ¨ì…ë‹ˆë‹¤."</span><span class="o">));</span>
    <span class="n">String</span> <span class="n">accessToken</span> <span class="o">=</span> <span class="n">jwtTokenProvider</span><span class="o">.</span><span class="na">createToken</span><span class="o">(</span><span class="n">String</span><span class="o">.</span><span class="na">valueOf</span><span class="o">(</span><span class="n">member</span><span class="o">.</span><span class="na">getId</span><span class="o">()));</span>
    <span class="k">return</span> <span class="k">new</span> <span class="nf">TokenResponse</span><span class="o">(</span><span class="n">accessToken</span><span class="o">);</span>
<span class="o">}</span>
</code></pre></div></div>

<ul>
  <li>ë¹„ë²ˆì„ ì•”í˜¸í™” í•  ë•ŒëŠ” Spring Securityì˜ <code class="highlighter-rouge">BCryptPasswordEncoder()</code> ë¥¼ ì‚¬ìš©</li>
  <li>íšŒì›ê°€ì…í•  ë•Œ ì…ë ¥í•œ ë¹„ë²ˆì„ ì¸ì½”ë”©í•˜ì—¬ ì €ì¥</li>
  <li>ê·¸ëŸ°ë° ë§Œì•½ ì—¬ê¸°ì„œ ë¡œê·¸ì¸í•  ë•Œ ì…ë ¥í•œ ë¹„ë²ˆì„ <code class="highlighter-rouge">encoder.encode()</code> í•˜ì—¬ ì¡°íšŒí•˜ë©´ ì‹¤íŒ¨</li>
  <li>ì™œëƒë©´ ë™ì¼í•œ ì›ë¬¸ì´ì–´ë„ ê°ê¸° ë‹¤ë¥¸ ì¸ì½”ë”©ëœ ê°’ì„ ë‚´ë±‰ê¸° ë•Œë¬¸</li>
</ul>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">PasswordEncoder</span> <span class="n">encoder</span> <span class="o">=</span> <span class="k">new</span> <span class="n">BCryptPasswordEncoder</span><span class="o">();</span>
<span class="n">String</span> <span class="err">ì›ë¬¸</span> <span class="o">=</span> <span class="s">"qwe123"</span><span class="o">;</span>
<span class="n">String</span> <span class="err">ì•”í˜¸í™”ëœ</span><span class="n">_</span><span class="err">ì›ë¬¸</span> <span class="o">=</span> <span class="n">encoder</span><span class="o">.</span><span class="na">encode</span><span class="o">(</span><span class="err">ì›ë¬¸</span><span class="o">);</span>
<span class="n">String</span> <span class="err">ì•”í˜¸í™”ëœ</span><span class="n">_</span><span class="err">ì›ë¬¸</span><span class="n">_2</span> <span class="o">=</span> <span class="n">encoder</span><span class="o">.</span><span class="na">encode</span><span class="o">(</span><span class="err">ì›ë¬¸</span><span class="o">);</span>

<span class="n">encorder</span><span class="o">.</span><span class="na">matches</span><span class="o">(</span><span class="err">ì›ë¬¸</span><span class="o">,</span> <span class="err">ì•”í˜¸í™”ëœ</span> <span class="err">ì›ë¬¸</span><span class="o">);</span> <span class="c1">// true</span>
<span class="err">ì•”í˜¸í™”ëœ</span><span class="n">_</span><span class="err">ì›ë¬¸</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="err">ì•”í˜¸í™”ëœ</span><span class="n">_</span><span class="err">ì›ë¬¸</span><span class="mi">2</span><span class="o">);</span> <span class="c1">//false</span>
</code></pre></div></div>

<ul>
  <li>ë•Œë¬¸ì— ì¿¼ë¦¬ë¡œ Memberë¥¼ ë°›ì•„ì˜¤ê³  ì´ ê°ì²´ì—ì„œ <code class="highlighter-rouge">encorder.matches()</code>ë¥¼ ì´ìš©í•´ ë¹„ë²ˆì„ í™•ì¸í•˜ì</li>
</ul>

<h4 id="ìµœë‹¨ê±°ë¦¬-ì°¾ëŠ”-ë¡œì§ì„-ì „ëµ-íŒ¨í„´ìœ¼ë¡œ-êµ¬í˜„í• ê±¸">ìµœë‹¨ê±°ë¦¬ ì°¾ëŠ” ë¡œì§ì„ ì „ëµ íŒ¨í„´ìœ¼ë¡œ êµ¬í˜„í• ê±¸!</h4>

<ul>
  <li>ë„ë©”ì¸ì— ì™¸ë¶€ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ê°€ì§€ê³  ìˆëŠ” ê²ƒì´ ì˜³ì€ê°€?</li>
  <li>ë§Œì•½ ì•Œê³ ë¦¬ì¦˜ì´ ë³€ê²½ë˜ë©´ ë„ë©”ì¸ì—ë„ ì˜í–¥ì´ ê°</li>
  <li>ì „ëµíŒ¨í„´ìœ¼ë¡œ Dijkstra ì•Œê³ ë¦¬ì¦˜ì„ ì£¼ì…í•˜ì</li>
</ul>

<hr />

<h2 id="2021-06-16-ìœ„-ì‚¬í•­ë“¤ì„-ë°˜ì˜í•˜ì—¬-ë‹¤ì‹œ-êµ¬í˜„">2021-06-16 ìœ„ ì‚¬í•­ë“¤ì„ ë°˜ì˜í•˜ì—¬ ë‹¤ì‹œ êµ¬í˜„</h2>

<h3 id="argumentresolverì—ì„œ-dtoì¸-loginmember-ë°˜í™˜í•˜ë„ë¡-ë¦¬íŒ©í† ë§">ArgumentResolverì—ì„œ DTOì¸ LoginMember ë°˜í™˜í•˜ë„ë¡ ë¦¬íŒ©í† ë§</h3>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">AuthenticationPrincipalArgumentResolver</span> <span class="kd">implements</span> <span class="n">HandlerMethodArgumentResolver</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="n">AuthService</span> <span class="n">authService</span><span class="o">;</span>

    <span class="kd">public</span> <span class="nf">AuthenticationPrincipalArgumentResolver</span><span class="o">(</span><span class="n">AuthService</span> <span class="n">authService</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">authService</span> <span class="o">=</span> <span class="n">authService</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">supportsParameter</span><span class="o">(</span><span class="n">MethodParameter</span> <span class="n">parameter</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">parameter</span><span class="o">.</span><span class="na">hasParameterAnnotation</span><span class="o">(</span><span class="n">AuthenticationPrincipal</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="n">LoginMember</span> <span class="nf">resolveArgument</span><span class="o">(</span><span class="n">MethodParameter</span> <span class="n">parameter</span><span class="o">,</span> <span class="n">ModelAndViewContainer</span> <span class="n">mavContainer</span><span class="o">,</span> <span class="n">NativeWebRequest</span> <span class="n">webRequest</span><span class="o">,</span> <span class="n">WebDataBinderFactory</span> <span class="n">binderFactory</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">String</span> <span class="n">token</span> <span class="o">=</span> <span class="n">AuthorizationExtractor</span><span class="o">.</span><span class="na">extract</span><span class="o">((</span><span class="n">HttpServletRequest</span><span class="o">)</span> <span class="n">webRequest</span><span class="o">.</span><span class="na">getNativeRequest</span><span class="o">());</span>
        <span class="k">return</span> <span class="n">authService</span><span class="o">.</span><span class="na">findLoginMemberByToken</span><span class="o">(</span><span class="n">token</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<h4 id="loginmember">LoginMember</h4>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">LoginMember</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="n">Long</span> <span class="n">id</span><span class="o">;</span>
    <span class="kd">private</span> <span class="n">String</span> <span class="n">email</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kt">int</span> <span class="n">age</span><span class="o">;</span>

    <span class="kd">public</span> <span class="nf">LoginMember</span><span class="o">(</span><span class="n">Member</span> <span class="n">member</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">(</span><span class="n">member</span><span class="o">.</span><span class="na">getId</span><span class="o">(),</span> <span class="n">member</span><span class="o">.</span><span class="na">getEmail</span><span class="o">(),</span> <span class="n">member</span><span class="o">.</span><span class="na">getAge</span><span class="o">());</span>
    <span class="o">}</span>
</code></pre></div></div>

<ul>
  <li>
    <p>ë¡œì§ì— í•„ìš”í•œ ì •ë³´ë§Œ ë‹´ê³  ìˆëŠ” DTO ìƒì„±</p>
  </li>
  <li>ì•„ ì°¸ê³ ë¡œ Interceptorì—ì„œëŠ” í† í° ê²€ì¦ë§Œ í•˜ë„ë¡ í•¨
    <ul>
      <li>ì°¨í”¼ ì´ë¯¸ ë¡œê·¸ì¸ìœ¼ë¡œ ì•„ì´ë”” ë¹„ë²ˆì„ ê²€ì¦í–ˆì–ì•„?</li>
    </ul>
  </li>
  <li>ë¦¬ì¡¸ë²„ì—ì„œëŠ” í† í°ì„ í†µí•´ ì§„ì§œ ë§¤ê°œë³€ìˆ˜ ë¦¬ì¡¸ë¹™ë§Œ ë‹´ë‹¹</li>
</ul>

<h3 id="member-ê°ì²´ì—ì„œ-ë¹„ë²ˆì„-í™•ì¸í•˜ë„ë¡">member ê°ì²´ì—ì„œ ë¹„ë²ˆì„ í™•ì¸í•˜ë„ë¡</h3>

<h4 id="authservice">AuthService</h4>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="n">TokenResponse</span> <span class="nf">createToken</span><span class="o">(</span><span class="n">TokenRequest</span> <span class="n">tokenRequest</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">Member</span> <span class="n">member</span> <span class="o">=</span> <span class="n">findMember</span><span class="o">(</span><span class="n">tokenRequest</span><span class="o">);</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">member</span><span class="o">.</span><span class="na">isInvalidPassword</span><span class="o">(</span><span class="n">tokenRequest</span><span class="o">.</span><span class="na">getPassword</span><span class="o">()))</span> <span class="o">{</span>
        <span class="k">throw</span> <span class="k">new</span> <span class="nf">AuthorizationException</span><span class="o">(</span><span class="s">"ë¡œê·¸ì¸ ì‹¤íŒ¨ì…ë‹ˆë‹¤."</span><span class="o">);</span>
    <span class="o">}</span>
    <span class="n">String</span> <span class="n">accessToken</span> <span class="o">=</span> <span class="n">jwtTokenProvider</span><span class="o">.</span><span class="na">createToken</span><span class="o">(</span><span class="n">String</span><span class="o">.</span><span class="na">valueOf</span><span class="o">(</span><span class="n">member</span><span class="o">.</span><span class="na">getId</span><span class="o">()));</span>
    <span class="k">return</span> <span class="k">new</span> <span class="nf">TokenResponse</span><span class="o">(</span><span class="n">accessToken</span><span class="o">);</span>
<span class="o">}</span>

<span class="kd">private</span> <span class="n">Member</span> <span class="nf">findMember</span><span class="o">(</span><span class="n">TokenRequest</span> <span class="n">tokenRequest</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">return</span> <span class="n">memberDao</span><span class="o">.</span><span class="na">findByEmail</span><span class="o">(</span><span class="n">tokenRequest</span><span class="o">.</span><span class="na">getEmail</span><span class="o">())</span>
            <span class="o">.</span><span class="na">orElseThrow</span><span class="o">(()</span> <span class="o">-&gt;</span> <span class="k">new</span> <span class="n">AuthorizationException</span><span class="o">(</span><span class="s">"ë¡œê·¸ì¸ ì‹¤íŒ¨ì…ë‹ˆë‹¤."</span><span class="o">));</span>
<span class="o">}</span>
</code></pre></div></div>

<ul>
  <li>ì¶”í›„ ë‹¨ë°©í–¥ ë¹„ë²ˆ ì•”í˜¸í™”ë¥¼ ìœ„í•´ ê°ì²´ì—ì„œ ë¹„ë²ˆì„ ë¹„êµí•˜ë„ë¡ ë³€ê²½</li>
</ul>

<h3 id="ìµœë‹¨ê±°ë¦¬-ì°¾ëŠ”-ë¡œì§ì„-ì „ëµ-íŒ¨í„´ìœ¼ë¡œ">ìµœë‹¨ê±°ë¦¬ ì°¾ëŠ” ë¡œì§ì„ ì „ëµ íŒ¨í„´ìœ¼ë¡œ</h3>

<p><img src="https://images.velog.io/images/new_wisdom/post/923976a2-131b-45c4-8911-c8a0b3da1e0c/image.png" style="zoom:33%;" /></p>

<ul>
  <li>ìµœë‹¨ ê²½ë¡œ ì°¾ê¸° ì „ëµì„ ì¸í„°í˜ì´ìŠ¤ë¡œ, ì´ë¥¼ ë‹¤ìµìŠ¤íŠ¸ë¼ë¡œ êµ¬í˜„í•œ í´ë˜ìŠ¤ë¥¼ ë§Œë“¦</li>
  <li>ì•Œê³ ë¦¬ì¦˜ì„ ì½”ë“œì˜ ì˜í–¥ì—†ì´ ë³€ê²½í•  ìˆ˜ ìˆë„ë¡</li>
</ul>

<h4 id="subwaygraph">SubwayGraph</h4>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">SubwayGraph</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="n">WeightedMultigraph</span><span class="o">&lt;</span><span class="n">Station</span><span class="o">,</span> <span class="n">DefaultWeightedEdge</span><span class="o">&gt;</span> <span class="n">graph</span><span class="o">;</span>

    <span class="kd">public</span> <span class="nf">SubwayGraph</span><span class="o">(</span><span class="n">WeightedMultigraph</span><span class="o">&lt;</span><span class="n">Station</span><span class="o">,</span> <span class="n">DefaultWeightedEdge</span><span class="o">&gt;</span> <span class="n">graph</span><span class="o">,</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">Section</span><span class="o">&gt;</span> <span class="n">sections</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">graph</span> <span class="o">=</span> <span class="n">graph</span><span class="o">;</span>
        <span class="n">initPath</span><span class="o">(</span><span class="n">sections</span><span class="o">);</span>
    <span class="o">}</span>
   <span class="c1">// ...</span>
</code></pre></div></div>

<ul>
  <li>ê·¸ë˜í”„ ë„ë©”ì¸</li>
</ul>

<h4 id="shortestpathstrategy-ì¸í„°í˜ì´ìŠ¤">ShortestPathStrategy ì¸í„°í˜ì´ìŠ¤</h4>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">interface</span> <span class="nc">ShortestPathStrategy</span> <span class="o">{</span>
    <span class="n">List</span><span class="o">&lt;</span><span class="n">Station</span><span class="o">&gt;</span> <span class="nf">getVertexList</span><span class="o">(</span><span class="n">Station</span> <span class="n">source</span><span class="o">,</span> <span class="n">Station</span> <span class="n">target</span><span class="o">);</span>

    <span class="kt">double</span> <span class="nf">getPathWeight</span><span class="o">(</span><span class="n">Station</span> <span class="n">source</span><span class="o">,</span> <span class="n">Station</span> <span class="n">target</span><span class="o">);</span>
<span class="o">}</span>
</code></pre></div></div>

<ul>
  <li>ì „ëµë§ˆë‹¤ <code class="highlighter-rouge">getVertexList()</code> ì™€ <code class="highlighter-rouge">getPathWeight()</code> ë¥¼ ê³„ì‚°í•˜ë„ë¡ ëª…ì„¸</li>
</ul>

<h4 id="dijkstrashortestpathstrategy">DijkstraShortestPathStrategy</h4>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">DijkstraShortestPathStrategy</span> <span class="kd">implements</span> <span class="n">ShortestPathStrategy</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="n">ShortestPathAlgorithm</span><span class="o">&lt;</span><span class="n">Station</span><span class="o">,</span> <span class="n">DefaultWeightedEdge</span><span class="o">&gt;</span> <span class="n">shortestPathAlgorithm</span><span class="o">;</span>

    <span class="kd">public</span> <span class="nf">DijkstraShortestPathStrategy</span><span class="o">(</span><span class="n">SubwayGraph</span> <span class="n">subwayGraph</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">shortestPathAlgorithm</span> <span class="o">=</span> <span class="k">new</span> <span class="n">DijkstraShortestPath</span><span class="o">&lt;&gt;(</span><span class="n">subwayGraph</span><span class="o">.</span><span class="na">getGraph</span><span class="o">());</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">Station</span><span class="o">&gt;</span> <span class="nf">getVertexList</span><span class="o">(</span><span class="n">Station</span> <span class="n">source</span><span class="o">,</span> <span class="n">Station</span> <span class="n">target</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">shortestPathAlgorithm</span><span class="o">.</span><span class="na">getPath</span><span class="o">(</span><span class="n">source</span><span class="o">,</span> <span class="n">target</span><span class="o">).</span><span class="na">getVertexList</span><span class="o">();</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">double</span> <span class="nf">getPathWeight</span><span class="o">(</span><span class="n">Station</span> <span class="n">source</span><span class="o">,</span> <span class="n">Station</span> <span class="n">target</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">shortestPathAlgorithm</span><span class="o">.</span><span class="na">getPathWeight</span><span class="o">(</span><span class="n">source</span><span class="o">,</span> <span class="n">target</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<ul>
  <li>SubwayGraphë¥¼ ë°›ì•„ì„œ ìµœë‹¨ ê²½ë¡œë¥¼ êµ¬í•  ìˆ˜ ìˆìŒ</li>
</ul>

<h4 id="shortestpathfinder">ShortestPathFinder</h4>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">ShortestPathFinder</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="n">ShortestPathStrategy</span> <span class="n">shortestPathStrategy</span><span class="o">;</span>

    <span class="kd">public</span> <span class="nf">ShortestPathFinder</span><span class="o">(</span><span class="n">ShortestPathStrategy</span> <span class="n">shortestPathStrategy</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">shortestPathStrategy</span> <span class="o">=</span> <span class="n">shortestPathStrategy</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="n">Path</span> <span class="nf">findShortestPath</span><span class="o">(</span><span class="n">Station</span> <span class="n">source</span><span class="o">,</span> <span class="n">Station</span> <span class="n">target</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="k">new</span> <span class="nf">Path</span><span class="o">(</span><span class="n">shortestPathStrategy</span><span class="o">.</span><span class="na">getVertexList</span><span class="o">(</span><span class="n">source</span><span class="o">,</span> <span class="n">target</span><span class="o">),</span> <span class="n">shortestPathStrategy</span><span class="o">.</span><span class="na">getPathWeight</span><span class="o">(</span><span class="n">source</span><span class="o">,</span> <span class="n">target</span><span class="o">));</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<ul>
  <li>ìµœë‹¨ ê²½ë¡œë¥¼ ì°¾ëŠ” ì—­í• </li>
  <li>ì „ëµì„ ì£¼ì…ë°›ì•„ ìµœë‹¨ ê²½ë¡œë¥¼ êµ¬í•˜ê³  ì‹¶ì–´ ë„ë©”ì¸ì„ ë¶„ë¦¬í•˜ì˜€ìŒâ€¦</li>
</ul>

<h4 id="ë³€ê²½ëœ-pathservice">ë³€ê²½ëœ PathService</h4>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="n">PathResponse</span> <span class="nf">findPath</span><span class="o">(</span><span class="n">Long</span> <span class="n">sourceId</span><span class="o">,</span> <span class="n">Long</span> <span class="n">targetId</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">List</span><span class="o">&lt;</span><span class="n">Section</span><span class="o">&gt;</span> <span class="n">sections</span> <span class="o">=</span> <span class="n">sectionDao</span><span class="o">.</span><span class="na">findByStationIds</span><span class="o">(</span><span class="n">Arrays</span><span class="o">.</span><span class="na">asList</span><span class="o">(</span><span class="n">sourceId</span><span class="o">,</span> <span class="n">targetId</span><span class="o">));</span>
    <span class="n">SubwayGraph</span> <span class="n">subwayGraph</span> <span class="o">=</span> <span class="k">new</span> <span class="n">SubwayGraph</span><span class="o">(</span><span class="k">new</span> <span class="n">WeightedMultigraph</span><span class="o">&lt;&gt;(</span><span class="n">DefaultWeightedEdge</span><span class="o">.</span><span class="na">class</span><span class="o">),</span> <span class="n">sections</span><span class="o">);</span>
    <span class="n">ShortestPathFinder</span> <span class="n">shortestPathFinder</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ShortestPathFinder</span><span class="o">(</span><span class="k">new</span> <span class="n">DijkstraShortestPathStrategy</span><span class="o">(</span><span class="n">subwayGraph</span><span class="o">));</span>
    <span class="n">Path</span> <span class="n">shortestPath</span> <span class="o">=</span> <span class="n">shortestPathFinder</span><span class="o">.</span><span class="na">findShortestPath</span><span class="o">(</span><span class="k">new</span> <span class="n">Station</span><span class="o">(</span><span class="n">sourceId</span><span class="o">),</span> <span class="k">new</span> <span class="n">Station</span><span class="o">(</span><span class="n">targetId</span><span class="o">));</span>
    <span class="k">return</span> <span class="k">new</span> <span class="nf">PathResponse</span><span class="o">(</span><span class="n">StationResponse</span><span class="o">.</span><span class="na">listOf</span><span class="o">(</span><span class="n">combineStationById</span><span class="o">(</span><span class="n">shortestPath</span><span class="o">)),</span> <span class="o">(</span><span class="kt">int</span><span class="o">)</span> <span class="n">shortestPath</span><span class="o">.</span><span class="na">distance</span><span class="o">());</span>
<span class="o">}</span>

<span class="kd">private</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">Station</span><span class="o">&gt;</span> <span class="nf">combineStationById</span><span class="o">(</span><span class="n">Path</span> <span class="n">path</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">List</span><span class="o">&lt;</span><span class="n">Long</span><span class="o">&gt;</span> <span class="n">stationIds</span> <span class="o">=</span> <span class="n">path</span><span class="o">.</span><span class="na">stations</span><span class="o">()</span>
            <span class="o">.</span><span class="na">stream</span><span class="o">()</span>
            <span class="o">.</span><span class="na">map</span><span class="o">(</span><span class="nl">Station:</span><span class="o">:</span><span class="n">getId</span><span class="o">)</span>
            <span class="o">.</span><span class="na">collect</span><span class="o">(</span><span class="n">Collectors</span><span class="o">.</span><span class="na">toList</span><span class="o">());</span>
    <span class="k">return</span> <span class="n">stationDao</span><span class="o">.</span><span class="na">findByIds</span><span class="o">(</span><span class="n">stationIds</span><span class="o">).</span><span class="na">sortedStation</span><span class="o">(</span><span class="n">stationIds</span><span class="o">);</span>
<span class="o">}</span>
</code></pre></div></div>

<h4 id="ë°˜ì˜ëœ-ì½”ë“œëŠ”-ì—¬ê¸°ì—-"><a href="https://github.com/NewWisdom/atdd-subway-path/tree/step5">ë°˜ì˜ëœ ì½”ë“œëŠ” ì—¬ê¸°ì— ğŸ‘»</a></h4>


	  ]]></description>
	</item>

	<item>
	  <title>ğŸ“š atdd-subway-map ë¯¸ì…˜ ì •ë¦¬</title>
	  <link>//atdd-subway-map</link>
	  <author></author>
	  <pubDate>2021-06-11T10:01:00+09:00</pubDate>
	  <guid>//atdd-subway-map</guid>
	  <description><![CDATA[
	     <h2 id="ì¤‘ë³µë˜ëŠ”-í…ŒìŠ¤íŠ¸-ë©”ì„œë“œ">ì¤‘ë³µë˜ëŠ” í…ŒìŠ¤íŠ¸ ë©”ì„œë“œ</h2>

<p><img src="https://images.velog.io/images/new_wisdom/post/73cdc1c4-063d-4a4e-af29-6520fecb721e/image.png" style="zoom:50%;" /></p>

<ul>
  <li>ì¤‘ë³µë˜ëŠ” í…ŒìŠ¤íŠ¸ ë©”ì„œë“œëŠ” ì¶”ì¶œí•˜ì</li>
  <li>í…ŒìŠ¤íŠ¸ì½”ë“œë„ ìœ ì§€ë³´ìˆ˜ì˜ ëŒ€ìƒì´ë©° í•˜ë‚˜ì˜ ë¬¸ì„œì´ê¸° ë•Œë¬¸ì— ê°€ë…ì„±ì„ ê³ ë ¤í•˜ì</li>
</ul>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">private</span> <span class="n">ExtractableResponse</span><span class="o">&lt;</span><span class="n">Response</span><span class="o">&gt;</span> <span class="nf">addSection</span><span class="o">(</span><span class="n">String</span> <span class="n">content</span><span class="o">)</span> <span class="o">{</span>
  <span class="k">return</span> <span class="n">RestAssured</span><span class="o">.</span><span class="na">given</span><span class="o">().</span><span class="na">log</span><span class="o">().</span><span class="na">all</span><span class="o">()</span>
    <span class="o">.</span><span class="na">body</span><span class="o">(</span><span class="n">content</span><span class="o">)</span>
    <span class="o">.</span><span class="na">contentType</span><span class="o">(</span><span class="n">MediaType</span><span class="o">.</span><span class="na">APPLICATION_JSON_VALUE</span><span class="o">)</span>
    <span class="o">.</span><span class="na">when</span><span class="o">()</span>
    <span class="o">.</span><span class="na">post</span><span class="o">(</span><span class="s">"/lines/{id}/sections"</span><span class="o">,</span> <span class="mi">1L</span><span class="o">)</span>
    <span class="o">.</span><span class="na">then</span><span class="o">().</span><span class="na">log</span><span class="o">().</span><span class="na">all</span><span class="o">()</span>
    <span class="o">.</span><span class="na">extract</span><span class="o">();</span>
<span class="o">}</span>
</code></pre></div></div>

<h2 id="ì˜ˆì™¸-ì²˜ë¦¬ëŠ”-daoì—ì„œ">ì˜ˆì™¸ ì²˜ë¦¬ëŠ” DAOì—ì„œ</h2>

<p><img src="https://images.velog.io/images/new_wisdom/post/004aa497-1875-4a85-ba7d-2ab1c0f4f40e/image.png" style="zoom:50%;" /></p>

<ul>
  <li>DAOì—ì„œ ì˜ˆì™¸ë¥¼ ì²´í¬í•´ì£¼ê³  ìˆì—ˆìŒ</li>
  <li>DAOëŠ” ë§ê·¸ëŒ€ë¡œ DBì— ì–´ì„¸ìŠ¤í•˜ëŠ” ì—­í• ë§Œ í•  ë¿</li>
  <li>ì´ ê²°ê³¼ì— ëŒ€í•œ ì˜ˆì™¸ëŠ” ì„œë¹„ìŠ¤ê°€ ì•Œì•„ì„œ í•˜ë„ë¡ í•˜ì</li>
</ul>

<h2 id="validì™€-validatedë¡œ-dto-ê²€ì¦">@Validì™€ @Validatedë¡œ DTO ê²€ì¦</h2>

<ul>
  <li><code class="highlighter-rouge">@Valid</code> ë¥¼ í†µí•´ DTOì—ì„œ ìš”ì²­ì— ëŒ€í•œ ê²€ì¦ì„ í•˜ê²Œ í•´ì¤Œ</li>
  <li>Validationì„ groupí™” í•  ìˆ˜ ìˆëŠ” ì ì„ ì´ìš©í•´ì„œ ê°ê¸° ìš”ì²­ë§ˆë‹¤ groupì„ ì§€ì–´ í•œ DTOë¥¼ ì‚¬ìš©í•´ë„ ê°ê° ìš”ì²­ì— ë§ëŠ” ê²€ì¦ì„ ì§„í–‰</li>
</ul>

<h4 id="ì •ë¦¬">ì •ë¦¬</h4>

<ul>
  <li><a href="https://github.com/NewWisdom/TIL/issues/30">@Valid / @Validationìœ¼ë¡œ ìš”ì²­ê°’ ê²€ì¦</a></li>
</ul>

<h2 id="validë¡œ-ì¡ì€-ì˜ˆì™¸-ë©”ì‹œì§€-ì²˜ë¦¬">Validë¡œ ì¡ì€ ì˜ˆì™¸ ë©”ì‹œì§€ ì²˜ë¦¬</h2>

<p><img src="https://images.velog.io/images/new_wisdom/post/2ca1114f-98c3-4ce6-b968-0212fcbbc658/image.png" style="zoom: 50%;" /></p>

<ul>
  <li>Valid ì–´ë…¸í…Œì´ì…˜ìœ¼ë¡œ ì¡ì€ MethodArgumentNotValidExceptionì˜ ë©”ì‹œì§€ë¥¼ ì œëŒ€ë¡œ ì¶œë ¥í•˜ê³  ìˆì§€ ì•Šì•˜ìŒ</li>
  <li>ê²Œì´ì¸ ê°€ ì œì•ˆí•´ì¤€ ë°©ë²•ì„ ì ìš©í•˜ë‹ˆ BindingResultì— ìˆëŠ” ì˜ˆì™¸ ë©”ì‹œì§€ë“¤ì„ ì¶”ì¶œí•˜ì—¬ ë˜ì ¸ì¤„ ìˆ˜ ìˆì—ˆìŒ</li>
</ul>

<h2 id="service-ë ˆì´ì–´ì—ì„œ-ë„ë©”ì¸ì´-ì•„ë‹Œ-dtoë¥¼-ë°˜í™˜í•˜ì">Service ë ˆì´ì–´ì—ì„œ ë„ë©”ì¸ì´ ì•„ë‹Œ DTOë¥¼ ë°˜í™˜í•˜ì</h2>

<p><img src="https://images.velog.io/images/new_wisdom/post/a2e62828-da05-401f-bad8-e1e86f9b7c9a/image.png" style="zoom:50%;" /></p>

<ul>
  <li>Controllerì—ì„œ ë„ë©”ì¸ì„ ê°€ì ¸ë‹¤ ì¨ì„œ í™”ë©´ì— í•„ìš”í•œ ë°ì´í„°ë¥¼ í‘œí˜„í•˜ê¸° ìœ„í•´ ë„ë©”ì¸ ìì²´ë‚˜ ë„ë©”ì¸ì˜ getterë¥¼ ë…¸ì¶œì‹œí‚¤ê³  ìˆì—ˆìŒ</li>
  <li>ë„ë©”ì¸ì˜ ì •ë³´ë¥¼ ì™¸ë¶€(view)ì— ë…¸ì¶œí•˜ëŠ” ê²½ìš°, interfaceì¸ DTOë¥¼ í†µí•´ ì„œë¹„ìŠ¤ ë ˆì´ì–´ì—ì„œ ë°˜í™˜í•˜ë„ë¡ ë¦¬íŒ©í† ë§</li>
  <li><a href="https://github.com/HomoEfficio/dev-tips/blob/master/DTO-DomainObject-Converter.md">ì°¸ê³ </a></li>
</ul>

<h4 id="ì •ë¦¬-1">ì •ë¦¬</h4>

<ul>
  <li><a href="https://github.com/NewWisdom/TIL/issues/26">Service Layerì—ì„œ ë„ë©”ì¸ ê°ì²´ê°€ ì•„ë‹Œ DTOë¥¼ ë°˜í™˜í•´ì•¼í•˜ëŠ” ì´ìœ ? (feat.Open Session In View) </a></li>
</ul>

<h2 id="restassuredì—-ëŒ€í•´">RestAssuredì— ëŒ€í•´</h2>

<ul>
  <li>ì „ ë‹¨ê³„ê¹Œì§€ëŠ” MockMVC ë“±ìœ¼ë¡œ ì»¨íŠ¸ë¡¤ëŸ¬ë‹¨ì„ ë‹¨ìœ„í…ŒìŠ¤íŠ¸ë¡œ ì§„í–‰í–ˆìŒ</li>
  <li>E2E í…ŒìŠ¤íŠ¸ë¥¼ í•œë‹¤ëŠ” ê²ƒì€ ë§ ê·¸ëŒ€ë¡œ ëë¶€í„° ëê¹Œì§€,ìš”ì²­ë¶€í„° ë‚´ê°€ ì›í•˜ëŠ” ì‘ë‹µì„ í…ŒìŠ¤íŠ¸ í•˜ëŠ” ê²ƒì¸ë° <br />
ì´ë ‡ê²Œë˜ë©´ ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ë¥¼ í•˜ëŠ” ì´ìœ ê°€ ìˆì„ê¹Œë¼ëŠ” ê³ ë¯¼ì„ í–ˆìŒ</li>
  <li>ê³ ë¯¼í•œ ê²°ê³¼ â€œë‹¨ìœ„ í…ŒìŠ¤íŠ¸ëŠ” êµ¬í˜„ ë‹¨ê³„ì—ì„œ ë‚´ê°€ êµ¬í˜„í•œ ë ˆì´ì–´(ë‹¨ìœ„)ê°€ ì •ìƒ ë™ì‘í•˜ëŠ”ì§€ë¥¼ í…ŒìŠ¤íŠ¸í•˜ê¸° ìœ„í•´,
ì´í›„ ëª¨ë“  ë‹¨ìœ„ë“¤ì´ ì¡°í•©ë˜ì—ˆì„ ë•Œ í†µí•©í…ŒìŠ¤íŠ¸ë¥¼ í†µí•´ ì• í”Œë¦¬ì¼€ì´ì…”ì´ ì›í•˜ëŠ” ê¸°ëŠ¥ì„ ì˜ ìˆ˜í–‰í•˜ëŠ”ì§€ í…ŒìŠ¤íŠ¸í•œë‹¤â€
ì´ë ‡ê²Œ ê²°ë¡ ì„ ë‚´ë¦¼</li>
</ul>

<p><img src="https://images.velog.io/images/new_wisdom/post/191d92fe-c4e1-4595-b67f-ee1d37e1d9a6/image.png" style="zoom:33%;" /></p>

<h2 id="êµ¬ê°„-ì¶”ê°€-ë¡œì§">êµ¬ê°„ ì¶”ê°€ ë¡œì§</h2>

<ul>
  <li>êµ¬ê°„ì„ ì¶”ê°€í•  ë•Œ ìƒí–‰ì—­, í•˜í–‰ì—­ì´ ì¡´ì¬í•˜ëŠ”ì§€ ë˜ ì´ë¥¼ ì°¾ê³  ìˆ˜ì •í•´ì£¼ê¸° ìœ„í•œ ë§ì€ ë¡œì§ì„ ì‘ì„±í•´ì•¼í–ˆìŒ</li>
  <li>ê·¸ëŸ°ë° ì‚¬ì‹¤ ë¹„ìŠ·í•œ ë¡œì§ì¸ë° ìƒí–‰ì¸ì§€ í•˜í–‰ì¸ì§€ ëŒ€ìƒë§Œ ë‹¬ëìŒ</li>
  <li>ì•„ë˜ì™€ ê°™ì´ ì¼ë‹¨ êµ¬í˜„ì„ ëª©ì ìœ¼ë¡œ í–ˆì„ ë•ŒëŠ” ì—„ì²­ë‚œ ë¶„ê¸°ê°€ ìƒê²¨ë²„ë¦¼</li>
</ul>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Transactional</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">addSection</span><span class="o">(</span><span class="kd">final</span> <span class="n">Long</span> <span class="n">lineId</span><span class="o">,</span> <span class="kd">final</span> <span class="n">SectionRequest</span> <span class="n">sectionRequest</span><span class="o">)</span> <span class="o">{</span>
  <span class="n">Line</span> <span class="n">line</span> <span class="o">=</span> <span class="n">lineRepository</span><span class="o">.</span><span class="na">findById</span><span class="o">(</span><span class="n">lineId</span><span class="o">);</span>
  <span class="n">Section</span> <span class="n">toAddSection</span> <span class="o">=</span> <span class="n">sectionRequest</span><span class="o">.</span><span class="na">toSection</span><span class="o">(</span><span class="n">lineId</span><span class="o">);</span>
  <span class="n">Station</span> <span class="n">targetStation</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="na">registeredStation</span><span class="o">(</span><span class="n">toAddSection</span><span class="o">);</span>
  <span class="k">if</span> <span class="o">(</span><span class="n">toAddSection</span><span class="o">.</span><span class="na">hasUpStation</span><span class="o">(</span><span class="n">targetStation</span><span class="o">))</span> <span class="o">{</span>
    <span class="n">Section</span> <span class="n">targetSection</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="na">findSectionWithUpStation</span><span class="o">(</span><span class="n">targetStation</span><span class="o">);</span>
    <span class="n">checkAddableByDistance</span><span class="o">(</span><span class="n">toAddSection</span><span class="o">,</span> <span class="n">targetSection</span><span class="o">);</span>
    <span class="n">lineRepository</span><span class="o">.</span><span class="na">updateSection</span><span class="o">(</span><span class="n">lineId</span><span class="o">,</span>
                                 <span class="k">new</span> <span class="nf">Section</span><span class="o">(</span><span class="n">targetSection</span><span class="o">.</span><span class="na">id</span><span class="o">(),</span> <span class="n">lineId</span><span class="o">,</span> <span class="n">toAddSection</span><span class="o">.</span><span class="na">downStation</span><span class="o">(),</span> <span class="n">targetSection</span><span class="o">.</span><span class="na">downStation</span><span class="o">(),</span> <span class="n">targetSection</span><span class="o">.</span><span class="na">subtractDistance</span><span class="o">(</span><span class="n">toAddSection</span><span class="o">)));</span>
  <span class="o">}</span>
  <span class="k">if</span> <span class="o">(</span><span class="n">toAddSection</span><span class="o">.</span><span class="na">hasDownStation</span><span class="o">(</span><span class="n">targetStation</span><span class="o">))</span> <span class="o">{</span>
    <span class="n">Section</span> <span class="n">targetSection</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="na">findSectionWithDownStation</span><span class="o">(</span><span class="n">targetStation</span><span class="o">);</span>
    <span class="n">checkAddableByDistance</span><span class="o">(</span><span class="n">toAddSection</span><span class="o">,</span> <span class="n">targetSection</span><span class="o">);</span>
    <span class="n">lineRepository</span><span class="o">.</span><span class="na">updateSection</span><span class="o">(</span><span class="n">lineId</span><span class="o">,</span>
                                 <span class="k">new</span> <span class="nf">Section</span><span class="o">(</span><span class="n">targetSection</span><span class="o">.</span><span class="na">id</span><span class="o">(),</span> <span class="n">lineId</span><span class="o">,</span> <span class="n">targetSection</span><span class="o">.</span><span class="na">upStation</span><span class="o">(),</span> <span class="n">toAddSection</span><span class="o">.</span><span class="na">upStation</span><span class="o">(),</span> <span class="n">targetSection</span><span class="o">.</span><span class="na">subtractDistance</span><span class="o">(</span><span class="n">toAddSection</span><span class="o">)));</span>
  <span class="o">}</span>
  <span class="n">lineRepository</span><span class="o">.</span><span class="na">addSection</span><span class="o">(</span><span class="n">lineId</span><span class="o">,</span> <span class="n">sectionRequest</span><span class="o">.</span><span class="na">getUpStationId</span><span class="o">(),</span> <span class="n">sectionRequest</span><span class="o">.</span><span class="na">getDownStationId</span><span class="o">(),</span> <span class="n">sectionRequest</span><span class="o">.</span><span class="na">getDistance</span><span class="o">());</span>
<span class="o">}</span>
</code></pre></div></div>

<ul>
  <li>ì´ëŠ” ìƒí–‰êµ¬ê°„ ì°¾ê¸°, í•˜í–‰êµ¬ê°„ ì°¾ê¸°ë¥¼ ì „ëµíŒ¨í„´ì„ ì´ìš©í•´ ë¦¬íŒ©í†  í•´ë²„ë ¸ìŒ</li>
</ul>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">LineService</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="n">LineRepository</span> <span class="n">lineRepository</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="n">StationDao</span> <span class="n">stationDao</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">FindSectionStrategy</span><span class="o">&gt;</span> <span class="n">findSectionStrategies</span><span class="o">;</span>
<span class="c1">// ...</span>
</code></pre></div></div>

<ul>
  <li>ì¼ë‹¨ LineServiceê°€ êµ¬ê°„ì„ ì°¾ëŠ” ì „ëµì„ ê°€ì§€ê³  ìˆìŒ</li>
</ul>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Transactional</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">addSection</span><span class="o">(</span><span class="kd">final</span> <span class="n">Long</span> <span class="n">lineId</span><span class="o">,</span> <span class="kd">final</span> <span class="n">SectionRequest</span> <span class="n">sectionRequest</span><span class="o">)</span> <span class="o">{</span>
  <span class="n">Line</span> <span class="n">line</span> <span class="o">=</span> <span class="n">lineRepository</span><span class="o">.</span><span class="na">findById</span><span class="o">(</span><span class="n">lineId</span><span class="o">);</span>
  <span class="n">Section</span> <span class="n">toAddSection</span> <span class="o">=</span> <span class="n">sectionRequest</span><span class="o">.</span><span class="na">toSection</span><span class="o">(</span><span class="n">lineId</span><span class="o">);</span>
  <span class="n">Station</span> <span class="n">targetStation</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="na">registeredStation</span><span class="o">(</span><span class="n">toAddSection</span><span class="o">);</span>
  <span class="n">Section</span> <span class="n">targetSection</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="na">findSectionWithStation</span><span class="o">(</span><span class="n">targetStation</span><span class="o">,</span> <span class="n">findSectionStrategies</span><span class="o">);</span>
  <span class="n">lineRepository</span><span class="o">.</span><span class="na">updateSection</span><span class="o">(</span><span class="n">lineId</span><span class="o">,</span> <span class="n">targetSection</span><span class="o">.</span><span class="na">updateToAdd</span><span class="o">(</span><span class="n">toAddSection</span><span class="o">));</span>
  <span class="n">lineRepository</span><span class="o">.</span><span class="na">addSection</span><span class="o">(</span><span class="n">lineId</span><span class="o">,</span> <span class="n">sectionRequest</span><span class="o">.</span><span class="na">getUpStationId</span><span class="o">(),</span> <span class="n">sectionRequest</span><span class="o">.</span><span class="na">getDownStationId</span><span class="o">(),</span> <span class="n">sectionRequest</span><span class="o">.</span><span class="na">getDistance</span><span class="o">());</span>
<span class="o">}</span>
</code></pre></div></div>

<ul>
  <li>ëŒ€ìƒ êµ¬ê°„ì„ ì°¾ì„ ë•Œ ì „ëµë“¤ì„ ì£¼ì…í•˜ê³ </li>
</ul>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="n">Section</span> <span class="nf">findSectionWithStation</span><span class="o">(</span><span class="n">Station</span> <span class="n">targetStation</span><span class="o">,</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">FindSectionStrategy</span><span class="o">&gt;</span> <span class="n">findSectionStrategies</span><span class="o">)</span> <span class="o">{</span>
  <span class="k">return</span> <span class="n">findSectionStrategies</span><span class="o">.</span><span class="na">stream</span><span class="o">()</span>
    <span class="o">.</span><span class="na">map</span><span class="o">(</span><span class="n">findSectionStrategy</span> <span class="o">-&gt;</span> <span class="n">findSectionStrategy</span><span class="o">.</span><span class="na">findSection</span><span class="o">(</span><span class="n">sections</span><span class="o">,</span> <span class="n">targetStation</span><span class="o">))</span>
    <span class="o">.</span><span class="na">filter</span><span class="o">(</span><span class="nl">Optional:</span><span class="o">:</span><span class="n">isPresent</span><span class="o">)</span>
    <span class="o">.</span><span class="na">map</span><span class="o">(</span><span class="nl">Optional:</span><span class="o">:</span><span class="n">get</span><span class="o">)</span>
    <span class="o">.</span><span class="na">findAny</span><span class="o">()</span>
    <span class="o">.</span><span class="na">orElse</span><span class="o">(</span><span class="n">EMPTY</span><span class="o">);</span>
<span class="o">}</span>
</code></pre></div></div>

<ul>
  <li>Sectionsì—ì„œ ë‹¤ìŒê³¼ ê°™ì´ í•´ë‹¹ êµ¬ê°„ì„ ì°¾ìŒ</li>
</ul>

<h2 id="pr-ë§í¬">PR ë§í¬</h2>

<ul>
  <li><a href="https://github.com/woowacourse/atdd-subway-map/pull/86">STEP1</a></li>
  <li><a href="https://github.com/woowacourse/atdd-subway-map/pull/162">STEP2</a></li>
</ul>

	  ]]></description>
	</item>

	<item>
	  <title>ğŸŒ± ìŠ¤í”„ë§ ë¶€íŠ¸ Profileë¡œ ë‹¤ë¥¸ í™˜ê²½ êµ¬ì„±</title>
	  <link>//profile</link>
	  <author></author>
	  <pubDate>2021-06-09T10:01:00+09:00</pubDate>
	  <guid>//profile</guid>
	  <description><![CDATA[
	     <h2 id="profile">Profile?</h2>

<ul>
  <li>ì• í”Œë¦¬ì¼€ì´ì…˜ ì¼ë¶€ configurationì„ ë¶„ë¦¬í•˜ê³  ì‹¶ì„ ë•Œ ì‚¬ìš©</li>
  <li>ì• í”Œë¦¬ì¼€ì´ì…˜ ì¼ë¶€ configurationì„ íŠ¹ì • í™˜ê²½ì—ì„œë§Œ ê°€ëŠ¥í•˜ê²Œ í•˜ê³  ì‹¶ì„ ë•Œ ì‚¬ìš©</li>
  <li>ê°œë°œ í™˜ê²½ì— ë”°ë¼ ì„¤ì •ê°’ì„ ë‹¬ë¥´ê²Œ ë¡œë”©í•  ë•Œ</li>
</ul>

<h2 id="profile-1">@Profile</h2>

<ul>
  <li><code class="highlighter-rouge">@Component, @Configuration, @ConfigurationProperties</code>ì„ <code class="highlighter-rouge">@Profile</code>ì™€ í•¨ê»˜ ì„ ì–¸</li>
</ul>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="nd">@Configuration</span>
<span class="nd">@Profile</span><span class="o">(</span><span class="s">"production"</span><span class="o">)</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">ProductionConfiguration</span> <span class="o">{</span>

    <span class="c1">// ...</span>

<span class="o">}</span>
</code></pre></div></div>
<ul>
  <li>ì–´í”Œë¦¬ì¼€ì´ì…˜ ì‹¤í–‰ì‹œ <code class="highlighter-rouge">spring.profiles.active</code> í”„ë¡œí¼í‹°ë¡œ í”„ë¡œíŒŒì¼ì„ ì§€ì •í•˜ë©´ í•´ë‹¹ í”„ë¡œíŒŒì¼ì´ ì ìš©ëœ ë¹ˆë§Œ ë“±ë¡ë¨</li>
</ul>

<p><strong>application-properties</strong></p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>spring.profiles.active=dev,hsqldb
</code></pre></div></div>

<h4 id="example">Example</h4>

<ol>
  <li>application-propertiesì— ë‹¤ìŒê³¼ ê°™ì´ ì •ì˜
    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>spring.profiles.active=prod
</code></pre></div>    </div>
  </li>
  <li><code class="highlighter-rouge">@Profile</code> ì–´ë…¸í…Œì´ì…˜ê³¼ í•¨ê»˜ <code class="highlighter-rouge">@Configuration</code> ë“±ë¡</li>
</ol>

<p><img src="https://user-images.githubusercontent.com/43840561/121311111-0f322800-c93f-11eb-9455-436a99434869.png" alt="image" style="zoom:50%;" /></p>

<p><img src="https://user-images.githubusercontent.com/43840561/121311125-13f6dc00-c93f-11eb-8a93-3923630d84fa.png" alt="image" style="zoom:50%;" /></p>

<ol>
  <li>ì–´í”Œë¦¬ì¼€ì´ì…˜ ì‹¤í–‰ì‹œ activeí•œ prodì— ë“±ë¡ëœ hello ë¹ˆì´ ì¶œë ¥ë¨</li>
</ol>

<p><img src="https://user-images.githubusercontent.com/43840561/121311276-3a1c7c00-c93f-11eb-9698-9abf9172184f.png" alt="image" /></p>

<h3 id="profileê³¼-activeprofiles">@Profileê³¼ @ActiveProfiles</h3>
<ul>
  <li>ì„œë¡œ ë‹¤ë¥¸ í™˜ê²½ì—ì„œ ì„œë¡œ ë‹¤ë¥¸ profileì„ í™œì„±í™”í•˜ì—¬ í•„ìš”í•œ ë¹ˆë§Œ ë“±ë¡í•˜ë„ë¡ í•˜ëŠ” ì–´ë…¸í…Œì´ì…˜</li>
  <li><code class="highlighter-rouge">@Profile</code>ì€ SpringBootApplicationì„ ì‹¤í–‰í•  ë•Œ ì‚¬ìš©</li>
  <li><code class="highlighter-rouge">@ActiveProfiles</code>ì€ í…ŒìŠ¤íŠ¸ í™˜ê²½ì—ì„œ ì‚¬ìš©</li>
</ul>

<h2 id="applicationproperties">application.properties</h2>

<ul>
  <li>application-{profile}.properties í˜•ì‹ìœ¼ë¡œ íŒŒì¼ ìƒì„±</li>
  <li>ì´ëŠ” <code class="highlighter-rouge">@ConfigurationProperties</code>ë¡œ ê°„ì£¼ë˜ê³  ë¡œë“œë¨
    <ul>
      <li>*.properties , *.yml íŒŒì¼ì— ìˆëŠ” propertyë¥¼ ìë°” í´ë˜ìŠ¤ì— ê°’ì„ ê°€ì ¸ì™€ì„œ(ë°”ì¸ë”©) ì‚¬ìš©í•  ìˆ˜ ìˆê²Œ í•´ì£¼ëŠ” ì–´ë…¸í…Œì´ì…˜</li>
    </ul>
  </li>
  <li>application-{profile}.propertiesì€ application.properties ë³´ë‹¤ ìš°ì„ ìˆœìœ„ê°€ ë†’ê²Œë¨</li>
  <li>ë¹Œë“œí•  ë•Œ ë‹¤ìŒê³¼ ê°™ì€ ëª…ë ¹ì–´ì™€ í•¨ê»˜ íŠ¹ì • í™˜ê²½ì„¤ì •ì„ ì ìš©í•  ìˆ˜ ìˆìŒ
    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>--spring.profiles.active=production
</code></pre></div>    </div>
  </li>
  <li>properties íŒŒì¼ì— <code class="highlighter-rouge">spring.profiles.include</code>ë¥¼ í†µí•´ ì¶”ê°€í•  í”„ë¡œíŒŒì¼ì„ ì„¤ì •í•  ìˆ˜ ìˆìŒ</li>
</ul>

<h4 id="example-1">Example</h4>

<p><strong>application-properties</strong></p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>spring.profiles.active=dev
profile-common.name = default_name_mazzi
defaultonly.name = defualt_name
</code></pre></div></div>
<p><strong>application-prod.properties</strong></p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>profile-common.name = test_name_mazzi
testonly.name = test_name
</code></pre></div></div>
<p><strong>application-dev.properties</strong></p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>profile-common.name = dev_name_mazzi
devonly.name = dev_name
</code></pre></div></div>
<p><strong>AppRunner</strong></p>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Component</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">AppRunner</span> <span class="kd">implements</span> <span class="n">ApplicationRunner</span> <span class="o">{</span>
    <span class="nd">@Autowired</span>
    <span class="n">Environment</span> <span class="n">env</span><span class="o">;</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">run</span><span class="o">(</span><span class="n">ApplicationArguments</span> <span class="n">args</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">Exception</span> <span class="o">{</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"====================================================="</span><span class="o">);</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"spring.profiles.active : "</span> <span class="o">+</span> <span class="n">args</span><span class="o">.</span><span class="na">getOptionValues</span><span class="o">(</span><span class="s">"spring.profiles.active"</span><span class="o">));</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Enviroment's Active Profile : "</span> <span class="o">+</span> <span class="n">Arrays</span><span class="o">.</span><span class="na">toString</span><span class="o">(</span><span class="n">env</span><span class="o">.</span><span class="na">getActiveProfiles</span><span class="o">()));</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"defaultonly.name : "</span> <span class="o">+</span> <span class="n">env</span><span class="o">.</span><span class="na">getProperty</span><span class="o">(</span><span class="s">"defaultonly.name"</span><span class="o">));</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"testonly.name : "</span> <span class="o">+</span> <span class="n">env</span><span class="o">.</span><span class="na">getProperty</span><span class="o">(</span><span class="s">"testonly.name"</span><span class="o">));</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"devonly.name : "</span> <span class="o">+</span> <span class="n">env</span><span class="o">.</span><span class="na">getProperty</span><span class="o">(</span><span class="s">"devonly.name"</span><span class="o">));</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"profile-common.name : "</span> <span class="o">+</span> <span class="n">env</span><span class="o">.</span><span class="na">getProperty</span><span class="o">(</span><span class="s">"profile-common.name"</span><span class="o">));</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"====================================================="</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>
<p><strong>ì‹¤í–‰ ê²°ê³¼</strong></p>

<p><img src="https://user-images.githubusercontent.com/43840561/121315869-b6b15980-c943-11eb-83a9-7e4214b18fe6.png" alt="image" style="zoom:50%;" /></p>

<ul>
  <li>profile-common.nameëŠ” ëª¨ë“  í”„ë¡œí¼í‹° íŒŒì¼ì´ ê³µí†µìœ¼ë¡œ ê°€ì§„ í”„ë¡œí¼í‹°</li>
  <li>dev í”„ë¡œíŒŒì¼ì„ í™œì„±í™”</li>
  <li>ê³µí†µ ì†ì„±ì¸ <code class="highlighter-rouge">profile-common.name</code>ì€ ìš°ì„ ìˆœìœ„ê°€ ë†’ì€ dev í”„ë¡œíŒŒì¼ì˜ ê²ƒìœ¼ë¡œ ì˜¤ë²„ë¼ì´ë“œ ë¨</li>
</ul>

<hr />
<h3 id="ì°¸ê³ ìë£Œ">ì°¸ê³ ìë£Œ</h3>
<ul>
  <li><a href="https://docs.spring.io/spring-boot/docs/current/reference/html/features.html#features.profiles">ê³µì‹ë¬¸ì„œ</a></li>
  <li><a href="https://yangbox.tistory.com/35">ìŠ¤í”„ë§ë¶€íŠ¸ í”„ë¡œíŒŒì¼(Springboot Profile)ë¡œ ë‹¤ë¥¸ í™˜ê²½ êµ¬ì„±í•˜ê¸°</a></li>
  <li><a href="https://engkimbs.tistory.com/766">ìŠ¤í”„ë§ ë¶€íŠ¸ í”„ë¡œíŒŒì¼(Spring Boot Profile)</a></li>
</ul>

	  ]]></description>
	</item>

	<item>
	  <title>ğŸ“š jwp-chess ë¯¸ì…˜ ì •ë¦¬</title>
	  <link>//jwp-chess-note</link>
	  <author></author>
	  <pubDate>2021-06-09T10:01:00+09:00</pubDate>
	  <guid>//jwp-chess-note</guid>
	  <description><![CDATA[
	     <h2 id="controlleradvice">@ControllerAdvice</h2>

<p><img src="https://images.velog.io/images/new_wisdom/post/d9838b28-b9fd-4cd3-9f8f-f19229e5da70/image.png" style="zoom: 50%;" /></p>

<ul>
  <li>ì „ì—­ ì˜ˆì™¸ë¥¼ ì²˜ë¦¬í•˜ëŠ”ë° ì‚¬ìš©</li>
</ul>

<h4 id="ì •ë¦¬">ì •ë¦¬</h4>

<p><a href="https://github.com/NewWisdom/TIL/issues/1">@ControllerAdvice, @RestControllerAdvice</a></p>

<h2 id="rest-api">REST API</h2>

<p><img src="https://images.velog.io/images/new_wisdom/post/b7428bd8-737e-489a-a59d-d3e8a1adcfd2/image.png" style="zoom:50%;" /></p>

<p><img src="https://images.velog.io/images/new_wisdom/post/3dbc03af-5e1c-4be6-a1e0-7332517831ec/image.png" style="zoom:50%;" /></p>

<ul>
  <li>REST API ì„¤ê³„ ë°©ë²•ì„ ì°¾ì•„ë³´ê³  ê³ ë¯¼í•˜ì—¬ ë°˜ì˜</li>
</ul>

<h4 id="ì •ë¦¬-1">ì •ë¦¬</h4>

<ul>
  <li><a href="https://github.com/NewWisdom/TIL/issues/2">REST API ë””ìì¸</a></li>
</ul>

<h2 id="profile">Profile</h2>

<p><img src="https://images.velog.io/images/new_wisdom/post/4fdbb04e-3c16-4a59-954f-b0020d245842/image.png" style="zoom:50%;" /></p>

<ul>
  <li>ì‹¤ì œ ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ ì‚¬ìš©í•˜ëŠ” DBëŠ” Mysql ê·¸ëŒ€ë¡œ ëƒ…ë‘ê³ </li>
  <li>í…ŒìŠ¤íŠ¸ì—ì„œëŠ” h2ë¥¼ ì‚¬ìš©í•˜ì—¬ h2 ì˜ ì¥ì ì„ ê·¹ëŒ€í™”í•´ì„œ ì‚¬ìš©í•˜ë„ë¡ ë¦¬íŒ©ë˜</li>
  <li>í…ŒìŠ¤íŠ¸ DBë¥¼ ë”°ë¡œ ì„¤ì •í•˜ê¸° ìœ„í•´ ì—´ì‹¬íˆ ì°¾ì•„ë³´ë‹¤ê°€ application-propertiesë¥¼ í™œìš©í•˜ëŠ” ë°©ì•ˆ í•™ìŠµ</li>
  <li>ì²˜ìŒì—ëŠ” application-{í™˜ê²½}-propertiesë¡œ ê°ê° íŒŒì¼ì„ ë§Œë“¤ì–´ì£¼ì—ˆìŒ</li>
  <li>ì•„ë˜ì™€ ê°™ì€ ë¦¬ë·°ë¥¼ ë°›ê³  test.resourceì— application-propertiesë¥¼ ë§Œë“¤ì–´ì¤Œ</li>
</ul>

<p><img src="https://images.velog.io/images/new_wisdom/post/5dc4b405-47bc-4422-83f8-eedaa3b7732e/image.png" style="zoom:50%;" /></p>

<p><img src="https://images.velog.io/images/new_wisdom/post/4aa931db-0a73-4ada-9ba2-2bb0e3b3ea3b/image.png" style="zoom:33%;" /></p>

<h4 id="ì •ë¦¬-2">ì •ë¦¬</h4>

<ul>
  <li>Profileì— ëŒ€í•´ ì¶”ê°€ì ìœ¼ë¡œ í•™ìŠµí•˜ê³  ì •ë¦¬</li>
  <li><a href="https://github.com/NewWisdom/TIL/issues/47">Profile</a></li>
</ul>

<h2 id="í…ŒìŠ¤íŠ¸ì—-ê´€í•˜ì—¬">í…ŒìŠ¤íŠ¸ì— ê´€í•˜ì—¬</h2>

<p><img src="https://images.velog.io/images/new_wisdom/post/03a3dc16-07b5-48d0-bf51-fbea7bacc9f6/image.png" style="zoom:50%;" /></p>

<ul>
  <li>ì§€ë‚œ ë ˆë²¨ ì²´ìŠ¤ ì½”ë“œ ì˜®ê²¨ì˜¤ë©´ì„œ í…ŒìŠ¤íŠ¸ ì½”ë“œëŠ” ë¹¼ê³  ì˜®ê²¨ì™”ì—ˆìŒ ğŸ¥²</li>
  <li>ë°ì´ë¸Œì˜ ê¶Œìœ ëŒ€ë¡œ ê° ë ˆì´ì–´ë³„ í…ŒìŠ¤íŠ¸ ì½”ë“œ ì‘ì„±</li>
  <li>ì²˜ìŒì—ëŠ” ë‹¨ìˆœíˆ <code class="highlighter-rouge">@SpringBootTest</code> (í†µí•©í…ŒìŠ¤íŠ¸)ë¡œ ì§„í–‰í•˜ë ¤ í–ˆìŒ</li>
  <li>ì°¾ì•„ë³´ë‹ˆ ê° ë ˆì´ì–´ë¥¼ ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ë¡œë„ êµ¬í˜„í•  ìˆ˜ ìˆìŒì„ ê¹¨ë‹¬ìŒ</li>
  <li><code class="highlighter-rouge">@WebMvcTest, @jdbcTest</code>ì„ í†µí•´ Controllerì™€ Repository ë ˆì´ì–´ì— ëŒ€í•œ ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ë¥¼ êµ¬í˜„</li>
</ul>

<h4 id="ì •ë¦¬-3">ì •ë¦¬</h4>

<ul>
  <li><a href="https://newwisdom.github.io/unit-test-vs">í†µí•© í…ŒìŠ¤íŠ¸ VS ë‹¨ìœ„ í…ŒìŠ¤íŠ¸</a></li>
</ul>

<h2 id="í•™ìŠµí•˜ë¼ê³ -ë˜ì ¸ì£¼ì‹ -í‚¤ì›Œë“œ">í•™ìŠµí•˜ë¼ê³  ë˜ì ¸ì£¼ì‹  í‚¤ì›Œë“œ</h2>

<p><img src="https://images.velog.io/images/new_wisdom/post/9147f41d-e48f-479d-8573-2f23fcbff416/image.png" style="zoom:50%;" /></p>

<h4 id="ì •ë¦¬-4">ì •ë¦¬</h4>

<ul>
  <li><a href="https://github.com/NewWisdom/TIL/issues/3#issue-862548280">@ResponsebodyëŠ” ì–´ë–¤ ì—­í• ì„ í•´ì¤„ê¹Œ?</a></li>
  <li><a href="https://github.com/NewWisdom/TIL/issues/4#issue-862590487">@Componentscan</a></li>
  <li><a href="https://github.com/NewWisdom/TIL/issues/5#issue-862591289">ìŠ¤í”„ë§ì˜ DI ë°©ë²•</a></li>
  <li><a href="https://github.com/NewWisdom/TIL/issues/6">Springì—ì„œ request ì²˜ë¦¬ ê³¼ì •</a></li>
</ul>

<h2 id="ì´ë²ˆ-ë¯¸ì…˜ì—ì„œ-ì´ëŸ°-í‚¤ì›Œë“œë“¤ì„-í•™ìŠµí–ˆìŒ-">ì´ë²ˆ ë¯¸ì…˜ì—ì„œ ì´ëŸ° í‚¤ì›Œë“œë“¤ì„ í•™ìŠµí–ˆìŒ ğŸ‘»</h2>

<ul>
  <li><a href="https://github.com/NewWisdom/TIL/issues?q=is%3Aissue+is%3Aopen+label%3Ajwp-chess">ë‚´ ê¹ƒí—™ issueì— ë“±ë¡í–ˆì§€ë¡±</a></li>
</ul>

	  ]]></description>
	</item>

	<item>
	  <title>ğŸ“‹ í…ŒìŠ¤íŠ¸ë¡œ ë°°ìš°ëŠ” Spring Auth ê°•ì˜</title>
	  <link>//lecture-auth</link>
	  <author></author>
	  <pubDate>2021-05-28T19:18:00+09:00</pubDate>
	  <guid>//lecture-auth</guid>
	  <description><![CDATA[
	     <h2 id="í”¼ë“œë°±-ê°•ì˜">í”¼ë“œë°± ê°•ì˜</h2>

<h3 id="ì¸ì¦-í—¤ë”">ì¸ì¦ í—¤ë”</h3>

<p>ë¡œê·¸ì¸ì„ í†µí•´ í† í°ì„ ë°œê¸‰ ë°›ì€ í›„ í—¤ë”ì— Authorizationì— í† í°ì„ ì‹¤ì–´ë³´ë‚¸ë‹¤.<br />
ì™œ êµ³ì´ ì´ í—¤ë”ì— í† í°ì„ ë„£ì–´ ë³´ë‚¼ê¹Œ?</p>

<h3 id="http-ì¸ì¦">HTTP ì¸ì¦</h3>

<p><img src="https://images.velog.io/images/new_wisdom/post/567b6a87-15f7-4409-be6a-2a4baf9b3ffb/image.png" style="zoom:50%;" /></p>

<p>HTTP í”„ë¡œí† ì½œì˜ ì •ì˜ì´ê¸° ë•Œë¬¸ì´ë‹¤.</p>

<ol>
  <li>í´ë¼ì´ì–¸íŠ¸ê°€ â€œ/â€ ìš”ì²­ì„ ë³´ë‚¸ë‹¤.</li>
  <li>ì„œë²„ëŠ” ì ‘ê·¼ì„ í•  ìˆ˜ ìˆëŠ”ì§€ í™•ì¸í•˜ê³ , ì—†ìœ¼ë©´ 401ì„ ë³´ë‚¸ë‹¤.</li>
  <li>ì—¬ê¸°ì„œëŠ” basicì´ë¼ëŠ” ë°©ì‹ìœ¼ë¡œ í† í°ì„ ê²€ì¦í•˜ê³  ìˆë‹¤. ì˜ëª»ë˜ì—ˆìœ¼ë‹ˆ ë‹¤ì‹œ ìš”ì²­í•´!</li>
</ol>

<h3 id="http-ì¸ì¦-ìŠ¤í‚´">HTTP ì¸ì¦ ìŠ¤í‚´</h3>

<h4 id="basic">Basic</h4>

<p><img src="https://images.velog.io/images/new_wisdom/post/0e9a8db3-4221-43a8-84fa-c2f81f371ab1/image.png" style="zoom:33%;" /></p>

<ul>
  <li>base64ë¥¼ ì´ìš©í•´ ì¸ì½”ë”©ëœ ì‚¬ìš©ìì˜ id/pw ìŒì˜ ì¸ì¦ ì •ë³´ë¥¼ ì „ë‹¬</li>
  <li>ì•ˆì „ì„ ìœ„í•´ HTTPS(TLS) ì—°ê²° ìœ„ì—ì„œ ë°œìƒë˜ì–´ì•¼ í•¨</li>
</ul>

<h4 id="bearer">Bearer</h4>

<p><img src="https://images.velog.io/images/new_wisdom/post/d631b9a8-b41d-438e-8038-6299f044616a/image.png" style="zoom:33%;" /></p>

<ul>
  <li>bearer tokenì´ë¼ëŠ” ë³´ì•ˆ í† í°ì„ í™œìš©í•˜ëŠ” ì¸ì¦ ìŠ¤í‚´</li>
  <li>Outh2.0ì—ì„œ ì‚¬ìš©í•˜ê¸° ìœ„í•´ ë§Œë“¤ì–´ì§</li>
</ul>

<h2 id="jwt">JWT</h2>

<ul>
  <li>Json Web Token</li>
  <li>ì›¹ í‘œì¤€ (RFC 7519)</li>
  <li>ìì²´ì ìœ¼ë¡œ ê²€ì¦ë˜ì—ˆìŒì„ ì¦ëª…í•´ì£¼ëŠ” signatureë¥¼ í¬í•¨</li>
  <li>ìƒì„±ì‹œ ê²€ì¦ì´ë‚˜ ê¶Œí•œ ì¸ê°€ ì‹œ í•„ìš”í•œ ê°’ì„ ë„£ì–´ ìƒíƒœë¥¼ ë”°ë¡œ ê´€ë¦¬í•˜ì§€ ì•Šì•„ë„ ë¨</li>
</ul>

<h3 id="í† í°ì˜-êµ¬ì„±">í† í°ì˜ êµ¬ì„±</h3>

<p><img src="https://images.velog.io/images/new_wisdom/post/1bcb51b5-e245-4389-9b50-a6d91bc27d2d/image.png" style="zoom:50%;" /></p>

<h4 id="1-header">1. Header</h4>

<ul>
  <li>í† í°ì— ëŒ€í•œ í•´ì„ ë°©ë²•</li>
  <li>alg : ì‹œê·¸ë‹ˆì²˜ì—ì„œ ì‚¬ìš©í•  ì•Œê³ ë¦¬ì¦˜ ë°©ë²•</li>
  <li>typ : í† í°ì˜ íƒ€ì…</li>
</ul>

<h4 id="2-payload">2. Payload</h4>

<ul>
  <li>í† í°ì˜ ë‚´ìš©, ì „ë‹¬í•  ë‚´ìš©</li>
  <li>payloadì˜ ê°ê°ì˜ ê°’ì„ í´ë ˆì„ì´ë¼ê³  í•¨</li>
  <li>sub : í´ë ˆì„ì˜ ì œëª©</li>
  <li>name :</li>
  <li>iat : ìƒì„± ì‹œê°„</li>
  <li>ì´ ì—­ì‹œë„ base64ë¡œ ì¸ì½”ë”©</li>
</ul>

<h4 id="3-signature">3. Signature</h4>

<ul>
  <li>í—¤ë”ì™€ í˜ì´ë¡œë“œê°€ ë³€ì¡°ë˜ì§€ ì•Šì•˜ìŒì„ ê²€ì¦Œ</li>
  <li>base64ë¡œ ì¸ì½”ë”©ì„ í•˜ê³ , ì•Œê³ ë¦¬ì¦˜ê³¼ í‚¤ê°’ìœ¼ë¡œ í•´ë…</li>
</ul>

<p><strong>basicê³¼ bearer ë‘˜ ë‹¤ base64ë¡œ ì¸ì½”ë”© í•˜ë©´ ì–´ë–»ê²Œ êµ¬ë³„í•˜ë‚˜ìš”?</strong></p>

<p>ì´ëŠ” ì„œë²„ì—ì„œ í˜ì´í¬ì²˜ëŸ¼ ì“¸ ìˆ˜ ìˆì§€!</p>

<p><strong>payloadê°€ ê°™ìœ¼ë©´ í† í° ê°’ë„ ê°™ì•„ì§€ë‚˜ìš”?</strong></p>

<p>ê·¼ë° ì•„ë§ˆ iatê°€ ë‹¬ë¼ì„œ ë‹¤ë¥¼ ìˆ˜ ë°–ì— ì—†ì„ ë“¯</p>

<hr />

<h2 id="dispatcher-servlet">Dispatcher Servlet</h2>

<h3 id="ìš”ì²­ì—-ë”°ë¼-ìˆ˜í–‰í• -ë¡œì§-ë¶„ê¸°">ìš”ì²­ì— ë”°ë¼ ìˆ˜í–‰í•  ë¡œì§ ë¶„ê¸°</h3>

<h3 id="dispatcherservlet-ìœ„ì¹˜">DispatcherServlet ìœ„ì¹˜</h3>

<p><img src="https://images.velog.io/images/new_wisdom/post/a3187c31-d891-43dc-af7a-bb4cde6ab4b0/image.png" style="zoom:50%;" /></p>

<ul>
  <li>Handler ì•ì— Interceptorê°€ ìˆìŒ</li>
</ul>

<p>MVC Config ê°ì²´ë„ ëª¨ë‘ ë¹ˆì´ì—ˆë‹¤.</p>

	  ]]></description>
	</item>

	<item>
	  <title>ğŸ“‹ í…ŒìŠ¤íŠ¸ë¡œ ë°°ìš°ëŠ” Spring Configuration ê°•ì˜</title>
	  <link>//spring-configuration-lec</link>
	  <author></author>
	  <pubDate>2021-05-25T19:18:00+09:00</pubDate>
	  <guid>//spring-configuration-lec</guid>
	  <description><![CDATA[
	     <h2 id="ë°°ê²½-ì§€ì‹-ê°•ì˜">ë°°ê²½ ì§€ì‹ ê°•ì˜</h2>

<p>ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì™€ ìŠ¤í”„ë§ë¹ˆ</p>

<h3 id="ì»¨í…Œì´ë„ˆ">ì»¨í…Œì´ë„ˆ</h3>

<p>ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì— ë¹ˆì„ ë“±ë¡í•˜ê¸° ìœ„í•´ì„œëŠ” Configurationì´ í•„ìš”í•˜ë‹¤.</p>

<ul>
  <li>XML</li>
  <li>Annotation ê¸°ë°˜ì˜ configuration</li>
  <li>java bean  configuration</li>
</ul>

<h3 id="xmlë¡œ-configuration-ì„¤ì •í•˜ëŠ”-ì˜ˆì‹œ">XMLë¡œ Configuration ì„¤ì •í•˜ëŠ” ì˜ˆì‹œ</h3>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="nt">&lt;beans</span> <span class="na">xmlns=</span><span class="s">"http://www.springframework.org/schema/beans"</span>
       <span class="na">xmlns:xsi=</span><span class="s">"http://www.w3.org/2001/XMLSchema-instance"</span>
       <span class="na">xsi:schemaLocation=</span><span class="s">"http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd"</span><span class="nt">&gt;</span>

    <span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">"userRepository"</span> <span class="na">class=</span><span class="s">"nextstep.helloworld.core.xmlConfig.UserRepository"</span><span class="nt">/&gt;</span>

    <span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">"userService"</span> <span class="na">class=</span><span class="s">"nextstep.helloworld.core.xmlConfig.UserService"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"userRepository"</span> <span class="na">ref=</span><span class="s">"userRepository"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;/bean&gt;</span>
<span class="nt">&lt;/beans&gt;</span>
</code></pre></div></div>

<ul>
  <li>userRepositoryì™€ userServiceë¥¼ ë¹ˆìœ¼ë¡œ ë“±ë¡í•¨</li>
</ul>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">ApplicationContext</span> <span class="n">context</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ClassPathXmlApplicationContext</span><span class="o">(</span><span class="s">"application-config.xml"</span><span class="o">);</span>

<span class="n">String</span><span class="o">[]</span> <span class="n">beanDefinitionNames</span> <span class="o">=</span> <span class="n">context</span><span class="o">.</span><span class="na">getBeanDefinitionNames</span><span class="o">();</span>
</code></pre></div></div>

<ul>
  <li><code class="highlighter-rouge">ClassPathXmlApplicationContext</code>ë¡œ í•´ë‹¹ XMLíŒŒì¼ì„ ë¡œë“œí•´ì˜¨ë‹¤.</li>
  <li><code class="highlighter-rouge">getBeanDefinitionNames()</code> : ë“±ë¡ëœ ë¹ˆì´ë¦„ì„ ê°€ì ¸ì˜¨ë‹¤.</li>
</ul>

<h3 id="java-bean-configuration">java bean configuration</h3>

<h4 id="í•™ìŠµ-í…ŒìŠ¤íŠ¸-ì½”ë“œ">í•™ìŠµ í…ŒìŠ¤íŠ¸ ì½”ë“œ</h4>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">class</span> <span class="nc">JavaConfigTest</span> <span class="o">{</span>
    <span class="nd">@Test</span>
    <span class="kt">void</span> <span class="nf">javaConfig</span><span class="o">()</span> <span class="o">{</span>
        <span class="n">ApplicationContext</span> <span class="n">context</span> <span class="o">=</span> <span class="k">new</span> <span class="n">AnnotationConfigApplicationContext</span><span class="o">(</span><span class="n">HelloApplication</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
        <span class="n">String</span><span class="o">[]</span> <span class="n">beanDefinitionNames</span> <span class="o">=</span> <span class="n">context</span><span class="o">.</span><span class="na">getBeanDefinitionNames</span><span class="o">();</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">Arrays</span><span class="o">.</span><span class="na">toString</span><span class="o">(</span><span class="n">beanDefinitionNames</span><span class="o">));</span>

        <span class="n">AuthService</span> <span class="n">authService</span> <span class="o">=</span> <span class="n">context</span><span class="o">.</span><span class="na">getBean</span><span class="o">(</span><span class="n">AuthService</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
        <span class="n">assertThat</span><span class="o">(</span><span class="n">authService</span><span class="o">).</span><span class="na">isNotNull</span><span class="o">();</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<ul>
  <li>HelloApplication í´ë˜ìŠ¤ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ë¹ˆ ë“±ë¡ì„ í•  ê²ƒì´ë‹¤.</li>
</ul>

<h4 id="authenticationprincipalconfig">AuthenticationPrincipalConfig</h4>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Java-based Configurationì„ í•˜ê¸° ìœ„í•œ í´ë˜ìŠ¤ë¡œ ì§€ì •í•˜ê¸°</span>
<span class="nd">@Configuration</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">AuthenticationPrincipalConfig</span> <span class="o">{</span>

    <span class="c1">// AuthService ë¹ˆì„ ë“±ë¡í•˜ê¸°</span>
    <span class="nd">@Bean</span>
    <span class="kd">public</span> <span class="n">AuthService</span> <span class="nf">authService</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="k">new</span> <span class="nf">AuthService</span><span class="o">();</span>
    <span class="o">}</span>

    <span class="c1">// AuthenticationPrincipalArgumentResolverë¥¼ ë¹ˆ ë“±ë¡í•˜ê³  authServiceì— ëŒ€í•œ ì˜ì¡´ì„±ì„ ì£¼ì…í•˜ê¸°</span>
    <span class="nd">@Bean</span>
    <span class="kd">public</span> <span class="n">AuthenticationPrincipalArgumentResolver</span> <span class="nf">authenticationPrincipalArgumentResolver</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="k">new</span> <span class="nf">AuthenticationPrincipalArgumentResolver</span><span class="o">(</span><span class="n">authService</span><span class="o">());</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<ul>
  <li><code class="highlighter-rouge">@Configuration</code> : ë©”íƒ€ ë°ì´í„°ë¥¼ ì„¤ì •í•  ìˆ˜ ìˆëŠ” í´ë˜ìŠ¤ê°€ ëœë‹¤.</li>
  <li><code class="highlighter-rouge"> @Bean</code> ê³¼ íŠ¹ì • ê°ì²´ë¥¼ ë°˜í™˜í•˜ëŠ” ë©”ì„œë“œë¡œ í•´ë‹¹ ê°ì²´ë¥¼ ë¹ˆìœ¼ë¡œ ë“±ë¡í•  ìˆ˜ ìˆë‹¤.</li>
  <li>ë¹ˆë“¤ì˜ ì˜ì¡´ì„± ë˜í•œ ì§ì ‘ ë§ºì–´ì¤„ ìˆ˜ ìˆë‹¤.</li>
</ul>

<p><strong>@Configuration í´ë˜ìŠ¤ë„ ë¹ˆ ë“±ë¡ì´ ë˜ë‚˜ìš”?</strong></p>

<p>ğŸ™†â€â™€ï¸</p>

<p><strong>@Configuration í´ë˜ìŠ¤ì˜ ë©”ì„œë“œ ìˆœì„œì™€ ë¹ˆ ë“±ë¡ ìˆœì„œëŠ” ìƒê´€ì´ ì—†ë‚˜ìš”?</strong></p>

<p>ğŸ™†â€â™€ï¸</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Test</span>
<span class="kt">void</span> <span class="nf">useSpringBean</span><span class="o">()</span> <span class="o">{</span>
    <span class="n">ApplicationContext</span> <span class="n">context</span> <span class="o">=</span> <span class="k">new</span> <span class="n">AnnotationConfigApplicationContext</span><span class="o">(</span><span class="n">HelloApplication</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
    <span class="n">String</span><span class="o">[]</span> <span class="n">beanDefinitionNames</span> <span class="o">=</span> <span class="n">context</span><span class="o">.</span><span class="na">getBeanDefinitionNames</span><span class="o">();</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">Arrays</span><span class="o">.</span><span class="na">toString</span><span class="o">(</span><span class="n">beanDefinitionNames</span><span class="o">));</span>

    <span class="n">AuthService</span> <span class="n">authService</span> <span class="o">=</span> <span class="n">context</span><span class="o">.</span><span class="na">getBean</span><span class="o">(</span><span class="n">AuthService</span><span class="o">.</span><span class="na">class</span><span class="o">);</span> <span class="c1">// ì‹±ê¸€í†¤ // new AuthService()ì´ë‹ˆê¹Œ</span>
    <span class="n">AuthenticationPrincipalArgumentResolver</span> <span class="n">resolver</span> <span class="o">=</span> <span class="n">context</span><span class="o">.</span><span class="na">getBean</span><span class="o">(</span><span class="n">AuthenticationPrincipalArgumentResolver</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
    <span class="n">assertThat</span><span class="o">(</span><span class="n">resolver</span><span class="o">.</span><span class="na">getAuthService</span><span class="o">()).</span><span class="na">isEqualTo</span><span class="o">(</span><span class="n">authService</span><span class="o">);</span>
<span class="o">}</span>
</code></pre></div></div>

<p><strong>resolverì— ìˆëŠ” AuthService ê°ì²´ì™€ ë¹ˆìœ¼ë¡œ ë“±ë¡ëœ AuthServiceê°€ ê°™ì€ ê°ì²´ì¸ê°€?</strong></p>

<p>ğŸ™†â€â™€ï¸</p>

<hr />

<h2 id="ì™¸ë¶€-íŒŒì¼ì˜-ê°’ì„-ì´ìš©í•˜ê¸°">ì™¸ë¶€ íŒŒì¼ì˜ ê°’ì„ ì´ìš©í•˜ê¸°</h2>

<h3 id="properties-íŒŒì¼-ì ‘ê·¼">properties íŒŒì¼ ì ‘ê·¼</h3>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Java-based Configurationì„ í•˜ê¸° ìœ„í•œ í´ë˜ìŠ¤ë¡œ ì§€ì •í•˜ê¸°</span>
<span class="c1">// application.properties íŒŒì¼ì„ í™œìš©í•˜ê¸° ìœ„í•œ ì„¤ì • ì¶”ê°€í•˜ê¸°</span>
<span class="nd">@Configuration</span>
<span class="nd">@PropertySource</span><span class="o">(</span><span class="s">"classpath:application.properties"</span><span class="o">)</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">PropertySourceConfig</span> <span class="o">{</span>

    <span class="kd">private</span> <span class="kd">final</span> <span class="n">Environment</span> <span class="n">env</span><span class="o">;</span>

    <span class="kd">public</span> <span class="nf">PropertySourceConfig</span><span class="o">(</span><span class="n">Environment</span> <span class="n">env</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">env</span> <span class="o">=</span> <span class="n">env</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="c1">// application.propertiesì˜ security-jwt-token-secret-key ê°’ì„ í™œìš©í•˜ì—¬ JwtTokenKeyProviderë¥¼ ë¹ˆìœ¼ë¡œ ë“±ë¡í•˜ê¸°</span>
    <span class="nd">@Bean</span>
    <span class="kd">public</span> <span class="n">JwtTokenKeyProvider</span> <span class="nf">jwtTokenKeyProvider</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="k">new</span> <span class="nf">JwtTokenKeyProvider</span><span class="o">(</span><span class="s">"security-jwt-token-secret-key"</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<ul>
  <li>Environment ë¼ëŠ” í•„ë“œê°€ ìˆë‹¤.</li>
</ul>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Test</span>
<span class="kt">void</span> <span class="nf">key</span><span class="o">()</span> <span class="o">{</span>
    <span class="n">ApplicationContext</span> <span class="n">context</span> <span class="o">=</span> <span class="k">new</span> <span class="n">AnnotationConfigApplicationContext</span><span class="o">(</span><span class="n">PropertySourceConfig</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
    <span class="n">String</span><span class="o">[]</span> <span class="n">beanDefinitionNames</span> <span class="o">=</span> <span class="n">context</span><span class="o">.</span><span class="na">getBeanDefinitionNames</span><span class="o">();</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">Arrays</span><span class="o">.</span><span class="na">toString</span><span class="o">(</span><span class="n">beanDefinitionNames</span><span class="o">));</span>

    <span class="n">JwtTokenKeyProvider</span> <span class="n">jwtTokenKeyProvider</span> <span class="o">=</span> <span class="n">context</span><span class="o">.</span><span class="na">getBean</span><span class="o">(</span><span class="n">JwtTokenKeyProvider</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
    <span class="n">assertThat</span><span class="o">(</span><span class="n">jwtTokenKeyProvider</span><span class="o">.</span><span class="na">getSecretKey</span><span class="o">()).</span><span class="na">isEqualTo</span><span class="o">(</span><span class="s">"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIiLCJuYW1lIjoiSm9obiBEb2UiLCJpYXQiOjE1MTYyMzkwMjJ9.ih1aovtQShabQ7l0cINw4k1fagApg3qLWiB8Kt59Lno"</span><span class="o">);</span>
<span class="o">}</span>
</code></pre></div></div>

<ul>
  <li><code class="highlighter-rouge">PropertySourceConfig</code> í´ë˜ìŠ¤ë¡œ ì»¨í…ìŠ¤íŠ¸ë¥¼ ë§Œë“ ë‹¤.</li>
  <li>ì‚¬ì‹¤ ì´ propertiesë¥¼ ê°ì²´ë¡œ ë§Œë“¤ì–´ ì ‘ê·¼í•  ìˆ˜ë„ ìˆë‹¤.</li>
</ul>

<h3 id="value-ì£¼ì…">@Value ì£¼ì…</h3>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// ì»´í¬ë„ŒíŠ¸ ìŠ¤ìº”ì„ í†µí•œ ë¹ˆ ë“±ë¡</span>
<span class="nd">@Component</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">JwtTokenExpireProvider</span> <span class="o">{</span>
    <span class="c1">// application.propertiesì˜ security-jwt-token-expire-length ê°’ì„ í™œìš©í•˜ì—¬ validityInMillisecondsê°’ ì´ˆê¸°í™” í•˜ê¸°</span>
    <span class="kd">private</span> <span class="kt">long</span> <span class="n">validityInMilliseconds</span><span class="o">;</span>

    <span class="kd">public</span> <span class="nf">JwtTokenExpireProvider</span><span class="o">(</span><span class="nd">@Value</span><span class="o">(</span><span class="s">"${security-jwt-token-expire-length}"</span><span class="o">)</span> <span class="kt">long</span> <span class="n">validityInMilliseconds</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">validityInMilliseconds</span> <span class="o">=</span> <span class="n">validityInMilliseconds</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kt">long</span> <span class="nf">getValidityInMilliseconds</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">validityInMilliseconds</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Java-based Configurationì„ í•˜ê¸° ìœ„í•œ í´ë˜ìŠ¤ë¡œ ì§€ì •í•˜ê¸°</span>
<span class="c1">// application.properties íŒŒì¼ì„ í™œìš©í•˜ê¸° ìœ„í•œ ì„¤ì • ì¶”ê°€í•˜ê¸°</span>
<span class="c1">// nextstep.helloworld.core.environment ë‚´ì— ìˆëŠ” ìŠ¤í”„ë§ ë¹ˆì„ ìŠ¤ìº”í•˜ê¸°</span>
<span class="nd">@Configuration</span>
<span class="nd">@PropertySource</span><span class="o">(</span><span class="s">"classpath:application.properties"</span><span class="o">)</span>
<span class="nd">@ComponentScan</span><span class="o">(</span><span class="s">"nextstep.helloworld.core.environment"</span><span class="o">)</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">ValueConfig</span> <span class="o">{</span>
<span class="o">}</span>
</code></pre></div></div>

<p><strong>í™˜ê²½ì— ë”°ë¼ properties ì„¤ì •ì´ ê°€ëŠ¥í•œê°€ìš”?</strong></p>

<p>ğŸ™†â€â™€ï¸ í™˜ê²½ì— ë§ê²Œ deployí•˜ê¸° - profile</p>

<hr />

<h2 id="ìŠ¤í”„ë§-ì»¨í…Œì´ë„ˆ-ì„¤ì •-ë°©ë²•-íˆìŠ¤í† ë¦¬">ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆ ì„¤ì • ë°©ë²• íˆìŠ¤í† ë¦¬</h2>

<p><img src="https://images.velog.io/images/new_wisdom/post/55f6f1f7-1e78-4099-814c-d884510efb89/image.png" style="zoom:67%;" /></p>

<p>ì»¨í…Œì´ë„ˆ ì„¤ì •ì„ í•  ë•ŒëŠ” ë©”íƒ€ì •ë³´ë¥¼ í†µí•´ ì´ë£¨ì–´ì§„ë‹¤.</p>

<p>ë§¨ ì²˜ìŒì—ëŠ” <strong>XMLê¸°ë°˜</strong>ìœ¼ë¡œ ì§„í–‰ë˜ì—ˆë‹¤.<br />
ì´ëŸ¬ë©´ í”„ë¡œë•ì…˜ ì½”ë“œì™€ ì˜ì¡´ ê´€ê³„, ë¹ˆ ë“±ë¡ ì •ë³´ë¥¼ ë¶„ë¦¬í•  ìˆ˜ ìˆì—ˆë‹¤.</p>

<p>ì´í›„ <strong>ì–´ë…¸í…Œì´ì…˜ ê¸°ë°˜</strong>ì´ ë“±ì¥í•˜ë©´ì„œ XMLê³¼ í˜¼ìš©í•˜ì—¬ ì‚¬ìš©í•˜ì˜€ë‹¤.<br />
ë“±ë¡í•  ë¹ˆë“¤ì„ ì–´ë…¸í…Œì´ì…˜ìœ¼ë¡œ ê´€ë¦¬í•˜ì˜€ë‹¤.</p>

<p>Spring 3.0ë¶€í„°ëŠ” <strong>Java Bean ê¸°ë°˜</strong>ìœ¼ë¡œ ì´ë£¨ì–´ì¡Œë‹¤.<br />
XMLë¡œ ê´€ë¦¬í•˜ë˜ ë‚´ìš©ë“¤ì„ Bean ë“±ë¡ì„ í†µí•´ ê´€ë¦¬í•˜ì˜€ë‹¤.</p>

<hr />

<h3 id="auto-configuration">Auto Configuration?</h3>

<ul>
  <li><strong>jar dependency ê¸°ë°˜</strong>ìœ¼ë¡œ ìŠ¤í”„ë§ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ìë™ìœ¼ë¡œ ì„¤ì •í•´ì¤€ë‹¤.</li>
</ul>

<p>ë³„ë‹¤ë¥¸ ì„¤ì •ì„ í•˜ì§€ ì•Šì•˜ëŠ”ë°ë„, DB ë“±ì— ê´€ë ¨í•œ ê²ƒë“¤ì„ ë§ˆìŒ ê» ì“¸ ìˆ˜ ìˆì—ˆë‹¤.</p>

<p><img src="https://images.velog.io/images/new_wisdom/post/01ebb7bc-6306-49f3-9b00-5f4e9e62682e/image.png" style="zoom:67%;" /></p>

<p>ê·¸ ì´ìœ ëŠ” <code class="highlighter-rouge">@SpringBootApplication</code> ì— ìˆëŠ” <code class="highlighter-rouge">@EnableAutoConfiguration</code> ë•ë¶„ì´ë‹¤.</p>

<p><img src="https://images.velog.io/images/new_wisdom/post/b2b3a167-8bab-45e0-ae77-20ac1ee0521e/image.png" style="zoom:33%;" /></p>

<p>ì»¨í…ìŠ¤íŠ¸ë¥¼ ë¡œë“œí•˜ë©´ ì´ì •ë„ì˜ AutoConfigurationë“¤ì´ ë“±ë¡ëœë‹¤.</p>

<p>ex) jdbcTemplateì„ ìƒì„±í•´ì£¼ì§€ ì•Šì•˜ëŠ”ë°ë„ ìë™ìœ¼ë¡œ ì£¼ì…ëœë‹¤.</p>

<p><img src="https://images.velog.io/images/new_wisdom/post/a4b8b58e-311e-4c72-8f15-8f3c3287666d/image.png" style="zoom:50%;" /></p>

<p><strong>ë¹ˆìœ¼ë¡œ ë“±ë¡ë˜ì§€ ì•Šì€ í´ë˜ìŠ¤ë¥¼ ì‚¬ìš©í•˜ë©´ ì»´íŒŒì¼ ì—ëŸ¬ê°€ ë– ì•¼í•˜ëŠ”ë° ë‚˜ì§€ ì•ŠëŠ” ì´ìœ ëŠ”?</strong></p>

<p><code class="highlighter-rouge">@ConditionalOnClass</code> ë•ë¶„ì´ë‹¤.</p>

<p><img src="https://images.velog.io/images/new_wisdom/post/a24ebfbc-d8dd-4cca-9e92-07163b4e6e85/image.png" style="zoom:50%;" /></p>

<ul>
  <li>DataSource, JdbcTemplateì´ ë¡œë“œê°€ ë˜ë©´ ë™ì‘í•œë‹¤.</li>
</ul>

<h4 id="h2consoleautoconfiguration">H2ConsoleAutoConfiguration</h4>

<p>h2 DBì„¤ì •ì„ í•´ì£¼ì§€ ì•Šì•˜ëŠ”ë°ë„ h2ì™€ ê´€ë ¨ëœ ì„¤ì •ì´ ìë™ìœ¼ë¡œ ëœë‹¤.</p>

<p><img src="https://images.velog.io/images/new_wisdom/post/95850513-5786-4b7a-b2e0-efc5d5680cf2/image.png" style="zoom:67%;" /></p>

<p>ì´ê²ƒë„ ì´ë¯¸ ë“±ë¡ë˜ì–´ìˆê¸° ë•Œë¬¸ì— ê°€ëŠ¥í•˜ë‹¤.</p>

	  ]]></description>
	</item>

	<item>
	  <title>ğŸ“‹ Spring MVC - 4. MVC í”„ë ˆì„ì›Œí¬ ë§Œë“¤ê¸°</title>
	  <link>//spring-mvc-4</link>
	  <author></author>
	  <pubDate>2021-05-04T19:18:00+09:00</pubDate>
	  <guid>//spring-mvc-4</guid>
	  <description><![CDATA[
	     <h2 id="mvc-í”„ë ˆì„ì›Œí¬-ë§Œë“¤ê¸°">MVC í”„ë ˆì„ì›Œí¬ ë§Œë“¤ê¸°</h2>

<h2 id="í”„ë¡ íŠ¸-ì»¨íŠ¸ë¡¤ëŸ¬-íŒ¨í„´">í”„ë¡ íŠ¸ ì»¨íŠ¸ë¡¤ëŸ¬ íŒ¨í„´</h2>

<p>í”„ë¡ íŠ¸ ì»¨íŠ¸ë¡¤ëŸ¬ë„ ì„œë¸”ë¦¿ì´ë‹¤.<br />
ìš”ì²­ì„ ëª¨ë‘ ë°›ê³  ìš”ì²­ì— ë§ëŠ” ì»¨íŠ¸ë¡¤ëŸ¬ë¥¼ í˜¸ì¶œí•œë‹¤.</p>

<h3 id="íŠ¹ì§•">íŠ¹ì§•</h3>

<p>í”„ë¡ íŠ¸ ì»¨íŠ¸ë¡¤ëŸ¬ ì„œë¸”ë¦¿ í•˜ë‚˜ë¡œ í´ë¼ì´ì–¸íŠ¸ì˜ ìš”ì²­ì„ ë°›ê³ , ìš”ì²­ì— ë§ëŠ” ì»¨íŠ¸ë¡¤ëŸ¬ë¥¼ ì°¾ì•„ì„œ í˜¸ì¶œí•œë‹¤.<br />
ì…êµ¬ë¥¼ í•˜ë‚˜ë¡œ ë¬¶ëŠ”ë‹¤.<br />
í”„ë¡ íŠ¸ ì»¨íŠ¸ë¡¤ëŸ¬ë¥¼ ì œì™¸í•œ ë‚˜ë¨¸ì§€ ì»¨íŠ¸ë¡¤ëŸ¬ëŠ” ì„œë¸”ë¦¿ì„ ì‚¬ìš©í•˜ì§€ ì•Šì•„ë„ ëœë‹¤.</p>

<h3 id="ìŠ¤í”„ë§-ì›¹-mvcì™€-í”„ë¡ íŠ¸-ì»¨íŠ¸ë¡¤ëŸ¬">ìŠ¤í”„ë§ ì›¹ MVCì™€ í”„ë¡ íŠ¸ ì»¨íŠ¸ë¡¤ëŸ¬</h3>

<p>ìŠ¤í”„ë§ ì›¹ MVCì˜ í•µì‹¬ë„ ë°”ë¡œ FrontControllerì´ë‹¤. (DispatcherServletì´ í”„ë¡ íŠ¸ ì»¨íŠ¸ë¡¤ëŸ¬ íŒ¨í„´ìœ¼ë¡œ ë˜ì–´ìˆë‹¤.)</p>

<p><img src="https://images.velog.io/images/new_wisdom/post/b2493682-0c37-4a1c-93c4-f2ffd02e7862/image.png" style="zoom: 67%;" /></p>

<p>ControllerV1ì„ ì¸í„°í˜ì´ìŠ¤ë¡œ ë§Œë“¤ê³  ì´ë¥¼ êµ¬í˜„í•œ Controllerë“¤ì„ ë§Œë“ ë‹¤.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">MemberFormControllerV1</span> <span class="kd">implements</span> <span class="n">ControllerV1</span> <span class="o">{</span>
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">process</span><span class="o">(</span><span class="n">HttpServletRequest</span> <span class="n">request</span><span class="o">,</span> <span class="n">HttpServletResponse</span> <span class="n">response</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">ServletException</span><span class="o">,</span> <span class="n">IOException</span> <span class="o">{</span>
        <span class="n">String</span> <span class="n">viewPath</span> <span class="o">=</span> <span class="s">"/WEB-INF/views/new-form.jsp"</span><span class="o">;</span>
        <span class="n">RequestDispatcher</span> <span class="n">requestDispatcher</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="na">getRequestDispatcher</span><span class="o">(</span><span class="n">viewPath</span><span class="o">);</span> <span class="c1">// ì»¨íŠ¸ë¡¤ëŸ¬ì—ì„œ ë·°ë¡œ ì´ë™</span>
        <span class="n">requestDispatcher</span><span class="o">.</span><span class="na">forward</span><span class="o">(</span><span class="n">request</span><span class="o">,</span> <span class="n">response</span><span class="o">);</span> <span class="c1">// ì„œë¸”ë¦¿ì—ì„œ JSPë¥¼ í˜¸ì¶œí•œë‹¤.</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<h4 id="frontcontrollerservletv1">FrontControllerServletV1</h4>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@WebServlet</span><span class="o">(</span><span class="n">name</span> <span class="o">=</span> <span class="s">"frontControllerServletV1"</span><span class="o">,</span> <span class="n">urlPatterns</span> <span class="o">=</span> <span class="s">"/front-controller/v1/*"</span><span class="o">)</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">FrontControllerServletV1</span> <span class="kd">extends</span> <span class="n">HttpServlet</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">ControllerV1</span><span class="o">&gt;</span> <span class="n">controllerMap</span> <span class="o">=</span> <span class="k">new</span> <span class="n">HashMap</span><span class="o">&lt;&gt;();</span>

    <span class="kd">public</span> <span class="nf">FrontControllerServletV1</span><span class="o">(</span><span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">ControllerV1</span><span class="o">&gt;</span> <span class="n">controllerMap</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">controllerMap</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"/front-controller/v1/members/new-form"</span><span class="o">,</span>
                <span class="k">new</span> <span class="nf">MemberFormControllerV1</span><span class="o">());</span>
        <span class="n">controllerMap</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"/front-controller/v1/members/save"</span><span class="o">,</span>
                <span class="k">new</span> <span class="nf">MemberSaveControllerV1</span><span class="o">());</span>
        <span class="n">controllerMap</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"/front-controller/v1/members"</span><span class="o">,</span>
                <span class="k">new</span> <span class="nf">MemberListControllerV1</span><span class="o">());</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">protected</span> <span class="kt">void</span> <span class="nf">service</span><span class="o">(</span><span class="n">HttpServletRequest</span> <span class="n">req</span><span class="o">,</span> <span class="n">HttpServletResponse</span> <span class="n">resp</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">ServletException</span><span class="o">,</span> <span class="n">IOException</span> <span class="o">{</span>
        <span class="n">String</span> <span class="n">requestURI</span> <span class="o">=</span> <span class="n">req</span><span class="o">.</span><span class="na">getRequestURI</span><span class="o">();</span>
        <span class="n">ControllerV1</span> <span class="n">controller</span> <span class="o">=</span> <span class="n">controllerMap</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">requestURI</span><span class="o">);</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">controller</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">resp</span><span class="o">.</span><span class="na">setStatus</span><span class="o">(</span><span class="n">HttpServletResponse</span><span class="o">.</span><span class="na">SC_NOT_FOUND</span><span class="o">);</span>
            <span class="k">return</span><span class="o">;</span>
        <span class="o">}</span>
        <span class="n">controller</span><span class="o">.</span><span class="na">process</span><span class="o">(</span><span class="n">req</span><span class="o">,</span> <span class="n">resp</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<p>Controller ì •ë³´ë¥¼ ê°€ì§„ ì„œë¸”ë¦¿ì¸ FrontContollerë¥¼ êµ¬í˜„í•œë‹¤.</p>

<ul>
  <li><strong>urlPatterns</strong> :  â€œ/front-controller/v1/â€ë¥¼ í¬í•¨í•œ í•˜ìœ„ ëª¨ë“  ìš”ì²­ì„ í•˜ë‚˜ì˜ ì„œë¸”ë¦¿ì—ì„œ ë°›ì•„ë“¤ì¸ë‹¤.</li>
  <li><strong>controllerMap</strong> : key-ë§¤í•‘ URL, value-í˜¸ì¶œë  ì»¨íŠ¸ë¡¤ëŸ¬</li>
  <li><strong>service()</strong> : reqeustURIë¥¼ ì¡°íšŒí•˜ì—¬ ì‹¤ì œ í˜¸ì¶œí•  ì»¨íŠ¸ë¡¤ëŸ¬ë¥¼ ì°¾ê³  í•´ë‹¹ ì»¨íŠ¸ë¡¤ëŸ¬ë¥¼ ì‹¤í–‰(<code class="highlighter-rouge">process()</code>)í•œë‹¤.</li>
</ul>

<p>ì—¬ëŸ¬ Controllerì™€ ì„œë¸”ë¦¿ì´ í•˜ë‚˜ì˜ JSPë¥¼ ì¬ì‚¬ìš©í•˜ê³  ìˆë‹¤.</p>

<hr />

<h2 id="view-ë¶„ë¦¬">View ë¶„ë¦¬</h2>

<p>Controllerì—ì„œ Viewë¡œ ì´ë™í•˜ëŠ” ë¶€ë¶„ì´ ì¤‘ë³µëœë‹¤.<br />
ControllerëŠ” MyViewë§Œ ë°˜í™˜í•´ì£¼ë©´ ëœë‹¤.</p>

<h4 id="controllerv2">ControllerV2</h4>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">interface</span> <span class="nc">ControllerV2</span> <span class="o">{</span>
    <span class="n">MyView</span> <span class="nf">process</span><span class="o">(</span><span class="n">HttpServletRequest</span> <span class="n">request</span><span class="o">,</span> <span class="n">HttpServletResponse</span> <span class="n">response</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">ServletException</span><span class="o">,</span> <span class="n">IOException</span><span class="o">;</span>
<span class="o">}</span>
</code></pre></div></div>

<ul>
  <li>ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•˜ë¯€ë¡œ ë°˜í™˜ íƒ€ì…ì„ ë§ì¶œ ìˆ˜ ìˆë‹¤.</li>
</ul>

<h4 id="myview">MyView</h4>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">MyView</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="n">String</span> <span class="n">viewPath</span><span class="o">;</span>

    <span class="kd">public</span> <span class="nf">MyView</span><span class="o">(</span><span class="n">String</span> <span class="n">viewPath</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">viewPath</span> <span class="o">=</span> <span class="n">viewPath</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">render</span><span class="o">(</span><span class="n">HttpServletRequest</span> <span class="n">request</span><span class="o">,</span> <span class="n">HttpServletResponse</span> <span class="n">response</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">ServletException</span><span class="o">,</span> <span class="n">IOException</span> <span class="o">{</span>
        <span class="n">RequestDispatcher</span> <span class="n">dispatcher</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="na">getRequestDispatcher</span><span class="o">(</span><span class="n">viewPath</span><span class="o">);</span>
        <span class="n">dispatcher</span><span class="o">.</span><span class="na">forward</span><span class="o">(</span><span class="n">request</span><span class="o">,</span> <span class="n">response</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<h4 id="memberformcontrollerv2">MemberFormControllerV2</h4>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">MemberFormControllerV2</span> <span class="kd">implements</span> <span class="n">ControllerV2</span> <span class="o">{</span>
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="n">MyView</span> <span class="nf">process</span><span class="o">(</span><span class="n">HttpServletRequest</span> <span class="n">request</span><span class="o">,</span> <span class="n">HttpServletResponse</span> <span class="n">response</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">ServletException</span><span class="o">,</span> <span class="n">IOException</span> <span class="o">{</span>
        <span class="k">return</span> <span class="k">new</span> <span class="nf">MyView</span><span class="o">(</span><span class="s">"/WEB-INF/views/new-form.jsp"</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<ul>
  <li>viewPathë¥¼ ê°€ì§€ê³  ìˆëŠ” MyView ê°ì²´ë¥¼ ë°˜í™˜í•œë‹¤.</li>
</ul>

<h4 id="frontcontrollerservletv2">FrontControllerServletV2</h4>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@WebServlet</span><span class="o">(</span><span class="n">name</span> <span class="o">=</span> <span class="s">"frontControllerServletV2"</span><span class="o">,</span> <span class="n">urlPatterns</span> <span class="o">=</span> <span class="s">"/front-controller/v2/*"</span><span class="o">)</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">FrontControllerServletV2</span> <span class="kd">extends</span> <span class="n">HttpServlet</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">ControllerV2</span><span class="o">&gt;</span> <span class="n">controllerMap</span> <span class="o">=</span> <span class="k">new</span> <span class="n">HashMap</span><span class="o">&lt;&gt;();</span>

    <span class="kd">public</span> <span class="nf">FrontControllerServletV2</span><span class="o">(</span><span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">ControllerV2</span><span class="o">&gt;</span> <span class="n">controllerMap</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">controllerMap</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"/front-controller/v2/members/new-form"</span><span class="o">,</span>
                <span class="k">new</span> <span class="nf">MemberFormControllerV2</span><span class="o">());</span>
        <span class="n">controllerMap</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"/front-controller/v2/members/save"</span><span class="o">,</span>
                <span class="k">new</span> <span class="nf">MemberSaveControllerV2</span><span class="o">());</span>
        <span class="n">controllerMap</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"/front-controller/v2/members"</span><span class="o">,</span>
                <span class="k">new</span> <span class="nf">MemberListControllerV2</span><span class="o">());</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">protected</span> <span class="kt">void</span> <span class="nf">service</span><span class="o">(</span><span class="n">HttpServletRequest</span> <span class="n">req</span><span class="o">,</span> <span class="n">HttpServletResponse</span> <span class="n">resp</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">ServletException</span><span class="o">,</span> <span class="n">IOException</span> <span class="o">{</span>
        <span class="n">String</span> <span class="n">requestURI</span> <span class="o">=</span> <span class="n">req</span><span class="o">.</span><span class="na">getRequestURI</span><span class="o">();</span>
        <span class="n">ControllerV2</span> <span class="n">controller</span> <span class="o">=</span> <span class="n">controllerMap</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">requestURI</span><span class="o">);</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">controller</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">resp</span><span class="o">.</span><span class="na">setStatus</span><span class="o">(</span><span class="n">HttpServletResponse</span><span class="o">.</span><span class="na">SC_NOT_FOUND</span><span class="o">);</span>
            <span class="k">return</span><span class="o">;</span>
        <span class="o">}</span>
        <span class="n">MyView</span> <span class="n">view</span> <span class="o">=</span> <span class="n">controller</span><span class="o">.</span><span class="na">process</span><span class="o">(</span><span class="n">req</span><span class="o">,</span> <span class="n">resp</span><span class="o">);</span>
        <span class="n">view</span><span class="o">.</span><span class="na">render</span><span class="o">(</span><span class="n">req</span><span class="o">,</span> <span class="n">resp</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<hr />

<h2 id="model-ì¶”ê°€">Model ì¶”ê°€</h2>

<p><img src="https://images.velog.io/images/new_wisdom/post/9a6ede47-f242-4b1f-a88e-08f055df0508/image.png" style="zoom:67%;" /></p>

<h3 id="ì„œë¸”ë¦¿-ì¢…ì†ì„±-ì¶”ê°€">ì„œë¸”ë¦¿ ì¢…ì†ì„± ì¶”ê°€</h3>

<p>ì»¨íŠ¸ë¡¤ëŸ¬ ì…ì¥ì—ì„œ <code class="highlighter-rouge">HttpServletRequest</code>, <code class="highlighter-rouge">HttpServletResponse</code>ê°€ í•„ìš”í•˜ì§€ ì•Šë‹¤.<br />
ìš”ì²­ íŒŒë¼ë¯¸í„°ë¥¼ Mapìœ¼ë¡œ ë„˜ê¸°ë©´ ì»¨íŠ¸ë¡¤ëŸ¬ê°€ ì„œë¸”ë¦¿ì´ ì•„ë‹ˆì–´ë„ ë™ì‘í•  ìˆ˜ ìˆë‹¤.</p>

<h3 id="ë·°-ì´ë¦„-ì¤‘ë³µ-ì œê±°">ë·° ì´ë¦„ ì¤‘ë³µ ì œê±°</h3>

<p>í˜„ì¬ ì»¨íŠ¸ë¡¤ëŸ¬ì—ì„œ ì§€ì •í•˜ëŠ” ë·° ì´ë¦„ì—ëŠ” ì¤‘ë³µ(<code class="highlighter-rouge">/WEB-INF/views/</code>)ì´ ì¡´ì¬í•œë‹¤.<br />
ì»¨íŠ¸ë¡¤ëŸ¬ëŠ” ë·°ì˜ ë…¼ë¦¬ ì´ë¦„ì„ ë°˜í™˜í•˜ê³ , ë¬¼ë¦¬ ì´ë¦„ì€ í”„ë¡ íŠ¸ ì»¨íŠ¸ë¡¤ëŸ¬ì—ì„œ ì²˜ë¦¬í•˜ë„ë¡ ë³€ê²½í•´ë³´ì.<br />
ë…¼ë¦¬ì  ë¬¼ë¦¬ì  ì´ë¦„ì„ êµ¬ë¶„í•˜ë©´ ë‚˜ì¤‘ì— ë³€ê²½í•  ë•Œ ì»¨íŠ¸ë¡¤ëŸ¬ë¥¼ ë³€ê²½í•  ì¼ì´ ì—†ë‹¤.</p>

<h3 id="modelview">ModelView</h3>

<p>Modelì„ ì „ë‹¬í•˜ê¸° ìœ„í•´ì„œ <code class="highlighter-rouge">request.setAttribute()</code> ë¥¼ ì‚¬ìš©í•˜ì—¬ ë°ì´í„°ë¥¼ ì €ì¥í•˜ê³  ë·°ì— ì „ë‹¬í–ˆë‹¤.<br />
ì„œë¸”ë¦¿ì˜ ì¢…ì†ì„±ì„ ì œê±°í•˜ê¸° ìœ„í•´, Modelì„ ë”°ë¡œ ë§Œë“¤ê³  View ì´ë¦„ê¹Œì§€ ì „ë‹¬í•˜ëŠ” ê°ì²´ë¥¼ ë§Œë“ ë‹¤.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">ModelView</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="n">String</span> <span class="n">viewName</span><span class="o">;</span>
    <span class="kd">private</span> <span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">Object</span><span class="o">&gt;</span> <span class="n">model</span> <span class="o">=</span> <span class="k">new</span> <span class="n">HashMap</span><span class="o">&lt;&gt;();</span>

    <span class="kd">public</span> <span class="nf">ModelView</span><span class="o">(</span><span class="n">String</span> <span class="n">viewName</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">viewName</span> <span class="o">=</span> <span class="n">viewName</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="c1">// ...</span>
<span class="o">}</span>
</code></pre></div></div>

<h4 id="controllerv3">ControllerV3</h4>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">interface</span> <span class="nc">ControllerV3</span> <span class="o">{</span>
    <span class="n">ModelView</span> <span class="nf">process</span><span class="o">(</span><span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">paramMap</span><span class="o">);</span>
<span class="o">}</span>
</code></pre></div></div>

<ul>
  <li>ModelViewë¥¼ ë°˜í™˜í•˜ë„ë¡ í•œë‹¤.</li>
</ul>

<h4 id="membersavecontrollerv3">MemberSaveControllerV3</h4>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">MemberSaveControllerV3</span> <span class="kd">implements</span> <span class="n">ControllerV3</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="n">MemberRepository</span> <span class="n">memberRepository</span> <span class="o">=</span> <span class="n">MemberRepository</span><span class="o">.</span><span class="na">getInstance</span><span class="o">();</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="n">ModelView</span> <span class="nf">process</span><span class="o">(</span><span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">paramMap</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">String</span> <span class="n">username</span> <span class="o">=</span> <span class="n">paramMap</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="s">"username"</span><span class="o">);</span>
        <span class="kt">int</span> <span class="n">age</span> <span class="o">=</span> <span class="n">Integer</span><span class="o">.</span><span class="na">parseInt</span><span class="o">(</span><span class="n">paramMap</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="s">"age"</span><span class="o">));</span>

        <span class="n">Member</span> <span class="n">member</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Member</span><span class="o">(</span><span class="n">username</span><span class="o">,</span> <span class="n">age</span><span class="o">);</span>
        <span class="n">memberRepository</span><span class="o">.</span><span class="na">save</span><span class="o">(</span><span class="n">member</span><span class="o">);</span>

        <span class="n">ModelView</span> <span class="n">mv</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ModelView</span><span class="o">(</span><span class="s">"save-result"</span><span class="o">);</span>
        <span class="n">mv</span><span class="o">.</span><span class="na">getModel</span><span class="o">().</span><span class="na">put</span><span class="o">(</span><span class="s">"member"</span><span class="o">,</span> <span class="n">member</span><span class="o">);</span>
        <span class="k">return</span> <span class="n">mv</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<ul>
  <li>ë…¼ë¦¬ ì´ë¦„ì„ ModelView ê°ì²´ì— ë„£ì–´ ìƒì„±í•˜ë„ë¡ í•œë‹¤.</li>
  <li>ëª¨ë¸ì— ë·°ì— í•„ìš”í•œ ê°ì²´ë¥¼ ë‹´ê³  ModelView ê°ì²´ë¥¼ ë°˜í™˜í•œë‹¤.</li>
</ul>

<h4 id="frontcontrollerservletv3-ì¼ë¶€">FrontControllerServletV3 ì¼ë¶€</h4>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Override</span>
<span class="kd">protected</span> <span class="kt">void</span> <span class="nf">service</span><span class="o">(</span><span class="n">HttpServletRequest</span> <span class="n">req</span><span class="o">,</span> <span class="n">HttpServletResponse</span> <span class="n">resp</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">ServletException</span><span class="o">,</span> <span class="n">IOException</span> <span class="o">{</span>
        <span class="n">String</span> <span class="n">requestURI</span> <span class="o">=</span> <span class="n">req</span><span class="o">.</span><span class="na">getRequestURI</span><span class="o">();</span>
        <span class="n">ControllerV3</span> <span class="n">controller</span> <span class="o">=</span> <span class="n">controllerMap</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">requestURI</span><span class="o">);</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">controller</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">resp</span><span class="o">.</span><span class="na">setStatus</span><span class="o">(</span><span class="n">HttpServletResponse</span><span class="o">.</span><span class="na">SC_NOT_FOUND</span><span class="o">);</span>
            <span class="k">return</span><span class="o">;</span>
        <span class="o">}</span>

        <span class="c1">// param Map</span>
        <span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">paramMap</span> <span class="o">=</span> <span class="n">createParamMap</span><span class="o">(</span><span class="n">req</span><span class="o">);</span>
        <span class="n">ModelView</span> <span class="n">mv</span> <span class="o">=</span> <span class="n">controller</span><span class="o">.</span><span class="na">process</span><span class="o">(</span><span class="n">paramMap</span><span class="o">);</span>

        <span class="n">String</span> <span class="n">viewName</span> <span class="o">=</span> <span class="n">mv</span><span class="o">.</span><span class="na">getViewName</span><span class="o">();</span> <span class="c1">// ë…¼ë¦¬ ì´ë¦„ ex) new-form</span>
        <span class="n">MyView</span> <span class="n">view</span> <span class="o">=</span> <span class="n">viewResolver</span><span class="o">(</span><span class="n">viewName</span><span class="o">);</span>
        <span class="n">view</span><span class="o">.</span><span class="na">render</span><span class="o">(</span><span class="n">mv</span><span class="o">.</span><span class="na">getModel</span><span class="o">(),</span> <span class="n">req</span><span class="o">,</span> <span class="n">resp</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="kd">private</span> <span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="nf">createParamMap</span><span class="o">(</span><span class="n">HttpServletRequest</span> <span class="n">req</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">paramMap</span> <span class="o">=</span> <span class="k">new</span> <span class="n">HashMap</span><span class="o">&lt;&gt;();</span>
        <span class="n">req</span><span class="o">.</span><span class="na">getParameterNames</span><span class="o">().</span><span class="na">asIterator</span><span class="o">()</span>
                <span class="o">.</span><span class="na">forEachRemaining</span><span class="o">(</span><span class="n">paramName</span> <span class="o">-&gt;</span> <span class="n">paramMap</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="n">paramName</span><span class="o">,</span> <span class="n">req</span><span class="o">.</span><span class="na">getParameter</span><span class="o">(</span><span class="n">paramName</span><span class="o">)));</span>
        <span class="k">return</span> <span class="n">paramMap</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">private</span> <span class="n">MyView</span> <span class="nf">viewResolver</span><span class="o">(</span><span class="n">String</span> <span class="n">viewName</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">MyView</span> <span class="n">view</span> <span class="o">=</span> <span class="k">new</span> <span class="n">MyView</span><span class="o">(</span><span class="s">"/WEB-INF/views/"</span> <span class="o">+</span> <span class="n">viewName</span> <span class="o">+</span> <span class="s">".jsp"</span><span class="o">);</span>
        <span class="k">return</span> <span class="n">view</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<ul>
  <li><code class="highlighter-rouge">createParamMap()</code> : HttpServletRequestì˜ íŒŒë¼ë¯¸í„° ì •ë³´ë¥¼ Mapìœ¼ë¡œ ë³€ê²½í•œë‹¤.</li>
  <li><code class="highlighter-rouge">viewResolver()</code> : ì»¨íŠ¸ë¡¤ëŸ¬ê°€ ë°˜í™˜í•œ ë…¼ë¦¬ ë·° ì´ë¦„ì„ ì‹¤ì œ ë¬¼ë¦¬ ë·° ê²½ë¡œë¡œ ë³€ê²½í•œë‹¤.</li>
  <li><code class="highlighter-rouge">view.render(mv.getModel(), req, resp)</code> : ë·° ê°ì²´ë¥¼ í†µí•´  HTML í™”ë©´ì„ ë Œë”ë§í•œë‹¤.</li>
</ul>

<h4 id="myview-1">MyView</h4>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kt">void</span> <span class="nf">render</span><span class="o">(</span><span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">Object</span><span class="o">&gt;</span> <span class="n">model</span><span class="o">,</span> <span class="n">HttpServletRequest</span> <span class="n">req</span><span class="o">,</span> <span class="n">HttpServletResponse</span> <span class="n">resp</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">ServletException</span><span class="o">,</span> <span class="n">IOException</span> <span class="o">{</span>
    <span class="n">modelToRequestAttribute</span><span class="o">(</span><span class="n">model</span><span class="o">,</span> <span class="n">req</span><span class="o">);</span>
    <span class="n">RequestDispatcher</span> <span class="n">dispatcher</span> <span class="o">=</span> <span class="n">req</span><span class="o">.</span><span class="na">getRequestDispatcher</span><span class="o">(</span><span class="n">viewPath</span><span class="o">);</span>
    <span class="n">dispatcher</span><span class="o">.</span><span class="na">forward</span><span class="o">(</span><span class="n">req</span><span class="o">,</span> <span class="n">resp</span><span class="o">);</span>
<span class="o">}</span>
</code></pre></div></div>

<hr />

<h2 id="ë‹¨ìˆœí•˜ê³ -ì‹¤ìš©ì ì¸-ì»¨íŠ¸ë¡¤ëŸ¬">ë‹¨ìˆœí•˜ê³  ì‹¤ìš©ì ì¸ ì»¨íŠ¸ë¡¤ëŸ¬</h2>

<p>ì»¨íŠ¸ë¡¤ëŸ¬ ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•˜ë©´ì„œ í•­ìƒ ModelView ê°ì²´ë¥¼ ìƒì„±í•˜ê³  ë°˜í™˜í•´ì•¼ í•˜ëŠ” ë¶€ë¶„ì´ ë²ˆê±°ë¡­ë‹¤.<br />
ì»¨íŠ¸ë¡¤ëŸ¬ëŠ” Viewì˜ ì´ë¦„ë§Œ ë³€ê²½í•˜ë„ë¡, ì‹¤ìš©ì„± ìˆë„ë¡ ë³€ê²½í•œë‹¤.</p>

<h4 id="controllerv4">ControllerV4</h4>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">interface</span> <span class="nc">ControllerV4</span> <span class="o">{</span>
    <span class="cm">/**
     *
     * @param paramMap
     * @param model
     * @return viewName
     */</span>

    <span class="n">String</span> <span class="nf">process</span><span class="o">(</span><span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">paramMap</span><span class="o">,</span> <span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">Object</span><span class="o">&gt;</span> <span class="n">model</span><span class="o">);</span>
<span class="o">}</span>
</code></pre></div></div>

<ul>
  <li>view ì´ë¦„ì„ ë°˜í™˜í•˜ë„ë¡ ë³€ê²½í•œë‹¤.</li>
</ul>

<p>####</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">MemberSaveControllerV4</span> <span class="kd">implements</span> <span class="n">ControllerV4</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="n">MemberRepository</span> <span class="n">memberRepository</span> <span class="o">=</span> <span class="n">MemberRepository</span><span class="o">.</span><span class="na">getInstance</span><span class="o">();</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="n">String</span> <span class="nf">process</span><span class="o">(</span><span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">paramMap</span><span class="o">,</span> <span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">Object</span><span class="o">&gt;</span> <span class="n">model</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">String</span> <span class="n">username</span> <span class="o">=</span> <span class="n">paramMap</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="s">"username"</span><span class="o">);</span>
        <span class="kt">int</span> <span class="n">age</span> <span class="o">=</span> <span class="n">Integer</span><span class="o">.</span><span class="na">parseInt</span><span class="o">(</span><span class="n">paramMap</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="s">"age"</span><span class="o">));</span>
        <span class="n">Member</span> <span class="n">member</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Member</span><span class="o">(</span><span class="n">username</span><span class="o">,</span> <span class="n">age</span><span class="o">);</span>
        <span class="n">memberRepository</span><span class="o">.</span><span class="na">save</span><span class="o">(</span><span class="n">member</span><span class="o">);</span>
        <span class="n">model</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"member"</span><span class="o">,</span> <span class="n">member</span><span class="o">);</span>
        <span class="k">return</span> <span class="s">"save-result"</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<ul>
  <li>Controllerì—ì„œëŠ” í•„ìš”í•œ ê°’ì„ êº¼ë‚´ê³ , ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì„ í˜¸ì¶œí•œ í›„ viewNameë§Œì„ ë°˜í™˜í•œë‹¤.</li>
</ul>

<h4 id="frontcontrollerservletv4">FrontControllerServletV4</h4>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@WebServlet</span><span class="o">(</span><span class="n">name</span> <span class="o">=</span> <span class="s">"frontControllerServletV4"</span><span class="o">,</span> <span class="n">urlPatterns</span> <span class="o">=</span> <span class="s">"/front-controller/v2/*"</span><span class="o">)</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">FrontControllerServletV4</span> <span class="kd">extends</span> <span class="n">HttpServlet</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">ControllerV4</span><span class="o">&gt;</span> <span class="n">controllerMap</span> <span class="o">=</span> <span class="k">new</span> <span class="n">HashMap</span><span class="o">&lt;&gt;();</span>

    <span class="kd">public</span> <span class="nf">FrontControllerServletV4</span><span class="o">(</span><span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">ControllerV4</span><span class="o">&gt;</span> <span class="n">controllerMap</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">controllerMap</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"/front-controller/v2/members/new-form"</span><span class="o">,</span>
                <span class="k">new</span> <span class="nf">MemberFormControllerV4</span><span class="o">());</span>
        <span class="n">controllerMap</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"/front-controller/v2/members/save"</span><span class="o">,</span>
                <span class="k">new</span> <span class="nf">MemberSaveControllerV4</span><span class="o">());</span>
        <span class="n">controllerMap</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"/front-controller/v2/members"</span><span class="o">,</span>
                <span class="k">new</span> <span class="nf">MemberListControllerV4</span><span class="o">());</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">protected</span> <span class="kt">void</span> <span class="nf">service</span><span class="o">(</span><span class="n">HttpServletRequest</span> <span class="n">req</span><span class="o">,</span> <span class="n">HttpServletResponse</span> <span class="n">resp</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">ServletException</span><span class="o">,</span> <span class="n">IOException</span> <span class="o">{</span>
        <span class="n">String</span> <span class="n">requestURI</span> <span class="o">=</span> <span class="n">req</span><span class="o">.</span><span class="na">getRequestURI</span><span class="o">();</span>
        <span class="n">ControllerV4</span> <span class="n">controller</span> <span class="o">=</span> <span class="n">controllerMap</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">requestURI</span><span class="o">);</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">controller</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">resp</span><span class="o">.</span><span class="na">setStatus</span><span class="o">(</span><span class="n">HttpServletResponse</span><span class="o">.</span><span class="na">SC_NOT_FOUND</span><span class="o">);</span>
            <span class="k">return</span><span class="o">;</span>
        <span class="o">}</span>

        <span class="c1">// param Map</span>
        <span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">paramMap</span> <span class="o">=</span> <span class="n">createParamMap</span><span class="o">(</span><span class="n">req</span><span class="o">);</span>
      	<span class="c1">// model </span>
        <span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">Object</span><span class="o">&gt;</span> <span class="n">model</span> <span class="o">=</span> <span class="k">new</span> <span class="n">HashMap</span><span class="o">&lt;&gt;();</span>
        <span class="n">String</span> <span class="n">viewName</span> <span class="o">=</span> <span class="n">controller</span><span class="o">.</span><span class="na">process</span><span class="o">(</span><span class="n">paramMap</span><span class="o">,</span> <span class="n">model</span><span class="o">);</span>

        <span class="n">MyView</span> <span class="n">view</span> <span class="o">=</span> <span class="n">viewResolver</span><span class="o">(</span><span class="n">viewName</span><span class="o">);</span>
        <span class="n">view</span><span class="o">.</span><span class="na">render</span><span class="o">(</span><span class="n">model</span><span class="o">,</span> <span class="n">req</span><span class="o">,</span> <span class="n">resp</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="kd">private</span> <span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="nf">createParamMap</span><span class="o">(</span><span class="n">HttpServletRequest</span> <span class="n">req</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">paramMap</span> <span class="o">=</span> <span class="k">new</span> <span class="n">HashMap</span><span class="o">&lt;&gt;();</span>
        <span class="n">req</span><span class="o">.</span><span class="na">getParameterNames</span><span class="o">().</span><span class="na">asIterator</span><span class="o">()</span>
                <span class="o">.</span><span class="na">forEachRemaining</span><span class="o">(</span><span class="n">paramName</span> <span class="o">-&gt;</span> <span class="n">paramMap</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="n">paramName</span><span class="o">,</span> <span class="n">req</span><span class="o">.</span><span class="na">getParameter</span><span class="o">(</span><span class="n">paramName</span><span class="o">)));</span>
        <span class="k">return</span> <span class="n">paramMap</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">private</span> <span class="n">MyView</span> <span class="nf">viewResolver</span><span class="o">(</span><span class="n">String</span> <span class="n">viewName</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">MyView</span> <span class="n">view</span> <span class="o">=</span> <span class="k">new</span> <span class="n">MyView</span><span class="o">(</span><span class="s">"/WEB-INF/views/"</span> <span class="o">+</span> <span class="n">viewName</span> <span class="o">+</span> <span class="s">".jsp"</span><span class="o">);</span>
        <span class="k">return</span> <span class="n">view</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<ul>
  <li>í”„ë¡ íŠ¸ ì»¨íŠ¸ë¡¤ëŸ¬ì—ì„œ modelì„ ë§Œë“¤ê³  ê° Controllerì— paramMapê³¼ modelì„ ë„˜ê²¨ ì²˜ë¦¬ë¥¼ í•˜ê³ , viewNameì„ ë°˜í™˜ë°›ëŠ”ë‹¤.</li>
  <li>modelViewì—ì„œ modelì„ êº¼ë‚¼ í•„ìš”ê°€ ì—†ë‹¤.</li>
</ul>

<p>í•˜ì§€ë§Œ, ì§€ê¸ˆ ControllerV4 ì¸í„°í˜ì´ìŠ¤ë¡œ ë°›ì„ ìˆ˜ ìˆëŠ” ì»¨íŠ¸ë¡¤ëŸ¬ë¥¼ ì œí•œí•˜ê³  ìˆë‹¤.</p>

<hr />

<h2 id="ìœ ì—°í•œ-controller---ì–´ëŒ‘í„°-íŒ¨í„´">ìœ ì—°í•œ Controller - ì–´ëŒ‘í„° íŒ¨í„´</h2>

<p>ì§€ê¸ˆê¹Œì§€ì˜ í”„ë¡ íŠ¸ ì»¨íŠ¸ë¡¤ëŸ¬ëŠ” í•œê°€ì§€ ì¸í„°í˜ì´ìŠ¤ë§Œ ì‚¬ìš©ì´ ê°€ëŠ¥í–ˆì—ˆë‹¤. <br />
ì–´ë– í•œ ì»¨íŠ¸ë¡¤ëŸ¬ë„ í˜¸í™˜ì´ ê°€ëŠ¥í•˜ë„ë¡ ì–´ëŒ‘í„° íŒ¨í„´ì„ ì‚¬ìš©í•œë‹¤.</p>

<p><img src="https://images.velog.io/images/new_wisdom/post/0f169df9-469c-4e38-b61c-2cf42f872444/image.png" alt="" /></p>

<ul>
  <li>í•¸ë“¤ëŸ¬ ì–´ëŒ‘í„° : ì¤‘ê°„ì— ì–´ëŒ‘í„° ì—­í• ì„ í•˜ëŠ” ì–´ëŒ‘í„°ê°€ ì¶”ê°€ë˜ì—ˆë‹¤. ì´ ë•ë¶„ì— ë‹¤ì–‘í•œ ì¢…ë¥˜ì˜ ì»¨íŠ¸ë¡¤ëŸ¬ë¥¼ í˜¸ì¶œí•  ìˆ˜ ìˆë‹¤.</li>
  <li>ê¸°ì¡´ì—ëŠ” í”„ë¡ íŠ¸ ì»¨íŠ¸ë¡¤ëŸ¬ê°€ ë°”ë¡œ ì»¨íŠ¸ë¡¤ëŸ¬ë¥¼ í˜¸ì¶œí•˜ì˜€ì§€ë§Œ, ì´ì œëŠ” ì–´ëŒ‘í„°ë¥¼ í†µí•´ì„œ í˜¸ì¶œí•œë‹¤.</li>
  <li>í•¸ë“¤ëŸ¬ : ì»¨íŠ¸ë¡¤ëŸ¬ì˜ ì¢€ ë” ë„“ì€ ë²”ìœ„. ì–´ëŒ‘í„°ê°€ ìˆê¸° ë•Œë¬¸ì— ì»¨íŠ¸ë¡¤ëŸ¬ ê°œë… ë¿ë§Œ ì•„ë‹ˆë¼ í•´ë‹¹í•˜ëŠ” ì–´ëŒ‘í„°ë§Œ ìˆìœ¼ë©´ ì²˜ë¦¬ê°€ ê°€ëŠ¥í•˜ë‹¤.</li>
</ul>

<h4 id="myhandleradapter">MyHandlerAdapter</h4>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">interface</span> <span class="nc">MyHandlerAdapter</span> <span class="o">{</span>
    <span class="kt">boolean</span> <span class="nf">supports</span><span class="o">(</span><span class="n">Object</span> <span class="n">handler</span><span class="o">);</span>
    <span class="n">ModelView</span> <span class="nf">handle</span><span class="o">(</span><span class="n">HttpServletRequest</span> <span class="n">request</span><span class="o">,</span> <span class="n">HttpServletResponse</span> <span class="n">response</span><span class="o">,</span> <span class="n">Object</span> <span class="n">handler</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">ServletException</span><span class="o">,</span> <span class="n">IOException</span><span class="o">;</span>
<span class="o">}</span>
</code></pre></div></div>

<ul>
  <li><code class="highlighter-rouge">supports(Object handler)</code> : ì–´ëŒ‘í„°ê°€ í•´ë‹¹ ì»¨íŠ¸ë¡¤ëŸ¬ë¥¼ ì²˜ë¦¬í•  ìˆ˜ ìˆëŠ”ì§€ ë°˜í™˜</li>
  <li><code class="highlighter-rouge">handle(...)</code> : ì–´ëŒ‘í„°ëŠ” ì‹¤ì œ ì»¨íŠ¸ë¡¤ëŸ¬ë¥¼ í˜¸ì¶œí•˜ê³  ê²°ê³¼ë¡œ ModelViewë¥¼ ë°˜í™˜í•œë‹¤.</li>
  <li>ë§Œì•½ ì»¨íŠ¸ë¡¤ëŸ¬ê°€ ModelViewë¥¼ ë°˜í™˜í•˜ì§€ ëª»í•˜ë©´, ì–´ëŒ‘í„°ê°€ ì§ì ‘ ìƒì„±í•œë‹¤.</li>
  <li>í”„ë¡ íŠ¸ ì»¨íŠ¸ë¡¤ëŸ¬ê°€ ì•„ë‹Œ ì–´ëŒ‘í„°ê°€ ì‹¤ì œ ì»¨íŠ¸ë¡¤ëŸ¬ë¥¼ í˜¸ì¶œí•œë‹¤.</li>
</ul>

<h4 id="controllerv3handleradapter">ControllerV3HandlerAdapter</h4>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">ControllerV3HandlerAdapter</span> <span class="kd">implements</span> <span class="n">MyHandlerAdapter</span> <span class="o">{</span>
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">supports</span><span class="o">(</span><span class="n">Object</span> <span class="n">handler</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="o">(</span><span class="n">handler</span> <span class="k">instanceof</span> <span class="n">ControllerV3</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="n">ModelView</span> <span class="nf">handle</span><span class="o">(</span><span class="n">HttpServletRequest</span> <span class="n">request</span><span class="o">,</span> <span class="n">HttpServletResponse</span> <span class="n">response</span><span class="o">,</span> <span class="n">Object</span> <span class="n">handler</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">ServletException</span><span class="o">,</span> <span class="n">IOException</span> <span class="o">{</span>
        <span class="n">ControllerV3</span> <span class="n">controller</span> <span class="o">=</span> <span class="o">(</span><span class="n">ControllerV3</span><span class="o">)</span> <span class="n">handler</span><span class="o">;</span>
        <span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">paramMap</span> <span class="o">=</span> <span class="n">createParamMap</span><span class="o">(</span><span class="n">request</span><span class="o">);</span>
        <span class="n">ModelView</span> <span class="n">mv</span> <span class="o">=</span> <span class="n">controller</span><span class="o">.</span><span class="na">process</span><span class="o">(</span><span class="n">paramMap</span><span class="o">);</span>
        <span class="k">return</span> <span class="n">mv</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">private</span> <span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="nf">createParamMap</span><span class="o">(</span><span class="n">HttpServletRequest</span> <span class="n">request</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">paramMap</span> <span class="o">=</span> <span class="k">new</span> <span class="n">HashMap</span><span class="o">&lt;&gt;();</span>
        <span class="n">request</span><span class="o">.</span><span class="na">getParameterNames</span><span class="o">().</span><span class="na">asIterator</span><span class="o">()</span>
                <span class="o">.</span><span class="na">forEachRemaining</span><span class="o">(</span><span class="n">paramName</span> <span class="o">-&gt;</span> <span class="n">paramMap</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="n">paramName</span><span class="o">,</span>
                        <span class="n">request</span><span class="o">.</span><span class="na">getParameter</span><span class="o">(</span><span class="n">paramName</span><span class="o">)));</span>
        <span class="k">return</span> <span class="n">paramMap</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<ul>
  <li>supports()ë¡œ ControllerV3 íƒ€ì…ì¸ì§€ í™•ì¸í•˜ê³  ë§ë‹¤ë©´ í˜¸ì¶œí•œë‹¤.</li>
</ul>

<p>####</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@WebServlet</span><span class="o">(</span><span class="n">name</span> <span class="o">=</span> <span class="s">"frontControllerServletV5"</span><span class="o">,</span> <span class="n">urlPatterns</span> <span class="o">=</span> <span class="s">"/front-controller/v5/*"</span><span class="o">)</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">FrontControllerServletV5</span> <span class="kd">extends</span> <span class="n">HttpServlet</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">Object</span><span class="o">&gt;</span> <span class="n">handlerMappingMap</span> <span class="o">=</span> <span class="k">new</span> <span class="n">HashMap</span><span class="o">&lt;&gt;();</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">MyHandlerAdapter</span><span class="o">&gt;</span> <span class="n">handlerAdapters</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ArrayList</span><span class="o">&lt;&gt;();</span>

    <span class="kd">public</span> <span class="nf">FrontControllerServletV5</span><span class="o">()</span> <span class="o">{</span>
        <span class="n">initHandlerMappingMap</span><span class="o">();</span>
        <span class="n">initHandlerAdapters</span><span class="o">();</span>
    <span class="o">}</span>

    <span class="kd">private</span> <span class="kt">void</span> <span class="nf">initHandlerMappingMap</span><span class="o">()</span> <span class="o">{</span>
        <span class="n">handlerMappingMap</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"/front-controller/v5/v3/members/new-form"</span><span class="o">,</span>
                <span class="k">new</span> <span class="nf">MemberFormControllerV3</span><span class="o">());</span>
        <span class="n">handlerMappingMap</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"/front-controller/v5/v3/members/save"</span><span class="o">,</span>
                <span class="k">new</span> <span class="nf">MemberSaveControllerV3</span><span class="o">());</span>
        <span class="n">handlerMappingMap</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"/front-controller/v5/v3/members"</span><span class="o">,</span>
                <span class="k">new</span> <span class="nf">MemberListControllerV3</span><span class="o">());</span>
    <span class="o">}</span>

    <span class="kd">private</span> <span class="kt">void</span> <span class="nf">initHandlerAdapters</span><span class="o">()</span> <span class="o">{</span>
        <span class="n">handlerAdapters</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="k">new</span> <span class="n">ControllerV3HandlerAdapter</span><span class="o">());</span>

    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">protected</span> <span class="kt">void</span> <span class="nf">service</span><span class="o">(</span><span class="n">HttpServletRequest</span> <span class="n">req</span><span class="o">,</span> <span class="n">HttpServletResponse</span> <span class="n">resp</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">ServletException</span><span class="o">,</span> <span class="n">IOException</span> <span class="o">{</span>
        <span class="c1">// ìš”ì²­ ì •ë³´ë¡œ í•¸ë“¤ëŸ¬ë¥¼ ê°€ì ¸ì˜¨ë‹¤.</span>
        <span class="n">Object</span> <span class="n">handler</span> <span class="o">=</span> <span class="n">getHandler</span><span class="o">(</span><span class="n">req</span><span class="o">);</span>

        <span class="k">if</span> <span class="o">(</span><span class="n">handler</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">resp</span><span class="o">.</span><span class="na">setStatus</span><span class="o">(</span><span class="n">HttpServletResponse</span><span class="o">.</span><span class="na">SC_NOT_FOUND</span><span class="o">);</span>
            <span class="k">return</span><span class="o">;</span>
        <span class="o">}</span>

        <span class="c1">// ì–´ëŒ‘í„°ë¥¼ ì°¾ëŠ”ë‹¤.</span>
        <span class="n">MyHandlerAdapter</span> <span class="n">adapter</span> <span class="o">=</span> <span class="n">getHandlerAdapter</span><span class="o">(</span><span class="n">handler</span><span class="o">);</span>

        <span class="n">ModelView</span> <span class="n">mv</span> <span class="o">=</span> <span class="n">adapter</span><span class="o">.</span><span class="na">handle</span><span class="o">(</span><span class="n">req</span><span class="o">,</span> <span class="n">resp</span><span class="o">,</span> <span class="n">handler</span><span class="o">);</span>

        <span class="n">String</span> <span class="n">viewName</span> <span class="o">=</span> <span class="n">mv</span><span class="o">.</span><span class="na">getViewName</span><span class="o">();</span> <span class="c1">// ë…¼ë¦¬ ì´ë¦„ ex) new-form</span>
        <span class="n">MyView</span> <span class="n">view</span> <span class="o">=</span> <span class="n">viewResolver</span><span class="o">(</span><span class="n">viewName</span><span class="o">);</span>
        
        <span class="n">view</span><span class="o">.</span><span class="na">render</span><span class="o">(</span><span class="n">mv</span><span class="o">.</span><span class="na">getModel</span><span class="o">(),</span> <span class="n">req</span><span class="o">,</span> <span class="n">resp</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="kd">private</span> <span class="n">MyHandlerAdapter</span> <span class="nf">getHandlerAdapter</span><span class="o">(</span><span class="n">Object</span> <span class="n">handler</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">for</span> <span class="o">(</span><span class="n">MyHandlerAdapter</span> <span class="n">adapter</span> <span class="o">:</span> <span class="n">handlerAdapters</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">if</span> <span class="o">(</span><span class="n">adapter</span><span class="o">.</span><span class="na">supports</span><span class="o">(</span><span class="n">handler</span><span class="o">))</span> <span class="o">{</span>
                <span class="k">return</span> <span class="n">adapter</span><span class="o">;</span>
            <span class="o">}</span>
        <span class="o">}</span>
        <span class="k">throw</span> <span class="k">new</span> <span class="nf">IllegalArgumentException</span><span class="o">(</span><span class="s">"handler adapterë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤. handler "</span> <span class="o">+</span> <span class="n">handler</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="kd">private</span> <span class="n">Object</span> <span class="nf">getHandler</span><span class="o">(</span><span class="n">HttpServletRequest</span> <span class="n">req</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">String</span> <span class="n">requestURI</span> <span class="o">=</span> <span class="n">req</span><span class="o">.</span><span class="na">getRequestURI</span><span class="o">();</span>
        <span class="n">Object</span> <span class="n">handler</span> <span class="o">=</span> <span class="n">handlerMappingMap</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">requestURI</span><span class="o">);</span>
        <span class="k">return</span> <span class="n">handler</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">private</span> <span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="nf">createParamMap</span><span class="o">(</span><span class="n">HttpServletRequest</span> <span class="n">req</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">paramMap</span> <span class="o">=</span> <span class="k">new</span> <span class="n">HashMap</span><span class="o">&lt;&gt;();</span>
        <span class="n">req</span><span class="o">.</span><span class="na">getParameterNames</span><span class="o">().</span><span class="na">asIterator</span><span class="o">()</span>
                <span class="o">.</span><span class="na">forEachRemaining</span><span class="o">(</span><span class="n">paramName</span> <span class="o">-&gt;</span> <span class="n">paramMap</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="n">paramName</span><span class="o">,</span> <span class="n">req</span><span class="o">.</span><span class="na">getParameter</span><span class="o">(</span><span class="n">paramName</span><span class="o">)));</span>
        <span class="k">return</span> <span class="n">paramMap</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">private</span> <span class="n">MyView</span> <span class="nf">viewResolver</span><span class="o">(</span><span class="n">String</span> <span class="n">viewName</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">MyView</span> <span class="n">view</span> <span class="o">=</span> <span class="k">new</span> <span class="n">MyView</span><span class="o">(</span><span class="s">"/WEB-INF/views/"</span> <span class="o">+</span> <span class="n">viewName</span> <span class="o">+</span> <span class="s">".jsp"</span><span class="o">);</span>
        <span class="k">return</span> <span class="n">view</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<ul>
  <li>ìƒì„±ì : í•¸ë“¤ëŸ¬ ë§¤í•‘ê³¼ ì–´ëŒ‘í„°ë¥¼ ì´ˆê¸°í™”í•œë‹¤.</li>
  <li>ë§¤í•‘ ì •ë³´ì¸ handlerMappingMap ì´ Object Mapìœ¼ë¡œ ì•„ë¬´ íƒ€ì…ì´ë‚˜ ë°›ì„ ìˆ˜ ìˆë‹¤.</li>
  <li>í•¸ë“¤ëŸ¬ ë§¤í•‘</li>
  <li>í•¸ë“¤ëŸ¬ë¥¼ ì²˜ë¦¬í•  ìˆ˜ ìˆëŠ” ì–´ëŒ‘í„° ì¡°íšŒ</li>
  <li>ì–´ëŒ‘í„° í˜¸ì¶œ</li>
</ul>

<h4 id="controllerv4handleradapter-ì˜ˆì œ">ControllerV4HandlerAdapter ì˜ˆì œ</h4>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">ControllerV4HandlerAdapter</span> <span class="kd">implements</span> <span class="n">MyHandlerAdapter</span> <span class="o">{</span>
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">supports</span><span class="o">(</span><span class="n">Object</span> <span class="n">handler</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="o">(</span><span class="n">handler</span> <span class="k">instanceof</span> <span class="n">ControllerV4</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="n">ModelView</span> <span class="nf">handle</span><span class="o">(</span><span class="n">HttpServletRequest</span> <span class="n">request</span><span class="o">,</span> <span class="n">HttpServletResponse</span> <span class="n">response</span><span class="o">,</span> <span class="n">Object</span> <span class="n">handler</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">ServletException</span><span class="o">,</span> <span class="n">IOException</span> <span class="o">{</span>
        <span class="n">ControllerV4</span> <span class="n">controller</span> <span class="o">=</span> <span class="o">(</span><span class="n">ControllerV4</span><span class="o">)</span> <span class="n">handler</span><span class="o">;</span>
        <span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">paramMap</span> <span class="o">=</span> <span class="n">createParamMap</span><span class="o">(</span><span class="n">request</span><span class="o">);</span>
        <span class="n">HashMap</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">Object</span><span class="o">&gt;</span> <span class="n">model</span> <span class="o">=</span> <span class="k">new</span> <span class="n">HashMap</span><span class="o">&lt;&gt;();</span>
      
        <span class="c1">//  viewNameë§Œ ë°˜í™˜í•  ê²½ìš° ModelView ê°ì²´ë¡œ ë§Œë“¤ì–´ì£¼ëŠ” ì—­í• ë„ í•œë‹¤.</span>
        <span class="n">String</span> <span class="n">viewName</span> <span class="o">=</span> <span class="n">controller</span><span class="o">.</span><span class="na">process</span><span class="o">(</span><span class="n">paramMap</span><span class="o">,</span> <span class="n">model</span><span class="o">);</span>

        <span class="n">ModelView</span> <span class="n">mv</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ModelView</span><span class="o">(</span><span class="n">viewName</span><span class="o">);</span>
        <span class="n">mv</span><span class="o">.</span><span class="na">setModel</span><span class="o">(</span><span class="n">model</span><span class="o">);</span>
        <span class="k">return</span> <span class="n">mv</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">private</span> <span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="nf">createParamMap</span><span class="o">(</span><span class="n">HttpServletRequest</span> <span class="n">request</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">paramMap</span> <span class="o">=</span> <span class="k">new</span> <span class="n">HashMap</span><span class="o">&lt;&gt;();</span>
        <span class="n">request</span><span class="o">.</span><span class="na">getParameterNames</span><span class="o">().</span><span class="na">asIterator</span><span class="o">()</span>
                <span class="o">.</span><span class="na">forEachRemaining</span><span class="o">(</span><span class="n">paramName</span> <span class="o">-&gt;</span> <span class="n">paramMap</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="n">paramName</span><span class="o">,</span>
                        <span class="n">request</span><span class="o">.</span><span class="na">getParameter</span><span class="o">(</span><span class="n">paramName</span><span class="o">)));</span>
        <span class="k">return</span> <span class="n">paramMap</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<ul>
  <li>ì–´ëŒ‘í„°ê°€ í˜¸ì¶œí•˜ëŠ” ControllerV4ëŠ” viewNameë§Œ ë°˜í™˜í•˜ëŠ”ë°, ì´ë•Œ ì–´ëŒ‘í„°ì—ì„œ ì´ë¥¼ ModelView ê°ì²´ë¡œ ë§Œë“¤ì–´ ë°˜í™˜í•œë‹¤.</li>
</ul>

<p>í”„ë¡ íŠ¸ ì»¨íŠ¸ë¡¤ëŸ¬ ì…ì¥ì—ì„œëŠ” í•¸ë“¤ëŸ¬ ì–´ëŒ‘í„°ì—ë§Œ ì˜ì¡´í•˜ê³  ìˆë‹¤.</p>

<p>ì´ MVC í”„ë ˆì„ ì›Œí¬ëŠ” ì—­í• ê³¼ êµ¬í˜„ì´ ë¶„ë¦¬ë˜ì–´ ìˆë‹¤.  <br />
ëª¨ë“  ê²ƒì„ ì¸í„°í˜ì´ìŠ¤ë¡œ ë§Œë“¤ê³  êµ¬í˜„í•˜ê³  ì‹¶ì€ ë¶€ë¶„ë§Œ ì£¼ì…í•˜ë©´ ì™„ë²½! (ìŠ¤í”„ë§ MVCëŠ” ë·°ì™€ ë·°ë¦¬ì¡¸ë²„ ë‹¤ ì¸í„°í˜ì´ìŠ¤ë¡œ êµ¬í˜„ë˜ì–´ìˆë‹¤.)
ì–´ë–¤ í•¸ë“¤ëŸ¬ë¥¼ ì¶”ê°€í•˜ê³  ì‹¶ì–´ë„ ìš°ë¦¬ëŠ” í•¸ë“¤ëŸ¬ì–´ëŒ‘í„°ë§Œ êµ¬í˜„í•´ì£¼ë©´ ëœë‹¤!</p>

<h4 id="ex-requestmapping">ex) @RequestMapping()</h4>

<p>RequestMappingHandlerAdapter : ìœ„ ì–´ë…¸í…Œì´ì…˜ì´ ë¶™ì€ í•¸ë“¤ëŸ¬ë¥¼ ì²˜ë¦¬í•´ì£¼ëŠ” ì–´ëŒ‘í„°</p>


	  ]]></description>
	</item>

	<item>
	  <title>ğŸ“‹ Spring MVC - 3. ì„œë¸”ë¦¿, JSP, MVC íŒ¨í„´</title>
	  <link>//spring-mvc-3</link>
	  <author></author>
	  <pubDate>2021-05-03T19:18:00+09:00</pubDate>
	  <guid>//spring-mvc-3</guid>
	  <description><![CDATA[
	     <h2 id="ì„œë¸”ë¦¿-jsp-mvc-íŒ¨í„´">ì„œë¸”ë¦¿, JSP, MVC íŒ¨í„´</h2>

<p>ì„œë¸”ë¦¿ìœ¼ë¡œ ë§Œë“¤ì–´ë³´ê³ , JSPë¡œ ë§Œë“¤ì–´ë³´ê³  ë§ˆì§€ë§‰ìœ¼ë¡œ MVCë¡œ ë§Œë“¤ì–´ ë³¼ ê²ƒì´ë‹¤!</p>

<h3 id="ì„œë¸”ë¦¿ìœ¼ë¡œ-ë§Œë“¤ì—ˆì„-ë•Œ-ì¼ë¶€-ì˜ˆì œ">ì„œë¸”ë¦¿ìœ¼ë¡œ ë§Œë“¤ì—ˆì„ ë•Œ ì¼ë¶€ ì˜ˆì œ</h3>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@WebServlet</span><span class="o">(</span><span class="n">name</span> <span class="o">=</span> <span class="s">"memberListServlet"</span><span class="o">,</span> <span class="n">urlPatterns</span> <span class="o">=</span> <span class="s">"/servlet/members"</span><span class="o">)</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">MemberListServlet</span> <span class="kd">extends</span> <span class="n">HttpServlet</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="n">MemberRepository</span> <span class="n">memberRepository</span> <span class="o">=</span> <span class="n">MemberRepository</span><span class="o">.</span><span class="na">getInstance</span><span class="o">();</span>

    <span class="nd">@Override</span>
    <span class="kd">protected</span> <span class="kt">void</span> <span class="nf">service</span><span class="o">(</span><span class="n">HttpServletRequest</span> <span class="n">req</span><span class="o">,</span> <span class="n">HttpServletResponse</span> <span class="n">resp</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">ServletException</span><span class="o">,</span> <span class="n">IOException</span> <span class="o">{</span>
        <span class="n">List</span><span class="o">&lt;</span><span class="n">Member</span><span class="o">&gt;</span> <span class="n">members</span> <span class="o">=</span> <span class="n">memberRepository</span><span class="o">.</span><span class="na">findAll</span><span class="o">();</span>
        <span class="n">PrintWriter</span> <span class="n">w</span> <span class="o">=</span> <span class="n">resp</span><span class="o">.</span><span class="na">getWriter</span><span class="o">();</span>
        <span class="n">w</span><span class="o">.</span><span class="na">write</span><span class="o">(</span><span class="s">"&lt;html&gt;"</span><span class="o">);</span>
        <span class="n">w</span><span class="o">.</span><span class="na">write</span><span class="o">(</span><span class="s">"&lt;head&gt;"</span><span class="o">);</span>
        <span class="n">w</span><span class="o">.</span><span class="na">write</span><span class="o">(</span><span class="s">"    &lt;meta charset=\"UTF-8\"&gt;"</span><span class="o">);</span>
        <span class="n">w</span><span class="o">.</span><span class="na">write</span><span class="o">(</span><span class="s">"    &lt;title&gt;Title&lt;/title&gt;"</span><span class="o">);</span>
        <span class="n">w</span><span class="o">.</span><span class="na">write</span><span class="o">(</span><span class="s">"&lt;/head&gt;"</span><span class="o">);</span>
        <span class="n">w</span><span class="o">.</span><span class="na">write</span><span class="o">(</span><span class="s">"&lt;body&gt;"</span><span class="o">);</span>
        <span class="n">w</span><span class="o">.</span><span class="na">write</span><span class="o">(</span><span class="s">"&lt;a href=\"/index.html\"&gt;ë©”ì¸&lt;/a&gt;"</span><span class="o">);</span>
        <span class="n">w</span><span class="o">.</span><span class="na">write</span><span class="o">(</span><span class="s">"&lt;table&gt;"</span><span class="o">);</span>
        <span class="n">w</span><span class="o">.</span><span class="na">write</span><span class="o">(</span><span class="s">"    &lt;thead&gt;"</span><span class="o">);</span>
        <span class="n">w</span><span class="o">.</span><span class="na">write</span><span class="o">(</span><span class="s">"    &lt;th&gt;id&lt;/th&gt;"</span><span class="o">);</span>
        <span class="n">w</span><span class="o">.</span><span class="na">write</span><span class="o">(</span><span class="s">"    &lt;th&gt;username&lt;/th&gt;"</span><span class="o">);</span>
        <span class="n">w</span><span class="o">.</span><span class="na">write</span><span class="o">(</span><span class="s">"    &lt;th&gt;age&lt;/th&gt;"</span><span class="o">);</span>
        <span class="n">w</span><span class="o">.</span><span class="na">write</span><span class="o">(</span><span class="s">"    &lt;/thead&gt;"</span><span class="o">);</span>
        <span class="n">w</span><span class="o">.</span><span class="na">write</span><span class="o">(</span><span class="s">"    &lt;tbody&gt;"</span><span class="o">);</span>
        <span class="k">for</span> <span class="o">(</span><span class="n">Member</span> <span class="n">member</span> <span class="o">:</span> <span class="n">members</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">w</span><span class="o">.</span><span class="na">write</span><span class="o">(</span><span class="s">"    &lt;tr&gt;"</span><span class="o">);</span>
            <span class="n">w</span><span class="o">.</span><span class="na">write</span><span class="o">(</span><span class="s">"&lt;td&gt;"</span> <span class="o">+</span> <span class="n">member</span><span class="o">.</span><span class="na">getId</span><span class="o">()</span> <span class="o">+</span> <span class="s">"&lt;/td&gt;"</span><span class="o">);</span>
            <span class="n">w</span><span class="o">.</span><span class="na">write</span><span class="o">(</span><span class="s">"&lt;td&gt;"</span> <span class="o">+</span> <span class="n">member</span><span class="o">.</span><span class="na">getUserName</span><span class="o">()</span> <span class="o">+</span> <span class="s">"&lt;/td&gt;"</span><span class="o">);</span>
            <span class="n">w</span><span class="o">.</span><span class="na">write</span><span class="o">(</span><span class="s">"&lt;td&gt;"</span> <span class="o">+</span> <span class="n">member</span><span class="o">.</span><span class="na">getAge</span><span class="o">()</span> <span class="o">+</span> <span class="s">"&lt;/td&gt;"</span><span class="o">);</span>
            <span class="n">w</span><span class="o">.</span><span class="na">write</span><span class="o">(</span><span class="s">"    &lt;/tr&gt;"</span><span class="o">);</span>
        <span class="o">}</span>
        <span class="n">w</span><span class="o">.</span><span class="na">write</span><span class="o">(</span><span class="s">"    &lt;/tbody&gt;"</span><span class="o">);</span>
        <span class="n">w</span><span class="o">.</span><span class="na">write</span><span class="o">(</span><span class="s">"&lt;/table&gt;"</span><span class="o">);</span>
        <span class="n">w</span><span class="o">.</span><span class="na">write</span><span class="o">(</span><span class="s">"&lt;/body&gt;"</span><span class="o">);</span>
        <span class="n">w</span><span class="o">.</span><span class="na">write</span><span class="o">(</span><span class="s">"&lt;/html&gt;"</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<ul>
  <li>ë³µì¡í•˜ì§€ë§Œâ€¦ ë™ì ìœ¼ë¡œ ì›í•˜ëŠ” HTMLì„ ë§Œë“¤ ìˆ˜ ìˆë‹¤.</li>
  <li>ê° ìš”ì²­ë§ˆë‹¤ Servletì„ ë§Œë“¤ì–´ì•¼ í•œë‹¤.</li>
  <li>ì‘ë‹µí•  HTMLì„ ìë°” ì½”ë“œ ë‚´ì— ì‘ì„±í•´ì•¼í•œë‹¤.</li>
</ul>

<hr />

<h2 id="jsp">JSP</h2>

<pre><code class="language-jsp">&lt;%@ page contentType="text/html;charset=UTF-8" language="java" %&gt;
</code></pre>

<h5 id="importë¬¸-ì‘ì„±">importë¬¸ ì‘ì„±</h5>

<pre><code class="language-jsp">&lt;%@ page import="hello.servlet.domain.member.MemberRepository" %&gt;
&lt;%@ page import="hello.servlet.domain.member.Member" %&gt;
&lt;%@ page contentType="text/html;charset=UTF-8" language="java" %&gt;
</code></pre>

<pre><code class="language-jsp">&lt;%
    // request, response ì‚¬ìš© ê°€ëŠ¥
    MemberRepository memberRepository = MemberRepository.getInstance();
    System.out.println("save.jsp");
    String username = request.getParameter("username");
    int age = Integer.parseInt(request.getParameter("age"));
    Member member = new Member(username, age);
    System.out.println("member = " + member);
    memberRepository.save(member);

%&gt;
</code></pre>

<p><code class="highlighter-rouge">&lt;% %&gt;</code> ì•ˆì— ìë°”ì½”ë“œë¥¼ ì‘ì„±í•  ìˆ˜ ìˆë‹¤.</p>

<ul>
  <li>ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ê³¼ ë·°ê°€ ì—°ê²°ë˜ì–´ ìˆë‹¤.</li>
  <li>ìš”êµ¬ì‚¬í•­ì´ ë³€ê²½ë˜ë©´ ë·°ë¥¼ ìˆ˜ì •í•˜ë‹¤ê°€ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ë„ ê°™ì´ ìˆ˜ì •ë  ìˆ˜ ìˆë‹¤.</li>
  <li>ìœ ì§€ë³´ìˆ˜ì„±ì´ ë–¨ì–´ì§„ë‹¤.</li>
</ul>

<hr />

<h2 id="mvc">MVC</h2>

<h3 id="servlet-jspì˜-ë¬¸ì œì ">Servlet, JSPì˜ ë¬¸ì œì </h3>

<h4 id="ë„ˆë¬´-ë§ì€-ì—­í• ">ë„ˆë¬´ ë§ì€ ì—­í• </h4>

<p>í•˜ë‚˜ì˜ ì„œë¸”ë¦¿ì´ë‚˜ JSPë§Œìœ¼ë¡œ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ê³¼ ë·° ë Œë”ë§ê¹Œì§€ ëª¨ë‘ ì²˜ë¦¬í•˜ê²Œ ë˜ë©´, ë„ˆë¬´ ë§ì€ ì—­í• ì„ í•˜ê³ , ë˜í•œ ìœ ì§€ë³´ìˆ˜ê°€ ì–´ë ¤ì›Œì§„ë‹¤.</p>

<h4 id="ë³€ê²½ì˜-ë¼ì´í”„-ì‚¬ì´í´">ë³€ê²½ì˜ ë¼ì´í”„ ì‚¬ì´í´</h4>

<p>ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ê³¼ ë·°ì˜ ë³€ê²½ì˜ ë¼ì´í”„ ì‚¬ì´í´ì´ ë‹¤ë¥´ë‹¤.<br />
ì˜ˆë¥¼ ë“¤ì–´ì„œ UI ë¥¼ ì¼ë¶€ ìˆ˜ì •í•˜ëŠ” ì¼ê³¼ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì„ ìˆ˜ì •í•˜ëŠ” ì¼ì€ ê°ê° ë‹¤ë¥´ê²Œ ë°œìƒí•  ê°€ëŠ¥ì„±ì´ ë§¤ìš° ë†’ê³  ëŒ€ë¶€ë¶„ ì„œë¡œì—ê²Œ ì˜í–¥ì„ ì£¼ì§€ ì•ŠëŠ”ë‹¤. <br />
ì´ë ‡ê²Œ ë³€ê²½ì˜ ë¼ì´í”„ ì‚¬ì´í´ì´ ë‹¤ë¥¸ ë¶€ë¶„ì„ í•˜ë‚˜ì˜ ì½”ë“œë¡œ ê´€ë¦¬í•˜ëŠ” ê²ƒì€ ìœ ì§€ë³´ìˆ˜í•˜ê¸° ì¢‹ì§€ ì•Šë‹¤.<br />
ë ˆì´ì–´ë¥¼ ë¶„ë¦¬í•˜ëŠ” ê¸°ì¤€ì€ ë³€ê²½ ì£¼ê¸°ê°€ ë‹¤ë¥¼ ë•Œë¼ê³  ìƒê°í•˜ë©´ í¸í•˜ë‹¤.</p>

<h4 id="ê¸°ëŠ¥-íŠ¹í™”">ê¸°ëŠ¥ íŠ¹í™”</h4>

<p>ë·° í…œí”Œë¦¿ì€ í™”ë©´ì„ ë Œë”ë§ í•˜ëŠ”ë° ìµœì í™” ë˜ì–´ ìˆê¸° ë•Œë¬¸ì— ì´ ë¶€ë¶„ì˜ ì—…ë¬´ë§Œ ë‹´ë‹¹í•˜ëŠ” ê²ƒì´ ê°€ì¥ íš¨ê³¼ì ì´ë‹¤.</p>

<h3 id="model-view-controller">Model View Controller</h3>

<p>MVC íŒ¨í„´ì€ ì„œë¸”ë¦¿ì´ë‚˜, JSPë¡œ ì²˜ë¦¬í•˜ë˜ ê²ƒì„ ì»¨íŠ¸ë¡¤ëŸ¬(Controller)ì™€ ë·°(View)ë¼ëŠ” ì˜ì—­ìœ¼ë¡œ ì„œë¡œ ì—­í• ì„ ë‚˜ëˆˆ ê²ƒì„ ë§í•œë‹¤.<br />
ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì€ ë³´í†µ ì´ MVC íŒ¨í„´ì„ ì‚¬ìš©í•œë‹¤.</p>

<h4 id="controller">Controller</h4>

<p>HTTP ìš”ì²­ì„ ë°›ì•„ì„œ íŒŒë¼ë¯¸í„°ë¥¼ ê²€ì¦í•˜ê³ , ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì„ ì‹¤í–‰í•œë‹¤. ê·¸ë¦¬ê³  ë·°ì— ì „ë‹¬í•  ê²°ê³¼ ë°ì´í„°ë¥¼ ì¡°íšŒí•´ì„œ ëª¨ë¸ì— ë‹´ëŠ”ë‹¤.<br />
ì¤‘ì•™ì—ì„œ ì¡°ì¢…í•˜ëŠ” ì—­í• . (ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì„ ë‹´ì„ ìˆ˜ ìˆì§€ë§Œ, ì—­í• ì´ ë„ˆë¬´ ë§ì•„ì§€ê¸° ë•Œë¬¸ì— ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì„ í˜¸ì¶œí•œë‹¤ê³  í•˜ì.)</p>

<h4 id="model">Model</h4>

<p>ë·°ì— ì¶œë ¥í•  ë°ì´í„°ë¥¼ ë‹´ì•„ë‘”ë‹¤.<br />
ë·°ê°€ í•„ìš”í•œ ë°ì´í„°ë¥¼ ëª¨ë‘ ëª¨ë¸ì— ë‹´ì•„ì„œ ì „ë‹¬í•´ì£¼ëŠ” ë•ë¶„ì— ë·°ëŠ” ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì´ë‚˜ ë°ì´í„° ì ‘ê·¼ì„ ëª°ë¼ë„ ë˜ê³ , í™”ë©´ì„ ë Œë”ë§ í•˜ëŠ” ì¼ì— ì§‘ì¤‘í•  ìˆ˜ ìˆë‹¤.</p>

<h4 id="view">View</h4>

<p>ëª¨ë¸ì— ë‹´ê²¨ìˆëŠ” ë°ì´í„°ë¥¼ ì‚¬ìš©í•´ì„œ í™”ë©´ì„ ê·¸ë¦¬ëŠ” ì¼ì— ì§‘ì¤‘í•œë‹¤. ì—¬ê¸°ì„œëŠ” HTMLì„ ìƒì„±í•˜ëŠ” ë¶€ë¶„ì„ ë§í•œë‹¤.</p>

<h3 id="mvc-ì ìš©í•˜ê¸°">MVC ì ìš©í•˜ê¸°</h3>

<ul>
  <li>ì„œë¸”ë¦¿ì„ ì»¨íŠ¸ë¡¤ëŸ¬ë¡œ ì‚¬ìš©</li>
  <li>JSPë¥¼ ë·°ë¡œ ì‚¬ìš©</li>
  <li>HttpServletRequest ê°ì²´ë¥¼ ëª¨ë¸ë¡œ ì‚¬ìš© (<code class="highlighter-rouge">request.setAttribute()</code> , <code class="highlighter-rouge">request.getAttribute() </code>ì‚¬ìš©)</li>
</ul>

<p><img src="https://images.velog.io/images/new_wisdom/post/1fa7cead-0d71-4afc-a391-a7b7932c9541/image.png" style="zoom:67%;" /></p>

<h4 id="mvcmemberformservlet">MvcMemberFormServlet</h4>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@WebServlet</span><span class="o">(</span><span class="n">name</span> <span class="o">=</span> <span class="s">"mvcMemberFormServlet"</span><span class="o">,</span> <span class="n">urlPatterns</span> <span class="o">=</span> <span class="s">"/servlet-mvc/members/new-form"</span><span class="o">)</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">MvcMemberFormServlet</span> <span class="kd">extends</span> <span class="n">HttpServlet</span> <span class="o">{</span>
    <span class="nd">@Override</span>
    <span class="kd">protected</span> <span class="kt">void</span> <span class="nf">service</span><span class="o">(</span><span class="n">HttpServletRequest</span> <span class="n">req</span><span class="o">,</span> <span class="n">HttpServletResponse</span> <span class="n">resp</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">ServletException</span><span class="o">,</span> <span class="n">IOException</span> <span class="o">{</span>
        <span class="n">String</span> <span class="n">viewPath</span> <span class="o">=</span> <span class="s">"/WEB-INF/views/new-form.jsp"</span><span class="o">;</span>
        <span class="n">RequestDispatcher</span> <span class="n">requestDispatcher</span> <span class="o">=</span> <span class="n">req</span><span class="o">.</span><span class="na">getRequestDispatcher</span><span class="o">(</span><span class="n">viewPath</span><span class="o">);</span> <span class="c1">// ì»¨íŠ¸ë¡¤ëŸ¬ì—ì„œ ë·°ë¡œ ì´ë™</span>
        <span class="n">requestDispatcher</span><span class="o">.</span><span class="na">forward</span><span class="o">(</span><span class="n">req</span><span class="o">,</span> <span class="n">resp</span><span class="o">);</span> <span class="c1">// ì„œë¸”ë¦¿ì—ì„œ JSPë¥¼ í˜¸ì¶œí•œë‹¤.</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<ul>
  <li><code class="highlighter-rouge">dispatcher.forward()</code> : ë‹¤ë¥¸ ì„œë¸”ë¦¿ì´ë‚˜ JSPë¡œ ì´ë™í•  ìˆ˜ ìˆëŠ” ê¸°ëŠ¥ì´ë‹¤. ì„œë²„ ë‚´ë¶€ì—ì„œ ë‹¤ì‹œ í˜¸ì¶œì´ ë°œìƒí•œë‹¤.<br />
í´ë¼ì´ì–¸íŠ¸ì—ê²Œ ê°”ë‹¤ê°€ ì˜¤ëŠ”ê²Œ ì•„ë‹Œ(ë¦¬ë‹¤ì´ë ‰íŠ¸ê°€ ì•„ë‹Œ), ì„œë²„ ë‚´ë¶€ì—ì„œ í˜¸ì¶œí•œ ê²ƒì´ë‹¤.</li>
  <li><code class="highlighter-rouge">/WEB-INF</code> :  ì´ ê²½ë¡œì•ˆì— JSPê°€ ìˆìœ¼ë©´ ì™¸ë¶€ì—ì„œ ì§ì ‘ JSPë¥¼ í˜¸ì¶œí•  ìˆ˜ ì—†ì–´ ì»¨íŠ¸ë¡¤ëŸ¬ë¥¼ í†µí•´ì„œë§Œ ì ‘ê·¼ì´ ê°€ëŠ¥í•˜ë„ë¡ í•œë‹¤.</li>
</ul>

<h4 id="redirect-vs-forward">redirect vs forward</h4>

<ul>
  <li>redirect : ì‹¤ì œ í´ë¼ì´ì–¸íŠ¸(ì›¹ ë¸Œë¼ìš°ì €)ì— ì‘ë‹µì´ ë‚˜ê°”ë‹¤ê°€, í´ë¼ì´ì–¸íŠ¸ê°€ redirect ê²½ë¡œë¡œ ë‹¤ì‹œ ìš”ì²­í•œë‹¤.<br />
í´ë¼ì´ì–¸íŠ¸ê°€ ì¸ì§€í•  ìˆ˜ ìˆê³ , URL ê²½ë¡œë„ ì‹¤ì œë¡œ ë³€ê²½ëœë‹¤.</li>
  <li>forward : ì„œë²„ ë‚´ë¶€ì—ì„œ ì¼ì–´ë‚˜ëŠ” í˜¸ì¶œì´ê¸° ë•Œë¬¸ì— í´ë¼ì´ì–¸íŠ¸ê°€ ì¸ì§€í•˜ì§€ ëª»í•œë‹¤.</li>
</ul>

<h4 id="mvcmembersaveservlet">MvcMemberSaveServlet</h4>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@WebServlet</span><span class="o">(</span><span class="n">name</span> <span class="o">=</span> <span class="s">"mvcMemberSaveServlet"</span><span class="o">,</span> <span class="n">urlPatterns</span> <span class="o">=</span> <span class="s">"/servlet-mvc/members/save"</span><span class="o">)</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">MvcMemberSaveServlet</span> <span class="kd">extends</span> <span class="n">HttpServlet</span> <span class="o">{</span>
    <span class="n">MemberRepository</span> <span class="n">memberRepository</span> <span class="o">=</span> <span class="n">MemberRepository</span><span class="o">.</span><span class="na">getInstance</span><span class="o">();</span>

    <span class="nd">@Override</span>
    <span class="kd">protected</span> <span class="kt">void</span> <span class="nf">service</span><span class="o">(</span><span class="n">HttpServletRequest</span> <span class="n">req</span><span class="o">,</span> <span class="n">HttpServletResponse</span> <span class="n">resp</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">ServletException</span><span class="o">,</span> <span class="n">IOException</span> <span class="o">{</span>
        <span class="n">String</span> <span class="n">username</span> <span class="o">=</span> <span class="n">req</span><span class="o">.</span><span class="na">getParameter</span><span class="o">(</span><span class="s">"username"</span><span class="o">);</span>
        <span class="kt">int</span> <span class="n">age</span> <span class="o">=</span> <span class="n">Integer</span><span class="o">.</span><span class="na">parseInt</span><span class="o">(</span><span class="n">req</span><span class="o">.</span><span class="na">getParameter</span><span class="o">(</span><span class="s">"age"</span><span class="o">));</span>

        <span class="c1">// ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§</span>
        <span class="n">Member</span> <span class="n">member</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Member</span><span class="o">(</span><span class="n">username</span><span class="o">,</span> <span class="n">age</span><span class="o">);</span>
        <span class="n">memberRepository</span><span class="o">.</span><span class="na">save</span><span class="o">(</span><span class="n">member</span><span class="o">);</span>

        <span class="c1">// Modelì— ë°ì´í„°ë¥¼ ë³´ê´€í•œë‹¤. - req ê°ì²´ì— Mapì´ ìˆëŠ”ë° ì—¬ê¸°ì— ì €ì¥í•œë‹¤.</span>
        <span class="n">req</span><span class="o">.</span><span class="na">setAttribute</span><span class="o">(</span><span class="s">"member"</span><span class="o">,</span> <span class="n">member</span><span class="o">);</span>

        <span class="n">String</span> <span class="n">viewPath</span> <span class="o">=</span> <span class="s">"/WEB-INF/views/save-result.jsp"</span><span class="o">;</span>
        <span class="n">RequestDispatcher</span> <span class="n">requestDispatcher</span> <span class="o">=</span> <span class="n">req</span><span class="o">.</span><span class="na">getRequestDispatcher</span><span class="o">(</span><span class="n">viewPath</span><span class="o">);</span>
        <span class="n">requestDispatcher</span><span class="o">.</span><span class="na">forward</span><span class="o">(</span><span class="n">req</span><span class="o">,</span> <span class="n">resp</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<h4 id="save-resultjsp">save-result.jsp</h4>

<pre><code class="language-jsp">&lt;%@ page contentType="text/html;charset=UTF-8" language="java" %&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;meta charset="UTF-8"&gt;
&lt;/head&gt;
&lt;body&gt; ì„±ê³µ
&lt;ul&gt;
    &lt;li&gt;id=${member.id}&lt;/li&gt;
    &lt;li&gt;username=${member.username}&lt;/li&gt;
    &lt;li&gt;age=${member.age}&lt;/li&gt;
&lt;/ul&gt;
&lt;a href="/index.html"&gt;ë©”ì¸&lt;/a&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre>

<ul>
  <li><code class="highlighter-rouge">${}</code> : jspê°€ ì œê³µí•˜ëŠ” í”„ë¡œí¼í‹° ì ‘ê·¼ë²•ìœ¼ë¡œ, reqì— ë‹´ê²¨ìˆëŠ” attributeì— ìˆëŠ” ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ ìˆë‹¤.</li>
</ul>

<h4 id="mvcmemberlistservlet">MvcMemberListServlet</h4>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@WebServlet</span><span class="o">(</span><span class="n">name</span> <span class="o">=</span> <span class="s">"mvcMemberListServlet"</span><span class="o">,</span> <span class="n">urlPatterns</span> <span class="o">=</span> <span class="s">"/servlet-mvc/members"</span><span class="o">)</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">MvcMemberListServlet</span> <span class="kd">extends</span> <span class="n">HttpServlet</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="n">MemberRepository</span> <span class="n">memberRepository</span> <span class="o">=</span> <span class="n">MemberRepository</span><span class="o">.</span><span class="na">getInstance</span><span class="o">();</span>

    <span class="nd">@Override</span>
    <span class="kd">protected</span> <span class="kt">void</span> <span class="nf">service</span><span class="o">(</span><span class="n">HttpServletRequest</span> <span class="n">req</span><span class="o">,</span> <span class="n">HttpServletResponse</span> <span class="n">resp</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">ServletException</span><span class="o">,</span> <span class="n">IOException</span> <span class="o">{</span>
        <span class="n">List</span><span class="o">&lt;</span><span class="n">Member</span><span class="o">&gt;</span> <span class="n">members</span> <span class="o">=</span> <span class="n">memberRepository</span><span class="o">.</span><span class="na">findAll</span><span class="o">();</span>

        <span class="n">req</span><span class="o">.</span><span class="na">setAttribute</span><span class="o">(</span><span class="s">"members"</span><span class="o">,</span> <span class="n">members</span><span class="o">);</span>

        <span class="n">String</span> <span class="n">viewPath</span> <span class="o">=</span> <span class="s">"/WEB-INF/views/members.jsp"</span><span class="o">;</span>
        <span class="n">RequestDispatcher</span> <span class="n">dispatcher</span> <span class="o">=</span> <span class="n">req</span><span class="o">.</span><span class="na">getRequestDispatcher</span><span class="o">(</span><span class="n">viewPath</span><span class="o">);</span>
        <span class="n">dispatcher</span><span class="o">.</span><span class="na">forward</span><span class="o">(</span><span class="n">req</span><span class="o">,</span> <span class="n">resp</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<h4 id="membersjsp-ì¼ë¶€">members.jsp ì¼ë¶€</h4>

<pre><code class="language-jsp">&lt;c:forEach var="item" items="${members}"&gt;
    &lt;tr&gt;
        &lt;td&gt;${item.id}&lt;/td&gt;
        &lt;td&gt;${item.username}&lt;/td&gt;
        &lt;td&gt;${item.age}&lt;/td&gt;
    &lt;/tr&gt;
&lt;/c:forEach&gt;
</code></pre>

<ul>
  <li><code class="highlighter-rouge">&lt;c:forEach&gt;</code> : <code class="highlighter-rouge">&lt;%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core"%&gt;</code> ë¥¼ ì„ ì–¸í•´ì•¼í•œë‹¤.</li>
</ul>

<h3 id="mvc-íŒ¨í„´ì˜-í•œê³„">MVC íŒ¨í„´ì˜ í•œê³„</h3>

<h3 id="forwardì˜-ì¤‘ë³µ">forwardì˜ ì¤‘ë³µ</h3>

<p>ë©”ì„œë“œë¥¼ ì¶”ì¶œí•´ë„ ë˜ì§€ë§Œ, ë©”ì„œë“œ í˜¸ì¶œë§ˆì € ì¤‘ë³µìœ¼ë¡œ ì¼ì–´ë‚œë‹¤.</p>

<h4 id="viewpathì—-ì¤‘ë³µ">ViewPathì— ì¤‘ë³µ</h4>

<p>prefixì¸ <code class="highlighter-rouge">/WEB-INF/views/</code> ì™€ suffixì¸ <code class="highlighter-rouge">.jsp</code> ê°€ ì¤‘ë³µìœ¼ë¡œ ë°œìƒí•œë‹¤.<br />
ë§Œì•½ jspê°€ ì•„ë‹Œ thymeleaf ê°™ì€ ë‹¤ë¥¸ ë·°ë¡œ ë³€ê²½í•œë‹¤ë©´ ì „ì²´ ì½”ë“œë¥¼ ë‹¤ ë³€ê²½í•´ì•¼ í•œë‹¤.</p>

<h4 id="ì‚¬ìš©í•˜ì§€-ì•ŠëŠ”-ì½”ë“œ">ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” ì½”ë“œ</h4>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">HttpServletRequest</span> <span class="n">request</span><span class="o">,</span> <span class="n">HttpServletResponse</span> <span class="n">response</span>
</code></pre></div></div>

<p>ìœ„ ê°ì²´ëŠ” ì‚¬ìš©í•  ìˆ˜ë„ ìˆê³ , ì•ˆí• ìˆ˜ë„ ìˆë‹¤.</p>

<h4 id="ê³µí†µ-ì²˜ë¦¬ê°€-ì–´ë µë‹¤">ê³µí†µ ì²˜ë¦¬ê°€ ì–´ë µë‹¤.</h4>

<p>ì»¨íŠ¸ë¡¤ëŸ¬ì—ì„œ ê³µí†µìœ¼ë¡œ ì²˜ë¦¬í•´ì•¼ í•˜ëŠ” ë¶€ë¶„ì´ ì ì  ì¦ê°€í•˜ëŠ” ê²½ìš°ë¥¼ ìƒê°í•´ë³´ì.<br />
ë‹¨ìˆœíˆ ê³µí†µ ê¸°ëŠ¥ì„ ë©”ì„œë“œë¡œ ë½‘ìœ¼ë©´ ë  ê²ƒ ê°™ì§€ë§Œ, ê²°ê³¼ì ìœ¼ë¡œ í•´ë‹¹ ë©”ì„œë“œë¥¼ í•­ìƒ í˜¸ì¶œí•´ì•¼ í•˜ê³ , ì‹¤ìˆ˜ë¡œ í˜¸ì¶œí•˜ì§€ ì•Šìœ¼ë©´ ë¬¸ì œê°€ ëœë‹¤. <br />
ë˜í•œ í˜¸ì¶œí•˜ëŠ” ê²ƒ ìì²´ë„ ì¤‘ë³µì´ë‹¤.</p>

<h4 id="í”„ë¡ íŠ¸-ì»¨íŠ¸ë¡¤ëŸ¬front-controller-íŒ¨í„´ì„-ë„ì…í•˜ë©´-ì´ëŸ°-ë¬¸ì œë¥¼-ê¹”ë”í•˜ê²Œ-í•´ê²°í• -ìˆ˜-ìˆë‹¤">í”„ë¡ íŠ¸ ì»¨íŠ¸ë¡¤ëŸ¬(Front Controller) <strong>íŒ¨í„´</strong>ì„ ë„ì…í•˜ë©´ ì´ëŸ° ë¬¸ì œë¥¼ ê¹”ë”í•˜ê²Œ í•´ê²°í•  ìˆ˜ ìˆë‹¤.</h4>

<hr />

<p>âœï¸ ê¹€ì˜ë‹˜ì˜ <strong>ìŠ¤í”„ë§ MVC 1í¸ - ë°±ì—”ë“œ ì›¹ ê°œë°œ í•µì‹¬ ê¸°ìˆ </strong> ê°•ì˜ ë…¸íŠ¸ âœï¸</p>

	  ]]></description>
	</item>

	<item>
	  <title>ğŸ“‹ Spring MVC - 3. ì„œë¸”ë¦¿, JSP, MVC íŒ¨í„´</title>
	  <link>//spring-mvc-5</link>
	  <author></author>
	  <pubDate>2021-05-03T19:18:00+09:00</pubDate>
	  <guid>//spring-mvc-5</guid>
	  <description><![CDATA[
	     <h2 id="ìŠ¤í”„ë§-mvc-ì „ì²´-êµ¬ì¡°">ìŠ¤í”„ë§ MVC ì „ì²´ êµ¬ì¡°</h2>

<p><img src="https://images.velog.io/images/new_wisdom/post/6b0d1860-915b-4819-9d2f-9521353e2142/image.png" style="zoom:80%;" /></p>

<h4 id="ì§€ê¸ˆê»-ë§Œë“¤ì—ˆë˜-í”„ë ˆì„-ì›Œí¬---ìŠ¤í”„ë§-mvc">ì§€ê¸ˆê» ë§Œë“¤ì—ˆë˜ í”„ë ˆì„ ì›Œí¬ &lt;-&gt; ìŠ¤í”„ë§ MVC</h4>

<ul>
  <li>FrontController - DispatcherServlet</li>
  <li>HandlerMappingMap - HandlerMapping</li>
  <li>MyHandlerAdapter - HandlerAdapter</li>
  <li>ModelView - ModelAndView</li>
  <li>ViewResolver - ViewResolver</li>
  <li>MyView - View</li>
</ul>

<h3 id="dispatcherservlet">DispatcherServlet</h3>

<p>DispacherServlet ë„ ë¶€ëª¨ í´ë˜ìŠ¤ì—ì„œ HttpServlet ì„ ìƒì† ë°›ì•„ì„œ ì‚¬ìš©í•˜ê³ , ì„œë¸”ë¦¿ìœ¼ë¡œ ë™ì‘í•œë‹¤.</p>

<p><img src="https://images.velog.io/images/new_wisdom/post/630a4870-d2a9-4dec-a4c3-ccfe49db023a/image.png" style="zoom:67%;" /></p>

<p>ìŠ¤í”„ë§ ë¶€íŠ¸ëŠ” DispatcherServletë¥¼ ìë™ìœ¼ë¡œ ë“±ë¡í•˜ë©´ì„œ ëª¨ë“  ê²½ë¡œì— ëŒ€í•´ì„œ ë§¤í•‘í•œë‹¤.</p>

<h4 id="ìš”ì²­ì˜-íë¦„">ìš”ì²­ì˜ íë¦„</h4>

<p>DispatcherServletì´ í˜¸ì¶œë˜ë©´ <code class="highlighter-rouge">service()</code> ê°€ í˜¸ì¶œëœë‹¤.<br />
ìµœì¢…ì ìœ¼ë¡œëŠ” DispatcherServlet.doDispatch()` ê°€ í˜¸ì¶œëœë‹¤.</p>

<h4 id="dodispatch">doDispatch()</h4>

<p><img src="https://images.velog.io/images/new_wisdom/post/cbfe84c7-a2f8-4bf1-a082-42c141b2e287/image.png" style="zoom:67%;" /></p>

<p>DispatcherServletì˜ doDispatch()ì˜ ì£¼ìš” ë¶€ë¶„ë“¤ì„ ì‚´í´ë³´ì!</p>

<p><img src="https://images.velog.io/images/new_wisdom/post/0e644c4e-cd85-405a-a1ea-f063768df8a1/image.png" alt="" /></p>

<ul>
  <li>ModelAndView</li>
  <li>getHandler() : í•¸ë“¤ëŸ¬ë¥¼ ê°€ì ¸ì˜¨ë‹¤.
    <ul>
      <li>í•¸ë“¤ëŸ¬ê°€ ì—†ìœ¼ë©´ 404ë¡œ ì…‹íŒ…ì„ í•œë‹¤.</li>
    </ul>
  </li>
  <li>getHandlerAdapter() : í•¸ë“¤ëŸ¬ ì–´ëŒ‘í„°ë¥¼ ê°€ì ¸ì˜¨ë‹¤.</li>
</ul>

<p><img src="https://images.velog.io/images/new_wisdom/post/536712af-32f3-41fc-af6f-5d885365747d/image.png" style="zoom:67%;" /></p>

<ul>
  <li>í•¸ë“¤ëŸ¬ ì–´ëŒ‘í„°ë¡œ í•¸ë“¤ëŸ¬ í˜¸ì¶œí•˜ê³  ModelAndView ë°˜í™˜</li>
</ul>

<p><img src="https://images.velog.io/images/new_wisdom/post/eef62fa6-513d-4ed3-b7a3-18ad10ae0074/image.png" style="zoom:67%;" /></p>

<ul>
  <li>view ë Œë”ë§ í˜¸ì¶œ</li>
</ul>

<p><img src="https://images.velog.io/images/new_wisdom/post/5a04d84a-5b0c-456c-baa1-ddf4401c2f36/image.png" alt="" /></p>

<ul>
  <li>ViewResolverë¥¼ í†µí•´ì„œ viewë¥¼ ì°¾ì•„ ë°˜í™˜</li>
</ul>

<p><img src="https://images.velog.io/images/new_wisdom/post/56d8ddca-3457-4b3a-a7b8-c462504d98d8/image.png" alt="" /></p>

<ul>
  <li>View ë Œë”ë§</li>
</ul>

<h3 id="ìŠ¤í”„ë§-mvc-êµ¬ì¡°">ìŠ¤í”„ë§ MVC êµ¬ì¡°</h3>

<ol>
  <li>í•¸ë“¤ëŸ¬ ì¡°íšŒ : í•¸ë“¤ëŸ¬ ë§¤í•‘ì„ í†µí•´ ìš”ì²­ URLì— ë§¤í•‘ëœ í•¸ë“¤ëŸ¬ ì¡°íšŒ</li>
  <li>í•¸ë“¤ëŸ¬ ì–´ëŒ‘í„° ì¡°íšŒ : í•¸ë“¤ëŸ¬ë¥¼ ì‹¤í–‰í•  ìˆ˜ ìˆëŠ” í•¸ë“¤ëŸ¬ ì–´ëŒ‘í„° ì¡°íšŒ</li>
  <li>í•¸ë“¤ëŸ¬ ì–´ëŒ‘í„° ì‹¤í–‰ : í•¸ë“¤ëŸ¬ ì–´ëŒ‘í„° ì‹¤í–‰</li>
  <li>í•¸ë“¤ëŸ¬ ì‹¤í–‰ : í•¸ë“¤ëŸ¬ ì–´ëŒ‘í„°ê°€ ì‹¤ì œ í•¸ë“¤ëŸ¬ ì‹¤í–‰</li>
  <li>ModelAndView ë°˜í™˜ : í•¸ë“¤ëŸ¬ ì–´ëŒ‘í„°ëŠ” í•¸ë“¤ëŸ¬ê°€ ë°˜í™˜í•˜ëŠ” ì •ë³´ë¥¼ ModelAndViewë¡œ ë³€í™˜í•´ì„œ ë°˜í™˜</li>
  <li>viewResolver í˜¸ì¶œ : JSPì˜ ê²½ìš° <code class="highlighter-rouge">InternalResourceViewResolver</code> ê°€ ìë™ìœ¼ë¡œ ë“±ë¡ë˜ê³  ì‚¬ìš©ë¨</li>
  <li>view ë°˜í™˜ : ë·° ë¦¬ì¡¸ë²„ëŠ” ë·°ì˜ ë…¼ë¦¬ ì´ë¦„ì„ ë¬¼ë¦¬ ì´ë¦„ìœ¼ë¡œ ë°”ê¾¸ê³  ë Œë”ë§ ì—­í• ì„ ë‹´ë‹¹í•˜ëŠ” ë·° ê°ì²´ ë°˜í™˜
    <ul>
      <li>JSPì˜ ê²½ìš° InternalResourceViewResolver(JstlView) ë¥¼ ë°˜í™˜í•˜ê³  ë‚´ë¶€ì— forward() ë¡œì§ì´ ìˆë‹¤.</li>
    </ul>
  </li>
  <li>ë·° ë Œë”ë§ : ë·°ë¥¼ í†µí•´ì„œ ë·°ë¥¼ ë Œë”ë§ í•œë‹¤.</li>
</ol>

<p>ê°€ì¥ í° ì¥ì ì€ DispatcherServlet  ì½”ë“œì˜ ë³€ê²½ ì—†ì´ ì›í•˜ëŠ” ê¸°ëŠ¥ì„ ë³€ê²½í•˜ê±°ë‚˜ í™•ì¥í•  ìˆ˜ ìˆë‹¤.<br />
ëŒ€ë¶€ë¶„ í™•ì¥ ê°€ëŠ¥í•˜ë„ë¡ ì¸í„°í˜ì´ìŠ¤ë¡œ ì œê³µí•œë‹¤.</p>

<p>í•˜ì§€ë§Œ ì‚¬ì‹¤ ìš°ë¦¬ê°€ í™•ì¥í•  ì»¨íŠ¸ë¡¤ëŸ¬ëŠ” ê±°ì˜ ì—†ë‹¤.</p>

<hr />

<h2 id="í•¸ë“¤ëŸ¬-ë§¤í•‘ê³¼-í•¸ë“¤ëŸ¬-ì–´ëŒ‘í„°">í•¸ë“¤ëŸ¬ ë§¤í•‘ê³¼ í•¸ë“¤ëŸ¬ ì–´ëŒ‘í„°</h2>

<h3 id="ê³¼ê±°-controller-ì¸í„°í˜ì´ìŠ¤">ê³¼ê±° Controller ì¸í„°í˜ì´ìŠ¤</h3>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">interface</span> <span class="nc">Controller</span> <span class="o">{</span>
    <span class="n">ModelAndView</span> <span class="nf">handleRequest</span><span class="o">(</span><span class="n">HttpServletRequest</span> <span class="n">request</span><span class="o">,</span> <span class="n">HttpServletResponse</span> <span class="n">response</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">Exception</span><span class="o">;</span>
<span class="o">}</span>
</code></pre></div></div>

<ul>
  <li><code class="highlighter-rouge">@Component</code> :  â€œâ€œ/springmvc/old-controller: ë¼ëŠ” ì´ë¦„ì˜ ìŠ¤í”„ë§ ë¹ˆìœ¼ë¡œ ë“±ë¡</li>
  <li>ë¹ˆì˜ ì´ë¦„ìœ¼ë¡œ<strong>URL</strong>ì„ ë§¤í•‘</li>
</ul>

<h4 id="ìœ„-ì»¨íŠ¸ë¡¤ëŸ¬ê°€-í˜¸ì¶œë˜ëŠ”-ë°©ì‹">ìœ„ ì»¨íŠ¸ë¡¤ëŸ¬ê°€ í˜¸ì¶œë˜ëŠ” ë°©ì‹</h4>

<ul>
  <li><strong>HandlerMapping</strong>(í•¸ë“¤ëŸ¬ ë§¤í•‘)
    <ul>
      <li>í•¸ë“¤ëŸ¬ ë§¤í•‘ì—ì„œ ì´ ì»¨íŠ¸ë¡¤ëŸ¬ë¥¼ ì°¾ì„ ìˆ˜ ìˆì–´ì•¼ í•¨
 ex) <strong>ìŠ¤í”„ë§ ë¹ˆì˜ ì´ë¦„ìœ¼ë¡œ í•¸ë“¤ëŸ¬ë¥¼ ì°¾ì„ ìˆ˜ ìˆëŠ” í•¸ë“¤ëŸ¬ ë§¤í•‘</strong> í•„ìš”</li>
    </ul>
  </li>
  <li><strong>HandlerAdapter</strong>(í•¸ë“¤ëŸ¬ ì–´ëŒ‘í„°)
    <ul>
      <li>í•¸ë“¤ëŸ¬ ë§¤í•‘ì„ í†µí•´ì„œ ì°¾ì€ í•¸ë“¤ëŸ¬ë¥¼ ì‹¤í–‰í•  ìˆ˜ ìˆëŠ” í•¸ë“¤ëŸ¬ ì–´ëŒ‘í„°ê°€ í•„ìš”
 ex) Controller ì¸í„°í˜ì´ìŠ¤ë¥¼ ì‹¤í–‰í•  ìˆ˜ ìˆëŠ” í•¸ë“¤ëŸ¬ ì–´ëŒ‘í„°ë¥¼ ì°¾ê³  ì‹¤í–‰í•´ì•¼ í•¨</li>
    </ul>
  </li>
  <li>ìŠ¤í”„ë§ì€ ì´ë¯¸ í•„ìš”í•œ í•¸ë“¤ëŸ¬ ë§¤í•‘ê³¼ í•¸ë“¤ëŸ¬ ì–´ëŒ‘í„°ë¥¼ ëŒ€ë¶€ë¶„ êµ¬í˜„í•´ë‘ì—ˆë‹¤.</li>
</ul>

<h4 id="ìŠ¤í”„ë§-ë¶€íŠ¸ê°€-ìë™ìœ¼ë¡œ-ë“±ë¡í•˜ëŠ”-í•¸ë“¤ëŸ¬-ë§¤í•‘ê³¼-í•¸ë“¤ëŸ¬-ì–´ëŒ‘í„°">ìŠ¤í”„ë§ ë¶€íŠ¸ê°€ ìë™ìœ¼ë¡œ ë“±ë¡í•˜ëŠ” í•¸ë“¤ëŸ¬ ë§¤í•‘ê³¼ í•¸ë“¤ëŸ¬ ì–´ëŒ‘í„°</h4>

<ul>
  <li><strong>HandlerMapping</strong>
    <ul>
      <li>RequestMappingHandlerMapping : ì• ë…¸í…Œì´ì…˜ ê¸°ë°˜ì˜ ì»¨íŠ¸ë¡¤ëŸ¬ì¸ @RequestMappingì—ì„œ ì‚¬ìš© - ê°€ì¥ ìš°ì„ ìˆœìœ„ê°€ ë†’ìŒ</li>
      <li>BeanNameUrlHandlerMapping : ìŠ¤í”„ë§ ë¹ˆì˜ ì´ë¦„ìœ¼ë¡œ í•¸ë“¤ëŸ¬ë¥¼ ì°¾ëŠ”ë‹¤. 
(ìœ„ ì˜ˆì œì˜ @Component)</li>
    </ul>
  </li>
  <li><strong>HandlerAdapter</strong>
    <ul>
      <li>RequestMappingHandlerAdapter : ì• ë…¸í…Œì´ì…˜ ê¸°ë°˜ì˜ ì»¨íŠ¸ë¡¤ëŸ¬ì¸ @RequestMappingì—ì„œ ì‚¬ìš© - ê°€ì¥ ìš°ì„ ìˆœìœ„ê°€ ë†’ìŒ</li>
      <li>HttpRequestHandlerAdapter : HttpRequestHandler ì²˜ë¦¬</li>
      <li>SimpleControllerHandlerAdapter : Controller ì¸í„°í˜ì´ìŠ¤(ì• ë…¸í…Œì´ì…˜X, ê³¼ê±°ì— ì‚¬ìš©) ì²˜ë¦¬</li>
    </ul>
  </li>
</ul>

<h5 id="1-í•¸ë“¤ëŸ¬-ë§¤í•‘ìœ¼ë¡œ-í•¸ë“¤ëŸ¬-ì¡°íšŒ"><strong>1.</strong> <strong>í•¸ë“¤ëŸ¬ ë§¤í•‘ìœ¼ë¡œ í•¸ë“¤ëŸ¬ ì¡°íšŒ</strong></h5>

<p>HandlerMapping ì„ ìˆœì„œëŒ€ë¡œ ì‹¤í–‰í•´ì„œ, í•¸ë“¤ëŸ¬ë¥¼ ì°¾ëŠ”ë‹¤.</p>

<p>ë¹ˆì´ë¦„ìœ¼ë¡œ í•¸ë“¤ëŸ¬ë¥¼ ì°¾ì•„ì•¼í•˜ê¸° ë•Œë¬¸ì— ë¹ˆì´ë¦„ìœ¼ë¡œí•¸ë“¤ëŸ¬ë¥¼ì°¾ì•„ì£¼ëŠ” BeanNameUrlHandlerMappingê°€ ì‹¤í–‰ì— ì„±ê³µí•˜ê³  í•¸ë“¤ëŸ¬ì¸ OldController ë¥¼ ë°˜í™˜í•œë‹¤.</p>

<h5 id="2-í•¸ë“¤ëŸ¬-ì–´ëŒ‘í„°-ì¡°íšŒ"><strong>2.</strong> <strong>í•¸ë“¤ëŸ¬ ì–´ëŒ‘í„° ì¡°íšŒ</strong></h5>

<p>HandlerAdapter ì˜ supports() ë¥¼ ìˆœì„œëŒ€ë¡œ í˜¸ì¶œí•œë‹¤. SimpleControllerHandlerAdapter ê°€ Controller ì¸í„°í˜ì´ìŠ¤ë¥¼ ì§€ì›í•˜ë¯€ë¡œ ëŒ€ìƒì´ ëœë‹¤.</p>

<h5 id="3-í•¸ë“¤ëŸ¬-ì–´ëŒ‘í„°-ì‹¤í–‰"><strong>3.</strong> <strong>í•¸ë“¤ëŸ¬ ì–´ëŒ‘í„° ì‹¤í–‰</strong></h5>

<p>DispatcherServletì´ ì¡°íšŒí•œ SimpleControllerHandlerAdapter ë¥¼ ì‹¤í–‰í•˜ë©´ì„œ í•¸ë“¤ëŸ¬ ì •ë³´ë„ í•¨ê»˜ ë„˜ê²¨ì¤€ë‹¤.</p>

<p>SimpleControllerHandlerAdapter ëŠ” í•¸ë“¤ëŸ¬ì¸ OldController ë¥¼ ë‚´ë¶€ì—ì„œ ì‹¤í–‰í•˜ê³ , ê·¸ ê²°ê³¼ë¥¼ ë°˜í™˜í•œë‹¤.</p>

<h3 id="httprequesthandler"><strong>HttpRequestHandler</strong></h3>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="kd">public</span> <span class="kd">interface</span> <span class="nc">HttpRequestHandler</span> <span class="o">{</span>
         <span class="kt">void</span> <span class="nf">handleRequest</span><span class="o">(</span><span class="n">HttpServletRequest</span> <span class="n">request</span><span class="o">,</span> <span class="n">HttpServletResponse</span> <span class="n">response</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">ServletException</span><span class="o">,</span> <span class="n">IOException</span><span class="o">;</span>
<span class="o">}</span>

</code></pre></div></div>

<ul>
  <li><strong>ì„œë¸”ë¦¿ê³¼ ê°€ì¥ ìœ ì‚¬í•œ í˜•íƒœ</strong>ì˜ í•¸ë“¤ëŸ¬</li>
</ul>

<h5 id="1-í•¸ë“¤ëŸ¬-ë§¤í•‘ìœ¼ë¡œ-í•¸ë“¤ëŸ¬-ì¡°íšŒ-1"><strong>1.</strong> <strong>í•¸ë“¤ëŸ¬ ë§¤í•‘ìœ¼ë¡œ í•¸ë“¤ëŸ¬ ì¡°íšŒ</strong></h5>

<p>HandlerMapping ì„ ìˆœì„œëŒ€ë¡œ ì‹¤í–‰í•´ì„œ, í•¸ë“¤ëŸ¬ë¥¼ ì°¾ëŠ”ë‹¤.</p>

<p>ë¹ˆì´ë¦„ìœ¼ë¡œ í•¸ë“¤ëŸ¬ë¥¼ ì°¾ì•„ì•¼í•˜ê¸° ë•Œë¬¸ì— ë¹ˆì´ë¦„ìœ¼ë¡œ í•¸ë“¤ëŸ¬ë¥¼ì°¾ì•„ì£¼ëŠ” BeanNameUrlHandlerMapping ê°€ ì‹¤í–‰ì— ì„±ê³µí•˜ê³  í•¸ë“¤ëŸ¬ì¸ MyHttpRequestHandler ë¥¼ ë°˜í™˜í•œë‹¤.</p>

<h5 id="2-í•¸ë“¤ëŸ¬-ì–´ëŒ‘í„°-ì¡°íšŒ-1"><strong>2.</strong> <strong>í•¸ë“¤ëŸ¬ ì–´ëŒ‘í„° ì¡°íšŒ</strong></h5>

<p>HandlerAdapter ì˜ supports() ë¥¼ ìˆœì„œëŒ€ë¡œ í˜¸ì¶œí•œë‹¤.
HttpRequestHandlerAdapter ê°€ HttpRequestHandler ì¸í„°í˜ì´ìŠ¤ë¥¼ ì§€ì›í•˜ë¯€ë¡œ ëŒ€ìƒì´ ëœë‹¤.</p>

<h5 id="3-í•¸ë“¤ëŸ¬-ì–´ëŒ‘í„°-ì‹¤í–‰-1"><strong>3.</strong> <strong>í•¸ë“¤ëŸ¬ ì–´ëŒ‘í„° ì‹¤í–‰</strong></h5>

<p>DispatcherServletì´ ì¡°íšŒí•œ HttpRequestHandlerAdapter ë¥¼ ì‹¤í–‰í•˜ë©´ì„œ í•¸ë“¤ëŸ¬ ì •ë³´ë„ í•¨ê»˜ ë„˜ê²¨ì¤€ë‹¤.</p>

<p>HttpRequestHandlerAdapter ëŠ” í•¸ë“¤ëŸ¬ì¸ MyHttpRequestHandler ë¥¼ ë‚´ë¶€ì—ì„œ ì‹¤í–‰í•˜ê³ , ê·¸ ê²°ê³¼ë¥¼ ë°˜í™˜í•œë‹¤.</p>

<hr />

<h2 id="ë·°-ë¦¬ì¡¸ë²„">ë·° ë¦¬ì¡¸ë²„</h2>

<h4 id="application-properties">application-properties</h4>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>spring.mvc.view.prefix=/WEB-INF/views/
spring.mvc.view.suffix=.jsp
</code></pre></div></div>

<p>ìŠ¤í”„ë§ ë¶€íŠ¸ëŠ” <code class="highlighter-rouge">InternalResourceViewResolver</code> ë¼ëŠ” ë·° ë¦¬ì¡¸ë²„ë¥¼ ìë™ìœ¼ë¡œ ë“±ë¡í•œë‹¤.<br />
ì´ë•Œ <code class="highlighter-rouge">application.properties</code> ì— ë“±ë¡í•œ <code class="highlighter-rouge">spring.mvc.view.prefix</code> , <code class="highlighter-rouge">spring.mvc.view.suffix</code> ì„¤ì • ì •ë³´ë¥¼ ì‚¬ìš©í•´ì„œ ë“±ë¡í•œë‹¤.</p>

<h4 id="ìŠ¤í”„ë§-ë¶€íŠ¸ê°€-ìë™ìœ¼ë¡œ-ë“±ë¡í•˜ëŠ”-ë·°-ë¦¬ì¡¸ë²„">ìŠ¤í”„ë§ ë¶€íŠ¸ê°€ ìë™ìœ¼ë¡œ ë“±ë¡í•˜ëŠ” ë·° ë¦¬ì¡¸ë²„</h4>

<ul>
  <li>BeanNameViewResolver : ë¹ˆ ì´ë¦„ìœ¼ë¡œ ë·°ë¥¼ ì°¾ì•„ì„œ ë°˜í™˜</li>
  <li>InternalResourceViewResolver : JSPë¥¼ ì²˜ë¦¬í•  ìˆ˜ ìˆëŠ” ë·°ë¥¼ ë°˜í™˜</li>
</ul>

<p><strong>1.</strong> <strong>í•¸ë“¤ëŸ¬ ì–´ëŒ‘í„° í˜¸ì¶œ</strong><br />
í•¸ë“¤ëŸ¬ ì–´ëŒ‘í„°ë¥¼ í†µí•´ ë…¼ë¦¬ ë·° ì´ë¦„ì„ íšë“</p>

<p><strong>2. ViewResolver í˜¸ì¶œ</strong></p>

<p>new-form ì´ë¼ëŠ” ë·° ì´ë¦„ìœ¼ë¡œ viewResolverë¥¼ ìˆœì„œëŒ€ë¡œ í˜¸ì¶œ
InternalResourceViewResolver ê°€ í˜¸ì¶œë¨</p>

<h5 id="3-internalresourceviewresolver"><strong>3. InternalResourceViewResolver</strong></h5>

<p>ë‚´ë¶€ì—ì„œ ìì›ì„ ì°¾ì„ ìˆ˜ ìˆìŒì„ ì˜ë¯¸í•œë‹¤.<br />
ì´ ë·° ë¦¬ì¡¸ë²„ëŠ” InternalResourceView ë¥¼ ë°˜í™˜</p>

<h5 id="4-ë·°---internalresourceview">4. <strong>ë·°</strong> <strong>- InternalResourceView</strong></h5>

<p>InternalResourceView ëŠ” JSPì²˜ëŸ¼ í¬ì›Œë“œ forward() ë¥¼ í˜¸ì¶œí•´ì„œ ì²˜ë¦¬í•  ìˆ˜ ìˆëŠ” ê²½ìš°ì— ì‚¬ìš©</p>

<h5 id="5-viewrender">5. view.render()</h5>

<p>view.render() ê°€ í˜¸ì¶œë˜ê³  InternalResourceView ëŠ” forward() ë¥¼ ì‚¬ìš©í•´ì„œ JSPë¥¼ ì‹¤í–‰í•œë‹¤</p>

<p>Thymeleaf ë·° í…œí”Œë¦¿ì„ ì‚¬ìš©í•˜ë©´ ThymeleafViewResolver ë¥¼ ë“±ë¡í•´ì•¼ í•œë‹¤. <br />
ìµœê·¼ì—ëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬ë§Œ ì¶”ê°€í•˜ë©´ ìŠ¤í”„ë§ ë¶€íŠ¸ê°€ ì´ëŸ° ì‘ì—…ë„ ëª¨ë‘ ìë™í™”í•´ì¤€ë‹¤.</p>

	  ]]></description>
	</item>

	<item>
	  <title>ğŸ“‹ Spring MVC - 2. ì„œë¸”ë¦¿</title>
	  <link>//spring-mvc-2</link>
	  <author></author>
	  <pubDate>2021-05-03T19:18:00+09:00</pubDate>
	  <guid>//spring-mvc-2</guid>
	  <description><![CDATA[
	     <h2 id="ì˜ˆì œ">ì˜ˆì œ</h2>

<p>ìŠ¤í”„ë§ì„ ì‚¬ìš©í•˜ì§€ëŠ” ì•Šì§€ë§Œ ìŠ¤í”„ë§ ë¶€íŠ¸ í”„ë¡œì íŠ¸ë¥¼ ë§Œë“ ë‹¤. <br />
ì„œë¸”ë¦¿ì€ í†°ìº£ ê°™ì€ WASë¥¼ ì§ì ‘ ì„¤ì¹˜í•˜ê³ , ê·¸ ìœ„ì— ì„œë¸”ë¦¿ ì½”ë“œë¥¼ í´ë˜ìŠ¤ íŒŒì¼ë¡œ ë¹Œë“œí•´ì„œ ì˜¬ë¦° ë‹¤ìŒ í†°ìº£ ì„œë²„ë¥¼ ì‹¤í–‰í•´ì•¼ í–ˆëŠ”ë°,<br />
ìŠ¤í”„ë§ ë¶€íŠ¸ëŠ” í†°ìº£ ì„œë²„ë¥¼ ë‚´ì¥í•˜ê³  ìˆìœ¼ë‹ˆ, ì´ë¡œ ì§„í–‰í•œë‹¤.</p>

<p><img src="https://images.velog.io/images/new_wisdom/post/d9e7d412-01b4-4131-9aed-28fbf9acbe6e/image.png" alt="" /></p>

<p>ë³´í†µì€ Jarë¥¼ ì„ íƒí•˜ì§€ë§Œ, JSPë¥¼ ëŒë¦¬ê¸° ìœ„í•´ Warë¥¼ ì„ íƒí•œë‹¤.</p>

<h4 id="helloservlet">HelloServlet</h4>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// ì„œë¸”ë¦¿ì´ í˜¸ì¶œë˜ë©´ ì´ serviceê°€ í˜¸ì¶œëœë‹¤.</span>
<span class="nd">@WebServlet</span><span class="o">(</span><span class="n">name</span> <span class="o">=</span> <span class="s">"helloServlet"</span><span class="o">,</span> <span class="n">urlPatterns</span> <span class="o">=</span> <span class="s">"/hello"</span><span class="o">)</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">HelloServlet</span> <span class="kd">extends</span> <span class="n">HttpServlet</span> <span class="o">{</span>
    <span class="nd">@Override</span>
    <span class="kd">protected</span> <span class="kt">void</span> <span class="nf">service</span><span class="o">(</span><span class="n">HttpServletRequest</span> <span class="n">req</span><span class="o">,</span> <span class="n">HttpServletResponse</span> <span class="n">resp</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">ServletException</span><span class="o">,</span> <span class="n">IOException</span> <span class="o">{</span>
        <span class="kd">super</span><span class="o">.</span><span class="na">service</span><span class="o">(</span><span class="n">req</span><span class="o">,</span> <span class="n">resp</span><span class="o">);</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"HelloServlet"</span><span class="o">);</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Request : "</span> <span class="o">+</span> <span class="n">req</span><span class="o">);</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Response : "</span> <span class="o">+</span> <span class="n">resp</span><span class="o">);</span>

        <span class="n">String</span> <span class="n">name</span> <span class="o">=</span> <span class="n">req</span><span class="o">.</span><span class="na">getParameter</span><span class="o">(</span><span class="s">"name"</span><span class="o">);</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">name</span><span class="o">);</span>
        <span class="n">resp</span><span class="o">.</span><span class="na">setCharacterEncoding</span><span class="o">(</span><span class="s">"utf-8"</span><span class="o">);</span>
        <span class="n">resp</span><span class="o">.</span><span class="na">getWriter</span><span class="o">().</span><span class="na">write</span><span class="o">(</span><span class="s">"hello"</span> <span class="o">+</span> <span class="n">name</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>HelloServlet
Request : org.apache.catalina.connector.RequestFacade@de1a8e6
Response : org.apache.catalina.connector.ResponseFacade@2b3735f6
amazzi
</code></pre></div></div>

<ul>
  <li><code class="highlighter-rouge">@WebServlet</code> : ì„œë¸”ë¦¿ ì–´ë…¸í…Œì´ì…˜</li>
  <li><code class="highlighter-rouge">@ServletComponentScan</code> : ìŠ¤í”„ë§ì´ ìë™ìœ¼ë¡œ ì„œë¸”ë¦¿ì„ ì°¾ì•„ ë“±ë¡í•´ì¤€ë‹¤.</li>
  <li>HTTP ìš”ì²­ì´ ì˜¤ë©´ ì„œë¸”ë¦¿ ì»¨í…Œì´ë„ˆì¸ WASê°€ HTTP ìš”ì²­, ì‘ë‹µ ê°ì²´ë¥¼ ì„œë¸”ë¦¿ì— ë˜ì ¸ì¤€ë‹¤.</li>
  <li><code class="highlighter-rouge">req.getParameter()</code> :  ìš”ì²­ì—ì„œ í•´ë‹¹ Parameterë¥¼ ê°€ì ¸ì˜¨ë‹¤.</li>
  <li><code class="highlighter-rouge">resp.setCharacterEncoding("utf-8");</code> : í—¤ë”ì— CharacterEncodingì„ ì§€ì •í•œë‹¤.</li>
  <li><code class="highlighter-rouge">resp.getWriter().write();</code> : <code class="highlighter-rouge">write()</code> ì— ë°”ë””ì— ë‹´ì„ ë°ì´í„°ë¥¼ ë„£ì–´ì¤€ë‹¤.</li>
</ul>

<h4 id="-requestfacade">ğŸ¤” RequestFacade?</h4>

<p>HttpServletRequestëŠ” ì¸í„°í˜ì´ìŠ¤ì´ë‹¤.<br />
ì—¬ëŸ¬ê°€ì§€ WAS ì„œë²„ë“¤ì´ ì´ ì¸í„°í˜ì´ìŠ¤ì˜ êµ¬í˜„ì²´ë¥¼ êµ¬í˜„í•˜ê³  ìˆì–´ ë‹¤ì–‘í•œ WASë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ê²ƒì´ë‹¤.</p>

<h4 id="http-ìš”ì²­-ë©”ì‹œì§€-ë¡œê·¸ë¡œ-í™•ì¸í•˜ê¸°">HTTP ìš”ì²­ ë©”ì‹œì§€ ë¡œê·¸ë¡œ í™•ì¸í•˜ê¸°</h4>

<p>application-propertiesì— ë‹¤ìŒì„ ì¶”ê°€í•œë‹¤.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>logging.level.org.apache.coyote.http11=debug
</code></pre></div></div>

<h4 id="ì›¹-ì• í”Œë¦¬ì¼€ì´ì…˜-ì„œë²„ì˜-ìš”ì²­-ì‘ë‹µ-êµ¬ì¡°">ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ ì„œë²„ì˜ ìš”ì²­ ì‘ë‹µ êµ¬ì¡°</h4>

<p><img src="https://images.velog.io/images/new_wisdom/post/1d33b3a2-3565-4487-b17d-c7af286c3c30/image.png" style="zoom:80%;" /></p>

<hr />

<h2 id="httpservletrequest">HttpServletRequest</h2>

<p>ì„œë¸”ë¦¿ì€ ê°œë°œìê°€ HTTP ìš”ì²­ ë©”ì‹œì§€ë¥¼ í¸ë¦¬í•˜ê²Œ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ ê°œë°œì ëŒ€ì‹ ì— HTTP ìš”ì²­ ë©”ì‹œì§€ë¥¼ íŒŒì‹±í•œë‹¤. <br />
ê·¸ë¦¬ê³  ê²°ê³¼ë¥¼ HttpServletRequest ê°ì²´ì— ë‹´ì•„ì„œ ì œê³µí•œë‹¤.</p>

<ul>
  <li>START LINE
    <ul>
      <li>HTTP ë©”ì†Œë“œ</li>
      <li>URL</li>
      <li>ì¿¼ë¦¬ ìŠ¤íŠ¸ë§</li>
      <li>ìŠ¤í‚¤ë§ˆ, í”„ë¡œí† ì½œ</li>
    </ul>
  </li>
  <li>HEADER
    <ul>
      <li>í—¤ë” ì¡°íšŒ</li>
    </ul>
  </li>
  <li>BODY
    <ul>
      <li>form íŒŒë¼ë¯¸í„°ì˜ í˜•ì‹ ì¡°íšŒ</li>
      <li>message body ë°ì´í„° ì§ì ‘ ì¡°íšŒ</li>
    </ul>
  </li>
  <li>ë¶€ê°€ ê¸°ëŠ¥
    <ul>
      <li>ì„ì‹œ ì €ì¥ì†Œ ê¸°ëŠ¥
        <ul>
          <li>í•´ë‹¹ HTTP ìš”ì²­ì´ ì‹œì‘ë¶€í„° ëë‚  ë•Œ ê¹Œì§€ ìœ ì§€ë˜ëŠ” ì„ì‹œ ì €ì¥ì†Œ ê¸°ëŠ¥</li>
          <li>ì €ì¥: request.setAttribute(name, value)</li>
          <li>ì¡°íšŒ: request.getAttribute(name)</li>
        </ul>
      </li>
      <li>ì„¸ì…˜ ê´€ë¦¬ ê¸°ëŠ¥
        <ul>
          <li>request.getSession(create: true)</li>
        </ul>
      </li>
    </ul>
  </li>
</ul>

<h4 id="ê¸°ë³¸-ì‚¬ìš©">ê¸°ë³¸ ì‚¬ìš©</h4>

<h4 id="start-line">Start Line</h4>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">request</span><span class="o">.</span><span class="na">getMethod</span><span class="o">()</span> <span class="o">=</span> <span class="n">GET</span>
<span class="n">request</span><span class="o">.</span><span class="na">getProtocal</span><span class="o">()</span> <span class="o">=</span> <span class="n">HTTP</span><span class="o">/</span><span class="mf">1.1</span>
<span class="n">request</span><span class="o">.</span><span class="na">getScheme</span><span class="o">()</span> <span class="o">=</span> <span class="n">http</span>
<span class="n">request</span><span class="o">.</span><span class="na">getRequestURL</span><span class="o">()</span> <span class="o">=</span> <span class="nl">http:</span><span class="c1">//localhost:8080/request-header</span>
<span class="n">request</span><span class="o">.</span><span class="na">getRequestURI</span><span class="o">()</span> <span class="o">=</span> <span class="o">/</span><span class="n">request</span><span class="o">-</span><span class="n">header</span>
<span class="n">request</span><span class="o">.</span><span class="na">getQueryString</span><span class="o">()</span> <span class="o">=</span> <span class="n">username</span><span class="o">=</span><span class="n">hello</span>
<span class="n">request</span><span class="o">.</span><span class="na">isSecure</span><span class="o">()</span> <span class="o">=</span> <span class="kc">false</span>
</code></pre></div></div>

<h4 id="í—¤ë”-ì •ë³´">í—¤ë” ì •ë³´</h4>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">request</span><span class="o">.</span><span class="na">getHeaderNames</span><span class="o">().</span><span class="na">asIterator</span><span class="o">()</span>
        <span class="o">.</span><span class="na">forEachRemaining</span><span class="o">(</span><span class="n">headerName</span> <span class="o">-&gt;</span> <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">headerName</span> <span class="o">+</span> <span class="s">": "</span> <span class="o">+</span>
                <span class="n">request</span><span class="o">.</span><span class="na">getHeader</span><span class="o">(</span><span class="n">headerName</span><span class="o">)));</span>
<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"--- Headers - end ---"</span><span class="o">);</span>
<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">();</span>
</code></pre></div></div>

<p>ì´ ì™¸ì—ë„ Header ì •ë³´ë¥¼ ì¶”ì¶œí•˜ëŠ” ë©”ì„œë“œë“¤ì´ ìˆë‹¤.</p>

<ul>
  <li>request.getServerName()</li>
  <li>request.getServerPort()</li>
  <li>request.getLocale()</li>
  <li>request.getCookies()</li>
  <li>request.getContentType()</li>
  <li>request.getCharacterEncoding()</li>
</ul>

<hr />

<h2 id="http-ìš”ì²­-ë°ì´í„°---get-ì¿¼ë¦¬-íŒŒë¼ë¯¸í„°">HTTP ìš”ì²­ ë°ì´í„° - GET ì¿¼ë¦¬ íŒŒë¼ë¯¸í„°</h2>

<p>ë©”ì‹œì§€ ë°”ë”” ì—†ì´, URLì˜ <strong>ì¿¼ë¦¬ íŒŒë¼ë¯¸í„°</strong>ë¥¼ ì‚¬ìš©í•´ì„œ ë°ì´í„°ë¥¼ ì „ë‹¬í•˜ëŠ” ë°©ë²•. <br />
ì˜ˆ) ê²€ìƒ‰, í•„í„°, í˜ì´ì§•ë“±ì—ì„œ ë§ì´ ì‚¬ìš©</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>http://localhost:8080/request-param?username=hello&amp;age=20
</code></pre></div></div>

<p>ì¿¼ë¦¬íŒŒë¼ë¯¸í„°ëŠ”URLì—ë‹¤ìŒê³¼ê°™ì´ ?ë¥¼ì‹œì‘ìœ¼ë¡œë³´ë‚¼ìˆ˜ìˆë‹¤.ì¶”ê°€íŒŒë¼ë¯¸í„°ëŠ” &amp;ë¡œêµ¬ë¶„í•˜ë©´ëœë‹¤.</p>

<h4 id="requestparamservlet">RequestParamServlet</h4>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cm">/**
 * íŒŒë¼ë¯¸í„° ì „ì†¡ ê¸°ëŠ¥
 * http://localhost:8080/request-param?username=hello&amp;age=20
 */</span>

<span class="nd">@WebServlet</span><span class="o">(</span><span class="n">name</span> <span class="o">=</span> <span class="s">"requestParamServlet"</span><span class="o">,</span> <span class="n">urlPatterns</span> <span class="o">=</span> <span class="s">"/request-param"</span><span class="o">)</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">RequestParamServlet</span> <span class="kd">extends</span> <span class="n">HttpServlet</span> <span class="o">{</span>
    <span class="nd">@Override</span>
    <span class="kd">protected</span> <span class="kt">void</span> <span class="nf">service</span><span class="o">(</span><span class="n">HttpServletRequest</span> <span class="n">req</span><span class="o">,</span> <span class="n">HttpServletResponse</span> <span class="n">resp</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">ServletException</span><span class="o">,</span> <span class="n">IOException</span> <span class="o">{</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"1. ì „ì²´ íŒŒë¼ë¯¸í„° ì¡°íšŒ"</span><span class="o">);</span>
        <span class="n">req</span><span class="o">.</span><span class="na">getParameterNames</span><span class="o">()</span>
                <span class="o">.</span><span class="na">asIterator</span><span class="o">()</span>
                <span class="o">.</span><span class="na">forEachRemaining</span><span class="o">(</span><span class="n">paramName</span> <span class="o">-&gt;</span>
                        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">paramName</span> <span class="o">+</span> <span class="s">"="</span> <span class="o">+</span> <span class="n">req</span><span class="o">.</span><span class="na">getParameter</span><span class="o">(</span><span class="n">paramName</span><span class="o">)));</span>

        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"2. ë‹¨ì¼ íŒŒë¼ë¯¸í„° ì¡°íšŒ (ë” ë§ì´ ì“°ëŠ” ë°©ì‹)"</span><span class="o">);</span>
        <span class="n">String</span> <span class="n">username</span> <span class="o">=</span> <span class="n">req</span><span class="o">.</span><span class="na">getParameter</span><span class="o">(</span><span class="s">"username"</span><span class="o">);</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">username</span><span class="o">);</span>

        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"3. íŒŒë¼ë¯¸í„° ì´ë¦„ì´ ê°™ì€ ì—¬ëŸ¬ê°œ ê°’ì´ ìˆì„ ê²½ìš°"</span><span class="o">);</span>
        <span class="n">String</span><span class="o">[]</span> <span class="n">usernames</span> <span class="o">=</span> <span class="n">req</span><span class="o">.</span><span class="na">getParameterValues</span><span class="o">(</span><span class="s">"username"</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<hr />

<h2 id="http-ìš”ì²­-ë°ì´í„°---post-html-form">HTTP ìš”ì²­ ë°ì´í„° - POST HTML Form</h2>

<p>ë©”ì‹œì§€ ë°”ë””ì— ë°ì´í„°ê°€ ë“¤ì–´ê°€ê¸° ë•Œë¬¸ì— content-typeì´ ìˆë‹¤. <br />
<code class="highlighter-rouge">content-type : application/x-www-form-urlencoded </code><br />
ë°”ë””ì— ì¿¼ë¦¬ íŒŒë¦¬ë¯¸í„° í˜•ì‹ìœ¼ë¡œ ë°ì´í„°ë¥¼ ì „ë‹¬í•œë‹¤. <code class="highlighter-rouge">username=hello&amp;age=20</code></p>

<h4 id="hello-formhtml-ì¼ë¶€">hello-form.html ì¼ë¶€</h4>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;form</span> <span class="na">action=</span><span class="s">"/request-param"</span> <span class="na">method=</span><span class="s">"post"</span><span class="nt">&gt;</span>
    username: <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">name=</span><span class="s">"username"</span><span class="nt">/&gt;</span> age: <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">name=</span><span class="s">"age"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;button</span> <span class="na">type=</span><span class="s">"submit"</span><span class="nt">&gt;</span>ì „ì†¡<span class="nt">&lt;/button&gt;</span>
<span class="nt">&lt;/form&gt;</span>
</code></pre></div></div>

<p>ì´ì „ì— ë§Œë“¤ì—ˆë˜ <strong>requestParamServlet</strong>ì— ìš”ì²­ì„ ë³´ë‚´ë©´,</p>

<p><img src="https://images.velog.io/images/new_wisdom/post/3d6eaa71-b5b2-4166-9aa3-6b3aaf8bf97a/image.png" style="zoom: 50%;" /></p>

<p>ë‹¤ìŒê³¼ ê°™ì€ ê²°ê³¼ë¥¼ ì–»ëŠ”ë‹¤! <br />
ê·¸ëŸ°ë° <strong>requestParamServlet</strong>ëŠ” ì¿¼ë¦¬ íŒŒë¼ë¯¸í„°ë§Œ ì¡°íšŒí•˜ëŠ”ë° ?</p>

<p>application/x-www-form-urlencoded í˜•ì‹ì€ ì¿¼ë¦¬ íŒŒë¼ë¯¸í„° í˜•ì‹ê³¼ ê°™ë‹¤.<br />
ë”°ë¼ì„œ <strong>ì¿¼ë¦¬ íŒŒë¼ë¯¸í„° ì¡°íšŒ ë©”ì„œë“œë¥¼ ê·¸ëŒ€ë¡œ ì‚¬ìš©</strong>í•˜ë©´ ëœë‹¤.
ì„œë²„ ì…ì¥ì—ì„œëŠ” ë‘˜ì˜ í˜•ì‹ì´ ë™ì¼í•˜ë¯€ë¡œ, request.getParameter() ë¡œ í¸ë¦¬í•˜ê²Œ êµ¬ë¶„ì—†ì´ ì¡°íšŒí•  ìˆ˜ ìˆë‹¤.</p>

<p>request.getParameter() ëŠ” GET URL ì¿¼ë¦¬ íŒŒë¼ë¯¸í„° í˜•ì‹ë„ ì§€ì›í•˜ê³ , POST HTML Form í˜•ì‹ë„ ë‘˜ ë‹¤ ì§€ì›í•œë‹¤.</p>

<h4 id="-postmanìœ¼ë¡œ-í…ŒìŠ¤íŠ¸í• -ê²½ìš°">ğŸ’¡ POSTMANìœ¼ë¡œ í…ŒìŠ¤íŠ¸í•  ê²½ìš°</h4>

<p>Form ë°ì´í„°ë¥¼ ì…ë ¥í•˜ê¸° ê·€ì°®ì€ë°, ì´ë•Œ <strong>Content-type</strong>ì„ <code class="highlighter-rouge">application/x-www-form-urlencoded</code> ë¡œ ì„¤ì •í•œë‹¤.</p>

<hr />

<h2 id="http-ìš”ì²­-ë°ì´í„°---api-ë©”ì‹œì§€-ë°”ë””">HTTP ìš”ì²­ ë°ì´í„° - API ë©”ì‹œì§€ ë°”ë””</h2>

<p><strong>HTTP message body</strong>ì— ë°ì´í„°ë¥¼ ì§ì ‘ ë‹´ì•„ì„œ ìš”ì²­í•œë‹¤. <br />
HTTP APIì—ì„œ ì£¼ë¡œ JSONì„ ì‚¬ìš©í•œë‹¤.</p>

<h3 id="ë‹¨ìˆœ-í…ìŠ¤íŠ¸">ë‹¨ìˆœ í…ìŠ¤íŠ¸</h3>

<h4 id="requestbodystringservlet---rawí•œ-string">RequestBodyStringServlet - Rawí•œ String</h4>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@WebServlet</span><span class="o">(</span><span class="n">name</span> <span class="o">=</span> <span class="s">"requestBodyStringServlet"</span><span class="o">,</span> <span class="n">urlPatterns</span> <span class="o">=</span> <span class="s">"/request-body-string"</span><span class="o">)</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">RequestBodyStringServlet</span> <span class="kd">extends</span> <span class="n">HttpServlet</span> <span class="o">{</span>
    <span class="nd">@Override</span>
    <span class="kd">protected</span> <span class="kt">void</span> <span class="nf">service</span><span class="o">(</span><span class="n">HttpServletRequest</span> <span class="n">req</span><span class="o">,</span> <span class="n">HttpServletResponse</span> <span class="n">resp</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">ServletException</span><span class="o">,</span> <span class="n">IOException</span> <span class="o">{</span>
        <span class="n">ServletInputStream</span> <span class="n">inputStream</span> <span class="o">=</span> <span class="n">req</span><span class="o">.</span><span class="na">getInputStream</span><span class="o">();</span> <span class="c1">// byte ì½”ë“œë¥¼ ì–»ìŒ</span>
        <span class="n">String</span> <span class="n">messageBody</span> <span class="o">=</span> <span class="n">StreamUtils</span><span class="o">.</span><span class="na">copyToString</span><span class="o">(</span><span class="n">inputStream</span><span class="o">,</span> <span class="n">StandardCharsets</span><span class="o">.</span><span class="na">UTF_8</span><span class="o">);</span> <span class="c1">// ìŠ¤í”„ë§ì´ ì œê³µí•˜ëŠ” ìœ í‹¸ë¦¬í‹°</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<p>HTML formë„ ì´ë ‡ê²Œ ì¡°íšŒí•  ìˆ˜ ìˆì§€ë§Œ ë²ˆê±°ë¡œìš°ë‹ˆ ì¿¼ë¦¬ íŒŒë¼ë¯¸í„° ì¡°íšŒë¥¼ ì‚¬ìš©í•˜ì!</p>

<h3 id="json">JSON</h3>

<ul>
  <li>content-type: <strong>application/json</strong></li>
</ul>

<h4 id="hellodata">HelloData</h4>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Getter</span>
<span class="nd">@Setter</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">HelloData</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="n">String</span> <span class="n">userName</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kt">int</span> <span class="n">age</span><span class="o">;</span>
<span class="o">}</span>
</code></pre></div></div>

<h4 id="requestbodyjsonservlet">RequestBodyJsonServlet</h4>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@WebServlet</span><span class="o">(</span><span class="n">name</span> <span class="o">=</span> <span class="s">"requestBodyJsonServlet"</span><span class="o">,</span> <span class="n">urlPatterns</span> <span class="o">=</span> <span class="s">"/request-body-json"</span><span class="o">)</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">RequestBodyJsonServlet</span> <span class="kd">extends</span> <span class="n">HttpServlet</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="n">ObjectMapper</span> <span class="n">objectMapper</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ObjectMapper</span><span class="o">();</span>
    <span class="nd">@Override</span>
    <span class="kd">protected</span> <span class="kt">void</span> <span class="nf">service</span><span class="o">(</span><span class="n">HttpServletRequest</span> <span class="n">req</span><span class="o">,</span> <span class="n">HttpServletResponse</span> <span class="n">resp</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">ServletException</span><span class="o">,</span> <span class="n">IOException</span> <span class="o">{</span>
        <span class="n">ServletInputStream</span> <span class="n">inputStream</span> <span class="o">=</span> <span class="n">req</span><span class="o">.</span><span class="na">getInputStream</span><span class="o">();</span> <span class="c1">// byte ì½”ë“œë¥¼ ì–»ìŒ</span>
        <span class="n">String</span> <span class="n">messageBody</span> <span class="o">=</span> <span class="n">StreamUtils</span><span class="o">.</span><span class="na">copyToString</span><span class="o">(</span><span class="n">inputStream</span><span class="o">,</span> <span class="n">StandardCharsets</span><span class="o">.</span><span class="na">UTF_8</span><span class="o">);</span> <span class="c1">// ìŠ¤í”„ë§ì´ ì œê³µí•˜ëŠ” ìœ í‹¸ë¦¬í‹°</span>

        <span class="n">HelloData</span> <span class="n">helloData</span> <span class="o">=</span> <span class="n">objectMapper</span><span class="o">.</span><span class="na">readValue</span><span class="o">(</span><span class="n">messageBody</span><span class="o">,</span> <span class="n">HelloData</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<p>JSON ê²°ê³¼ë¥¼ íŒŒì‹±í•´ì„œ ê°ì²´ë¡œ ë³€í™˜í•˜ë ¤ë©´ Jackson, Gson ê°™ì€ JSON ë³€í™˜ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì¶”ê°€í•´ì„œ ì‚¬ìš©í•´ì•¼ í•œë‹¤. <br />
ìŠ¤í”„ë§ ë¶€íŠ¸ë¡œ Spring MVCë¥¼ ì„ íƒí•˜ë©´ ê¸°ë³¸ìœ¼ë¡œ Jackson ë¼ì´ë¸ŒëŸ¬ë¦¬( ObjectMapper)ë¥¼ ì œê³µí•œë‹¤.</p>

<hr />

<h2 id="httpservletresponse---ê¸°ë³¸-ì‚¬ìš©ë²•">HTTPServletResponse - ê¸°ë³¸ ì‚¬ìš©ë²•</h2>

<p>ê°œë°œìê°€ ì§ì ‘ ì‘ë‹µ ê°ì²´ë¥¼ ë§Œë“¤ê¸°ëŠ” ë²ˆê±°ë¡­ì§€ ì•Šê²Œ ì„œë¸”ë¦¿ì´ ì œê³µí•´ì¤€ë‹¤!</p>

<ul>
  <li>HTTP ì‘ë‹µì½”ë“œ ì§€ì •</li>
  <li>í—¤ë” ìƒì„±</li>
  <li>ë°”ë”” ìƒì„± ë“±ë“±â€¦</li>
</ul>

<h4 id="responseheaderservlet">ResponseHeaderServlet</h4>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@WebServlet</span><span class="o">(</span><span class="n">name</span> <span class="o">=</span> <span class="s">"responseHeaderServlet"</span><span class="o">,</span> <span class="n">urlPatterns</span> <span class="o">=</span> <span class="s">"/response-header"</span><span class="o">)</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">ResponseHeaderServlet</span> <span class="kd">extends</span> <span class="n">HttpServlet</span> <span class="o">{</span>
    <span class="nd">@Override</span>
    <span class="kd">protected</span> <span class="kt">void</span> <span class="nf">service</span><span class="o">(</span><span class="n">HttpServletRequest</span> <span class="n">req</span><span class="o">,</span> <span class="n">HttpServletResponse</span> <span class="n">resp</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">ServletException</span><span class="o">,</span> <span class="n">IOException</span> <span class="o">{</span>
        <span class="c1">//[status-line] ìƒíƒœì½”ë“œ ì§€ì •</span>
        <span class="n">resp</span><span class="o">.</span><span class="na">setStatus</span><span class="o">(</span><span class="n">HttpServletResponse</span><span class="o">.</span><span class="na">SC_OK</span><span class="o">);</span> <span class="c1">//200</span>
        <span class="c1">//[response-headers] ì‘ë‹µ í—¤ë” ì§€ì •</span>
        <span class="n">resp</span><span class="o">.</span><span class="na">setHeader</span><span class="o">(</span><span class="s">"Content-Type"</span><span class="o">,</span> <span class="s">"text/plain;charset=utf-8"</span><span class="o">);</span>
        <span class="n">resp</span><span class="o">.</span><span class="na">setHeader</span><span class="o">(</span><span class="s">"Cache-Control"</span><span class="o">,</span> <span class="s">"no-cache, no-store, must-revalidate"</span><span class="o">);</span>
        <span class="n">resp</span><span class="o">.</span><span class="na">setHeader</span><span class="o">(</span><span class="s">"Pragma"</span><span class="o">,</span> <span class="s">"no-cache"</span><span class="o">);</span>
        <span class="n">resp</span><span class="o">.</span><span class="na">setHeader</span><span class="o">(</span><span class="s">"my-header"</span><span class="o">,</span> <span class="s">"hello"</span><span class="o">);</span>
        <span class="c1">//[Header í¸ì˜ ë©”ì„œë“œ] content(response); cookie(response); redirect(response);</span>
        <span class="c1">//[message body] ì‘ë‹µ ë°”ë”” ì§€ì •</span>
        <span class="n">PrintWriter</span> <span class="n">writer</span> <span class="o">=</span> <span class="n">resp</span><span class="o">.</span><span class="na">getWriter</span><span class="o">();</span>
        <span class="n">writer</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"ok"</span><span class="o">);</span>

        <span class="c1">//Content-Type: text/plain;charset=utf-8</span>
        <span class="c1">//Content-Length: 2</span>
        <span class="c1">//response.setHeader("Content-Type", "text/plain;charset=utf-8");</span>
        <span class="n">resp</span><span class="o">.</span><span class="na">setContentType</span><span class="o">(</span><span class="s">"text/plain"</span><span class="o">);</span> 
        <span class="n">resp</span><span class="o">.</span><span class="na">setCharacterEncoding</span><span class="o">(</span><span class="s">"utf-8"</span><span class="o">);</span> 
        <span class="c1">//response.setContentLength(2); //(ìƒëµì‹œ ìë™ ìƒì„±)</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<h4 id="ì¿ í‚¤-ì„¤ì •í•˜ê¸°">ì¿ í‚¤ ì„¤ì •í•˜ê¸°</h4>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//Set-Cookie: myCookie=good; Max-Age=600; </span>
<span class="n">response</span><span class="o">.</span><span class="na">setHeader</span><span class="o">(</span><span class="s">"Set-Cookie"</span><span class="o">,</span> <span class="s">"myCookie=good; Max-Age=600"</span><span class="o">);</span> 

<span class="c1">// ë˜ëŠ” </span>
<span class="n">Cookie</span> <span class="n">cookie</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Cookie</span><span class="o">(</span><span class="s">"myCookie"</span><span class="o">,</span> <span class="s">"good"</span><span class="o">);</span> 
<span class="n">cookie</span><span class="o">.</span><span class="na">setMaxAge</span><span class="o">(</span><span class="mi">600</span><span class="o">);</span> <span class="c1">//600ì´ˆ</span>
<span class="n">response</span><span class="o">.</span><span class="na">addCookie</span><span class="o">(</span><span class="n">cookie</span><span class="o">);</span>
</code></pre></div></div>

<h4 id="redirect-ì„¤ì •í•˜ê¸°">Redirect ì„¤ì •í•˜ê¸°</h4>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//Status Code 302</span>
<span class="c1">//Location: /basic/hello-form.html</span>
<span class="n">response</span><span class="o">.</span><span class="na">setStatus</span><span class="o">(</span><span class="n">HttpServletResponse</span><span class="o">.</span><span class="na">SC_FOUND</span><span class="o">);</span> <span class="c1">//302</span>
<span class="n">response</span><span class="o">.</span><span class="na">setHeader</span><span class="o">(</span><span class="s">"Location"</span><span class="o">,</span> <span class="s">"/basic/hello-form.html"</span><span class="o">);</span>

<span class="c1">// ë˜ëŠ”</span>
<span class="n">response</span><span class="o">.</span><span class="na">sendRedirect</span><span class="o">(</span><span class="s">"/basic/hello-form.html"</span><span class="o">);</span>
</code></pre></div></div>

<hr />

<h2 id="http-ìš”ì²­-ë°ì´í„°">HTTP ìš”ì²­ ë°ì´í„°</h2>

<h3 id="ë‹¨ìˆœ-í…ìŠ¤íŠ¸-html">ë‹¨ìˆœ í…ìŠ¤íŠ¸, HTML</h3>

<h4 id="httpservletresponse">HttpServletResponse</h4>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@WebServlet</span><span class="o">(</span><span class="n">name</span> <span class="o">=</span> <span class="s">"responseHtmlServlet"</span><span class="o">,</span> <span class="n">urlPatterns</span> <span class="o">=</span> <span class="s">"/response-html"</span><span class="o">)</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">HttpServletResponse</span> <span class="kd">extends</span> <span class="n">HttpServlet</span> <span class="o">{</span>
    <span class="nd">@Override</span>
    <span class="kd">protected</span> <span class="kt">void</span> <span class="nf">service</span><span class="o">(</span><span class="n">HttpServletRequest</span> <span class="n">req</span><span class="o">,</span> <span class="n">javax</span><span class="o">.</span><span class="na">servlet</span><span class="o">.</span><span class="na">http</span><span class="o">.</span><span class="na">HttpServletResponse</span> <span class="n">resp</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">ServletException</span><span class="o">,</span> <span class="n">IOException</span> <span class="o">{</span>
        <span class="c1">// Content-Type: text:html; charset=utf-8</span>
        <span class="n">resp</span><span class="o">.</span><span class="na">setContentType</span><span class="o">(</span><span class="s">"text:html"</span><span class="o">);</span>
        <span class="n">resp</span><span class="o">.</span><span class="na">setCharacterEncoding</span><span class="o">(</span><span class="s">"utf-8"</span><span class="o">);</span>
        <span class="n">PrintWriter</span> <span class="n">writer</span> <span class="o">=</span> <span class="n">resp</span><span class="o">.</span><span class="na">getWriter</span><span class="o">();</span>
        <span class="n">writer</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"&lt;html&gt;"</span><span class="o">);</span>
        <span class="n">writer</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"&lt;body&gt;"</span><span class="o">);</span>
        <span class="n">writer</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">" &lt;div&gt;ì´ê±´ ì•„ë‹ˆì§€&lt;/div&gt;"</span><span class="o">);</span>
        <span class="n">writer</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"&lt;/body&gt;"</span><span class="o">);</span>
        <span class="n">writer</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"&lt;/html&gt;"</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<p>ê°„ë‹¨í•˜ì§€ë§Œ, HTMLì„ ì¼ì¼íˆ ì‘ì„±í•´ì£¼ì–´ì•¼ í•œë‹¤?</p>

<h3 id="api-json">API JSON</h3>

<h4 id="responsejsonservlet">ResponseJsonServlet</h4>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@WebServlet</span><span class="o">(</span><span class="n">name</span> <span class="o">=</span> <span class="s">"responseJsonServlet"</span><span class="o">,</span> <span class="n">urlPatterns</span> <span class="o">=</span> <span class="s">"/response-json"</span><span class="o">)</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">ResponseJsonServlet</span> <span class="kd">extends</span> <span class="n">HttpServlet</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="n">ObjectMapper</span> <span class="n">objectMapper</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ObjectMapper</span><span class="o">();</span>
    <span class="nd">@Override</span>
    <span class="kd">protected</span> <span class="kt">void</span> <span class="nf">service</span><span class="o">(</span><span class="n">HttpServletRequest</span> <span class="n">req</span><span class="o">,</span> <span class="n">HttpServletResponse</span> <span class="n">resp</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">ServletException</span><span class="o">,</span> <span class="n">IOException</span> <span class="o">{</span>
        <span class="c1">//Content-Type: application/json</span>
        <span class="n">resp</span><span class="o">.</span><span class="na">setHeader</span><span class="o">(</span><span class="s">"content-type"</span><span class="o">,</span> <span class="s">"application/json"</span><span class="o">);</span>
        <span class="n">resp</span><span class="o">.</span><span class="na">setCharacterEncoding</span><span class="o">(</span><span class="s">"utf-8"</span><span class="o">);</span>
        <span class="n">HelloData</span> <span class="n">data</span> <span class="o">=</span> <span class="k">new</span> <span class="n">HelloData</span><span class="o">();</span>
        <span class="n">data</span><span class="o">.</span><span class="na">setUserName</span><span class="o">(</span><span class="s">"mazzi"</span><span class="o">);</span>
        <span class="n">data</span><span class="o">.</span><span class="na">setAge</span><span class="o">(</span><span class="mi">100</span><span class="o">);</span>
        
        <span class="c1">// JSONìœ¼ë¡œ ë³€í™˜</span>
        <span class="n">String</span> <span class="n">result</span> <span class="o">=</span> <span class="n">objectMapper</span><span class="o">.</span><span class="na">writeValueAsString</span><span class="o">(</span><span class="n">data</span><span class="o">);</span>
        <span class="n">resp</span><span class="o">.</span><span class="na">getWriter</span><span class="o">().</span><span class="na">write</span><span class="o">(</span><span class="n">result</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<p>(ì‚¬ì‹¤ ìŠ¤í”„ë§ ì“°ë©´ ì´ë ‡ê²Œ ê¸¸ì–´ì§€ì§€ë„ ì•ŠëŠ”ë‹¤.)</p>

<hr />

<p>âœï¸ ê¹€ì˜ë‹˜ì˜ <strong>ìŠ¤í”„ë§ MVC 1í¸ - ë°±ì—”ë“œ ì›¹ ê°œë°œ í•µì‹¬ ê¸°ìˆ </strong> ê°•ì˜ ë…¸íŠ¸ âœï¸</p>


	  ]]></description>
	</item>


</channel>
</rss>
