<?xml version="1.0" encoding="UTF-8" ?>

<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
<channel>
   
      <title>NewWisdom.github.io/</title>
   
   <link>http://localhost:4000</link>
   <description>ë¸”ë¡œê·¸ ì´ì‚¬ì¤‘... ì•„ì§ ì •ë¦¬ê°€ ì•ˆë˜ì—ˆìŒ...</description>
   <language>ko-KR</language>
   <managingEditor> </managingEditor>
   <atom:link href="rss" rel="self" type="application/rss+xml" />
   
	<item>
	  <title>ğŸ³ Dockerë€</title>
	  <link>//docker</link>
	  <author></author>
	  <pubDate>2021-07-11T19:18:00+09:00</pubDate>
	  <guid>//docker</guid>
	  <description><![CDATA[
	     <h2 id="ë„ì»¤ë€">ë„ì»¤ë€?</h2>

<ul>
  <li>ì»¨í…Œì´ë„ˆ ê¸°ë°˜ì˜ ì˜¤í”ˆì†ŒìŠ¤ ê°€ìƒí™” í”Œë«í¼</li>
  <li>ë‹¤ì–‘í•œ í”„ë¡œê·¸ë¨, ì‹¤í–‰í™˜ê²½ì„ ì»¨í…Œì´ë„ˆë¡œ ì¶”ìƒí™”í•œ, ë™ì¼í•œ ì¸í„°í˜ì´ìŠ¤ë¥¼ ì œê³µí•´ í”„ë¡œê·¸ë¨ì˜ ë°°í¬ ë° ê´€ë¦¬ë¥¼ ë‹¨ìˆœí™”í•˜ê²Œ í•´ì¤Œ</li>
  <li>ì–´ë””ì—ì„œë“  ì‹¤í–‰ ê°€ëŠ¥í•˜ë„ë¡ í•´ì¤Œ(ì¡°ë¦½ì»´, AWS, Google Cloud)</li>
</ul>

<h3 id="íŠ¹ì§•">íŠ¹ì§•</h3>

<h4 id="í™•ì¥ì„±">í™•ì¥ì„±</h4>

<ul>
  <li>ì´ë¯¸ì§€ë§Œ ë§Œë“¤ì–´ ë†“ìœ¼ë©´ ì»¨í…Œì´ë„ˆëŠ” ê·¸ëƒ¥ ë„ìš°ë©´ ë¨</li>
  <li>ì„œë²„ì— ì„œë¹„ìŠ¤ í•˜ë‚˜ ë” ë„ìš¸ë¼ë©´ <code class="highlighter-rouge">run</code> ëª…ë ¹ì–´ë¡œ ê°„ë‹¨í•˜ê²Œ í•´ê²°</li>
</ul>

<h4 id="í‘œì¤€ì„±">í‘œì¤€ì„±</h4>

<ul>
  <li>ë„ì»¤ë¥¼ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” ê²½ìš° ruby, nodejs, go, phpë¡œ ë§Œë“  ì„œë¹„ìŠ¤ë“¤ì˜ ë°°í¬ ë°©ì‹ì€ ê°ê° ë‹¤ë¦„</li>
  <li>ì»¨í…Œì´ë„ˆë¼ëŠ” í‘œì¤€ìœ¼ë¡œ ì„œë²„ë¥¼ ë°°í¬í•˜ë¯€ë¡œ ëª¨ë“  ì„œë¹„ìŠ¤ë“¤ì˜ ë°°í¬ê³¼ì •ì´ ë™ì¼</li>
</ul>

<h4 id="ì´ë¯¸ì§€">ì´ë¯¸ì§€</h4>

<ul>
  <li>ì´ë¯¸ì§€ì—ì„œ ì»¨í…Œì´ë„ˆë¥¼ ìƒì„±í•˜ê¸° ë•Œë¬¸ì— ë°˜ë“œì‹œ ì´ë¯¸ì§€ë¥¼ ë§Œë“œëŠ” ê³¼ì •ì´ í•„ìš”</li>
  <li>ì´ë¯¸ì§€ë¥¼ ì €ì¥í•  ê³³ì´ í•„ìš”</li>
</ul>

<h4 id="ì„¤ì •">ì„¤ì •</h4>

<ul>
  <li>ë³´í†µ í™˜ê²½ë³€ìˆ˜ë¡œ ì œì–´</li>
  <li>í•˜ë‚˜ì˜ ì´ë¯¸ì§€ê°€ í™˜ê²½ë³€ìˆ˜ì— ë”°ë¼ ë™ì ìœ¼ë¡œ ì„¤ì •íŒŒì¼ì„ ìƒì„±í•˜ë„ë¡ ë§Œë“¤ì–´ì ¸ì•¼í•¨</li>
</ul>

<h3 id="ì»¨í…Œì´ë„ˆ">ì»¨í…Œì´ë„ˆ</h3>

<ul>
  <li>ê²©ë¦¬ëœ ê³µê°„ì—ì„œ í”„ë¡œì„¸ìŠ¤ê°€ ë™ì‘í•˜ëŠ” ê¸°ìˆ </li>
  <li>ê°€ìƒí™” ê¸°ìˆ ì˜ í•˜ë‚˜</li>
</ul>

<h4 id="but-ê¸°ì¡´ì˜-ë°©ì‹ê³¼ëŠ”-ì°¨ì´ê°€-ìˆìŒ">BUT. ê¸°ì¡´ì˜ ë°©ì‹ê³¼ëŠ” ì°¨ì´ê°€ ìˆìŒ</h4>

<ul>
  <li>ê¸°ì¡´ ê°€ìƒí™” ë°©ì‹ì€ ì£¼ë¡œ OSë¥¼ ê°€ìƒí™” í•œ ê²ƒ
    <ul>
      <li>í˜¸ìŠ¤íŠ¸ OS ìœ„ì— ê²ŒìŠ¤íŠ¸ OS ì „ì²´ë¥¼ ê°€ìƒí™”í•˜ì—¬ ì‚¬ìš©í•˜ëŠ” ë°©ì‹</li>
      <li>ì´ ë°©ì‹ì€ ì–´ì¨Œë“  ì„±ëŠ¥ìƒ ë¬¸ì œê°€ ìˆë‹¤ê³ â€¦</li>
    </ul>
  </li>
  <li>ë•Œë¬¸ì— í”„ë¡œì„¸ìŠ¤ë¥¼ ê²©ë¦¬í•˜ëŠ” ë°©ì‹ ë“±ì¥
    <ul>
      <li>ë¦¬ëˆ…ìŠ¤ì—ì„œëŠ” í”„ë¡œì„¸ìŠ¤ë§Œ ê²©ë¦¬ì‹œí‚¤ëŠ” ë¦¬ëˆ…ìŠ¤ ì»¨í…Œì´ë„ˆ ì¡´ì¬</li>
    </ul>
  </li>
  <li>í•˜ë‚˜ì˜ ì„œë²„ì— ì—¬ëŸ¬ê°œì˜ ì»¨í…Œì´ë„ˆë¥¼ ì‹¤í–‰í•˜ë©´ ì„œë¡œ ì˜í–¥ì„ ë¯¸ì¹˜ì§€ ì•Šê³  ë…ë¦½ì ìœ¼ë¡œ ì‹¤í–‰ ê°€ëŠ¥
    <ul>
      <li>ì‹¤í–‰ì¤‘ì¸ ì»¨í…Œì´ë„ˆì— ì ‘ì†ë˜ ëª…ë ¹ì–´ ì…ë ¥ ê°€ëŠ¥</li>
      <li>íŒ¨í‚¤ì§€ ì„¤ì¹˜ ê°€ëŠ¥</li>
      <li>ì‚¬ìš©ì ì¶”ê°€ ê°€ëŠ¥</li>
      <li>ì—¬ëŸ¬ê°œì˜ í”„ë¡œì„¸ìŠ¤ë¥¼ ë°±ê·¸ë¼ìš´ë“œë¡œ ì‹¤í–‰ ê°€ëŠ¥</li>
    </ul>
  </li>
</ul>

<h3 id="ì´ë¯¸ì§€-1">ì´ë¯¸ì§€</h3>

<ul>
  <li>ì»¨í…Œì´ë„ˆ ì‹¤í–‰ì— í•„ìš”í•œ ëª¨ë“  íŒŒì¼ê³¼ ì„¤ì • ê°’ë“±ì„ í¬í•¨</li>
  <li>ìƒíƒœê°’ì„ ê°€ì§€ì§€ ì•Šê³  ë³€í•˜ì§€ ì•ŠìŒ</li>
  <li>ì»¨í…Œì´ë„ˆëŠ” ì´ë¯¸ì§€ë¥¼ ì‹¤í–‰í•œ ìƒíƒœ</li>
  <li>ì¶”ê°€ë˜ê±°ë‚˜ ë³€í•˜ëŠ” ê°’ì€ ì»¨í…Œì´ë„ˆì— ì €ì¥ë¨</li>
  <li>ê°™ì€ ì´ë¯¸ì§€ì—ì„œ ì—¬ëŸ¬ê°œ ì»¨í…Œì´ë„ˆë¥¼ ìƒì„±í•  ìˆ˜ ìˆê³ , ì»¨í…Œì´ë„ˆê°€ ìˆ˜ì •/ì‚­ì œë˜ì–´ë„ ì´ë¯¸ì§€ëŠ” ë³€í•˜ì§€ ì•ŠìŒ</li>
  <li>ex) MySQLì´ë¯¸ì§€ëŠ” MySQLì„ ì‹¤í–‰í•˜ëŠ”ë° í•„ìš”í•œ íŒŒì¼ê³¼ ì‹¤í–‰ ëª…ë ¹ì–´, í¬íŠ¸ ì •ë³´ë“±ì„ ê°€ì§€ê³  ìˆìŒ</li>
  <li>ë„ì»¤ ì´ë¯¸ì§€ëŠ” <a href="https://hub.docker.com/">Docker hub</a>ì— ë“±ë¡í•˜ê±°ë‚˜ <a href="https://docs.docker.com/registry/">Docker Registry</a> ì €ì¥ì†Œë¥¼ ì§ì ‘ ë§Œë“¤ì–´ ê´€ë¦¬í•  ìˆ˜ ìˆìŒ</li>
</ul>

<h4 id="ëª¨ë“ -ì •ë³´ë¥¼-ê°€ì§€ê³ -ìˆë‹¤ë©´-ìš©ëŸ‰ì´-ì—„ì²­-í´í…ë°">ëª¨ë“  ì •ë³´ë¥¼ ê°€ì§€ê³  ìˆë‹¤ë©´ ìš©ëŸ‰ì´ ì—„ì²­ í´í…ë°â€¦</h4>

<ul>
  <li>ì´ëŸ° ë¬¸ì œë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ <strong>ë ˆì´ì–´</strong> ë¼ëŠ” ê°œë… ë„ì…</li>
</ul>

<h4 id="ë ˆì´ì–´">ë ˆì´ì–´</h4>

<p><img src="https://images.velog.io/images/new_wisdom/post/bc4d8eb2-e4f2-481b-9141-c06532daa927/image.png" style="zoom: 67%;" /></p>

<ul>
  <li>ì—¬ëŸ¬ê°œì˜ ë ˆì´ì–´ë¥¼ í•˜ë‚˜ì˜ íŒŒì¼ ì‹œìŠ¤í…œìœ¼ë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆê²Œ í•´ì¤Œ</li>
  <li>ì´ë¯¸ì§€ëŠ” ì—¬ëŸ¬ê°œì˜ ì½ê¸°ì „ìš© ë ˆì´ì–´ë¡œ êµ¬ì„±</li>
  <li>íŒŒì¼ì´ ì¶”ê°€ë˜ê±°ë‚˜ ìˆ˜ì •ë˜ë©´ ìƒˆë¡œìš´ ë ˆì´ì–´ê°€ ìƒì„±ë¨</li>
  <li>ì–´ë–¤ ì´ë¯¸ì§€ë¥¼ ë² ì´ìŠ¤ë¡œ ìƒˆë¡œìš´ ì´ë¯¸ì§€ë¥¼ ë‹¤ìš´ë°›ëŠ”ë©´ ì¶”ê°€ë˜ëŠ” ë ˆì´ì–´ë§Œ ë‹¤ìš´ë°›ìœ¼ë©´ ë¨</li>
  <li>ì»¨í…Œì´ë„ˆë¥¼ ìƒì„±í•  ë•Œë„ ê¸°ì¡´ ì´ë¯¸ì§€ ë ˆì´ì–´ ìœ„ì— ì½ê¸°, ì“°ê¸° ë ˆì´ì–´ë¥¼ ì¶”ê°€í•˜ëŠ”ë°, ì»¨í…Œì´ë„ˆê°€ ì‹¤í–‰ì¤‘ì— ìƒì„±í•˜ëŠ” íŒŒì¼, ë³€ê²½ ë‚´ìš©ì€ í•´ë‹¹ ë ˆì´ì–´ì—ë§Œ ì €ì¥ë˜ì–´ ìµœì†Œí•œì˜ ìš©ëŸ‰ë§Œ ì‚¬ìš©</li>
</ul>

<h4 id="ì´ë¯¸ì§€-ê²½ë¡œ">ì´ë¯¸ì§€ ê²½ë¡œ</h4>

<ul>
  <li>ì´ë¯¸ì§€ëŠ” URL ë°©ì‹ìœ¼ë¡œ ê´€ë¦¬í•˜ë©° íƒœê·¸ë¥¼ ë¶™ì¼ ìˆ˜ ìˆìŒ</li>
</ul>

<p><img src="https://images.velog.io/images/new_wisdom/post/1002ebcd-30c3-41da-bd92-4c6345c29bcd/image.png" style="zoom:50%;" /></p>

<h4 id="dockerfile">Dockerfile</h4>

<ul>
  <li>ì´ë¯¸ì§€ë¥¼ ë§Œë“¤ê¸° ìœ„í•´ DSLì„ í†µí•´ ì´ë¯¸ì§€ ìƒì„± ê³¼ì •ì„ ì ìŒ</li>
</ul>

<h2 id="ë„ì»¤-ì„¤ì¹˜--ì»¨í…Œì´ë„ˆ-ì‹¤í–‰">ë„ì»¤ ì„¤ì¹˜ &amp; ì»¨í…Œì´ë„ˆ ì‹¤í–‰</h2>

<h3 id="ë¦¬ëˆ…ìŠ¤ì—-ë„ì»¤-ì„¤ì¹˜í•˜ê¸°">ë¦¬ëˆ…ìŠ¤ì— ë„ì»¤ ì„¤ì¹˜í•˜ê¸°</h3>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>curl -fsSL https://get.docker.com/ | sudo sh
</code></pre></div></div>

<h3 id="sudo-ì—†ì´-ì‚¬ìš©í•˜ê¸°">sudo ì—†ì´ ì‚¬ìš©í•˜ê¸°</h3>

<ul>
  <li>ë„ì»¤ëŠ” ê¸°ë³¸ì ìœ¼ë¡œ root ê¶Œí•œì´ í•„ìš”</li>
  <li>ë£¨íŠ¸ê°€ ì•„ë‹Œ ì‚¬ìš©ìê°€ sudo ì—†ì´ ì‚¬ìš©í•˜ê¸° ìœ„í•´ ë‹¤ìŒ ëª…ë ¹ì–´ë¥¼ í†µí•´ ì‚¬ìš©ìë¥¼ docker ê·¸ë£¹ì— ì¶”ê°€</li>
</ul>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sudo usermod -aG docker $USER # í˜„ì¬ ì ‘ì†ì¤‘ì¸ ì‚¬ìš©ìì—ê²Œ ê¶Œí•œì£¼ê¸°
</code></pre></div></div>

<h3 id="ì»¨í…Œì´ë„ˆ-ì‹¤í–‰">ì»¨í…Œì´ë„ˆ ì‹¤í–‰</h3>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker run [OPTIONS] IMAGE[:TAG|@DIGEST] [COMMAND] [ARG...]
</code></pre></div></div>

<ul>
  <li><code class="highlighter-rouge">docker run --help</code> ëª…ë ¹ì–´ë¥¼ í†µí•´ ë‹¤ì–‘í•œ ì˜µì…˜ì„ ì•Œì•„ë³´ì</li>
  <li>ì‚¬ìš©í•  ì´ë¯¸ì§€ê°€ ì €ì¥ë˜ì–´ ìˆëŠ”ì§€ í™•ì¸í•˜ê³  ì—†ë‹¤ë©´ ë‹¤ìš´ë¡œë“œ <code class="highlighter-rouge">pull</code>ë¥¼ í•œ í›„ ì»¨í…Œì´ë„ˆë¥¼ ìƒì„± <code class="highlighter-rouge">create</code>í•˜ê³  ì‹œì‘ <code class="highlighter-rouge">start</code></li>
</ul>

<h2 id="ë„ì»¤-ê¸°ë³¸-ëª…ë ¹ì–´">ë„ì»¤ ê¸°ë³¸ ëª…ë ¹ì–´</h2>

<h4 id="ì»¨í…Œì´ë„ˆ-ëª©ë¡-í™•ì¸í•˜ê¸°-ps">ì»¨í…Œì´ë„ˆ ëª©ë¡ í™•ì¸í•˜ê¸° (ps)</h4>

<ul>
  <li>ì»¨í…Œì´ë„ˆ ëª©ë¡ì„ í™•ì¸</li>
</ul>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker ps [OPTIONS]
</code></pre></div></div>

<h4 id="ì»¨í…Œì´ë„ˆ-ì¤‘ì§€í•˜ê¸°-stop">ì»¨í…Œì´ë„ˆ ì¤‘ì§€í•˜ê¸° (stop)</h4>

<ul>
  <li>ì‹¤í–‰ì¤‘ì¸ ì»¨í…Œì´ë„ˆ ì¤‘ì§€</li>
</ul>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker stop [OPTIONS] CONTAINER [CONTAINER...]
</code></pre></div></div>

<h4 id="ì»¨í…Œì´ë„ˆ-ì œê±°í•˜ê¸°-rm">ì»¨í…Œì´ë„ˆ ì œê±°í•˜ê¸° (rm)</h4>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker rm [OPTIONS] CONTAINER [CONTAINER...]
</code></pre></div></div>

<h4 id="ì´ë¯¸ì§€-ë‹¤ìš´ë¡œë“œí•˜ê¸°-pull">ì´ë¯¸ì§€ ë‹¤ìš´ë¡œë“œí•˜ê¸° (pull)</h4>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker pull [OPTIONS] NAME[:TAG|@DIGEST]
</code></pre></div></div>

<h4 id="ì´ë¯¸ì§€-ì‚­ì œí•˜ê¸°-rmi">ì´ë¯¸ì§€ ì‚­ì œí•˜ê¸° (rmi)</h4>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker rmi [OPTIONS] IMAGE [IMAGE...]
</code></pre></div></div>

<h4 id="ì‹¤í–‰ì¤‘ì¸-ì»¨í…Œì´ë„ˆì—-ëª…ë ¹ì–´-ì‹¤í–‰-exec">ì‹¤í–‰ì¤‘ì¸ ì»¨í…Œì´ë„ˆì— ëª…ë ¹ì–´ ì‹¤í–‰ (exec)</h4>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker exec [OPTIONS] CONTAINER COMMAND [ARG...]
</code></pre></div></div>

<h2 id="ë„ì»¤-ì´ë¯¸ì§€-ë§Œë“¤ê¸°">ë„ì»¤ ì´ë¯¸ì§€ ë§Œë“¤ê¸°</h2>

<ul>
  <li>ë„ì»¤ëŠ” ì´ë¯¸ì§€ë¥¼ ë§Œë“¤ê¸° ìœ„í•´ ì»¨í…Œì´ë„ˆì˜ ìƒíƒœë¥¼ ê·¸ëŒ€ë¡œ ì´ë¯¸ì§€ë¡œ ì €ì¥í•¨</li>
  <li>ex) ì–´ë–¤ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì´ë¯¸ì§€ë¡œ ë§Œë“ ë‹¤ë©´, ë¦¬ëˆ…ìŠ¤ë§Œ ì„¤ì¹˜ëœ ì»¨í…Œì´ë„ˆì— ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì„¤ì¹˜í•˜ê³  ì´ ìƒíƒœë¥¼ ê·¸ëŒ€ë¡œ ì´ë¯¸ì§€ë¡œ ì €ì¥</li>
  <li>
    <p>ê°€ìƒë¨¸ì‹ ì˜ ìŠ¤ëƒ…ìƒ·ê³¼ ë¹„ìŠ·í•œ ë°©ì‹</p>
  </li>
  <li>ì´ë¯¸ì§€ë¥¼ ë§Œë“¤ê¸° ìœ„í•´ì„œëŠ” <code class="highlighter-rouge">Dockerfile</code>ì´ë¼ëŠ” ì´ë¯¸ì§€ ë¹Œë“œìš© DSLDomain Specific Language íŒŒì¼ ì‘ì„±</li>
</ul>

<h4 id="ì´ë¯¸ì§€-ë¹Œë“œ">ì´ë¯¸ì§€ ë¹Œë“œ</h4>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker build [OPTIONS] PATH | URL | -
</code></pre></div></div>

<ul>
  <li>ìƒì„±í•  ì´ë¯¸ì§€ ì´ë¦„ì„ ì§€ì •í•˜ê¸° ìœ„í•œ <code class="highlighter-rouge">-t(--tag)</code> ì˜µì…˜ë§Œ ì•Œë©´ ë¹Œë“œê°€ ê°€ëŠ¥</li>
</ul>

<h3 id="ë„ì»¤-ì´ë¯¸ì§€-ì €ì¥ì†Œ">ë„ì»¤ ì´ë¯¸ì§€ ì €ì¥ì†Œ</h3>

<ul>
  <li>ë„ì»¤ëŠ” ë¹Œë“œí•œ ì´ë¯¸ì§€ë¥¼ ì„œë²„ì— ë°°í¬í•˜ê¸° ìœ„í•´ ì§ì ‘ íŒŒì¼ì„ ë³µì‚¬í•˜ëŠ” ë°©ë²• ëŒ€ì‹  <a href="https://docs.docker.com/registry/">ë„ì»¤ ë ˆì§€ìŠ¤íŠ¸ë¦¬</a>(Docker Registry)ë¼ëŠ” ì´ë¯¸ì§€ ì €ì¥ì†Œë¥¼ ì‚¬ìš©</li>
  <li>ì´ë¯¸ì§€ë¥¼ ë ˆì§€ìŠ¤íŠ¸ë¦¬ì— í‘¸ì‹œpushí•˜ê³  ë‹¤ë¥¸ ì„œë²„ì—ì„œ í’€pullë°›ì•„ ì‚¬ìš©í•˜ëŠ” êµ¬ì¡° (like. git)</li>
</ul>

<h4 id="ë„ì»¤-í—ˆë¸Œ-ì‚¬ìš©">ë„ì»¤ í—ˆë¸Œ ì‚¬ìš©</h4>

<ul>
  <li>ê¸°ë³¸ ì´ë¯¸ì§€ ì €ì¥ì†Œë¡œ ubuntu, centos, debianë“±ì˜ ë² ì´ìŠ¤ ì´ë¯¸ì§€ì™€ ruby, golang, java, python ë“±ì˜ ê³µì‹ ì´ë¯¸ì§€ê°€ ì €ì¥ë˜ì–´ ìˆìŒ</li>
  <li><a href="https://subicura.com/2017/02/10/docker-guide-for-beginners-create-image-and-deploy.html">ì‚¬ìš©ë²•ì€ ì°¸ê³  ìë£Œë¥¼ ì°¸ê³ í•˜ì</a></li>
</ul>

<h3 id="ë°°í¬í•˜ê¸°">ë°°í¬í•˜ê¸°</h3>

<ul>
  <li>ê¸°ì¡´ ì• í”Œë¦¬ì¼€ì´ì…˜ì€ ì‚¬ìš©í•˜ëŠ” ì–¸ì–´, í”„ë ˆì„ì›Œí¬, ì›¹(or WAS)ì„œë²„, ë¦¬ëˆ…ìŠ¤ ë°°í¬íŒ, ê°œë°œìì˜ ì·¨í–¥ì— ë”°ë¼ ê°ê° ë‹¤ë¥¸ ë°©ì‹ì„ ì‚¬ìš©</li>
  <li>ìƒˆë¡œìš´ ì„œë²„ë¥¼ ì…‹íŒ…í•˜ê³  í•œ ë²ˆì— ë°°í¬ë¥¼ ì„±ê³µí•œë‹¤ëŠ” ê±´ êµ‰ì¥íˆ í˜ë“  ì¼</li>
  <li>ë˜í•œ ì˜ì¡´ì„± ë¼ì´ë¸ŒëŸ¬ë¦¬ê°€ ì œëŒ€ë¡œ ì„¤ì¹˜ë˜ì—ˆëŠ”ì§€ ê²€ì¦í•˜ê¸°ë„ ë§¤ìš° ì–´ë ¤ì› ìŒ</li>
  <li>ì»¨í…Œì´ë„ˆë¥¼ ì‚¬ìš©í•˜ë©´ ì–´ë–¤ ì–¸ì–´, ì–´ë–¤ í”„ë ˆì„ì›Œí¬ë¥¼ ì“°ë“  ìƒê´€ì—†ì´ ë°°í¬ ë°©ì‹ì´ ë™ì¼í•´ì§€ê³  ê³¼ì • ë˜í•œ êµ‰ì¥íˆ ë‹¨ìˆœí•´ì§</li>
  <li>ì´ë¯¸ì§€ë¥¼ ë‹¤ìš´ë°›ê³  ì»¨í…Œì´ë„ˆë¥¼ ì‹¤í–‰í•˜ë©´ ë</li>
</ul>

<hr />

<h3 id="ì°¸ê³ ìë£Œ">ì°¸ê³ ìë£Œ</h3>

<ul>
  <li><a href="https://subicura.com/2017/01/19/docker-guide-for-beginners-1.html">ì´ˆë³´ë¥¼ ìœ„í•œ ë„ì»¤ ì•ˆë‚´ì„œ - ë„ì»¤ë€ ë¬´ì—‡ì¸ê°€?</a></li>
  <li><a href="https://subicura.com/2017/01/19/docker-guide-for-beginners-2.html">ì´ˆë³´ë¥¼ ìœ„í•œ ë„ì»¤ ì•ˆë‚´ì„œ - ì„¤ì¹˜í•˜ê³  ì»¨í…Œì´ë„ˆ ì‹¤í–‰í•˜ê¸°</a></li>
  <li><a href="https://subicura.com/2017/02/10/docker-guide-for-beginners-create-image-and-deploy.html">ì´ˆë³´ë¥¼ ìœ„í•œ ë„ì»¤ ì•ˆë‚´ì„œ - ì´ë¯¸ì§€ ë§Œë“¤ê³  ë°°í¬í•˜ê¸°</a></li>
  <li><a href="https://subicura.com/2016/06/07/zero-downtime-docker-deployment.html">ë„ì»¤ë¥¼ ì´ìš©í•œ ì›¹ì„œë¹„ìŠ¤ ë¬´ì¤‘ë‹¨ ë°°í¬í•˜ê¸°</a></li>
</ul>


	  ]]></description>
	</item>

	<item>
	  <title>âš’ï¸ CI/CDë€, ì  í‚¨ìŠ¤ ì‹¤ìŠµí•´ë³´ê¸°</title>
	  <link>//ci-and-cd</link>
	  <author></author>
	  <pubDate>2021-07-11T19:18:00+09:00</pubDate>
	  <guid>//ci-and-cd</guid>
	  <description><![CDATA[
	     <h2 id="ci-continuous-integration">CI (Continuous Integration)</h2>

<ul>
  <li>ì§€ì†ì  í†µí•©</li>
  <li>ê°œë°œí•˜ë©´ì„œ ì½”ë“œì— ëŒ€í•œ í†µí•©ì„ ì§€ì†ì ìœ¼ë¡œ ì§„í–‰</li>
  <li>ì—¬ëŸ¬ ê°œë°œìê°€ ì‘ì„±í•˜ê±°ë‚˜ ìˆ˜ì •í•œ ì†ŒìŠ¤ë¥¼ ì§€ì†ì ìœ¼ë¡œ í†µí•©í•˜ê³  í…ŒìŠ¤íŠ¸</li>
  <li><strong>ë¹Œë“œ ë° í…ŒìŠ¤íŠ¸ ìë™í™”</strong></li>
</ul>

<h3 id="cië¥¼-ì ìš©í• -ë•Œì˜-íë¦„">CIë¥¼ ì ìš©í•  ë•Œì˜ íë¦„</h3>

<ol>
  <li>ê°œë°œìëŠ” ìì‹ ì´ ê°œë°œí•œ ì†Œí”„íŠ¸ì›¨ì–´ì˜ ì†ŒìŠ¤ì½”ë“œë¥¼ ê³µí†µëœ ë²„ì „ ê´€ë¦¬ì‹œìŠ¤í…œ(github ë“±)ì— ì €ì¥.</li>
  <li>ì†ŒìŠ¤ì½”ë“œìƒì— ë³€ë™ì´ ìƒê¸°ë©´ ë²„ì „ ê´€ë¦¬ ì‹œìŠ¤í…œì—ì„œëŠ” CI íˆ´ë¡œ ì†ŒìŠ¤ì½”ë“œ ë³€ê²½ ì•Œë¦¼</li>
  <li>CIíˆ´ì—ì„œëŠ” ë³€ê²½ëœ ì†ŒìŠ¤ì½”ë“œë¥¼ ëŒ€ìƒìœ¼ë¡œ Build, Test, Mergeë¥¼ ì§„í–‰</li>
  <li>ì´ ê³¼ì •ë“¤ì´ ì™„ë£Œë˜ë©´ ìŠ¬ë™, ì¹´ì¹´ì˜¤í†¡, ë©”ì¼ ë“±ì„ í†µí•´ í†µí•© ê²°ê³¼ë¥¼ ì•Œë¦¼</li>
</ol>

<h2 id="cd-continuous-delivery-continuous-deployment">CD (Continuous Delivery, Continuous Deployment)</h2>

<ul>
  <li>ì§€ì†ì  ë°°í¬</li>
  <li>ì• í”Œë¦¬ì¼€ì´ì…˜ì´ í•­ìƒ ì‹ ë¢° ê°€ëŠ¥í•œ ìˆ˜ì¤€ì—ì„œ ë°°í¬ë  ìˆ˜ ìˆë„ë¡ ì§€ì†ì ìœ¼ë¡œ ê´€ë¦¬í•˜ìëŠ” ê°œë…</li>
  <li>ë³€ê²½ ì‚¬í•­ì„ ë ˆí¬ì§€í† ë¦¬ì—ì„œ í”„ë¡œë•ì…˜ í™˜ê²½ê¹Œì§€ ìë™ìœ¼ë¡œ ë°°í¬í•˜ëŠ” ê²ƒ</li>
  <li><strong>ë°°í¬ ìë™í™”</strong></li>
</ul>

<h3 id="cdë¥¼-ì ìš©í–ˆì„-ë•Œì˜-íë¦„">CDë¥¼ ì ìš©í–ˆì„ ë•Œì˜ íë¦„</h3>

<ol>
  <li>CIë¥¼ í†µí•´ ì†ŒìŠ¤ì½”ë“œë¥¼ ê²€ì¦</li>
  <li>ê²€ì¦ëœ ì†Œí”„íŠ¸ì›¨ì–´ë¥¼ ì‹¤ì œ í”„ë¡œë•ì…˜ í™˜ê²½ìœ¼ë¡œ ë°°í¬</li>
</ol>

<h2 id="cicd">CI/CD</h2>

<h3 id="tool">Tool</h3>

<ul>
  <li>Jenkins</li>
  <li>Travis CI</li>
  <li>Bamboo</li>
</ul>

<hr />

<h2 id="ì  í‚¨ìŠ¤-ë„ì»¤ë¡œ-cicd-ì—°ìŠµ">ì  í‚¨ìŠ¤, ë„ì»¤ë¡œ CI/CD ì—°ìŠµ</h2>

<blockquote>
  <p><a href="https://jojoldu.tistory.com/139">dockerë¥¼ ì´ìš©í•œ CI êµ¬ì¶• ì—°ìŠµí•˜ê¸° (ì  í‚¨ìŠ¤, ìŠ¬ë™)</a> ë¥¼ ë”°ë¼í•˜ëŠ” ì¼ì§€</p>
</blockquote>

<h3 id="buildgradlektsì—-tasks-ì¶”ê°€">Build.gradle.ktsì— tasks ì¶”ê°€</h3>

<p><img src="https://images.velog.io/images/new_wisdom/post/9096f099-e638-42cd-b719-b7ede0f32535/image.png" style="zoom:33%;" /></p>

<ul>
  <li>í•„ìˆ˜ëŠ” ì•„ë‹ˆì§€ë§Œ, í…ŒìŠ¤íŠ¸ìš©ìœ¼ë¡œ ì¶”ê°€</li>
</ul>

<h3 id="ì¿ ë²„ë„¤í‹°ìŠ¤-ì„¤ì¹˜---ìŠ¤í‚µ">ì¿ ë²„ë„¤í‹°ìŠ¤ ì„¤ì¹˜ - ìŠ¤í‚µ</h3>

<ul>
  <li><a href="https://kubernetes.io/ko/docs/tasks/tools/install-kubectl-macos/">Mac Os</a></li>
</ul>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>brew install kubectl
// or
brew install kubernetes-cli


kubectl version --client
</code></pre></div></div>

<p><img src="https://images.velog.io/images/new_wisdom/post/571f5b45-43e9-46ab-ae98-1f6600b4c863/image.png" style="zoom:50%;" /></p>

<ul>
  <li>ì—¥ ê·¼ë° ì‹¤íŒ¨â€¦</li>
</ul>

<h4 id="í•´ê²°">í•´ê²°</h4>

<ul>
  <li><a href="https://github.com/kubernetes/kubernetes/issues/79503">ì°¸ê³ </a></li>
</ul>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ brew cleanup
$ brew update
$ brew install kubectl
</code></pre></div></div>

<h4 id="ì¿ ë²„ë„¤í‹°ìŠ¤-ì„¤ì¹˜ê°€-ì•„ë‹ˆì—ˆìŒ">ì¿ ë²„ë„¤í‹°ìŠ¤ ì„¤ì¹˜ê°€ ì•„ë‹ˆì—ˆìŒ</h4>

<p><img src="https://images.velog.io/images/new_wisdom/post/ef0d93f3-3ca7-4565-9c72-0b54bc4577c7/image.png" style="zoom:50%;" /></p>

<ul>
  <li>ì•„ ì´ê±¸ ì¿ ë²„ë„¤í‹°ìŠ¤ë¡œ ì°©ê° ã…ã…ã… ğŸ™ƒ</li>
</ul>

<h3 id="ì  í‚¨ìŠ¤-ì„¤ì¹˜">ì  í‚¨ìŠ¤ ì„¤ì¹˜</h3>

<h4 id="ì´ë¯¸ì§€-pull-ë°-ì‹¤í–‰">ì´ë¯¸ì§€ pull ë° ì‹¤í–‰</h4>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker run -itd --name jenkins -p 8085:8080 jenkins/jenkins:lts
</code></pre></div></div>

<ul>
  <li>run : ì´ë¯¸ì§€ë¥¼ ì‹¤í–‰</li>
  <li><strong>-itd</strong> : interacitve terminal + detach(background)</li>
  <li><strong>â€“name</strong> : ì´ë¯¸ì§€ ì´ë¦„ ì§€ì •</li>
  <li><strong>-p</strong>: <ì™¸ë¶€ port="">:<ì»¨í…Œì´ë„ˆ ë‚´ë¶€port=""></ì»¨í…Œì´ë„ˆ></ì™¸ë¶€></li>
  <li><strong>jenkins/jenkins:lts</strong> : docker hubì´ë¯¸ì§€ ì €ì¥ì†Œ:ë²„ì „</li>
</ul>

<h4 id="ë™ì‘-í™•ì¸">ë™ì‘ í™•ì¸</h4>

<p><img src="https://images.velog.io/images/new_wisdom/post/e081e56d-95b1-4c1e-b50b-09cf960c6df2/image.png" style="zoom:50%;" /></p>

<h3 id="ì  í‚¨ìŠ¤-ì ‘ì†">ì  í‚¨ìŠ¤ ì ‘ì†</h3>

<ul>
  <li>ë‚˜ëŠ” portë¥¼ 8085ë¡œ í–ˆìœ¼ë‹ˆ http://localhost:8085/ ìœ¼ë¡œ ì ‘ì†</li>
</ul>

<p><img src="https://images.velog.io/images/new_wisdom/post/1732d9e5-f24d-4913-8486-cd405579d6d4/image.png" alt="" /></p>

<ul>
  <li>ì§  ì´ë ‡ê²Œ ë¡œê·¸ì¸ í™”ë©´ ëœ¸</li>
</ul>

<h4 id="ë¡œê·¸ì¸">ë¡œê·¸ì¸</h4>

<ul>
  <li>ì´ˆê¸° ë¹„ë²ˆì€ ì  í‚¨ìŠ¤ ì»¨í…Œì´ë„ˆ ì•ˆ <code class="highlighter-rouge">/var/jenkins_home/secrets/initialAdminPassword</code> ì— ìˆìŒ</li>
  <li>ë‹¤ìŒ ëª…ë ¹ì–´ë¡œ íŒ¨ìŠ¤ì›Œë“œ í™•ì¸</li>
</ul>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker exec jenkins cat /var/jenkins_home/secrets/initialAdminPassword
</code></pre></div></div>

<h4 id="í”ŒëŸ¬ê·¸ì¸-ì„¤ì¹˜">í”ŒëŸ¬ê·¸ì¸ ì„¤ì¹˜</h4>

<p><img src="https://images.velog.io/images/new_wisdom/post/a02378ab-4a01-4036-aa7e-e1a7be1fc357/image.png" alt="" /></p>

<ul>
  <li>install suggested plugins ë¥¼ ì„ íƒí•˜ë©´ ë§ì´ ì‚¬ìš©ë˜ëŠ” í”ŒëŸ¬ê·¸ì¸ë“¤ì´ í¬í•¨ë˜ì–´ ìë™ ì„¤ì¹˜</li>
  <li>github í”ŒëŸ¬ê·¸ì¸ë„ ìë™ ì„¤ì¹˜ë¨</li>
  <li>install suggested plugins ì´ê±¸ ì•ˆ ì„ íƒí•  ì´ìœ ê°€ ë­ì•¼ ì—†ì–´</li>
</ul>

<h4 id="ê´€ë¦¬ì-ê³„ì •-ìƒì„±">ê´€ë¦¬ì ê³„ì • ìƒì„±</h4>

<p><img src="https://images.velog.io/images/new_wisdom/post/2aecb0a0-6483-4533-a707-5387be536161/image.png" alt="" /></p>

<p><img src="https://images.velog.io/images/new_wisdom/post/a1c4e71b-0c00-4960-a1c5-3e424bb9e86f/image.png" alt="" /></p>

<h4 id="ì„¤ì¹˜-ì™„ë£Œ">ì„¤ì¹˜ ì™„ë£Œ</h4>

<p><img src="https://images.velog.io/images/new_wisdom/post/20c10d76-0bd4-4a3e-bbe4-d5ea247d79bc/image.png" alt="" /></p>

<ul>
  <li>ì˜¤ì˜ˆ</li>
  <li>ì  í‚¨ìŠ¤ ì»¨í…Œì´ë„ˆë¥¼ ë‹¤ì‹œ ì‹œì‘í•´ì•¼ í•œë‹¤ë©´ <code class="highlighter-rouge">docker start jenkins</code>ë¡œ ì„¤ì¹˜ëœ ì  í‚¨ìŠ¤ ì»¨í…Œì´ë„ˆë¥¼ ì‹¤í–‰ í›„,</li>
  <li><code class="highlighter-rouge">docker exec -it jenkins /bin/bash</code> ì…ë ¥</li>
  <li><code class="highlighter-rouge">docker run</code>ì€ ì¬ì„¤ì¹˜ë¥¼ í•¨</li>
</ul>

<h3 id="ì  í‚¨ìŠ¤-ì„¤ì •">ì  í‚¨ìŠ¤ ì„¤ì •</h3>

<ul>
  <li>ì  í‚¨ìŠ¤ ë©”ì¸í˜ì´ì§€ì—ì„œ <code class="highlighter-rouge">ìƒˆë¡œìš´ Item</code>ì„ í´ë¦­</li>
</ul>

<p><img src="https://images.velog.io/images/new_wisdom/post/4e48f30e-08fc-4d0a-bd4c-a54d67c9fe52/image.png" alt="" /></p>

<ul>
  <li>í”„ë¡œì íŠ¸ ì´ë¦„ì„ ì…ë ¥í•´ì£¼ê³ â€¦</li>
</ul>

<p><img src="https://images.velog.io/images/new_wisdom/post/2cbde34b-d7bc-465f-b818-dc2121cbb3dc/image.png" alt="" /></p>

<ul>
  <li>ê¹ƒ ë ˆí¬ì§€í† ë¦¬ ì£¼ì†Œë¥¼ ë“±ë¡</li>
  <li>ê·¸ë¦¬ê³  Credentials ì— ìˆëŠ” Add ë²„íŠ¼ì„ ëˆ„ë¥´ê¸°</li>
</ul>

<p><img src="/Users/jyejye/Library/Application Support/typora-user-images/image-20210712004730575.png" alt="image-20210712004730575" /></p>

<ul>
  <li>Kind : Username with password ì„ íƒ</li>
  <li>githubì˜ ê³„ì •, ë¹„ë²ˆ ë“±ë¡</li>
</ul>

<p><img src="https://images.velog.io/images/new_wisdom/post/65473bf2-35db-4dbc-9de9-603f1f141b59/image.png" style="zoom:33%;" /></p>

<ul>
  <li>ê·¸ë¦¬ê³  ë°©ê¸ˆ ë“±ë¡í•œ ê³„ì • ì„ íƒ</li>
  <li>ì  í‚¨ìŠ¤ ë¹Œë“œê°€ ê´€ë¦¬ë  ë¸Œëœì¹˜ ì„ íƒ</li>
</ul>

<h4 id="build-trigger">Build Trigger</h4>

<p><img src="https://images.velog.io/images/new_wisdom/post/7cdb52b2-4b91-40cd-8024-4b45b48478a0/image.png" style="zoom: 33%;" /></p>

<h4 id="build">Build</h4>

<ul>
  <li>Excute shell ì„ íƒ</li>
</ul>

<p><img src="https://images.velog.io/images/new_wisdom/post/6e732c9c-3e3e-4874-b186-ea31054ffc3c/image.png" style="zoom: 33%;" /></p>

<ul>
  <li>ë¹Œë“œ ìŠ¤í¬ë¦½íŠ¸ ì‘ì„±</li>
</ul>

<h4 id="í† í°-ë°œê¸‰">í† í° ë°œê¸‰</h4>

<ul>
  <li>githubì—ì„œ í† í° ë°œê¸‰í•˜ê¸°</li>
</ul>

<p><img src="https://images.velog.io/images/new_wisdom/post/6c1da1aa-c501-450b-a6f0-2c5ace5d6899/image.png" alt="" /></p>

<ul>
  <li>ë°œê¸‰ëœ í† í°ì„ ë³µì‚¬í•˜ê³ , ë‹¤ì‹œ ì  í‚¨ìŠ¤ë¡œâ€¦</li>
  <li>ì  í‚¨ìŠ¤ ëŒ€ì‹œë³´ë“œ -&gt; ì  í‚¨ìŠ¤ ê´€ë¦¬ íƒ­ -&gt; ì‹œìŠ¤í…œ ì„¤ì •</li>
</ul>

<p><img src="https://images.velog.io/images/new_wisdom/post/7ad805b0-5673-4cbd-ac0f-ab81157bd723/image.png" style="zoom:67%;" /></p>

<ul>
  <li>Domain : Global credentials (unrestricted) ì„ íƒ</li>
  <li>Kind : Secret text ì„ íƒ</li>
  <li>Secret : ìœ„ì—ì„œ ìƒì„±í•œ github í† í° ì…ë ¥</li>
  <li>ID : ë³¸ì¸ì´ ì§€ì •í•˜ëŠ” ì‹ë³„ì(ID) ì…ë ¥ (ex: github)</li>
</ul>

<h4 id="ì €ì¥í•˜ë©´-ë-build-now">ì €ì¥í•˜ë©´ ë! Build Now!</h4>

<p><img src="https://images.velog.io/images/new_wisdom/post/6e2bd4cd-7f0e-49a9-b9c8-4a9ab276e7b8/image.png" style="zoom:50%;" /></p>

<ul>
  <li>ì½˜ì†”ë„ í™•ì¸í•  ìˆ˜ ìˆìŒ</li>
</ul>

<h4 id="ì½˜ì†”-ì¶œë ¥">ì½˜ì†” ì¶œë ¥</h4>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Started by user newwisdom
Running as SYSTEM
Building in workspace /var/jenkins_home/workspace/subway-kotlin
The recommended git tool is: NONE
using credential 0139eabb-5494-46ce-875e-1bdeedd0d391
Cloning the remote Git repository
Cloning repository https://github.com/NewWisdom/subway-kotlin.git
 &gt; git init /var/jenkins_home/workspace/subway-kotlin # timeout=10
Fetching upstream changes from https://github.com/NewWisdom/subway-kotlin.git
 &gt; git --version # timeout=10
 &gt; git --version # 'git version 2.20.1'
using GIT_ASKPASS to set credentials 
 &gt; git fetch --tags --force --progress -- https://github.com/NewWisdom/subway-kotlin.git +refs/heads/*:refs/remotes/origin/* # timeout=10
 &gt; git config remote.origin.url https://github.com/NewWisdom/subway-kotlin.git # timeout=10
 &gt; git config --add remote.origin.fetch +refs/heads/*:refs/remotes/origin/* # timeout=10
Avoid second fetch
 &gt; git rev-parse refs/remotes/origin/master^{commit} # timeout=10
Checking out Revision 7b0fb7eff520316950d4a0a769d11c46848f76b4 (refs/remotes/origin/master)
 &gt; git config core.sparsecheckout # timeout=10
 &gt; git checkout -f 7b0fb7eff520316950d4a0a769d11c46848f76b4 # timeout=10
Commit message: "feat(member): ë©¤ë²„ ê´€ë ¨ ê¸°ë³¸ ì…‹íŒ… ì¶”ê°€"
First time build. Skipping changelog.
[subway-kotlin] $ /bin/sh -xe /tmp/jenkins8995160598138643631.sh
+ ./gradlew clean print
Downloading https://services.gradle.org/distributions/gradle-7.0.2-bin.zip
..........10%...........20%...........30%..........40%...........50%...........60%..........70%...........80%...........90%..........100%

Welcome to Gradle 7.0.2!

Here are the highlights of this release:
 - File system watching enabled by default
 - Support for running with and building Java 16 projects
 - Native support for Apple Silicon processors
 - Dependency catalog feature preview

For more details see https://docs.gradle.org/7.0.2/release-notes.html

Starting a Gradle Daemon (subsequent builds will be faster)
&gt; Task :clean UP-TO-DATE

&gt; Task :print
github push complete

BUILD SUCCESSFUL in 2m 43s
2 actionable tasks: 1 executed, 1 up-to-date
Finished: SUCCESS
</code></pre></div></div>

<ul>
  <li>ì•„ì§ê¹Œì§€ëŠ” Build Nowë¥¼ í•´ì•¼ì§€ ë¹Œë“œê°€ ë¨</li>
</ul>

<h3 id="ì›ê²©-ì„œë²„-ë°°í¬">ì›ê²© ì„œë²„ ë°°í¬</h3>

<ul>
  <li>EC2ì— ì˜¬ë¦¬ê³  ì´í›„ ì‹¤ìŠµì„ ì§„í–‰í•´ë³´ì</li>
  <li>ì¶”í›„ ì—…ë°ì´íŠ¸</li>
</ul>

<hr />

<h3 id="ì°¸ê³ -ìë£Œ">ì°¸ê³  ìë£Œ</h3>

<ul>
  <li>
    <p><a href="https://deveric.tistory.com/106">CI/CD ì˜ ê°œë…, ì ìš©í•´ë³¸ í›„ê¸°</a></p>
  </li>
  <li>
    <p><a href="https://goddaehee.tistory.com/260?category=399178">Jenkins ë¹Œë“œ ìë™í™” - github pushì‹œ ìë™ ë¹Œë“œ í•˜ê¸°(github webhook)</a></p>
  </li>
</ul>


	  ]]></description>
	</item>

	<item>
	  <title>ğŸŒ± JPA - Cascade ë…¸íŠ¸</title>
	  <link>//jpa-casecade</link>
	  <author></author>
	  <pubDate>2021-07-08T10:01:00+09:00</pubDate>
	  <guid>//jpa-casecade</guid>
	  <description><![CDATA[
	     <p>JPAì—ì„œ ì—”í‹°í‹°ë¥¼ ì €ì¥í•  ë•Œ ì—°ê´€ëœ ëª¨ë“  ì—”í‹°í‹°ëŠ” ì˜ì† ìƒíƒœì—¬ì•¼ í•œë‹¤.<br />
ë¶€ëª¨ ì—”í‹°í‹°ë¥¼ ì˜ì† ìƒíƒœë¡œ ë§Œë“¤ ë•Œ ì—°ê´€ëœ ìì‹ë„ í•œë²ˆì— ì˜ì† ìƒíƒœë¡œ ë§Œë“¤ ìˆ˜ ìˆë‹¤.</p>

<h2 id="cascadeë€">Cascadeë€?</h2>

<ul>
  <li>ì˜ì†ì„± ì „ì´</li>
  <li>ì—°ê´€ê´€ê³„ì— ìˆëŠ” ì—”í‹°í‹°ì— ì‘ì—…ì´ ì´ë£¨ì–´ì ¸ ìƒíƒœ ë³€í™”ê°€ ì´ë¤„ì§ˆ ì‹œ ë™ì¼í•œ ì‘ì—…ì´ ì—°ê²°ëœ ì—”í‹°í‹°ì— ì „ì´ë˜ëŠ” ì˜µì…˜</li>
  <li>ì¼ë°˜ì ìœ¼ë¡œ ë¶€ëª¨ ì—”í‹°í‹°ì—ì„œ cascade ì˜µì…˜ì„ ê±¸ì–´ì¤Œ</li>
  <li>ìì‹ì—ì„œ ë¶€ëª¨ë¡œ ì˜µì…˜ì„ ê±°ëŠ” ê²ƒì€ ì˜ë¯¸ê°€ ì—†ë‹¤ê³ í•¨</li>
  <li>ì¦‰ì‹œë¡œë”©, ì§€ì—°ë¡œë”©, ì—°ê´€ê´€ê³„ ì„¸íŒ…ê³¼ ê´€ê³„ ì—†ìŒ</li>
  <li>ë¶€ëª¨, ìì‹ ì—”í‹°í‹°ì™€ ì—°ê´€ê´€ê³„ ì£¼ì¸(ì™¸ë˜í‚¤ ê´€ë¦¬ì)ëŠ” ë‹¤ë¦„</li>
</ul>

<h3 id="entityì˜-ìƒíƒœ">Entityì˜ ìƒíƒœ</h3>

<ul>
  <li><strong>Transient</strong> : JPAê°€ ëª¨ë¥´ëŠ” ìƒíƒœ (ë‹¨ìˆœ ê°ì²´ ìƒì„±)</li>
  <li><strong>Persistent</strong> : JPAê°€ ê´€ë¦¬ì¤‘ì¸ ìƒíƒœ (1ì°¨ ìºì‹œ, Dirty Checking, Write Behind, â€¦)</li>
  <li><strong>Detached</strong> : JPAê°€ ë”ì´ìƒ ê´€ë¦¬í•˜ì§€ ì•ŠëŠ” ìƒíƒœ</li>
  <li><strong>Removed</strong> : JPAê°€ ê´€ë¦¬í•˜ê¸´ í•˜ì§€ë§Œ ì‚­ì œí•˜ê¸°ë¡œ í•œ ìƒíƒœ</li>
</ul>

<h3 id="casecade-ì˜µì…˜-ì¼ë¶€">casecade ì˜µì…˜ (ì¼ë¶€)</h3>

<h4 id="persist">PERSIST</h4>

<ul>
  <li>ì—”í‹°í‹°ë¥¼ ì˜ì†í™” í•  ë•Œ ì—°ê´€ëœ ì—”í‹°í‹°ë„ í•¨ê»˜ ìœ ì§€</li>
  <li>Transient ì¸ìŠ¤í„´ìŠ¤ë¥¼ Persistentë¡œ ë§Œë“¤ì–´ì¤Œ</li>
</ul>

<h4 id="remove">REMOVE</h4>

<ul>
  <li>ì—”í‹°í‹°ë¥¼ ì‚­ì œí•  ë•Œ, ì—°ê´€ëœ ì—”í‹°ë„ í•¨ê»˜ ì‚­ì œ</li>
</ul>

<h4 id="all">ALL</h4>

<ul>
  <li>ëª¨ë“  CASCADE ì˜µì…˜ ì ìš©</li>
  <li>ëª¨ë“  ì‘ì—…ì„ ë¶€ëª¨ì—ì„œ ìì‹ ì—”í‹°í‹°ë¡œ ì „íŒŒ</li>
</ul>

<h2 id="ì˜ˆì‹œ">ì˜ˆì‹œ</h2>

<h3 id="ì•„ë¬´ëŸ°-ì˜µì…˜ì´-ì—†ëŠ”-ê²½ìš°">ì•„ë¬´ëŸ° ì˜µì…˜ì´ ì—†ëŠ” ê²½ìš°</h3>

<h4 id="comment">Comment</h4>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Entity</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Comment</span> <span class="o">{</span>

    <span class="nd">@Id</span>
    <span class="nd">@GeneratedValue</span>
    <span class="kd">private</span> <span class="n">Long</span> <span class="n">id</span><span class="o">;</span>
    <span class="kd">private</span> <span class="n">String</span> <span class="n">comment</span><span class="o">;</span>

    <span class="nd">@ManyToOne</span>
    <span class="kd">private</span> <span class="n">Post</span> <span class="n">post</span><span class="o">;</span>
<span class="o">}</span> 
</code></pre></div></div>

<h4 id="post">Post</h4>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Entity</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Post</span> <span class="o">{</span>

    <span class="nd">@Id</span>
    <span class="nd">@GeneratedValue</span>
    <span class="kd">private</span> <span class="n">Long</span> <span class="n">id</span><span class="o">;</span>
    <span class="kd">private</span> <span class="n">String</span> <span class="n">title</span><span class="o">;</span>

    <span class="nd">@OneToMany</span><span class="o">(</span><span class="n">mappedBy</span> <span class="o">=</span> <span class="s">"post"</span><span class="o">)</span>
    <span class="kd">private</span> <span class="n">Set</span><span class="o">&lt;</span><span class="n">Comment</span><span class="o">&gt;</span> <span class="n">comments</span> <span class="o">=</span> <span class="k">new</span> <span class="n">HashSet</span><span class="o">&lt;&gt;();</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">addComment</span><span class="o">(</span><span class="n">Comment</span> <span class="n">comment</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">getComments</span><span class="o">().</span><span class="na">add</span><span class="o">(</span><span class="n">comment</span><span class="o">);</span>
        <span class="n">comment</span><span class="o">.</span><span class="na">setPost</span><span class="o">(</span><span class="k">this</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<h4 id="test-ì½”ë“œ">Test ì½”ë“œ</h4>

<p><img src="https://images.velog.io/images/new_wisdom/post/cddb1ee2-22ca-47f4-9153-54f8b207c8ed/image.png" style="zoom:50%;" /></p>

<ul>
  <li>ìì‹ì¸ CommentëŠ” ì €ì¥ë˜ì§€ ì•ŠìŒ
    <ul>
      <li>idê°€ nullì„ì„ í™•ì¸</li>
    </ul>
  </li>
</ul>

<h3 id="cascadetypeallì„-ê±´-ê²½ìš°">CascadeType.ALLì„ ê±´ ê²½ìš°</h3>

<p><img src="https://images.velog.io/images/new_wisdom/post/a9058252-290e-4373-a2a1-1209ddd93929/image.png" style="zoom:50%;" /></p>

<ul>
  <li>ë¶€ëª¨ì¸ Post ì—”í‹°í‹°ì—ì„œ ìì‹ì¸ Commentsì— ì˜µì…˜ê±¸ê¸°</li>
</ul>

<p><img src="https://images.velog.io/images/new_wisdom/post/7b0a6cb1-5ce9-490a-80a3-32048d2a6281/image.png" style="zoom: 33%;" /></p>

<ul>
  <li>idê°€ nullì´ ì•„ë‹˜ì„ í™•ì¸</li>
</ul>

<h2 id="ê³ ì•„-ê°ì²´-ì œê±°">ê³ ì•„ ê°ì²´ ì œê±°</h2>

<ul>
  <li>JPAì—ì„œëŠ” ë¶€ëª¨ ì—”í‹°í‹°ì™€ ì—°ê´€ê´€ê³„ê°€ ëŠì–´ì§„ ìì‹ ì—”í‹°í‹°ë¥¼ ìë™ìœ¼ë¡œ ì‚­ì œí•˜ëŠ” ê¸°ëŠ¥ ì œê³µ</li>
  <li>ì°¸ì¡°ê°€ ì œê±°ëœ ì—”í‹°í‹°ëŠ” ë‹¤ë¥¸ ê³³ì—ì„œ ì°¸ì¡°í•˜ì§€ ì•ŠëŠ” ê³ ì•„ ê°ì²´ë¡œ ë³´ê³  ì‚­ì œ</li>
  <li>ë•Œë¬¸ì— ì°¸ì¡°í•˜ëŠ” ê°ì²´ê°€ í•˜ë‚˜ì¼ ë•Œë§Œ ì‚¬ìš©í•´ì•¼ í•¨ (íŠ¹ì • ì—”í‹°í‹°ì—ì„œë§Œ ì†Œìœ í•˜ê³  ìˆëŠ” ì—”í‹°í‹°)</li>
  <li><code class="highlighter-rouge">@OneToOne</code>, <code class="highlighter-rouge">@OneToMany</code> ì—ì„œë§Œ ì‚¬ìš© ê°€ëŠ¥</li>
</ul>

<h4 id="example">Example</h4>

<p><img src="https://images.velog.io/images/new_wisdom/post/d5580482-d984-43e1-8a51-d407d75bc0a1/image.png" style="zoom:50%;" /></p>

<ul>
  <li>Comments ê°ì²´ëŠ” Postì—ì„œë§Œ ì†Œìœ í•˜ê³  ìˆìŒ</li>
  <li>Commentsì— <code class="highlighter-rouge">orphanRemoval</code> ì˜µì…˜ ì¶”ê°€</li>
</ul>

<p><img src="https://images.velog.io/images/new_wisdom/post/70cb0d2c-9aa1-44ec-854b-e7386352fd6b/image.png" style="zoom:50%;" /></p>

<ul>
  <li>Commentsë¥¼ ì œê±°í•˜ì˜€ì„ ë•Œ,</li>
</ul>

<p><img src="https://images.velog.io/images/new_wisdom/post/a0b3db75-0b62-4034-9cdf-99d6885c85e4/image.png" style="zoom:33%;" /></p>

<ul>
  <li>commentì— ëŒ€í•´ì„œ ë‹¤ìŒê³¼ ê°™ì´ delete ì¿¼ë¦¬ê°€ ë‚˜ê°</li>
</ul>

<hr />

<h3 id="ì°¸ê³ -ìë£Œ">ì°¸ê³  ìë£Œ</h3>

<ul>
  <li><a href="https://vladmihalcea.com/a-beginners-guide-to-jpa-and-hibernate-cascade-types/">A beginnerâ€™s guide to JPA and Hibernate Cascade Types</a></li>
  <li><a href="https://webcoding-start.tistory.com/41">ì˜ì†ì„± ì „ì´ ë° ê³ ì•„ê°ì²´ ì œê±°</a></li>
</ul>


	  ]]></description>
	</item>

	<item>
	  <title>ğŸ“‹ Kotlinìœ¼ë¡œ Spring Rest Docs ì‚½ì§ˆí•˜ê¸° (feat. ì œì‘ ê·¼ë¡œ)</title>
	  <link>//service-work-kotlin4</link>
	  <author></author>
	  <pubDate>2021-07-06T10:01:00+09:00</pubDate>
	  <guid>//service-work-kotlin4</guid>
	  <description><![CDATA[
	     <h2 id="spring-rest-docs-ì„¤ì •---buildgradlekts">Spring Rest Docs ì„¤ì • - build.gradle.kts</h2>

<h4 id="í”ŒëŸ¬ê·¸ì¸-ì¶”ê°€">í”ŒëŸ¬ê·¸ì¸ ì¶”ê°€</h4>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">plugins</span><span class="p">{</span>
	<span class="c1">// ...
</span>	<span class="n">id</span><span class="p">(</span><span class="s">"org.asciidoctor.convert"</span><span class="p">)</span> <span class="n">version</span> <span class="s">"1.5.9.2"</span>
<span class="p">}</span>
</code></pre></div></div>

<h4 id="asciidoctor-spring-rest-docs-ì˜ì¡´ì„±-ì¶”ê°€">asciidoctor, Spring Rest Docs ì˜ì¡´ì„± ì¶”ê°€</h4>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">asciidoctor</span><span class="p">(</span><span class="s">"org.springframework.restdocs:spring-restdocs-asciidoctor:2.0.5.RELEASE"</span><span class="p">)</span>
<span class="n">testImplementation</span><span class="p">(</span><span class="s">"org.springframework.restdocs:spring-restdocs-mockmvc:2.0.5.RELEASE"</span><span class="p">)</span>
</code></pre></div></div>

<h4 id="snippets-ì €ì¥-ê²½ë¡œ-ì§€ì •">snippets ì €ì¥ ê²½ë¡œ ì§€ì •</h4>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">val</span> <span class="py">snippetsDir</span> <span class="k">by</span> <span class="n">extra</span> <span class="p">{</span> <span class="n">file</span><span class="p">(</span><span class="s">"build/generated-snippets"</span><span class="p">)</span> <span class="p">}</span>
</code></pre></div></div>

<h4 id="task-ì¶”ê°€">task ì¶”ê°€</h4>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">tasks</span> <span class="p">{</span>
    <span class="c1">// ...
</span>    <span class="n">test</span> <span class="p">{</span>
        <span class="n">useJUnitPlatform</span><span class="p">()</span>
        <span class="n">outputs</span><span class="p">.</span><span class="n">dir</span><span class="p">(</span><span class="n">snippetsDir</span><span class="p">)</span>
    <span class="p">}</span>

    <span class="n">asciidoctor</span> <span class="p">{</span>
        <span class="n">inputs</span><span class="p">.</span><span class="n">dir</span><span class="p">(</span><span class="n">snippetsDir</span><span class="p">)</span>
        <span class="n">dependsOn</span><span class="p">(</span><span class="n">test</span><span class="p">)</span>
    <span class="p">}</span>

    <span class="n">bootJar</span> <span class="p">{</span>
        <span class="n">dependsOn</span><span class="p">(</span><span class="n">asciidoctor</span><span class="p">)</span>
        <span class="n">from</span><span class="p">(</span><span class="s">"$snippetsDir/html5"</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">into</span><span class="p">(</span><span class="s">"static/docs"</span><span class="p">)</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<h4 id="-tasks---ì‚¬ìš©ì-ì •ì˜-taskë¥¼-ë§Œë“¤-ìˆ˜-ìˆìŒ">â• tasks - ì‚¬ìš©ì ì •ì˜ taskë¥¼ ë§Œë“¤ ìˆ˜ ìˆìŒ</h4>

<h5 id="í…ŒìŠ¤í¬ë€">í…ŒìŠ¤í¬ë€?</h5>

<ul>
  <li>gradleì€ ëª…ë ¹ì—ì˜í•´ í…ŒìŠ¤í¬(Task)ë¥¼ ìˆ˜í–‰í•˜ëŠ” í”„ë¡œê·¸ë¨</li>
  <li>gradle compileJava , gradle run ë“± ëª…ë ¹ì–´ë¥¼ í†µí•´ ì‹¤í–‰í•˜ëŠ” ê²ƒë“¤ì´ ëª¨ë‘ í…ŒìŠ¤í¬</li>
  <li>Gradle í”„ë¡œì íŠ¸ì˜ ì‘ì—…ë‹¨ìœ„</li>
  <li>TaskëŠ” ë…ë¦½ì ì¸ ì•¡ì…˜ì„ ìˆ˜í–‰í•  ìˆ˜ ìˆê³ , ë‹¤ë¥¸ Taskì— ëŒ€í•œ ì˜ì¡´ì„±ì„ ì„¤ì •í•  ìˆ˜ ìˆìŒ</li>
</ul>

<h3 id="spring-rest-docs-ì‚½ì§ˆ-ê¸°ë¡">Spring Rest Docs ì‚½ì§ˆ ê¸°ë¡</h3>

<ul>
  <li>build.gradle.kts ì„¤ì •ì„ ëëƒ„</li>
  <li><code class="highlighter-rouge">generated-snippets</code> í´ë”ëŠ” ë§Œë“¤ì–´ ì§€ì§€ë§Œ í…ŒìŠ¤íŠ¸ ì½”ë“œë¥¼ ëŒë ¤ë„ ìŠ¤ë‹™í«ì´ ë§Œë“¤ì–´ì§€ì§€ ì•ŠëŠ” ë¬¸ì œ ë°œìƒ</li>
  <li>build.gradle.kts ë¬¸ì œì¼ì¤„ ì•Œì•˜ìœ¼ë‚˜ ì•„ë‹ˆì—ˆë‹¤</li>
</ul>

<p><img src="https://images.velog.io/images/new_wisdom/post/d7784113-3ab2-41f1-8880-d5e1b16c1d21/image.png" style="zoom: 33%;" /></p>

<ul>
  <li>í…ŒìŠ¤íŠ¸ ì½”ë“œê°€ dsl ë¡œ ë˜ì–´ ìˆìŒ</li>
</ul>

<p><img src="https://images.velog.io/images/new_wisdom/post/6e888edf-6a57-4a76-805b-f2ce8c0e7ae5/image.png" style="zoom:33%;" /></p>

<ul>
  <li>https://github.com/spring-projects/spring-restdocs/issues/677</li>
  <li>dsl ì¼ ê²½ìš° <code class="highlighter-rouge">handle()</code>ì„ í†µí•´ <code class="highlighter-rouge">document()</code>ì‹¤í–‰í•´ì•¼í•¨</li>
</ul>

<p><img src="https://images.velog.io/images/new_wisdom/post/da507bab-476d-486c-9d04-56a523e29515/image.png" style="zoom: 33%;" /></p>

<h3 id="mockmvc-ì„¤ì •">mockMvc ì„¤ì •</h3>

<ul>
  <li><code class="highlighter-rouge">@AutoConfigureRestDocs</code> ë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•´ <code class="highlighter-rouge">@AutoConfigureMockMvc</code> ë¥¼ í†µí•´ ìˆ˜ë™ ì„¤ì •í•´ì£¼ê³  ì‹¶ì—ˆìœ¼ë‚˜</li>
  <li><code class="highlighter-rouge">@AutoConfigureMockMvc</code> ë¥¼ í•´ì£¼ë©´ utf-8 ì„¤ì •ì„ í•  ìˆ˜ ì—†ëŠ” ì˜¤ë¥˜ ë°œìƒ</li>
  <li>ë•Œë¬¸ê¸°ì¡´ ì½”ë“œëŠ” mockMvcë¥¼ ìˆ˜ë™ ì„¤ì •í•´ì£¼ê³  ìˆì—ˆìŒ</li>
  <li>ì´ëŸ¬ë©´ <code class="highlighter-rouge">@AutoConfigureRestDocs</code> ì´ ë¨¹íˆì§€ ì•Šê¸° ë•Œë¬¸ì— ì•„ë˜ì™€ ê°™ì€ ì˜¤ë¥˜ ë°œìƒ</li>
</ul>

<p><img src="https://images.velog.io/images/new_wisdom/post/a426272c-0364-4977-93e7-3f25e897ce9b/image.png" style="zoom:33%;" /></p>

<ul>
  <li>ë‹¤ìŒ ì„¤ì •ì„ í†µí•´ RestDocs ê´€ë ¨ ì„¤ì •ë„ mockmvcì— ì¶”ê°€</li>
</ul>

<h4 id="ì–´ë…¸í…Œì´ì…˜-ì¶”ê°€">ì–´ë…¸í…Œì´ì…˜ ì¶”ê°€</h4>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>@Import(RestDocsConfiguration::class)
@ExtendWith(RestDocumentationExtension::class, SpringExtension::class)
</code></pre></div></div>

<h4 id="setup">setUp</h4>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">@BeforeEach</span>
<span class="k">internal</span> <span class="k">fun</span> <span class="nf">setUp</span><span class="p">(</span>
    <span class="n">webApplicationContext</span><span class="p">:</span> <span class="n">WebApplicationContext</span><span class="p">,</span>
    <span class="n">restDocumentationContextProvider</span><span class="p">:</span> <span class="n">RestDocumentationContextProvider</span>
<span class="p">)</span> <span class="p">{</span>
    <span class="n">mockMvc</span> <span class="p">=</span> <span class="n">MockMvcBuilders</span><span class="p">.</span><span class="n">webAppContextSetup</span><span class="p">(</span><span class="n">webApplicationContext</span><span class="p">)</span>
        <span class="p">.</span><span class="n">addFilter</span><span class="p">&lt;</span><span class="n">DefaultMockMvcBuilder</span><span class="p">&gt;(</span><span class="n">CharacterEncodingFilter</span><span class="p">(</span><span class="s">"UTF-8"</span><span class="p">,</span> <span class="k">true</span><span class="p">))</span>
        <span class="p">.</span><span class="n">alwaysDo</span><span class="p">&lt;</span><span class="n">DefaultMockMvcBuilder</span><span class="p">&gt;(</span><span class="n">MockMvcResultHandlers</span><span class="p">.</span><span class="n">print</span><span class="p">())</span>
        <span class="p">.</span><span class="n">apply</span><span class="p">&lt;</span><span class="n">DefaultMockMvcBuilder</span><span class="p">&gt;(</span>
            <span class="n">MockMvcRestDocumentation</span><span class="p">.</span><span class="n">documentationConfiguration</span><span class="p">(</span>
                <span class="n">restDocumentationContextProvider</span>
            <span class="p">)</span>
        <span class="p">)</span>
        <span class="p">.</span><span class="n">build</span><span class="p">()</span>
<span class="p">}</span>
</code></pre></div></div>

<hr />

<h3 id="ì°¸ê³ ìë£Œ">ì°¸ê³ ìë£Œ</h3>

<ul>
  <li>
    <p><a href="http://5.9.10.113/66568054/spring-rest-docs-can-not-generate-snippets-use-gradle-kotlin">spring-rest-docs can not generate snippets use gradle kotlin</a></p>
  </li>
  <li>
    <p><a href="https://gitlab.com/TIBHannover/orkg/orkg-backend/blob/b4ef1f49f3351597200c28a71a50cd0283b97fa8/build.gradle.kts">build.gradle.kts Â· b4ef1f49f3351597200c28a71a50cd0283b97fa8 Â· TIB Hannover / Open Research Knowledge Graph (ORKG) / ORKG Backend</a></p>
  </li>
  <li>
    <p><a href="https://github.com/awakuwaku/spring-rest-docs-kotlin-sample/blob/main/build.gradle.kts">awakuwaku/spring-rest-docs-kotlin-sample</a></p>
  </li>
</ul>

	  ]]></description>
	</item>

	<item>
	  <title>ğŸ“š atdd-subway-fare ë¯¸ì…˜ ì •ë¦¬</title>
	  <link>//atdd-subway-fare-note</link>
	  <author></author>
	  <pubDate>2021-06-16T10:01:01+09:00</pubDate>
	  <guid>//atdd-subway-fare-note</guid>
	  <description><![CDATA[
	     <h2 id="ìš”ê¸ˆ-ì •ì±…">ìš”ê¸ˆ ì •ì±…</h2>

<p><img src="https://images.velog.io/images/new_wisdom/post/cd715abe-edce-405a-811a-2b9cff62398b/image.png" style="zoom:33%;" /></p>

<p><img src="https://images.velog.io/images/new_wisdom/post/9b90163c-02c0-4f7a-8801-0c1d74a5e47e/image.png" style="zoom: 50%;" /></p>

<ul>
  <li>ë¡œê·¸ì¸ ì‚¬ìš©ìì™€ ë¹„ë¡œê·¸ì¸ ì‚¬ìš©ìë¥¼ êµ¬ë³„í•˜ì—¬ ìš”ê¸ˆ ì •ì±…ì„ ì ìš©</li>
  <li>PathControllerì—ì„œëŠ” í† í°ì´ ì—†ì–´ë„ ì˜ˆì™¸ê°€ ì•„ë‹ˆì—ˆê³ </li>
  <li>MemberControllerì—ì„œëŠ” í† í°ì´ ì—†ìœ¼ë©´ ì˜ˆì™¸ì˜€ê¸°ì— Resolverì—ì„œëŠ” ê°ê°ì— ë§ëŠ” ì²˜ë¦¬ë¥¼ í•´ì£¼ì–´ì•¼ í–ˆìŒ</li>
  <li>ë§¨ ì²˜ìŒ í˜ì–´ë‘ ê¸°ëŠ¥ë§Œ ëŒì•„ê°€ê²Œ êµ¬í˜„í–ˆì„ ë•ŒëŠ” ê¸°ì¡´ì— ìˆëŠ” ë¡œê·¸ì¸ëœ ì‚¬ìš©ìì— ëŒ€í•œ ì¸ê°€ ê³¼ì •ì„ ê±°ì¹˜ëŠ” Resolverë¥¼ ì¬ì‚¬ìš©í•˜ë„ë¡ êµ¬í˜„</li>
  <li>ì´ëŸ¬ê¸° ìœ„í•´ì„œëŠ” ì´ ê°ê°ì— ë§ëŠ” ì²˜ë¦¬ë¥¼ ì¼ê°„ Controllerë¡œ ì˜®ê²¨ì•¼ í–ˆìŒ</li>
</ul>

<h4 id="authenticationprincipalargumentresolver">AuthenticationPrincipalArgumentResolver</h4>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Override</span>
<span class="kd">public</span> <span class="n">Object</span> <span class="nf">resolveArgument</span><span class="o">(</span><span class="n">MethodParameter</span> <span class="n">parameter</span><span class="o">,</span> <span class="n">ModelAndViewContainer</span> <span class="n">mavContainer</span><span class="o">,</span> <span class="n">NativeWebRequest</span> <span class="n">webRequest</span><span class="o">,</span> <span class="n">WebDataBinderFactory</span> <span class="n">binderFactory</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">String</span> <span class="n">credentials</span> <span class="o">=</span> <span class="n">AuthorizationExtractor</span><span class="o">.</span><span class="na">extract</span><span class="o">(</span><span class="n">webRequest</span><span class="o">.</span><span class="na">getNativeRequest</span><span class="o">(</span><span class="n">HttpServletRequest</span><span class="o">.</span><span class="na">class</span><span class="o">));</span>
    <span class="n">LoginMember</span> <span class="n">member</span> <span class="o">=</span> <span class="n">authService</span><span class="o">.</span><span class="na">findMemberByToken</span><span class="o">(</span><span class="n">credentials</span><span class="o">);</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">member</span><span class="o">.</span><span class="na">getId</span><span class="o">()</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">throw</span> <span class="k">new</span> <span class="nf">AuthorizationException</span><span class="o">();</span>
    <span class="o">}</span>
    <span class="k">return</span> <span class="n">member</span><span class="o">;</span>
<span class="o">}</span>
</code></pre></div></div>

<h4 id="membercontrollerì—ì„œ-loginmemberì—-ëŒ€í•œ-ì²˜ë¦¬">MemberControllerì—ì„œ LoginMemberì— ëŒ€í•œ ì²˜ë¦¬</h4>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">private</span> <span class="kt">void</span> <span class="nf">unAuthorizedThrowException</span><span class="o">(</span><span class="nd">@AuthenticationPrincipal</span> <span class="n">LoginMember</span> <span class="n">loginMember</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">loginMember</span><span class="o">.</span><span class="na">getId</span><span class="o">()</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">throw</span> <span class="k">new</span> <span class="nf">AuthorizationException</span><span class="o">();</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<ul>
  <li>idê°€ ì—†ìœ¼ë©´ (ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ì‚¬ìš©ìì´ë©´) ì˜ˆì™¸</li>
</ul>

<h4 id="pathcontrollerì—ì„œ-loginmemberì—-ëŒ€í•œ-ì²˜ë¦¬">PathControllerì—ì„œ LoginMemberì— ëŒ€í•œ ì²˜ë¦¬</h4>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">private</span> <span class="n">LoginMember</span> <span class="nf">unLoginMemberWrapper</span><span class="o">(</span><span class="nd">@AuthenticationPrincipal</span> <span class="n">LoginMember</span> <span class="n">loginMember</span><span class="o">)</span> <span class="o">{</span>
  <span class="k">if</span> <span class="o">(</span><span class="n">loginMember</span><span class="o">.</span><span class="na">getId</span><span class="o">()</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">return</span> <span class="k">new</span> <span class="nf">LoginMember</span><span class="o">(</span><span class="kc">null</span><span class="o">,</span> <span class="kc">null</span><span class="o">,</span> <span class="o">-</span><span class="mi">1</span><span class="o">);</span>
  <span class="o">}</span>
  <span class="k">return</span> <span class="n">loginMember</span><span class="o">;</span>
<span class="o">}</span>
</code></pre></div></div>

<ul>
  <li>idê°€ ì¡´ì¬í•˜ì§€ ì•Šìœ¼ë©´ ageë¥¼ <code class="highlighter-rouge">-1</code> ë¡œ wrap</li>
</ul>

<h5 id="ê·¸ëŸ°ë°-ì´ë ‡ê²Œ-êµ¬í˜„í•˜ê³ -ìƒê°í•œ-ë¬¸ì œì ì´">ê·¸ëŸ°ë° ì´ë ‡ê²Œ êµ¬í˜„í•˜ê³  ìƒê°í•œ ë¬¸ì œì ì´â€¦</h5>

<ul>
  <li>Controllerì—ì„œ ì´ë¯¸ ë¦¬ì¡¸ë¹™ëœ LoginMemberì— ëŒ€í•œ ì²˜ë¦¬ë¥¼ ë˜ ê±´ë“œë¦¬ê³  ìˆë‹¤ëŠ” ëŠë‚Œ</li>
  <li>Controllerì—ì„œ LoginMemberì— ëŒ€í•œ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì„ ì•Œê³  ìˆëŠ” ëŠë‚Œì´ë¼ ê°œì„ ì´ í•„ìš”í•˜ë‹¤ê³  ëŠë‚Œ</li>
  <li>ageë¥¼ -1ë¡œ ê°ì‹¸ì„œ ì´ ê²½ìš° ë¹„ë¡œê·¸ì¸ìë¡œ ê°€ì •í•˜ëŠ” ë¡œì§ì´ ê´œì°®ì€ì§€ ì˜ë¬¸ì„ í’ˆê³  ìˆì—ˆìŒ</li>
</ul>

<h4 id="í˜ì–´ì˜-ë¦¬ë·°ì–´ì—ê²Œ-ì˜¨-í”¼ë“œë°±">í˜ì–´ì˜ ë¦¬ë·°ì–´ì—ê²Œ ì˜¨ í”¼ë“œë°±</h4>

<p><img src="https://images.velog.io/images/new_wisdom/post/8c7d30b2-c0f7-45af-b31f-dfd6a6ef247d/image.png" style="zoom:50%;" /></p>

<ul>
  <li>ì¼ë‹¨ <code class="highlighter-rouge">AuthenticationPrincipalArgumentResolver</code> ì™€ <code class="highlighter-rouge">AgeAuthenticationPrincipalArgumentResolver</code> ë‘ê°œë¡œ ë¶„ë¦¬í•˜ì˜€ìŒ</li>
  <li><code class="highlighter-rouge">AgeAuthenticationPrincipalArgumentResolver</code> ì—ì„œëŠ” ìš”ê¸ˆ ì •ì±…ì— í•„ìš”í•œ ê°’ì¸ <code class="highlighter-rouge">age</code> ë§Œ ë°˜í™˜í•˜ë„ë¡ ë¦¬íŒ©í† ë§</li>
</ul>

<h4 id="ageauthenticationprincipalargumentresolver">AgeAuthenticationPrincipalArgumentResolver</h4>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">AgeAuthenticationPrincipalArgumentResolver</span> <span class="kd">implements</span> <span class="n">HandlerMethodArgumentResolver</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="n">AuthService</span> <span class="n">authService</span><span class="o">;</span>

    <span class="kd">public</span> <span class="nf">AgeAuthenticationPrincipalArgumentResolver</span><span class="o">(</span><span class="n">AuthService</span> <span class="n">authService</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">authService</span> <span class="o">=</span> <span class="n">authService</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">supportsParameter</span><span class="o">(</span><span class="n">MethodParameter</span> <span class="n">parameter</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">parameter</span><span class="o">.</span><span class="na">hasParameterAnnotation</span><span class="o">(</span><span class="n">AgeAuthenticationPrincipal</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="n">Object</span> <span class="nf">resolveArgument</span><span class="o">(</span><span class="n">MethodParameter</span> <span class="n">parameter</span><span class="o">,</span> <span class="n">ModelAndViewContainer</span> <span class="n">mavContainer</span><span class="o">,</span> <span class="n">NativeWebRequest</span> <span class="n">webRequest</span><span class="o">,</span> <span class="n">WebDataBinderFactory</span> <span class="n">binderFactory</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">String</span> <span class="n">credentials</span> <span class="o">=</span> <span class="n">AuthorizationExtractor</span><span class="o">.</span><span class="na">extract</span><span class="o">(</span><span class="n">Objects</span><span class="o">.</span><span class="na">requireNonNull</span><span class="o">(</span><span class="n">webRequest</span><span class="o">.</span><span class="na">getNativeRequest</span><span class="o">(</span><span class="n">HttpServletRequest</span><span class="o">.</span><span class="na">class</span><span class="o">)));</span>
        <span class="n">LoginMember</span> <span class="n">memberByToken</span> <span class="o">=</span> <span class="n">authService</span><span class="o">.</span><span class="na">findMemberByToken</span><span class="o">(</span><span class="n">credentials</span><span class="o">);</span>
        <span class="k">return</span> <span class="n">memberByToken</span><span class="o">.</span><span class="na">getAge</span><span class="o">();</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<ul>
  <li><code class="highlighter-rouge">Integer</code> í˜•ì¸ ageë¥¼ ë°˜í™˜í•˜ë„ë¡â€¦.
    <ul>
      <li>ë°˜í™˜íƒ€ì…ì„ ëª…ì‹œì ìœ¼ë¡œ ì ì–´ì¤„ê±¸ ê·¸ë¬ë„¤</li>
    </ul>
  </li>
</ul>

<h4 id="pathserviceì˜-findpath">PathServiceì˜ findPath()</h4>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="n">PathResponse</span> <span class="nf">findPath</span><span class="o">(</span><span class="n">Integer</span> <span class="n">age</span><span class="o">,</span> <span class="n">Long</span> <span class="n">source</span><span class="o">,</span> <span class="n">Long</span> <span class="n">target</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">try</span> <span class="o">{</span>
        <span class="n">List</span><span class="o">&lt;</span><span class="n">Line</span><span class="o">&gt;</span> <span class="n">lines</span> <span class="o">=</span> <span class="n">lineService</span><span class="o">.</span><span class="na">findLines</span><span class="o">();</span>
        <span class="n">Station</span> <span class="n">sourceStation</span> <span class="o">=</span> <span class="n">stationService</span><span class="o">.</span><span class="na">findStationById</span><span class="o">(</span><span class="n">source</span><span class="o">);</span>
        <span class="n">Station</span> <span class="n">targetStation</span> <span class="o">=</span> <span class="n">stationService</span><span class="o">.</span><span class="na">findStationById</span><span class="o">(</span><span class="n">target</span><span class="o">);</span>
        <span class="n">SubwayPath</span> <span class="n">subwayPath</span> <span class="o">=</span> <span class="n">pathFinder</span><span class="o">.</span><span class="na">findPath</span><span class="o">(</span><span class="n">lines</span><span class="o">,</span> <span class="n">sourceStation</span><span class="o">,</span> <span class="n">targetStation</span><span class="o">);</span>
        <span class="kt">int</span> <span class="n">distance</span> <span class="o">=</span> <span class="n">subwayPath</span><span class="o">.</span><span class="na">calculateDistance</span><span class="o">();</span>
        <span class="kt">int</span> <span class="n">lineFare</span> <span class="o">=</span> <span class="n">subwayPath</span><span class="o">.</span><span class="na">getMaxLineFare</span><span class="o">();</span>
        <span class="n">SubwayPathFare</span> <span class="n">subwayPathFare</span> <span class="o">=</span> <span class="k">new</span> <span class="n">SubwayPathFare</span><span class="o">(</span><span class="n">age</span><span class="o">,</span> <span class="n">distance</span><span class="o">,</span> <span class="n">lineFare</span><span class="o">);</span>
        <span class="k">return</span> <span class="n">PathResponseAssembler</span><span class="o">.</span><span class="na">assemble</span><span class="o">(</span><span class="n">subwayPath</span><span class="o">,</span> <span class="n">subwayPathFare</span><span class="o">);</span>
    <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">throw</span> <span class="k">new</span> <span class="nf">InvalidPathException</span><span class="o">();</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<h4 id="subwaypathfare">SubwayPathFare</h4>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">SubwayPathFare</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="n">Integer</span> <span class="n">age</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="kt">int</span> <span class="n">distance</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="kt">int</span> <span class="n">lineFare</span><span class="o">;</span>

    <span class="kd">public</span> <span class="nf">SubwayPathFare</span><span class="o">(</span><span class="n">Integer</span> <span class="n">age</span><span class="o">,</span> <span class="kt">int</span> <span class="n">distance</span><span class="o">,</span> <span class="kt">int</span> <span class="n">lineFare</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">age</span> <span class="o">=</span> <span class="n">wrapAge</span><span class="o">(</span><span class="n">age</span><span class="o">);</span>
        <span class="k">this</span><span class="o">.</span><span class="na">distance</span> <span class="o">=</span> <span class="n">distance</span><span class="o">;</span>
        <span class="k">this</span><span class="o">.</span><span class="na">lineFare</span> <span class="o">=</span> <span class="n">lineFare</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">private</span> <span class="kt">int</span> <span class="nf">wrapAge</span><span class="o">(</span><span class="n">Integer</span> <span class="n">age</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">age</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">return</span> <span class="o">-</span><span class="mi">1</span><span class="o">;</span>
        <span class="o">}</span>
        <span class="k">return</span> <span class="n">age</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kt">int</span> <span class="nf">getFare</span><span class="o">()</span> <span class="o">{</span>
        <span class="kt">int</span> <span class="n">fareByDistance</span> <span class="o">=</span> <span class="n">FareCalculatorByDistance</span><span class="o">.</span><span class="na">from</span><span class="o">(</span><span class="n">distance</span><span class="o">);</span>
        <span class="k">return</span> <span class="n">FareAdjusterByAge</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="n">age</span><span class="o">,</span> <span class="n">fareByDistance</span><span class="o">,</span> <span class="n">lineFare</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<ul>
  <li>ìš”ê¸ˆ ì •ì±…ì„ í•´ë‹¹ ë„ë©”ì¸ì—ì„œ Enumì¸ <code class="highlighter-rouge">FareCalculatorByDistance</code> ì™€ <code class="highlighter-rouge">FareAdjusterByAge</code> ë¥¼ í†µí•´ ê³„ì‚°í•˜ê³  ìˆì—ˆìŒ</li>
  <li><code class="highlighter-rouge">wrapAge()</code> ë¥¼ í†µí•´ null ê°’ìœ¼ë¡œ ageê°€ ë“¤ì–´ì˜¤ë©´ <code class="highlighter-rouge">FareAdjusterByAge.of()</code>ì—ì„œ ìŠ¤íŠ¸ë¦¼ì„ ëŒë¦¬ëŠ”ë°, ì´ì— ì˜ˆì™¸ê°€ ë°œìƒí•˜ì§€ ì•Šë„ë¡ -1ë¡œ í¬ì¥</li>
</ul>

<h5 id="ì°¸ê³ ---fareadjusterbyageof">ì°¸ê³  - FareAdjusterByAge.of()</h5>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">static</span> <span class="kt">int</span> <span class="nf">of</span><span class="o">(</span><span class="kt">int</span> <span class="n">age</span><span class="o">,</span> <span class="kt">int</span> <span class="n">fare</span><span class="o">,</span> <span class="kt">int</span> <span class="n">lineFare</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">return</span> <span class="n">Arrays</span><span class="o">.</span><span class="na">stream</span><span class="o">(</span><span class="n">values</span><span class="o">())</span>
            <span class="o">.</span><span class="na">filter</span><span class="o">(</span><span class="n">ageRange</span> <span class="o">-&gt;</span> <span class="n">ageRange</span><span class="o">.</span><span class="na">minInclusive</span> <span class="o">&lt;=</span> <span class="n">age</span> <span class="o">&amp;&amp;</span> <span class="n">age</span> <span class="o">&lt;</span> <span class="n">ageRange</span><span class="o">.</span><span class="na">maxExclusive</span><span class="o">)</span>
            <span class="o">.</span><span class="na">map</span><span class="o">(</span><span class="n">calculator</span> <span class="o">-&gt;</span> <span class="n">calculator</span><span class="o">.</span><span class="na">adjuster</span><span class="o">.</span><span class="na">apply</span><span class="o">(</span><span class="n">fare</span><span class="o">,</span> <span class="n">lineFare</span><span class="o">))</span>
            <span class="o">.</span><span class="na">findAny</span><span class="o">()</span>
            <span class="o">.</span><span class="na">orElse</span><span class="o">(</span><span class="n">fare</span> <span class="o">+</span> <span class="n">lineFare</span><span class="o">);</span>
<span class="o">}</span>
</code></pre></div></div>

<h4 id="farecalculatorbydistance---ê±°ë¦¬ë³„-ìš”ê¸ˆ-ì •ì±…">FareCalculatorByDistance - ê±°ë¦¬ë³„ ìš”ê¸ˆ ì •ì±…</h4>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">enum</span> <span class="n">FareCalculatorByDistance</span> <span class="o">{</span>
    <span class="n">BASE</span><span class="o">(</span><span class="mi">0</span><span class="o">,</span> <span class="n">Constants</span><span class="o">.</span><span class="na">BASE_MAX_BOUNDARY</span><span class="o">,</span> <span class="n">distance</span> <span class="o">-&gt;</span> <span class="n">Constants</span><span class="o">.</span><span class="na">BASE_FARE</span><span class="o">),</span>
    <span class="n">FIRST_ADDITIONAL</span><span class="o">(</span><span class="n">Constants</span><span class="o">.</span><span class="na">BASE_MAX_BOUNDARY</span><span class="o">,</span> <span class="n">Constants</span><span class="o">.</span><span class="na">FIRST_ADDITIONAL_MAX_BOUNDARY</span><span class="o">,</span>
            <span class="o">(</span><span class="n">distance</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="n">Constants</span><span class="o">.</span><span class="na">BASE_FARE</span> <span class="o">+</span> <span class="o">(</span><span class="kt">int</span><span class="o">)</span> <span class="o">((</span><span class="n">Math</span><span class="o">.</span><span class="na">ceil</span><span class="o">((</span><span class="n">distance</span> <span class="o">-</span> <span class="n">Constants</span><span class="o">.</span><span class="na">BASE_MAX_BOUNDARY</span> <span class="o">-</span> <span class="mi">1</span><span class="o">)</span> <span class="o">/</span> <span class="mi">5</span><span class="o">))</span> <span class="o">+</span> <span class="mi">1</span><span class="o">)</span> <span class="o">*</span> <span class="n">Constants</span><span class="o">.</span><span class="na">EXTRA_FARE</span><span class="o">),</span>
    <span class="n">SECOND_ADDITIONAL</span><span class="o">(</span><span class="n">Constants</span><span class="o">.</span><span class="na">FIRST_ADDITIONAL_MAX_BOUNDARY</span><span class="o">,</span> <span class="n">Integer</span><span class="o">.</span><span class="na">MAX_VALUE</span><span class="o">,</span>
            <span class="o">(</span><span class="n">distance</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="n">Constants</span><span class="o">.</span><span class="na">BASE_FARE</span> <span class="o">+</span> <span class="mi">800</span> <span class="o">+</span> <span class="o">(</span><span class="kt">int</span><span class="o">)</span> <span class="o">((</span><span class="n">Math</span><span class="o">.</span><span class="na">ceil</span><span class="o">((</span><span class="n">distance</span> <span class="o">-</span> <span class="n">Constants</span><span class="o">.</span><span class="na">FIRST_ADDITIONAL_MAX_BOUNDARY</span> <span class="o">-</span> <span class="mi">1</span><span class="o">)</span> <span class="o">/</span> <span class="mi">8</span><span class="o">))</span> <span class="o">+</span> <span class="mi">1</span><span class="o">)</span> <span class="o">*</span> <span class="n">Constants</span><span class="o">.</span><span class="na">EXTRA_FARE</span><span class="o">);</span>


    <span class="kd">private</span> <span class="kd">final</span> <span class="kt">int</span> <span class="n">minExclusive</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="kt">int</span> <span class="n">maxInclusive</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="n">UnaryOperator</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">&gt;</span> <span class="n">calculator</span><span class="o">;</span>

    <span class="n">FareCalculatorByDistance</span><span class="o">(</span><span class="kt">int</span> <span class="n">minExclusive</span><span class="o">,</span> <span class="kt">int</span> <span class="n">maxInclusive</span><span class="o">,</span> <span class="n">UnaryOperator</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">&gt;</span> <span class="n">calculator</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">minExclusive</span> <span class="o">=</span> <span class="n">minExclusive</span><span class="o">;</span>
        <span class="k">this</span><span class="o">.</span><span class="na">maxInclusive</span> <span class="o">=</span> <span class="n">maxInclusive</span><span class="o">;</span>
        <span class="k">this</span><span class="o">.</span><span class="na">calculator</span> <span class="o">=</span> <span class="n">calculator</span><span class="o">;</span>
    <span class="o">}</span>
</code></pre></div></div>

<h4 id="fareadjusterbyage---ë‚˜ì´ë³„-ìš”ê¸ˆ-ì •ì±…">FareAdjusterByAge - ë‚˜ì´ë³„ ìš”ê¸ˆ ì •ì±…</h4>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">enum</span> <span class="n">FareAdjusterByAge</span> <span class="o">{</span>
    <span class="n">PRE_SCHOOLED</span><span class="o">(</span><span class="mi">0</span><span class="o">,</span> <span class="n">Constants</span><span class="o">.</span><span class="na">PRE_SCHOOL_MAX_BOUNDARY</span><span class="o">,</span> <span class="n">getIntegerBinaryOperator</span><span class="o">(</span><span class="mi">0</span><span class="o">)),</span>
    <span class="n">SCHOOL_AGED</span><span class="o">(</span><span class="n">Constants</span><span class="o">.</span><span class="na">PRE_SCHOOL_MAX_BOUNDARY</span><span class="o">,</span> <span class="n">Constants</span><span class="o">.</span><span class="na">SCHOOL_AGED_MAX_BOUNDARY</span><span class="o">,</span> <span class="n">getIntegerBinaryOperator</span><span class="o">(</span><span class="n">Constants</span><span class="o">.</span><span class="na">SCHOOL_AGED_RATE</span><span class="o">)),</span>
    <span class="n">ADOLESCENT</span><span class="o">(</span><span class="n">Constants</span><span class="o">.</span><span class="na">SCHOOL_AGED_MAX_BOUNDARY</span><span class="o">,</span> <span class="n">Constants</span><span class="o">.</span><span class="na">ADOLESCENT_MAX_BOUNDARY</span><span class="o">,</span> <span class="n">getIntegerBinaryOperator</span><span class="o">(</span><span class="n">Constants</span><span class="o">.</span><span class="na">ADOLESCENT_RATE</span><span class="o">));</span>

    <span class="kd">private</span> <span class="kd">final</span> <span class="kt">int</span> <span class="n">minInclusive</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="kt">int</span> <span class="n">maxExclusive</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="n">BinaryOperator</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">&gt;</span> <span class="n">adjuster</span><span class="o">;</span>

    <span class="n">FareAdjusterByAge</span><span class="o">(</span><span class="kt">int</span> <span class="n">minInclusive</span><span class="o">,</span> <span class="kt">int</span> <span class="n">maxExclusive</span><span class="o">,</span> <span class="n">BinaryOperator</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">&gt;</span> <span class="n">adjuster</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">minInclusive</span> <span class="o">=</span> <span class="n">minInclusive</span><span class="o">;</span>
        <span class="k">this</span><span class="o">.</span><span class="na">maxExclusive</span> <span class="o">=</span> <span class="n">maxExclusive</span><span class="o">;</span>
        <span class="k">this</span><span class="o">.</span><span class="na">adjuster</span> <span class="o">=</span> <span class="n">adjuster</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">private</span> <span class="kd">static</span> <span class="n">BinaryOperator</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">&gt;</span> <span class="nf">getIntegerBinaryOperator</span><span class="o">(</span><span class="kt">double</span> <span class="n">rate</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="o">(</span><span class="n">fare</span><span class="o">,</span> <span class="n">lineFare</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="o">(</span><span class="kt">int</span><span class="o">)</span> <span class="o">(((</span><span class="n">fare</span> <span class="o">+</span> <span class="n">lineFare</span><span class="o">)</span> <span class="o">-</span> <span class="mi">350</span><span class="o">)</span> <span class="o">*</span> <span class="n">rate</span><span class="o">);</span>
    <span class="o">}</span>
</code></pre></div></div>

<h4 id="ë¦¬ë·°ì–´ì—ê²Œ-ë°›ì€-í”¼ë“œë°±">ë¦¬ë·°ì–´ì—ê²Œ ë°›ì€ í”¼ë“œë°±</h4>

<p><img src="https://images.velog.io/images/new_wisdom/post/a9f5ac3d-548f-4f90-ad43-e3af67abc64a/image.png" style="zoom:50%;" /></p>

<ul>
  <li>ë¦¬ë·°ì–´ì˜ ì˜ë„ëŠ” Memberë¥¼ ë‚˜íƒ€ë‚´ëŠ” ë„ë©”ì¸ì—ì„œ ageë¥¼ nullableí•˜ê²Œ ë‘ê³  ì´ë¥¼ ì²˜ë¦¬í•˜ëŠ” ê²ƒì´ ë” ëª…í™•í•  ê²ƒ ê°™ë‹¤í•˜ì‹¬</li>
</ul>

<h3 id="ì•„ì‰¬ìš´-ì ">ì•„ì‰¬ìš´ ì </h3>

<h4 id="ë‚˜ì´ë³„-ìš”ê¸ˆì •ì±…ì„-ì ìš©í• -ë•Œ-member-ë„ë©”ì¸ì„-ì‚¬ìš©í•´ë³¼ê±¸">ë‚˜ì´ë³„ ìš”ê¸ˆì •ì±…ì„ ì ìš©í•  ë•Œ Member ë„ë©”ì¸ì„ ì‚¬ìš©í•´ë³¼ê±¸!</h4>

<p>í˜„ì¬ ê²½ë¡œ ì¡°íšŒë¥¼ í•  ë•ŒëŠ” member ë„ë©”ì¸ì´ ë„˜ì–´ì˜¤ì§€ ì•Šê³  age ê°’ë§Œ ë„˜ì–´ì˜¤ë„ë¡ êµ¬í˜„í–ˆì—ˆë‹¤.<br />
ê·¸ëŸ°ë° AgeëŠ” Memberì— ì¢…ì†ë˜ëŠ” í•„ë“œì¸ë° ì´ë¥¼ ë¹¼ì„œ ë…ë¦½ì ìœ¼ë¡œ ì²˜ë¦¬í•˜ê³  ìˆëŠ”ê²Œ ì§€ê¸ˆë³´ë‹ˆ ë§ˆìŒì— ë“¤ì§€ ì•ŠëŠ”ë‹¤.<br />
ë§Œì•½ Memberì˜ ë‹¤ë¥¸ í•„ë“œë“¤ë„ ìš”ê¸ˆì •ì±…ì— ì˜í–‰ì„ ì£¼ê²Œ ëœë‹¤ë©´ ìœ ì§€ë³´ìˆ˜ê°€ ì–´ë ¤ìš´ ì½”ë“œê°€ ëœë‹¤.<br />
í¬ë£¨ë“¤ì´ë‘ ì´ì•¼ê¸°ë¥¼ í•´ë³´ë‹ˆ í•œ ë¦¬ì¡¸ë²„ì—ì„œ Memberë¥¼ ë°˜í™˜í•´ì£¼ëŠ”ë°, ì´ ë°˜í™˜ ë„ë©”ì¸ì„ í•œ ì¸í„°í˜ì´ìŠ¤(ì˜ˆë¥¼ ë“¤ë©´ Member)ë¥¼ ë§Œë“¤ê³  ì´ë¥¼ êµ¬í˜„í•œ <code class="highlighter-rouge">Guest</code>, <code class="highlighter-rouge">LoginMember</code> ë¡œ ë¡œê·¸ì¸, ë¹„ë¡œê·¸ì¸ ì‚¬ìš©ìë¥¼ êµ¬ë³„í•˜ì—¬ ë¡œì§ì„ ìˆ˜í–‰í•˜ëŠ” ë°©ë²•ë„ ìˆë‹¤ê³  í•œë‹¤.</p>

<p>ì´ëŸ¬ë©´ ë¦¬ì¡¸ë²„ë¥¼ ë‚˜ëˆŒ í•„ìš”ë„ ì—†ê³  Memberê°€ ageë¥¼ ê°€ì§€ê³  ë‚˜ì´ì— ê´€í•œ ìš”ê¸ˆ ì •ì±…ì„ ìˆ˜í–‰í•  ë•Œ í•´ë‹¹ ë„ë©”ì¸ì—ê²Œ ë¬¼ì–´ì„œ ì²˜ë¦¬í•  ìˆ˜ ìˆì„ ê²ƒ ê°™ë‹¤.</p>

<h4 id="enumì—-predicateë¥¼-ê°€ì§-í• ê±¸">Enumì— Predicateë¥¼ ê°€ì§ í• ê±¸!</h4>

<p><img src="https://images.velog.io/images/new_wisdom/post/a53fbb31-926c-4123-813c-72f4d7fda9ca/image.png" style="zoom: 50%;" /></p>

<p>ë˜í•œ ê°ê° ìš”ê¸ˆ ì •ì±…ì„ Enumìœ¼ë¡œ êµ¬í˜„í•˜ì˜€ëŠ”ë°, ì—¬ê¸°ì„œ ìƒìˆ˜ë¥¼ ì“°ë‹ˆ ê°€ë…ì„±ì´ ë§¤ìš° ë–¨ì–´ì§€ëŠ” ëŠë‚Œì´ë‹¤.</p>

<p><img src="https://images.velog.io/images/new_wisdom/post/1d4bfdf8-ddba-44dc-83be-af5f15860ae8/image.png" style="zoom:33%;" /></p>

<p>ìƒìˆ˜ë¥¼ ì“´ ì´ìœ ëŠ” ìœ„ì˜ í”¼ë“œë°±ìœ¼ë¡œ ë§¤ì§ ë„˜ë²„ì— ì˜ë¯¸ë¥¼ ë¶€ì—¬í•˜ê³  ì‹¶ì—ˆìœ¼ë‚˜â€¦ <br />
ì´ë ‡ê²Œ í•˜ë‹ˆ ì˜¤íˆë ¤ ê°€ë…ì„±ì„ í—¤ì¹˜ëŠ” ëŠë‚Œì´ì—ˆê³  ë§ˆì§€ë§‰ ë¦¬ë·°ëŒ€ë¡œ Enum ì•ˆì— ë²”ìœ„ë¥¼ íŒë‹¨í•˜ëŠ” <code class="highlighter-rouge">Predicate</code> ë¥¼ ê°€ì§€ë„ë¡ í• ê±¸ ê·¸ë¬ë‹¤.</p>

<h2 id="í”„ë¡ íŠ¸ì—”ë“œì™€ì˜-í˜‘ì—…">í”„ë¡ íŠ¸ì—”ë“œì™€ì˜ í˜‘ì—…</h2>

<ul>
  <li>ë°±ì—”ë“œ 4, í”„ë¡ íŠ¸ì—”ë“œ 2ëª… ì •ë„ì”© íŒ€ì„ ì´ë£¨ì–´ í˜‘ì—…í•˜ëŠ” ë¯¸ì…˜ì´ì—ˆìŒ</li>
  <li><a href="https://www.notion.so/4b3b784386a246babcdef0bda179babb">í•´ë‹¹ ë¬¸ì„œ</a> ì— ìˆëŠ” í”„ë¡ íŠ¸ì—”ë“œ ìš”êµ¬ì‚¬í•­ì„ ë¼ˆëŒ€ì½”ë“œì— ë°˜ì˜í•´ ë‚˜ê°</li>
</ul>

<h2 id="api-ë¬¸ì„œí™”">API ë¬¸ì„œí™”</h2>

<ul>
  <li>Spring Rest Docsë¥¼ í†µí•´ API ë¬¸ì„œí™” ì‘ì—…ì„ ì§„í–‰</li>
  <li>ê¸°ì¡´ì— ìˆëŠ” RestAssured í…ŒìŠ¤íŠ¸ë¥¼ ì´ìš©í•´ APIë¥¼ ë§Œë“¤ìˆ˜ë„ ìˆëŠ”ë°, í˜ì–´ë‘ ê°™ì´ ì‹œë„í•˜ë‹¤ê°€ ê³„ì† ì˜¤ë¥˜ë‚˜ì„œâ€¦.</li>
  <li>ê²°êµ­ MockMvcë¡œ í…ŒìŠ¤íŠ¸ ì½”ë“œ ë‹¤ì‹œì§œì„œ API ë¬¸ì„œë¥¼ ë§Œë“¤ì—ˆìŒ</li>
  <li>ë‹¤ë¥¸ í¬ë£¨ê°€ RestAssuredë¡œ ë¬¸ì„œë¥¼ ë§Œë“¤ì—ˆë˜ë° ê·¸ê±° ë³´ê³  ì‹œë„í•´ë´ì•¼ì§€â€¦</li>
  <li>ë˜ ë¦¬ë·°ì–´ê°€ ì œì‹œí•œ ë°©í–¥ìœ¼ë¡œ API ë¬¸ì„œ ë§Œë“œëŠ” í…ŒìŠ¤íŠ¸ ì½”ë“œë¥¼ ì¡°ê¸ˆ ìˆ˜ì •í–ˆë”ë‹ˆ ë” ì¢‹ì€ ë¬¸ì„œë¥¼ ë§Œë“¤ ìˆ˜ ìˆì—ˆìŒ</li>
</ul>

<h4 id="controllertest">ControllerTest</h4>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@ActiveProfiles</span><span class="o">(</span><span class="s">"test"</span><span class="o">)</span>
<span class="nd">@AutoConfigureRestDocs</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">ControllerTest</span> <span class="o">{</span>
    <span class="nd">@Autowired</span>
    <span class="kd">public</span> <span class="n">MockMvc</span> <span class="n">mockMvc</span><span class="o">;</span>

    <span class="nd">@Autowired</span>
    <span class="kd">public</span> <span class="n">ObjectMapper</span> <span class="n">objectMapper</span><span class="o">;</span>

    <span class="kd">protected</span> <span class="kd">static</span> <span class="n">OperationRequestPreprocessor</span> <span class="nf">getDocumentRequest</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="nf">preprocessRequest</span><span class="o">(</span>
                <span class="n">modifyUris</span><span class="o">()</span>
                        <span class="o">.</span><span class="na">scheme</span><span class="o">(</span><span class="s">"https"</span><span class="o">)</span>
                        <span class="o">.</span><span class="na">host</span><span class="o">(</span><span class="s">"newwisdom-subway.p-e.kr"</span><span class="o">)</span>
                        <span class="o">.</span><span class="na">removePort</span><span class="o">(),</span>
                <span class="n">prettyPrint</span><span class="o">());</span>
    <span class="o">}</span>

    <span class="kd">protected</span> <span class="kd">static</span> <span class="n">OperationResponsePreprocessor</span> <span class="nf">getDocumentResponse</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="nf">preprocessResponse</span><span class="o">(</span><span class="n">prettyPrint</span><span class="o">());</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<ul>
  <li>API ë¬¸ì„œ ë§Œë“œëŠ”ë° í•„ìš”í•œ MockMvc í…ŒìŠ¤íŠ¸ë“¤ì€ ìœ„ í´ë˜ìŠ¤ë¥¼ ìƒì†ë°›ê³  ìˆìŒ</li>
  <li>ë¦¬ë·°ì–´ì˜ ì œì•ˆì„ í†µí•´ <code class="highlighter-rouge">getDocumentRequest()</code>ì™€ <code class="highlighter-rouge">getDocumentResponse()</code> ì„ ì¶”ê°€</li>
</ul>

<p><img src="https://images.velog.io/images/new_wisdom/post/d4396804-6e9e-4046-a749-99c2cbe085db/image.png" style="zoom: 50%;" /></p>

<p><img src="https://images.velog.io/images/new_wisdom/post/edaba672-3c4a-481f-984e-e08fa2ba6f20/image.png" style="zoom:50%;" /></p>

<h2 id="í…ŒìŠ¤íŠ¸-ì½”ë“œì˜-ê°€ë…ì„±">í…ŒìŠ¤íŠ¸ ì½”ë“œì˜ ê°€ë…ì„±</h2>

<p><img src="https://images.velog.io/images/new_wisdom/post/ab0ebe3f-3560-4b80-a470-781c1731354f/image.png" style="zoom:50%;" /></p>

<p><img src="https://images.velog.io/images/new_wisdom/post/24757641-e6c6-4a74-b84a-7a014edfc99c/image.png" style="zoom:50%;" /></p>

<ul>
  <li>ì´ë²ˆ ë¦¬ë·°ì–´ê°€ í…ŒìŠ¤íŠ¸ ì½”ë“œì—ì„œ ê°€ë…ì„±ì„ ì§€í‚¤ì§€ ëª»í•œ ë¶€ë¶„ë“¤ì„ ë§ì´ í”¼ë“œë°± í•´ì£¼ì—ˆìŒ</li>
  <li>í…ŒìŠ¤íŠ¸ ì½”ë“œë„ í•˜ë‚˜ì˜ ë¬¸ì„œì´ë©° ìœ ì§€ë³´ìˆ˜ ëŒ€ìƒì´ê¸° ë•Œë¬¸ì— ê°€ë…ì„±ì„ ê³ ë ¤í•´ì•¼ í•œë‹¤ëŠ” ê²ƒì„ ëŠê¼ˆìŒ</li>
  <li>ì„œë¡œ ë‹¤ë¥¸ í…ŒìŠ¤íŠ¸ì—ì„œ ê³µí†µìœ¼ë¡œ ì“°ì´ëŠ” ë©”ì„œë“œë“¤ì€ ìƒìœ„ í´ë˜ìŠ¤ì¸ AcceptanceTestë¡œ ëŒì–´ ì˜¬ë¦¼</li>
  <li>í…ŒìŠ¤íŠ¸ì— ì“°ì´ëŠ” ë³€ìˆ˜ëª…ë“¤ë„ ë§¥ë½ì„ íŒŒì•…í•˜ê¸° ì‰½ë„ë¡ ë³€ê²½</li>
  <li>ìƒìˆ˜ì²˜ë¦¬ë„ ì‹ ê²½ì”€</li>
</ul>

<h2 id="ì˜ˆì™¸-ì²˜ë¦¬">ì˜ˆì™¸ ì²˜ë¦¬</h2>

<p><img src="https://images.velog.io/images/new_wisdom/post/2518ddc4-c4ce-4a7a-8ee1-49becedb7936/image.png" style="zoom: 50%;" /></p>

<ul>
  <li>â€œì¼ë‹¨ í”„ë¡ íŠ¸ì˜ ìš”êµ¬ì‚¬í•­ ë‹¤ ë°˜ì˜í•˜ë„ë¡ êµ¬í˜„í•´ë³´ì!â€ë¡œ ì¡ê³  í–ˆë”ë‹ˆ ë¬´ìˆ˜í•œ ì»¤ìŠ¤í…€ ì˜ˆì™¸ê°€ ë§Œë“¤ì–´ì¡Œë‹¤â€¦^ã… ^</li>
  <li>ì´ë¥¼ ê°œì„ í•  ë°©ë²•ì„ ì°¾ë‹¤ê°€â€¦ í¬ë£¨ë“¤í•œí…Œ ë“¤ì€ <a href="https://cheese10yun.github.io/spring-guide-exception/">Spring Guide - Exception ì „ëµ</a> ì„ ì ìš©í•´ë³´ê¸°ë¡œ~</li>
  <li>RuntimeExceptionì„ ìƒì†ë°›ëŠ” BuisnessExceptionì„ ë§Œë“¤ê³  í•„ë“œì— ìƒíƒœì½”ë“œì™€ ErrorMessage(DTO)ë¥¼ ê°€ì§€ë„ë¡ êµ¬í˜„</li>
  <li>ì´ë¥¼ ìƒì†í•˜ëŠ” ìƒíƒœì½”ë“œ 400ì¸ BusinessExceptionê³¼ ìƒíƒœì½”ë“œ 401ì¸ AuthorizationExceptionì„ ë§Œë“¦</li>
  <li>ë˜ ì´ë¥¼ ìƒì†ë°›ëŠ” ê°ê°ì˜ í´ë¼ì´ì–¸íŠ¸ì˜ ìš”êµ¬ì‚¬í•­ì— ë§ëŠ” ì»¤ìŠ¤í…€ ì˜ˆì™¸ ë§Œë“¦</li>
  <li>
    <p>ControllerAdviceì—ì„œëŠ” ë‹¤ìŒê³¼ ê°™ì´ BuisnessExceptionì„ ì¡ê³  ì´ ì˜ˆì™¸ì—ì„œ ìƒíƒœì½”ë“œì™€ ì˜ˆì™¸ ë©”ì‹œì§€ë¥¼ êº¼ë‚´ë„ë¡ êµ¬í˜„</p>
  </li>
  <li>ì´ë ‡ê²Œ ë˜ë©´ ì–´ë“œë°”ì´ìŠ¤ì—ì„œ ìˆ˜ë§ì€ ì»¤ìŠ¤í…€ ì˜ˆì™¸ë“¤ì„ BuisnessException í•˜ë‚˜ë§Œ ì¡ê³  ì²˜ë¦¬í•  ìˆ˜ ìˆìŒ</li>
  <li>ìƒíƒœì½”ë“œì— ë”°ë¥¸ í´ë˜ìŠ¤ë¥¼ ë‘ì–´ ì´ê°€ ë³€ê²½ë˜ì–´ë„ ìœ ì§€ë³´ìˆ˜ê°€ ì‰¬ì›€</li>
</ul>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@ExceptionHandler</span><span class="o">(</span><span class="n">BusinessException</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>
<span class="kd">public</span> <span class="n">ResponseEntity</span><span class="o">&lt;</span><span class="n">ErrorMessage</span><span class="o">&gt;</span> <span class="nf">handleRuntimeException</span><span class="o">(</span><span class="n">BusinessException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>

  <span class="k">return</span> <span class="n">ResponseEntity</span><span class="o">.</span><span class="na">status</span><span class="o">(</span><span class="n">e</span><span class="o">.</span><span class="na">getHttpStatus</span><span class="o">()).</span><span class="na">body</span><span class="o">(</span><span class="n">e</span><span class="o">.</span><span class="na">getErrorMessage</span><span class="o">());</span>
<span class="o">}</span>
</code></pre></div></div>

<h4 id="businessexception">BusinessException</h4>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">BusinessException</span> <span class="kd">extends</span> <span class="n">RuntimeException</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="n">HttpStatus</span> <span class="n">httpStatus</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="n">ErrorMessage</span> <span class="n">errorMessage</span><span class="o">;</span>

    <span class="kd">public</span> <span class="nf">BusinessException</span><span class="o">(</span><span class="n">HttpStatus</span> <span class="n">httpStatus</span><span class="o">,</span> <span class="n">String</span> <span class="n">errorMessage</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">(</span><span class="n">httpStatus</span><span class="o">,</span> <span class="k">new</span> <span class="n">ErrorMessage</span><span class="o">(</span><span class="n">errorMessage</span><span class="o">));</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="nf">BusinessException</span><span class="o">(</span><span class="n">HttpStatus</span> <span class="n">httpStatus</span><span class="o">,</span> <span class="n">ErrorMessage</span> <span class="n">errorMessage</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">httpStatus</span> <span class="o">=</span> <span class="n">httpStatus</span><span class="o">;</span>
        <span class="k">this</span><span class="o">.</span><span class="na">errorMessage</span> <span class="o">=</span> <span class="n">errorMessage</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="n">HttpStatus</span> <span class="nf">getHttpStatus</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">httpStatus</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="n">ErrorMessage</span> <span class="nf">getErrorMessage</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">errorMessage</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<h4 id="authorizationexception">AuthorizationException</h4>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">AuthorizationException</span> <span class="kd">extends</span> <span class="n">BusinessException</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="nf">AuthorizationException</span><span class="o">(</span><span class="n">String</span> <span class="n">message</span><span class="o">)</span> <span class="o">{</span>
        <span class="kd">super</span><span class="o">(</span><span class="n">HttpStatus</span><span class="o">.</span><span class="na">UNAUTHORIZED</span><span class="o">,</span> <span class="n">message</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<ul>
  <li>BusinessExceptionì„ ìƒì†</li>
  <li>401 ìƒíƒœì½”ë“œ</li>
</ul>

<h4 id="badrequestexception">BadRequestException</h4>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">BadRequestException</span> <span class="kd">extends</span> <span class="n">BusinessException</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="nf">BadRequestException</span><span class="o">(</span><span class="n">String</span> <span class="n">message</span><span class="o">)</span> <span class="o">{</span>
        <span class="kd">super</span><span class="o">(</span><span class="n">HttpStatus</span><span class="o">.</span><span class="na">BAD_REQUEST</span><span class="o">,</span> <span class="n">message</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<ul>
  <li>BusinessExceptionì„ ìƒì†</li>
  <li>400 ìƒíƒœì½”ë“œ</li>
</ul>

<h2 id="ë°°í¬-ìŠ¤í¬ë¦½íŠ¸">ë°°í¬ ìŠ¤í¬ë¦½íŠ¸</h2>

<ul>
  <li>ì‹¤ì œ API ì‚¬ìš©ì´ ê°€ëŠ¥í•˜ë„ë¡ EC2ì— ë°°í¬í•˜ì—¬ì•¼ í–ˆìŒ</li>
  <li>í”„ë¡œì íŠ¸ê°€ ì—…ë°ì´íŠ¸ë˜ë©´ í”„ë¡œì„¸ìŠ¤ë¥¼ ì¬ì‹œë™í•´ì•¼í–ˆìŒ</li>
  <li>ì´ëŸ¬ë©´ ì—¬ëŸ¬ê°€ì§€ ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•´ì•¼ í•¨â€¦.</li>
  <li>ì´ë¥¼ ìŠ¤í¬ë¦½íŠ¸ë¡œ ë§Œë“¤ì–´ í•œë²ˆì— ì²˜ë¦¬í•˜ë„ë¡ êµ¬í˜„!</li>
</ul>

<h4 id="deploy-prodsh">deploy-prod.sh</h4>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">#!/bin/bash</span>
<span class="c">#!/bin/bash in the top of your scripts then you are telling your system to use bash as a default shell.</span>

<span class="nv">REPOSITORY</span><span class="o">=</span>/home/ubuntu/ <span class="c"># ê²½ë¡œ ì„¤ì •</span>
<span class="nv">PROJECT_NAME</span><span class="o">=</span>atdd-subway-fare

<span class="nb">cd</span> <span class="nv">$REPOSITORY</span>/<span class="nv">$PROJECT_NAME</span>/ <span class="c"># ê²½ë¡œë¡œ ì ‘ê·¼</span>

<span class="nb">echo</span> <span class="s2">"&gt; git reset --hard"</span> 

git reset <span class="nt">--hard</span> <span class="c"># ê¹ƒí—ˆë¸Œ ì´ˆê¸°í™”</span>

<span class="nb">echo</span> <span class="s2">"&gt; git pull origin step1"</span>

git pull origin step1 <span class="c"># pull ë•¡ê²¨ì˜¤ê¸°</span>

<span class="nb">echo</span> <span class="s2">"&gt; í”„ë¡œì íŠ¸ Build ì‹œì‘"</span>

./gradlew clean build <span class="c"># ë¹Œë“œ</span>

<span class="nb">echo</span> <span class="s2">"&gt; Build íŒŒì¼ ê²½ë¡œ ë³µì‚¬"</span>

<span class="nv">JAR_LOCATION</span><span class="o">=</span><span class="k">$(</span>find ./<span class="k">*</span> <span class="nt">-name</span> <span class="s2">"*jar"</span> | <span class="nb">grep </span>atdd-subway-fare<span class="k">)</span>

<span class="nb">echo</span> <span class="s2">"&gt; í˜„ì¬ êµ¬ë™ì¤‘ì¸ ì• í”Œë¦¬ì¼€ì´ì…˜ pid í™•ì¸"</span>

<span class="nv">CURRENT_PID</span><span class="o">=</span><span class="k">$(</span>pgrep <span class="nt">-f</span> <span class="k">${</span><span class="nv">PROJECT_NAME</span><span class="k">}</span><span class="o">[</span><span class="nt">-A-z0-9</span>.]<span class="k">*</span>.jar<span class="nv">$)</span> <span class="c"># ì‹¤í–‰ì‹œì¼œì ¸ìˆëŠ” jar pid ë°›ê¸° </span>


<span class="k">if</span> <span class="o">[</span> <span class="nt">-z</span> <span class="s2">"</span><span class="nv">$CURRENT_PID</span><span class="s2">"</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span> <span class="c"># -z í”Œë˜ê·¸ëŠ” nullì¸ê²ƒì„ ì²´í¬í•¨, PIDê°€ nullì¸ ê²½ìš° ifì ˆ ì•ˆìœ¼ë¡œ ë“¤ì–´ê°</span>
    <span class="nb">echo</span> <span class="s2">"&gt; í˜„ì¬ êµ¬ë™ ì¤‘ì¸ ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ì—†ìœ¼ë¯€ë¡œ ì¢…ë£Œí•˜ì§€ ì•ŠìŠµë‹ˆë‹¤."</span>
<span class="k">else
    </span><span class="nb">echo</span> <span class="s2">"&gt; í˜„ì¬ êµ¬ë™ì¤‘ì¸ ì• í”Œë¦¬ì¼€ì´ì…˜ ì¢…ë£Œ(pid : </span><span class="nv">$CURRENT_PID</span><span class="s2">)"</span>
    <span class="nb">echo</span> <span class="s2">"&gt; kill -15 </span><span class="nv">$CURRENT_PID</span><span class="s2">"</span>
    <span class="nb">kill</span> <span class="nt">-15</span> <span class="nv">$CURRENT_PID</span>
    sleep 5
<span class="k">fi

</span><span class="nb">echo</span> <span class="s2">"&gt; ìƒˆ ì• í”Œë¦¬ì¼€ì´ì…˜ ë°°í¬"</span>
<span class="nb">echo</span> <span class="s2">"&gt; JAR Location: </span><span class="nv">$JAR_LOCATION</span><span class="s2">"</span> í•´ë‹¹ jaríŒŒì¼ ì‹¤í–‰

<span class="c">#nohup java -jar ì‹¤í–‰</span>
nohup java <span class="nt">-jar</span> <span class="nt">-Dspring</span>.profiles.active<span class="o">=</span>prod <span class="k">${</span><span class="nv">JAR_LOCATION</span><span class="k">}</span> 1&gt; log-prod.md 2&gt;&amp;1  &amp;
</code></pre></div></div>


	  ]]></description>
	</item>

	<item>
	  <title>ğŸ“š atdd-subway-path ë¯¸ì…˜ ì •ë¦¬</title>
	  <link>//atdd-subway-path-note</link>
	  <author></author>
	  <pubDate>2021-06-11T10:01:00+09:00</pubDate>
	  <guid>//atdd-subway-path-note</guid>
	  <description><![CDATA[
	     <h2 id="step1-2">STEP1, 2</h2>

<h3 id="jwttokenprovider">JwtTokenProvider</h3>

<ul>
  <li>jwt í† í° ìƒì„±, í† í° ê²€ì¦, í† í°ì—ì„œ ì¸ì¦ ì •ë³´ ì¶”ì¶œí•˜ëŠ” ìœ í‹¸ í´ë˜ìŠ¤</li>
</ul>

<h3 id="authorizationextractor">AuthorizationExtractor</h3>

<ul>
  <li>HTTPì˜ <code class="highlighter-rouge">Authorization</code> Headerì—ì„œ Bearer íƒ€ì…ì¸ ê²½ìš° Access Tokenì„ ì¶”ì¶œí•˜ëŠ” ìœ í‹¸ í´ë˜ìŠ¤</li>
</ul>

<h3 id="authenticationprincipalconfig">AuthenticationPrincipalConfig</h3>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Configuration</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">AuthenticationPrincipalConfig</span> <span class="kd">implements</span> <span class="n">WebMvcConfigurer</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="n">AuthService</span> <span class="n">authService</span><span class="o">;</span>

    <span class="kd">public</span> <span class="nf">AuthenticationPrincipalConfig</span><span class="o">(</span><span class="n">AuthService</span> <span class="n">authService</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">authService</span> <span class="o">=</span> <span class="n">authService</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">addArgumentResolvers</span><span class="o">(</span><span class="n">List</span> <span class="n">argumentResolvers</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">argumentResolvers</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">createAuthenticationPrincipalArgumentResolver</span><span class="o">());</span>
    <span class="o">}</span>

    <span class="nd">@Bean</span>
    <span class="kd">public</span> <span class="n">AuthenticationPrincipalArgumentResolver</span> <span class="nf">createAuthenticationPrincipalArgumentResolver</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="k">new</span> <span class="nf">AuthenticationPrincipalArgumentResolver</span><span class="o">(</span><span class="n">authService</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<ul>
  <li>AuthenticationPrincipalArgumentResolverëŠ” ë¹ˆ ë“±ë¡ì´ ë˜ì–´ìˆì§€ ì•ŠìŒ</li>
  <li>í•´ë‹¹ ë¦¬ì¡¸ë²„ë¥¼ í™œìš©í•  ìˆ˜ ìˆë„ë¡ ë“±ë¡í•´ì£¼ëŠ” java config</li>
  <li><code class="highlighter-rouge">AuthenticationPrincipalArgumentResolver</code>ë¥¼ ë§Œë“¤ê³  ë“±ë¡</li>
</ul>

<h3 id="authenticationprincipalargumentresolver">AuthenticationPrincipalArgumentResolver</h3>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">AuthenticationPrincipalArgumentResolver</span> <span class="kd">implements</span> <span class="n">HandlerMethodArgumentResolver</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="n">AuthService</span> <span class="n">authService</span><span class="o">;</span>

    <span class="kd">public</span> <span class="nf">AuthenticationPrincipalArgumentResolver</span><span class="o">(</span><span class="n">AuthService</span> <span class="n">authService</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">authService</span> <span class="o">=</span> <span class="n">authService</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="c1">// resolveArgument ë©”ì„œë“œê°€ ë™ì‘í•˜ëŠ” ì¡°ê±´ì„ ì •ì˜í•˜ëŠ” ë©”ì„œë“œ</span>
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">supportsParameter</span><span class="o">(</span><span class="n">MethodParameter</span> <span class="n">parameter</span><span class="o">)</span> <span class="o">{</span>
        <span class="c1">// íŒŒë¼ë¯¸í„° ì¤‘ @AuthenticationPrincipalì´ ë¶™ì€ ê²½ìš° ë™ì‘í•˜ê²Œ ì„¤ì •</span>
        <span class="k">return</span> <span class="n">parameter</span><span class="o">.</span><span class="na">hasParameterAnnotation</span><span class="o">(</span><span class="n">AuthenticationPrincipal</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="c1">// supportsParameterê°€ trueì¸ ê²½ìš° ë™ì‘</span>
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="n">Member</span> <span class="nf">resolveArgument</span><span class="o">(</span><span class="n">MethodParameter</span> <span class="n">parameter</span><span class="o">,</span> <span class="n">ModelAndViewContainer</span> <span class="n">mavContainer</span><span class="o">,</span> <span class="n">NativeWebRequest</span> <span class="n">webRequest</span><span class="o">,</span> <span class="n">WebDataBinderFactory</span> <span class="n">binderFactory</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">String</span> <span class="n">token</span> <span class="o">=</span> <span class="n">AuthorizationExtractor</span><span class="o">.</span><span class="na">extract</span><span class="o">((</span><span class="n">HttpServletRequest</span><span class="o">)</span> <span class="n">webRequest</span><span class="o">.</span><span class="na">getNativeRequest</span><span class="o">());</span>
        <span class="k">return</span> <span class="n">authService</span><span class="o">.</span><span class="na">findMemberByToken</span><span class="o">(</span><span class="n">token</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<ul>
  <li>
    <p>ì»¨íŠ¸ë¡¤ëŸ¬ ë©”ì„œë“œì—ì„œ íŠ¹ì • ì¡°ê±´ì— ë§ëŠ” íŒŒë¼ë¯¸í„°ê°€ ìˆì„ ë•Œ ì›í•˜ëŠ” ê°’ì„ ë°”ì¸ë”©í•´ì£¼ëŠ” ì¸í„°í˜ì´ìŠ¤</p>
  </li>
  <li>
    <p><code class="highlighter-rouge">resolveArgument</code> ì—ì„œ <code class="highlighter-rouge">Member</code> ë„ë©”ì¸ ìì²´ë¥¼ ë°˜í™˜í–ˆì—ˆìŒ</p>
  </li>
</ul>

<h4 id="ê´€ë ¨-ì •ë¦¬">ê´€ë ¨ ì •ë¦¬</h4>

<ul>
  <li><a href="https://github.com/NewWisdom/TIL/issues/13">Spring MVC Config í•™ìŠµ í…ŒìŠ¤íŠ¸</a></li>
</ul>

<h3 id="authinterceptor">AuthInterceptor</h3>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Component</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">AuthInterceptor</span> <span class="kd">implements</span> <span class="n">HandlerInterceptor</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="n">AuthService</span> <span class="n">authService</span><span class="o">;</span>

    <span class="kd">public</span> <span class="nf">AuthInterceptor</span><span class="o">(</span><span class="n">AuthService</span> <span class="n">authService</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">authService</span> <span class="o">=</span> <span class="n">authService</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">preHandle</span><span class="o">(</span><span class="n">HttpServletRequest</span> <span class="n">request</span><span class="o">,</span> <span class="n">HttpServletResponse</span> <span class="n">response</span><span class="o">,</span> <span class="n">Object</span> <span class="n">handler</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">Exception</span> <span class="o">{</span>
        <span class="n">String</span> <span class="n">token</span> <span class="o">=</span> <span class="n">AuthorizationExtractor</span><span class="o">.</span><span class="na">extract</span><span class="o">(</span><span class="n">request</span><span class="o">);</span>
        <span class="n">authService</span><span class="o">.</span><span class="na">validateToken</span><span class="o">(</span><span class="n">token</span><span class="o">);</span>
        <span class="k">return</span> <span class="kc">true</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<ul>
  <li>
    <p>ì¸ì¦ / ì¸ê°€ì— ëŒ€í•œ í† í° ê²€ì¦ì„ ë‹´ë‹¹</p>
  </li>
  <li>
    <p>í† í°ì´ ìœ íš¨í•˜ë©´ trueë¥¼ ë°˜í™˜í•˜ë„ë¡</p>
  </li>
  <li>
    <p><code class="highlighter-rouge">AuthorizationExtractor.extract()</code> ê°€ ë¦¬ì¡¸ë²„ë‘ ì¤‘ë³µì´ ë˜ëŠ”ë°?</p>

    <ul>
      <li>ì–´ì©” ìˆ˜ ì—†ìŒ. ì´ ë‘˜ì€ ì„œë¡œ ëª¨ë¥´ëŠ” ê´€ê³„ë¡œ ë…ë¦½ì ì´ë‹ˆ</li>
      <li>ë³€ê²½ì˜ ì˜í–¥ë„ ìµœì†Œí™”ë¥¼ ìœ„í•´ JwtProviderê°€ ì•„ë‹Œ JwtProviderë¥¼ í¬í•¨í•œ AuthServiceë¥¼ ê°€ì§€ë„ë¡</li>
    </ul>
  </li>
</ul>

<h2 id="step3">STEP3</h2>

<h4 id="graph---ê·¸ë˜í”„-ì—­í• ì„-í•˜ëŠ”-ë„ë©”ì¸">Graph - ê·¸ë˜í”„ ì—­í• ì„ í•˜ëŠ” ë„ë©”ì¸</h4>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Graph</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="n">WeightedMultigraph</span><span class="o">&lt;</span><span class="n">Station</span><span class="o">,</span> <span class="n">DefaultWeightedEdge</span><span class="o">&gt;</span> <span class="n">graph</span> <span class="o">=</span> <span class="k">new</span> <span class="n">WeightedMultigraph</span><span class="o">(</span><span class="n">DefaultWeightedEdge</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>

    <span class="kd">public</span> <span class="nf">Graph</span><span class="o">(</span><span class="n">List</span><span class="o">&lt;</span><span class="n">Section</span><span class="o">&gt;</span> <span class="n">sections</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">initPath</span><span class="o">(</span><span class="n">sections</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="kd">private</span> <span class="kt">void</span> <span class="nf">initPath</span><span class="o">(</span><span class="n">List</span><span class="o">&lt;</span><span class="n">Section</span><span class="o">&gt;</span> <span class="n">sections</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">for</span> <span class="o">(</span><span class="n">Section</span> <span class="n">section</span> <span class="o">:</span> <span class="n">sections</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">initEdge</span><span class="o">(</span><span class="n">section</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>

    <span class="kd">private</span> <span class="kt">void</span> <span class="nf">initEdge</span><span class="o">(</span><span class="n">Section</span> <span class="n">section</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">addVertex</span><span class="o">(</span><span class="n">section</span><span class="o">.</span><span class="na">getUpStation</span><span class="o">());</span>
        <span class="n">addVertex</span><span class="o">(</span><span class="n">section</span><span class="o">.</span><span class="na">getDownStation</span><span class="o">());</span>
        <span class="n">graph</span><span class="o">.</span><span class="na">setEdgeWeight</span><span class="o">(</span><span class="n">graph</span><span class="o">.</span><span class="na">addEdge</span><span class="o">(</span><span class="n">section</span><span class="o">.</span><span class="na">getUpStation</span><span class="o">(),</span> <span class="n">section</span><span class="o">.</span><span class="na">getDownStation</span><span class="o">()),</span> <span class="n">section</span><span class="o">.</span><span class="na">getDistance</span><span class="o">());</span>
    <span class="o">}</span>

    <span class="kd">private</span> <span class="kt">void</span> <span class="nf">addVertex</span><span class="o">(</span><span class="n">Station</span> <span class="n">station</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">if</span> <span class="o">(!</span><span class="n">graph</span><span class="o">.</span><span class="na">containsVertex</span><span class="o">(</span><span class="n">station</span><span class="o">))</span> <span class="o">{</span>
            <span class="n">graph</span><span class="o">.</span><span class="na">addVertex</span><span class="o">(</span><span class="n">station</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="n">Path</span> <span class="nf">shortestPath</span><span class="o">(</span><span class="n">Station</span> <span class="n">source</span><span class="o">,</span> <span class="n">Station</span> <span class="n">target</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">DijkstraShortestPath</span><span class="o">&lt;</span><span class="n">Station</span><span class="o">,</span> <span class="n">DefaultWeightedEdge</span><span class="o">&gt;</span> <span class="n">dijkstraShortestPath</span> <span class="o">=</span> <span class="k">new</span> <span class="n">DijkstraShortestPath</span><span class="o">&lt;&gt;(</span><span class="n">graph</span><span class="o">);</span>
        <span class="k">return</span> <span class="k">new</span> <span class="nf">Path</span><span class="o">(</span><span class="n">dijkstraShortestPath</span><span class="o">.</span><span class="na">getPath</span><span class="o">(</span><span class="n">source</span><span class="o">,</span> <span class="n">target</span><span class="o">).</span><span class="na">getVertexList</span><span class="o">(),</span> <span class="n">dijkstraShortestPath</span><span class="o">.</span><span class="na">getPathWeight</span><span class="o">(</span><span class="n">source</span><span class="o">,</span> <span class="n">target</span><span class="o">));</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<h4 id="path---ì‚¬ì‹¤ìƒ-dto-ëŠë‚Œ">Path - ì‚¬ì‹¤ìƒ DTO ëŠë‚Œâ€¦</h4>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Path</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">Station</span><span class="o">&gt;</span> <span class="n">stations</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="kt">double</span> <span class="n">distance</span><span class="o">;</span>

    <span class="kd">public</span> <span class="nf">Path</span><span class="o">(</span><span class="n">List</span><span class="o">&lt;</span><span class="n">Station</span><span class="o">&gt;</span> <span class="n">stations</span><span class="o">,</span> <span class="kt">double</span> <span class="n">distance</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">stations</span> <span class="o">=</span> <span class="n">stations</span><span class="o">;</span>
        <span class="k">this</span><span class="o">.</span><span class="na">distance</span> <span class="o">=</span> <span class="n">distance</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">Station</span><span class="o">&gt;</span> <span class="nf">stations</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">stations</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kt">double</span> <span class="nf">distance</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">distance</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<h4 id="ì²˜ìŒ-êµ¬í˜„í•œ-ë¡œì§---ëª¨ë“ -lineì„-ë¶ˆëŸ¬ì™€-ìµœë‹¨-ê±°ë¦¬-ì¡°íšŒ">ì²˜ìŒ êµ¬í˜„í•œ ë¡œì§ - ëª¨ë“  Lineì„ ë¶ˆëŸ¬ì™€ ìµœë‹¨ ê±°ë¦¬ ì¡°íšŒ</h4>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="n">PathResponse</span> <span class="nf">findPath</span><span class="o">(</span><span class="n">Long</span> <span class="n">sourceId</span><span class="o">,</span> <span class="n">Long</span> <span class="n">targetId</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">List</span><span class="o">&lt;</span><span class="n">Line</span><span class="o">&gt;</span> <span class="n">lines</span> <span class="o">=</span> <span class="n">lineDao</span><span class="o">.</span><span class="na">findAll</span><span class="o">();</span>
        <span class="n">Graph</span> <span class="n">graph</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Graph</span><span class="o">(</span><span class="n">lines</span><span class="o">);</span>
        <span class="n">Path</span> <span class="n">path</span> <span class="o">=</span> <span class="n">graph</span><span class="o">.</span><span class="na">shortestPath</span><span class="o">(</span><span class="n">stationDao</span><span class="o">.</span><span class="na">findById</span><span class="o">(</span><span class="n">sourceId</span><span class="o">),</span> <span class="n">stationDao</span><span class="o">.</span><span class="na">findById</span><span class="o">(</span><span class="n">targetId</span><span class="o">));</span>
        <span class="k">return</span> <span class="k">new</span> <span class="nf">PathResponse</span><span class="o">(</span><span class="n">StationResponse</span><span class="o">.</span><span class="na">listOf</span><span class="o">(</span><span class="n">path</span><span class="o">.</span><span class="na">stations</span><span class="o">()),</span> <span class="o">(</span><span class="kt">int</span><span class="o">)</span> <span class="n">path</span><span class="o">.</span><span class="na">distance</span><span class="o">());</span>
    <span class="o">}</span>
</code></pre></div></div>

<p><img src="https://images.velog.io/images/new_wisdom/post/452f11f4-a8e7-4365-a71c-9c2be5f6435a/image.png" style="zoom:50%;" /></p>

<ul>
  <li>ì‚¬ì‹¤ ì²˜ìŒì—ëŠ” sectionsë§Œ ê°€ì ¸ì™€ì„œ ê·¸ë˜í”„ë¥¼ ê·¸ë ¸ìœ¼ë‚˜, ì´ë ‡ê²Œ ë˜ë©´ í•´ë‹¹ ì—­ì˜ ì´ë¦„ë“¤ì„ ê°€ì ¸ì˜¬ ìˆ˜ ì—†ì—ˆìŒ</li>
  <li>ê¸°ì¡´ ì½”ë“œë¥¼ ì‚¬ìš©í•˜ë ¤ê³  ì¼ë‹¨ LineDaoë¥¼ ì´ìš©í–ˆì—ˆëŠ”ë°, ì¬ì—°ë§ì˜ ë¦¬ë·°ëŒ€ë¡œ ëª¨ë“  Lineì„ ì¡°íšŒí•˜ê¸° ë³´ë‹¤ í•„ìš”í•œ Sectionsë§Œ ì¡°íšŒí•˜ë„ë¡ ë¦¬íŒ©í† ë§</li>
</ul>

<p><img src="https://images.velog.io/images/new_wisdom/post/88d775c4-942a-4437-8f62-a7b0215a96a1/image.png" style="zoom:50%;" /></p>

<ul>
  <li>ì´ ë¶€ë¶„ì€ DMìœ¼ë¡œ ì´ì•¼ê¸°ë¥¼ ë‚˜ëˆ´ëŠ”ë°,</li>
</ul>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Service</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">PathService</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="n">SectionDao</span> <span class="n">sectionDao</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="n">StationDao</span> <span class="n">stationDao</span><span class="o">;</span>

    <span class="kd">public</span> <span class="nf">PathService</span><span class="o">(</span><span class="n">SectionDao</span> <span class="n">sectionDao</span><span class="o">,</span> <span class="n">StationDao</span> <span class="n">stationDao</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">sectionDao</span> <span class="o">=</span> <span class="n">sectionDao</span><span class="o">;</span>
        <span class="k">this</span><span class="o">.</span><span class="na">stationDao</span> <span class="o">=</span> <span class="n">stationDao</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="n">PathResponse</span> <span class="nf">findPath</span><span class="o">(</span><span class="n">Long</span> <span class="n">sourceId</span><span class="o">,</span> <span class="n">Long</span> <span class="n">targetId</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">List</span><span class="o">&lt;</span><span class="n">Section</span><span class="o">&gt;</span> <span class="n">sections</span> <span class="o">=</span> <span class="n">sectionDao</span><span class="o">.</span><span class="na">findByStationIds</span><span class="o">(</span><span class="n">Arrays</span><span class="o">.</span><span class="na">asList</span><span class="o">(</span><span class="n">sourceId</span><span class="o">,</span> <span class="n">targetId</span><span class="o">));</span>
        <span class="n">Graph</span> <span class="n">graph</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Graph</span><span class="o">(</span><span class="n">sections</span><span class="o">);</span>
        <span class="n">Path</span> <span class="n">path</span> <span class="o">=</span> <span class="n">graph</span><span class="o">.</span><span class="na">shortestPath</span><span class="o">(</span><span class="k">new</span> <span class="n">Station</span><span class="o">(</span><span class="n">sourceId</span><span class="o">),</span> <span class="k">new</span> <span class="n">Station</span><span class="o">(</span><span class="n">targetId</span><span class="o">));</span>
        <span class="k">return</span> <span class="k">new</span> <span class="nf">PathResponse</span><span class="o">(</span><span class="n">StationResponse</span><span class="o">.</span><span class="na">listOf</span><span class="o">(</span><span class="n">combineStationById</span><span class="o">(</span><span class="n">path</span><span class="o">)),</span> <span class="o">(</span><span class="kt">int</span><span class="o">)</span> <span class="n">path</span><span class="o">.</span><span class="na">distance</span><span class="o">());</span>
    <span class="o">}</span>

    <span class="kd">private</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">Station</span><span class="o">&gt;</span> <span class="nf">combineStationById</span><span class="o">(</span><span class="n">Path</span> <span class="n">path</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">List</span><span class="o">&lt;</span><span class="n">Long</span><span class="o">&gt;</span> <span class="n">stationIds</span> <span class="o">=</span> <span class="n">path</span><span class="o">.</span><span class="na">stations</span><span class="o">()</span>
                <span class="o">.</span><span class="na">stream</span><span class="o">()</span>
                <span class="o">.</span><span class="na">map</span><span class="o">(</span><span class="nl">Station:</span><span class="o">:</span><span class="n">getId</span><span class="o">)</span>
                <span class="o">.</span><span class="na">collect</span><span class="o">(</span><span class="n">Collectors</span><span class="o">.</span><span class="na">toList</span><span class="o">());</span>
        <span class="k">return</span> <span class="n">stationDao</span><span class="o">.</span><span class="na">findByIds</span><span class="o">(</span><span class="n">stationIds</span><span class="o">).</span><span class="na">sortedStation</span><span class="o">(</span><span class="n">stationIds</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<h2 id="cors-ì´ìŠˆ-í•´ê²°-ë²•">CORS ì´ìŠˆ í•´ê²° ë²•</h2>

<ul>
  <li>ë‚˜ê°™ì€ ê²½ìš°ëŠ” frontìª½ì— í”„ë¡ì‹œ ì„œë²„ë¥¼ ë‘ì–´ í•´ë‹¹ ì´ìŠˆê°€ ë°œìƒí•˜ì§€ ì•Šë„ë¡ í•˜ì˜€ìŒ</li>
</ul>

<h4 id="ì •ë¦¬">ì •ë¦¬</h4>

<ul>
  <li><a href="https://github.com/NewWisdom/TIL/issues/54">ë‚´ê°€ CORS ì´ìŠˆë¥¼ í•´ê²°í•œ ë°©ë²• - Proxy </a></li>
</ul>

<h2 id="cookie-vs-localstorage">Cookie vs LocalStorage</h2>

<p><img src="https://images.velog.io/images/new_wisdom/post/4d9503c2-642a-4ed5-9531-acfc39e6f29b/image.png" style="zoom:50%;" /></p>

<ul>
  <li><a href="https://woowacourse.github.io/javable/post/2020-08-31-where_to_store_token/">í† í°ì„ ì–´ë””ì— ì €ì¥í• ê¹Œ?</a> ê¸€ì„ ë³´ê³  í† í°ì„ ì¿ í‚¤ì— ì €ì¥</li>
  <li>ì¬ì—°ë§ì˜ ë¦¬ë·°ë¡œ ì¿ í‚¤ë¥¼ ì‚¬ìš©í–ˆì„ ë•Œì˜ ë¬¸ì œì ì„ ì•Œì•„ë´„</li>
  <li>XSS ê³µê²©ì„ ë§‰ì„ ìˆ˜ ìˆëŠ” HTTP-Only ì¿ í‚¤ë¥¼ ê³ ë ¤</li>
  <li>í•˜ì§€ë§Œ ì´ëŠ” JSì—ì„œ êº¼ë‚´ ì“¸ ìˆ˜ ì—†ì–´ í—¤ë”ì— í† í°ì„ ì‹¤ì–´ ë³´ë‚¼ ìˆ˜ ì—†ëŠ” ì´ìŠˆ</li>
  <li>(ë¯¸ì…˜ ìš”êµ¬ì‚¬í•­ê³¼ OAuth í‘œì¤€ ë“±ì„ ê³ ë ¤í•´) ì¬ì—°ë§ê³¼ ë‚˜ëˆˆ DM ë‚´ìš©ê³¼ ê°™ì´ ë‹¤ìŒê³¼ ê°™ì€ ë¬¸ì œë“¤ë¡œ ì¿ í‚¤ ëŒ€ì‹  LocalStorageì— í† í°ì„ ì €ì¥í•˜ë„ë¡ ë³€ê²½</li>
</ul>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>* ì›¹ ì´ì™¸ì˜ í´ë¼ì´ì–¸íŠ¸ê¹Œì§€ ê³ ë ¤í•˜ëŠ” ê²ƒì´ ì¢‹ë‹¤ê³  ìƒê°
* OAuth í‘œì¤€ì„ ì§€í‚¤ê¸° ìœ„í•¨
* ì‚¬ì‹¤ HttpOnlyë¥¼ í†µí•´ ë³´í˜¸í•˜ì—¬ë„, í•˜ì´ì¬í‚¹ ë“± ë§ì€ ë³´ì•ˆì  ìœ„í—˜ì´ ì¡´ì¬í•˜ê¸° ë•Œë¬¸ì— ì•…ì˜ì ì¸ ì˜ë„ë¥¼ ê°€ì§„ ì‚¬ëŒì´ ë¶ˆí¸í•´ì§ˆ ë¿ ë³´ì•ˆì ìœ¼ë¡œ ì™„ë²½í•˜ê²Œ ì²˜ë¦¬ë˜ì§€ ì•ŠìŒ
* MDNì—ì„œë„ HTML5 ì´í›„ë¶€í„° Cookieë¥¼ ì €ì¥ì†Œì™€ ê°™ì€ ìš©ë„ë¡œ ì‚¬ìš©í•˜ì§€ ì•Šì„ ê²ƒì„ ê¶Œì¥
</code></pre></div></div>

<h4 id="ì •ë¦¬-1">ì •ë¦¬</h4>

<ul>
  <li><a href="https://github.com/NewWisdom/TIL/issues/21">XSS, CSRF</a></li>
  <li><a href="https://github.com/NewWisdom/TIL/issues/22">SameSite Cookie</a></li>
  <li><a href="https://github.com/NewWisdom/TIL/issues/33">Cookie VS Local Storage</a></li>
</ul>

<h2 id="front">Front</h2>

<p><img src="https://images.velog.io/images/new_wisdom/post/a00c23b4-79f3-46f2-891d-863f25e8a418/image.png" style="zoom:50%;" /></p>

<ul>
  <li><code class="highlighter-rouge">vue.config</code>ë¥¼ í†µí•´ ì¤‘ë³µë˜ëŠ” URLì— ëŒ€í•œ ì„¤ì •</li>
  <li>ì¤‘ë³µë˜ëŠ” fetchëŠ” ëª¨ë“ˆë¡œ ë”°ë¡œ ë§Œë“¤ì–´ì„œ(fetch.js) ì‚¬ìš©í•˜ë„ë¡ ë³€ê²½</li>
</ul>

<p><img src="https://images.velog.io/images/new_wisdom/post/4b5e5a10-0ebf-4d5b-8750-b6a5ccf92652/image.png" style="zoom:50%;" /></p>

<h2 id="argumentresolverì™€-authinterceptor">ArgumentResolverì™€ AuthInterceptor</h2>

<p><img src="https://images.velog.io/images/new_wisdom/post/336584ce-5eaf-45d6-ab2f-c4066eb03ab1/image.png" style="zoom:50%;" /></p>

<h4 id="argumentresolver">ArgumentResolver</h4>
<blockquote>
  <p>Strategy interface for resolving method parameters into argument values in the context of a given request.</p>
  <ul>
    <li>ë§¤ê°œë³€ìˆ˜ì˜ ë¦¬ì¡¸ë¹™</li>
    <li>ì»¨íŠ¸ë¡¤ëŸ¬ì—ì„œ íŒŒë¼ë¯¸í„°ë¥¼ ë°”ì¸ë”© í•´ì£¼ëŠ” ì—­í• 
      <h4 id="authinterceptor-1">AuthInterceptor</h4>
      <p>Workflow interface that allows for customized handler execution chains. Applications can register any number of existing or custom interceptors for certain groups of handlers, to add common preprocessing behavior without needing to modify each handler implementation.
A HandlerInterceptor gets called before the appropriate HandlerAdapter triggers the execution of the handler itself. This mechanism can be used for a large field of preprocessing aspects, e.g. for authorization checks, or common handler behavior like locale or theme changes. Its main purpose is to allow for factoring out repetitive handler code.</p>
    </li>
    <li>ê¶Œí•œ í™•ì¸ ë˜ëŠ” ë¡œì¼€ì¼ ë˜ëŠ” í…Œë§ˆ ë³€ê²½ê³¼ ê°™ì€ ì¼ë°˜ì ì¸ í•¸ë“¤ëŸ¬ ë™ì‘ê³¼ ê°™ì€ ì „ì²˜ë¦¬ ì¸¡ë©´ì˜ ë„“ì€ ë¶„ì•¼ì— ì‚¬ìš©</li>
    <li>ì¸ì¦ / ì¸ê°€ì— ëŒ€í•œ ê²€ì‚¬</li>
    <li>ì£¼ìš” ëª©ì ì€ ë°˜ë³µì  ì¸ í•¸ë“¤ëŸ¬ ì½”ë“œë¥¼ ì œê±°í•˜ëŠ” ê²ƒ</li>
    <li>Spring docì—ì„œ ê³µì‹ì ìœ¼ë¡œ authorization checksë¥¼ í•˜ëŠ” ì• ë¼ê³  ì§€ì •í•´ì¤€ ì¡´ì¬</li>
    <li><a href="https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/web/servlet/HandlerInterceptor.html">ê³µì‹ë¬¸ì„œ</a></li>
  </ul>
</blockquote>

<p><strong>ì¸í„°ì…‰í„°ì™€ ë¦¬ì¡¸ë²„ëŠ” ì„œë¡œë¥¼ ëª¨ë¥´ëŠ” ê´€ê³„ì´ê³  ë…ë¦½ì ìœ¼ë¡œ ê°€ì•¼í•¨</strong></p>
<h4 id="ì°¸ê³ í• -ê¸€">ì°¸ê³ í•  ê¸€</h4>
<ul>
  <li><a href="https://velog.io/@sa833591/Spring-Filter-Interceptor-AOP-%EC%B0%A8%EC%9D%B4-yvmv4k96">Filter, Interceptor, AOP ì°¨ì´
</a></li>
</ul>

<h4 id="ì •ë¦¬-2">ì •ë¦¬</h4>

<ul>
  <li><a href="https://github.com/NewWisdom/TIL/issues/28">HandlerInterceptor</a></li>
</ul>

<h2 id="ë‹¤ì‹œ-êµ¬í˜„í•œë‹¤ë©´">ë‹¤ì‹œ êµ¬í˜„í•œë‹¤ë©´?</h2>

<h4 id="argumentresolver-ì—ì„œ-dtoì¸-loginmemberë¥¼-ë°˜í™˜í•˜ê²Œ-í• ê±¸">ArgumentResolver ì—ì„œ DTOì¸ LoginMemberë¥¼ ë°˜í™˜í•˜ê²Œ í• ê±¸!</h4>

<ul>
  <li>ë„ë©”ì¸ì„ ë°˜í™˜í•˜ë©´ ë·°ì™€ ì»¨íŠ¸ë¡¤ëŸ¬ì— ë…¸ì¶œì‹œí‚¤ê³  ë„ë©”ì¸ì„ ì¡°ì‘í•  ê°€ëŠ¥ì„±ì´ ìˆìŒ</li>
  <li>ë˜ ë¶ˆí•„ìš”í•œ pw í•„ë“œë„ ê°€ì§€ê²Œ ë¨</li>
</ul>

<h4 id="ë¹„ë²ˆ-ì•”í˜¸í™”ì™€-member-ê°ì²´ì—ì„œ-ë¹„ë²ˆì„-í™•ì¸í•˜ê²Œ-í• ê±¸">ë¹„ë²ˆ ì•”í˜¸í™”ì™€ member ê°ì²´ì—ì„œ ë¹„ë²ˆì„ í™•ì¸í•˜ê²Œ í• ê±¸!</h4>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="n">TokenResponse</span> <span class="nf">createToken</span><span class="o">(</span><span class="n">TokenRequest</span> <span class="n">tokenRequest</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">Member</span> <span class="n">member</span> <span class="o">=</span> <span class="n">memberDao</span><span class="o">.</span><span class="na">findByEmailAndPassword</span><span class="o">(</span><span class="n">tokenRequest</span><span class="o">.</span><span class="na">getEmail</span><span class="o">(),</span> <span class="n">tokenRequest</span><span class="o">.</span><span class="na">getPassword</span><span class="o">())</span>
            <span class="o">.</span><span class="na">orElseThrow</span><span class="o">(()</span> <span class="o">-&gt;</span> <span class="k">new</span> <span class="n">AuthorizationException</span><span class="o">(</span><span class="s">"ë¡œê·¸ì¸ ì‹¤íŒ¨ì…ë‹ˆë‹¤."</span><span class="o">));</span>
    <span class="n">String</span> <span class="n">accessToken</span> <span class="o">=</span> <span class="n">jwtTokenProvider</span><span class="o">.</span><span class="na">createToken</span><span class="o">(</span><span class="n">String</span><span class="o">.</span><span class="na">valueOf</span><span class="o">(</span><span class="n">member</span><span class="o">.</span><span class="na">getId</span><span class="o">()));</span>
    <span class="k">return</span> <span class="k">new</span> <span class="nf">TokenResponse</span><span class="o">(</span><span class="n">accessToken</span><span class="o">);</span>
<span class="o">}</span>
</code></pre></div></div>

<ul>
  <li>ë¹„ë²ˆì„ ì•”í˜¸í™” í•  ë•ŒëŠ” Spring Securityì˜ <code class="highlighter-rouge">BCryptPasswordEncoder()</code> ë¥¼ ì‚¬ìš©</li>
  <li>íšŒì›ê°€ì…í•  ë•Œ ì…ë ¥í•œ ë¹„ë²ˆì„ ì¸ì½”ë”©í•˜ì—¬ ì €ì¥</li>
  <li>ê·¸ëŸ°ë° ë§Œì•½ ì—¬ê¸°ì„œ ë¡œê·¸ì¸í•  ë•Œ ì…ë ¥í•œ ë¹„ë²ˆì„ <code class="highlighter-rouge">encoder.encode()</code> í•˜ì—¬ ì¡°íšŒí•˜ë©´ ì‹¤íŒ¨</li>
  <li>ì™œëƒë©´ ë™ì¼í•œ ì›ë¬¸ì´ì–´ë„ ê°ê¸° ë‹¤ë¥¸ ì¸ì½”ë”©ëœ ê°’ì„ ë‚´ë±‰ê¸° ë•Œë¬¸</li>
</ul>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">PasswordEncoder</span> <span class="n">encoder</span> <span class="o">=</span> <span class="k">new</span> <span class="n">BCryptPasswordEncoder</span><span class="o">();</span>
<span class="n">String</span> <span class="err">ì›ë¬¸</span> <span class="o">=</span> <span class="s">"qwe123"</span><span class="o">;</span>
<span class="n">String</span> <span class="err">ì•”í˜¸í™”ëœ</span><span class="n">_</span><span class="err">ì›ë¬¸</span> <span class="o">=</span> <span class="n">encoder</span><span class="o">.</span><span class="na">encode</span><span class="o">(</span><span class="err">ì›ë¬¸</span><span class="o">);</span>
<span class="n">String</span> <span class="err">ì•”í˜¸í™”ëœ</span><span class="n">_</span><span class="err">ì›ë¬¸</span><span class="n">_2</span> <span class="o">=</span> <span class="n">encoder</span><span class="o">.</span><span class="na">encode</span><span class="o">(</span><span class="err">ì›ë¬¸</span><span class="o">);</span>

<span class="n">encorder</span><span class="o">.</span><span class="na">matches</span><span class="o">(</span><span class="err">ì›ë¬¸</span><span class="o">,</span> <span class="err">ì•”í˜¸í™”ëœ</span> <span class="err">ì›ë¬¸</span><span class="o">);</span> <span class="c1">// true</span>
<span class="err">ì•”í˜¸í™”ëœ</span><span class="n">_</span><span class="err">ì›ë¬¸</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="err">ì•”í˜¸í™”ëœ</span><span class="n">_</span><span class="err">ì›ë¬¸</span><span class="mi">2</span><span class="o">);</span> <span class="c1">//false</span>
</code></pre></div></div>

<ul>
  <li>ë•Œë¬¸ì— ì¿¼ë¦¬ë¡œ Memberë¥¼ ë°›ì•„ì˜¤ê³  ì´ ê°ì²´ì—ì„œ <code class="highlighter-rouge">encorder.matches()</code>ë¥¼ ì´ìš©í•´ ë¹„ë²ˆì„ í™•ì¸í•˜ì</li>
</ul>

<h4 id="ìµœë‹¨ê±°ë¦¬-ì°¾ëŠ”-ë¡œì§ì„-ì „ëµ-íŒ¨í„´ìœ¼ë¡œ-êµ¬í˜„í• ê±¸">ìµœë‹¨ê±°ë¦¬ ì°¾ëŠ” ë¡œì§ì„ ì „ëµ íŒ¨í„´ìœ¼ë¡œ êµ¬í˜„í• ê±¸!</h4>

<ul>
  <li>ë„ë©”ì¸ì— ì™¸ë¶€ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ê°€ì§€ê³  ìˆëŠ” ê²ƒì´ ì˜³ì€ê°€?</li>
  <li>ë§Œì•½ ì•Œê³ ë¦¬ì¦˜ì´ ë³€ê²½ë˜ë©´ ë„ë©”ì¸ì—ë„ ì˜í–¥ì´ ê°</li>
  <li>ì „ëµíŒ¨í„´ìœ¼ë¡œ Dijkstra ì•Œê³ ë¦¬ì¦˜ì„ ì£¼ì…í•˜ì</li>
</ul>

<hr />

<h2 id="2021-06-16-ìœ„-ì‚¬í•­ë“¤ì„-ë°˜ì˜í•˜ì—¬-ë‹¤ì‹œ-êµ¬í˜„">2021-06-16 ìœ„ ì‚¬í•­ë“¤ì„ ë°˜ì˜í•˜ì—¬ ë‹¤ì‹œ êµ¬í˜„</h2>

<h3 id="argumentresolverì—ì„œ-dtoì¸-loginmember-ë°˜í™˜í•˜ë„ë¡-ë¦¬íŒ©í† ë§">ArgumentResolverì—ì„œ DTOì¸ LoginMember ë°˜í™˜í•˜ë„ë¡ ë¦¬íŒ©í† ë§</h3>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">AuthenticationPrincipalArgumentResolver</span> <span class="kd">implements</span> <span class="n">HandlerMethodArgumentResolver</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="n">AuthService</span> <span class="n">authService</span><span class="o">;</span>

    <span class="kd">public</span> <span class="nf">AuthenticationPrincipalArgumentResolver</span><span class="o">(</span><span class="n">AuthService</span> <span class="n">authService</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">authService</span> <span class="o">=</span> <span class="n">authService</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">supportsParameter</span><span class="o">(</span><span class="n">MethodParameter</span> <span class="n">parameter</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">parameter</span><span class="o">.</span><span class="na">hasParameterAnnotation</span><span class="o">(</span><span class="n">AuthenticationPrincipal</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="n">LoginMember</span> <span class="nf">resolveArgument</span><span class="o">(</span><span class="n">MethodParameter</span> <span class="n">parameter</span><span class="o">,</span> <span class="n">ModelAndViewContainer</span> <span class="n">mavContainer</span><span class="o">,</span> <span class="n">NativeWebRequest</span> <span class="n">webRequest</span><span class="o">,</span> <span class="n">WebDataBinderFactory</span> <span class="n">binderFactory</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">String</span> <span class="n">token</span> <span class="o">=</span> <span class="n">AuthorizationExtractor</span><span class="o">.</span><span class="na">extract</span><span class="o">((</span><span class="n">HttpServletRequest</span><span class="o">)</span> <span class="n">webRequest</span><span class="o">.</span><span class="na">getNativeRequest</span><span class="o">());</span>
        <span class="k">return</span> <span class="n">authService</span><span class="o">.</span><span class="na">findLoginMemberByToken</span><span class="o">(</span><span class="n">token</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<h4 id="loginmember">LoginMember</h4>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">LoginMember</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="n">Long</span> <span class="n">id</span><span class="o">;</span>
    <span class="kd">private</span> <span class="n">String</span> <span class="n">email</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kt">int</span> <span class="n">age</span><span class="o">;</span>

    <span class="kd">public</span> <span class="nf">LoginMember</span><span class="o">(</span><span class="n">Member</span> <span class="n">member</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">(</span><span class="n">member</span><span class="o">.</span><span class="na">getId</span><span class="o">(),</span> <span class="n">member</span><span class="o">.</span><span class="na">getEmail</span><span class="o">(),</span> <span class="n">member</span><span class="o">.</span><span class="na">getAge</span><span class="o">());</span>
    <span class="o">}</span>
</code></pre></div></div>

<ul>
  <li>
    <p>ë¡œì§ì— í•„ìš”í•œ ì •ë³´ë§Œ ë‹´ê³  ìˆëŠ” DTO ìƒì„±</p>
  </li>
  <li>ì•„ ì°¸ê³ ë¡œ Interceptorì—ì„œëŠ” í† í° ê²€ì¦ë§Œ í•˜ë„ë¡ í•¨
    <ul>
      <li>ì°¨í”¼ ì´ë¯¸ ë¡œê·¸ì¸ìœ¼ë¡œ ì•„ì´ë”” ë¹„ë²ˆì„ ê²€ì¦í–ˆì–ì•„?</li>
    </ul>
  </li>
  <li>ë¦¬ì¡¸ë²„ì—ì„œëŠ” í† í°ì„ í†µí•´ ì§„ì§œ ë§¤ê°œë³€ìˆ˜ ë¦¬ì¡¸ë¹™ë§Œ ë‹´ë‹¹</li>
</ul>

<h3 id="member-ê°ì²´ì—ì„œ-ë¹„ë²ˆì„-í™•ì¸í•˜ë„ë¡">member ê°ì²´ì—ì„œ ë¹„ë²ˆì„ í™•ì¸í•˜ë„ë¡</h3>

<h4 id="authservice">AuthService</h4>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="n">TokenResponse</span> <span class="nf">createToken</span><span class="o">(</span><span class="n">TokenRequest</span> <span class="n">tokenRequest</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">Member</span> <span class="n">member</span> <span class="o">=</span> <span class="n">findMember</span><span class="o">(</span><span class="n">tokenRequest</span><span class="o">);</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">member</span><span class="o">.</span><span class="na">isInvalidPassword</span><span class="o">(</span><span class="n">tokenRequest</span><span class="o">.</span><span class="na">getPassword</span><span class="o">()))</span> <span class="o">{</span>
        <span class="k">throw</span> <span class="k">new</span> <span class="nf">AuthorizationException</span><span class="o">(</span><span class="s">"ë¡œê·¸ì¸ ì‹¤íŒ¨ì…ë‹ˆë‹¤."</span><span class="o">);</span>
    <span class="o">}</span>
    <span class="n">String</span> <span class="n">accessToken</span> <span class="o">=</span> <span class="n">jwtTokenProvider</span><span class="o">.</span><span class="na">createToken</span><span class="o">(</span><span class="n">String</span><span class="o">.</span><span class="na">valueOf</span><span class="o">(</span><span class="n">member</span><span class="o">.</span><span class="na">getId</span><span class="o">()));</span>
    <span class="k">return</span> <span class="k">new</span> <span class="nf">TokenResponse</span><span class="o">(</span><span class="n">accessToken</span><span class="o">);</span>
<span class="o">}</span>

<span class="kd">private</span> <span class="n">Member</span> <span class="nf">findMember</span><span class="o">(</span><span class="n">TokenRequest</span> <span class="n">tokenRequest</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">return</span> <span class="n">memberDao</span><span class="o">.</span><span class="na">findByEmail</span><span class="o">(</span><span class="n">tokenRequest</span><span class="o">.</span><span class="na">getEmail</span><span class="o">())</span>
            <span class="o">.</span><span class="na">orElseThrow</span><span class="o">(()</span> <span class="o">-&gt;</span> <span class="k">new</span> <span class="n">AuthorizationException</span><span class="o">(</span><span class="s">"ë¡œê·¸ì¸ ì‹¤íŒ¨ì…ë‹ˆë‹¤."</span><span class="o">));</span>
<span class="o">}</span>
</code></pre></div></div>

<ul>
  <li>ì¶”í›„ ë‹¨ë°©í–¥ ë¹„ë²ˆ ì•”í˜¸í™”ë¥¼ ìœ„í•´ ê°ì²´ì—ì„œ ë¹„ë²ˆì„ ë¹„êµí•˜ë„ë¡ ë³€ê²½</li>
</ul>

<h3 id="ìµœë‹¨ê±°ë¦¬-ì°¾ëŠ”-ë¡œì§ì„-ì „ëµ-íŒ¨í„´ìœ¼ë¡œ">ìµœë‹¨ê±°ë¦¬ ì°¾ëŠ” ë¡œì§ì„ ì „ëµ íŒ¨í„´ìœ¼ë¡œ</h3>

<p><img src="https://images.velog.io/images/new_wisdom/post/923976a2-131b-45c4-8911-c8a0b3da1e0c/image.png" style="zoom:33%;" /></p>

<ul>
  <li>ìµœë‹¨ ê²½ë¡œ ì°¾ê¸° ì „ëµì„ ì¸í„°í˜ì´ìŠ¤ë¡œ, ì´ë¥¼ ë‹¤ìµìŠ¤íŠ¸ë¼ë¡œ êµ¬í˜„í•œ í´ë˜ìŠ¤ë¥¼ ë§Œë“¦</li>
  <li>ì•Œê³ ë¦¬ì¦˜ì„ ì½”ë“œì˜ ì˜í–¥ì—†ì´ ë³€ê²½í•  ìˆ˜ ìˆë„ë¡</li>
</ul>

<h4 id="subwaygraph">SubwayGraph</h4>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">SubwayGraph</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="n">WeightedMultigraph</span><span class="o">&lt;</span><span class="n">Station</span><span class="o">,</span> <span class="n">DefaultWeightedEdge</span><span class="o">&gt;</span> <span class="n">graph</span><span class="o">;</span>

    <span class="kd">public</span> <span class="nf">SubwayGraph</span><span class="o">(</span><span class="n">WeightedMultigraph</span><span class="o">&lt;</span><span class="n">Station</span><span class="o">,</span> <span class="n">DefaultWeightedEdge</span><span class="o">&gt;</span> <span class="n">graph</span><span class="o">,</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">Section</span><span class="o">&gt;</span> <span class="n">sections</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">graph</span> <span class="o">=</span> <span class="n">graph</span><span class="o">;</span>
        <span class="n">initPath</span><span class="o">(</span><span class="n">sections</span><span class="o">);</span>
    <span class="o">}</span>
   <span class="c1">// ...</span>
</code></pre></div></div>

<ul>
  <li>ê·¸ë˜í”„ ë„ë©”ì¸</li>
</ul>

<h4 id="shortestpathstrategy-ì¸í„°í˜ì´ìŠ¤">ShortestPathStrategy ì¸í„°í˜ì´ìŠ¤</h4>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">interface</span> <span class="nc">ShortestPathStrategy</span> <span class="o">{</span>
    <span class="n">List</span><span class="o">&lt;</span><span class="n">Station</span><span class="o">&gt;</span> <span class="nf">getVertexList</span><span class="o">(</span><span class="n">Station</span> <span class="n">source</span><span class="o">,</span> <span class="n">Station</span> <span class="n">target</span><span class="o">);</span>

    <span class="kt">double</span> <span class="nf">getPathWeight</span><span class="o">(</span><span class="n">Station</span> <span class="n">source</span><span class="o">,</span> <span class="n">Station</span> <span class="n">target</span><span class="o">);</span>
<span class="o">}</span>
</code></pre></div></div>

<ul>
  <li>ì „ëµë§ˆë‹¤ <code class="highlighter-rouge">getVertexList()</code> ì™€ <code class="highlighter-rouge">getPathWeight()</code> ë¥¼ ê³„ì‚°í•˜ë„ë¡ ëª…ì„¸</li>
</ul>

<h4 id="dijkstrashortestpathstrategy">DijkstraShortestPathStrategy</h4>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">DijkstraShortestPathStrategy</span> <span class="kd">implements</span> <span class="n">ShortestPathStrategy</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="n">ShortestPathAlgorithm</span><span class="o">&lt;</span><span class="n">Station</span><span class="o">,</span> <span class="n">DefaultWeightedEdge</span><span class="o">&gt;</span> <span class="n">shortestPathAlgorithm</span><span class="o">;</span>

    <span class="kd">public</span> <span class="nf">DijkstraShortestPathStrategy</span><span class="o">(</span><span class="n">SubwayGraph</span> <span class="n">subwayGraph</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">shortestPathAlgorithm</span> <span class="o">=</span> <span class="k">new</span> <span class="n">DijkstraShortestPath</span><span class="o">&lt;&gt;(</span><span class="n">subwayGraph</span><span class="o">.</span><span class="na">getGraph</span><span class="o">());</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">Station</span><span class="o">&gt;</span> <span class="nf">getVertexList</span><span class="o">(</span><span class="n">Station</span> <span class="n">source</span><span class="o">,</span> <span class="n">Station</span> <span class="n">target</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">shortestPathAlgorithm</span><span class="o">.</span><span class="na">getPath</span><span class="o">(</span><span class="n">source</span><span class="o">,</span> <span class="n">target</span><span class="o">).</span><span class="na">getVertexList</span><span class="o">();</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">double</span> <span class="nf">getPathWeight</span><span class="o">(</span><span class="n">Station</span> <span class="n">source</span><span class="o">,</span> <span class="n">Station</span> <span class="n">target</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">shortestPathAlgorithm</span><span class="o">.</span><span class="na">getPathWeight</span><span class="o">(</span><span class="n">source</span><span class="o">,</span> <span class="n">target</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<ul>
  <li>SubwayGraphë¥¼ ë°›ì•„ì„œ ìµœë‹¨ ê²½ë¡œë¥¼ êµ¬í•  ìˆ˜ ìˆìŒ</li>
</ul>

<h4 id="shortestpathfinder">ShortestPathFinder</h4>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">ShortestPathFinder</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="n">ShortestPathStrategy</span> <span class="n">shortestPathStrategy</span><span class="o">;</span>

    <span class="kd">public</span> <span class="nf">ShortestPathFinder</span><span class="o">(</span><span class="n">ShortestPathStrategy</span> <span class="n">shortestPathStrategy</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">shortestPathStrategy</span> <span class="o">=</span> <span class="n">shortestPathStrategy</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="n">Path</span> <span class="nf">findShortestPath</span><span class="o">(</span><span class="n">Station</span> <span class="n">source</span><span class="o">,</span> <span class="n">Station</span> <span class="n">target</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="k">new</span> <span class="nf">Path</span><span class="o">(</span><span class="n">shortestPathStrategy</span><span class="o">.</span><span class="na">getVertexList</span><span class="o">(</span><span class="n">source</span><span class="o">,</span> <span class="n">target</span><span class="o">),</span> <span class="n">shortestPathStrategy</span><span class="o">.</span><span class="na">getPathWeight</span><span class="o">(</span><span class="n">source</span><span class="o">,</span> <span class="n">target</span><span class="o">));</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<ul>
  <li>ìµœë‹¨ ê²½ë¡œë¥¼ ì°¾ëŠ” ì—­í• </li>
  <li>ì „ëµì„ ì£¼ì…ë°›ì•„ ìµœë‹¨ ê²½ë¡œë¥¼ êµ¬í•˜ê³  ì‹¶ì–´ ë„ë©”ì¸ì„ ë¶„ë¦¬í•˜ì˜€ìŒâ€¦</li>
</ul>

<h4 id="ë³€ê²½ëœ-pathservice">ë³€ê²½ëœ PathService</h4>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="n">PathResponse</span> <span class="nf">findPath</span><span class="o">(</span><span class="n">Long</span> <span class="n">sourceId</span><span class="o">,</span> <span class="n">Long</span> <span class="n">targetId</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">List</span><span class="o">&lt;</span><span class="n">Section</span><span class="o">&gt;</span> <span class="n">sections</span> <span class="o">=</span> <span class="n">sectionDao</span><span class="o">.</span><span class="na">findByStationIds</span><span class="o">(</span><span class="n">Arrays</span><span class="o">.</span><span class="na">asList</span><span class="o">(</span><span class="n">sourceId</span><span class="o">,</span> <span class="n">targetId</span><span class="o">));</span>
    <span class="n">SubwayGraph</span> <span class="n">subwayGraph</span> <span class="o">=</span> <span class="k">new</span> <span class="n">SubwayGraph</span><span class="o">(</span><span class="k">new</span> <span class="n">WeightedMultigraph</span><span class="o">&lt;&gt;(</span><span class="n">DefaultWeightedEdge</span><span class="o">.</span><span class="na">class</span><span class="o">),</span> <span class="n">sections</span><span class="o">);</span>
    <span class="n">ShortestPathFinder</span> <span class="n">shortestPathFinder</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ShortestPathFinder</span><span class="o">(</span><span class="k">new</span> <span class="n">DijkstraShortestPathStrategy</span><span class="o">(</span><span class="n">subwayGraph</span><span class="o">));</span>
    <span class="n">Path</span> <span class="n">shortestPath</span> <span class="o">=</span> <span class="n">shortestPathFinder</span><span class="o">.</span><span class="na">findShortestPath</span><span class="o">(</span><span class="k">new</span> <span class="n">Station</span><span class="o">(</span><span class="n">sourceId</span><span class="o">),</span> <span class="k">new</span> <span class="n">Station</span><span class="o">(</span><span class="n">targetId</span><span class="o">));</span>
    <span class="k">return</span> <span class="k">new</span> <span class="nf">PathResponse</span><span class="o">(</span><span class="n">StationResponse</span><span class="o">.</span><span class="na">listOf</span><span class="o">(</span><span class="n">combineStationById</span><span class="o">(</span><span class="n">shortestPath</span><span class="o">)),</span> <span class="o">(</span><span class="kt">int</span><span class="o">)</span> <span class="n">shortestPath</span><span class="o">.</span><span class="na">distance</span><span class="o">());</span>
<span class="o">}</span>

<span class="kd">private</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">Station</span><span class="o">&gt;</span> <span class="nf">combineStationById</span><span class="o">(</span><span class="n">Path</span> <span class="n">path</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">List</span><span class="o">&lt;</span><span class="n">Long</span><span class="o">&gt;</span> <span class="n">stationIds</span> <span class="o">=</span> <span class="n">path</span><span class="o">.</span><span class="na">stations</span><span class="o">()</span>
            <span class="o">.</span><span class="na">stream</span><span class="o">()</span>
            <span class="o">.</span><span class="na">map</span><span class="o">(</span><span class="nl">Station:</span><span class="o">:</span><span class="n">getId</span><span class="o">)</span>
            <span class="o">.</span><span class="na">collect</span><span class="o">(</span><span class="n">Collectors</span><span class="o">.</span><span class="na">toList</span><span class="o">());</span>
    <span class="k">return</span> <span class="n">stationDao</span><span class="o">.</span><span class="na">findByIds</span><span class="o">(</span><span class="n">stationIds</span><span class="o">).</span><span class="na">sortedStation</span><span class="o">(</span><span class="n">stationIds</span><span class="o">);</span>
<span class="o">}</span>
</code></pre></div></div>

<h4 id="ë°˜ì˜ëœ-ì½”ë“œëŠ”-ì—¬ê¸°ì—-"><a href="https://github.com/NewWisdom/atdd-subway-path/tree/step5">ë°˜ì˜ëœ ì½”ë“œëŠ” ì—¬ê¸°ì— ğŸ‘»</a></h4>


	  ]]></description>
	</item>

	<item>
	  <title>ğŸ“š atdd-subway-map ë¯¸ì…˜ ì •ë¦¬</title>
	  <link>//atdd-subway-map</link>
	  <author></author>
	  <pubDate>2021-06-11T10:01:00+09:00</pubDate>
	  <guid>//atdd-subway-map</guid>
	  <description><![CDATA[
	     <h2 id="ì¤‘ë³µë˜ëŠ”-í…ŒìŠ¤íŠ¸-ë©”ì„œë“œ">ì¤‘ë³µë˜ëŠ” í…ŒìŠ¤íŠ¸ ë©”ì„œë“œ</h2>

<p><img src="https://images.velog.io/images/new_wisdom/post/73cdc1c4-063d-4a4e-af29-6520fecb721e/image.png" style="zoom:50%;" /></p>

<ul>
  <li>ì¤‘ë³µë˜ëŠ” í…ŒìŠ¤íŠ¸ ë©”ì„œë“œëŠ” ì¶”ì¶œí•˜ì</li>
  <li>í…ŒìŠ¤íŠ¸ì½”ë“œë„ ìœ ì§€ë³´ìˆ˜ì˜ ëŒ€ìƒì´ë©° í•˜ë‚˜ì˜ ë¬¸ì„œì´ê¸° ë•Œë¬¸ì— ê°€ë…ì„±ì„ ê³ ë ¤í•˜ì</li>
</ul>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">private</span> <span class="n">ExtractableResponse</span><span class="o">&lt;</span><span class="n">Response</span><span class="o">&gt;</span> <span class="nf">addSection</span><span class="o">(</span><span class="n">String</span> <span class="n">content</span><span class="o">)</span> <span class="o">{</span>
  <span class="k">return</span> <span class="n">RestAssured</span><span class="o">.</span><span class="na">given</span><span class="o">().</span><span class="na">log</span><span class="o">().</span><span class="na">all</span><span class="o">()</span>
    <span class="o">.</span><span class="na">body</span><span class="o">(</span><span class="n">content</span><span class="o">)</span>
    <span class="o">.</span><span class="na">contentType</span><span class="o">(</span><span class="n">MediaType</span><span class="o">.</span><span class="na">APPLICATION_JSON_VALUE</span><span class="o">)</span>
    <span class="o">.</span><span class="na">when</span><span class="o">()</span>
    <span class="o">.</span><span class="na">post</span><span class="o">(</span><span class="s">"/lines/{id}/sections"</span><span class="o">,</span> <span class="mi">1L</span><span class="o">)</span>
    <span class="o">.</span><span class="na">then</span><span class="o">().</span><span class="na">log</span><span class="o">().</span><span class="na">all</span><span class="o">()</span>
    <span class="o">.</span><span class="na">extract</span><span class="o">();</span>
<span class="o">}</span>
</code></pre></div></div>

<h2 id="ì˜ˆì™¸-ì²˜ë¦¬ëŠ”-serviceì—ì„œ">ì˜ˆì™¸ ì²˜ë¦¬ëŠ” Serviceì—ì„œ</h2>

<p><img src="https://images.velog.io/images/new_wisdom/post/004aa497-1875-4a85-ba7d-2ab1c0f4f40e/image.png" style="zoom:50%;" /></p>

<ul>
  <li>DAOì—ì„œ ì˜ˆì™¸ë¥¼ ì²´í¬í•´ì£¼ê³  ìˆì—ˆìŒ</li>
  <li>DAOëŠ” ë§ê·¸ëŒ€ë¡œ DBì— ì–´ì„¸ìŠ¤í•˜ëŠ” ì—­í• ë§Œ í•  ë¿</li>
  <li>ì´ ê²°ê³¼ì— ëŒ€í•œ ì˜ˆì™¸ëŠ” ì„œë¹„ìŠ¤ê°€ ì•Œì•„ì„œ í•˜ë„ë¡ í•˜ì</li>
</ul>

<h2 id="validì™€-validatedë¡œ-dto-ê²€ì¦">@Validì™€ @Validatedë¡œ DTO ê²€ì¦</h2>

<ul>
  <li><code class="highlighter-rouge">@Valid</code> ë¥¼ í†µí•´ DTOì—ì„œ ìš”ì²­ì— ëŒ€í•œ ê²€ì¦ì„ í•˜ê²Œ í•´ì¤Œ</li>
  <li>Validationì„ groupí™” í•  ìˆ˜ ìˆëŠ” ì ì„ ì´ìš©í•´ì„œ ê°ê¸° ìš”ì²­ë§ˆë‹¤ groupì„ ì§€ì–´ í•œ DTOë¥¼ ì‚¬ìš©í•´ë„ ê°ê° ìš”ì²­ì— ë§ëŠ” ê²€ì¦ì„ ì§„í–‰</li>
</ul>

<h4 id="ì •ë¦¬">ì •ë¦¬</h4>

<ul>
  <li><a href="https://github.com/NewWisdom/TIL/issues/30">@Valid / @Validationìœ¼ë¡œ ìš”ì²­ê°’ ê²€ì¦</a></li>
</ul>

<h2 id="validë¡œ-ì¡ì€-ì˜ˆì™¸-ë©”ì‹œì§€-ì²˜ë¦¬">Validë¡œ ì¡ì€ ì˜ˆì™¸ ë©”ì‹œì§€ ì²˜ë¦¬</h2>

<p><img src="https://images.velog.io/images/new_wisdom/post/2ca1114f-98c3-4ce6-b968-0212fcbbc658/image.png" style="zoom: 50%;" /></p>

<ul>
  <li>Valid ì–´ë…¸í…Œì´ì…˜ìœ¼ë¡œ ì¡ì€ MethodArgumentNotValidExceptionì˜ ë©”ì‹œì§€ë¥¼ ì œëŒ€ë¡œ ì¶œë ¥í•˜ê³  ìˆì§€ ì•Šì•˜ìŒ</li>
  <li>ê²Œì´ì¸ ê°€ ì œì•ˆí•´ì¤€ ë°©ë²•ì„ ì ìš©í•˜ë‹ˆ BindingResultì— ìˆëŠ” ì˜ˆì™¸ ë©”ì‹œì§€ë“¤ì„ ì¶”ì¶œí•˜ì—¬ ë˜ì ¸ì¤„ ìˆ˜ ìˆì—ˆìŒ</li>
</ul>

<h2 id="service-ë ˆì´ì–´ì—ì„œ-ë„ë©”ì¸ì´-ì•„ë‹Œ-dtoë¥¼-ë°˜í™˜í•˜ì">Service ë ˆì´ì–´ì—ì„œ ë„ë©”ì¸ì´ ì•„ë‹Œ DTOë¥¼ ë°˜í™˜í•˜ì</h2>

<p><img src="https://images.velog.io/images/new_wisdom/post/a2e62828-da05-401f-bad8-e1e86f9b7c9a/image.png" style="zoom:50%;" /></p>

<ul>
  <li>Controllerì—ì„œ ë„ë©”ì¸ì„ ê°€ì ¸ë‹¤ ì¨ì„œ í™”ë©´ì— í•„ìš”í•œ ë°ì´í„°ë¥¼ í‘œí˜„í•˜ê¸° ìœ„í•´ ë„ë©”ì¸ ìì²´ë‚˜ ë„ë©”ì¸ì˜ getterë¥¼ ë…¸ì¶œì‹œí‚¤ê³  ìˆì—ˆìŒ</li>
  <li>ë„ë©”ì¸ì˜ ì •ë³´ë¥¼ ì™¸ë¶€(view)ì— ë…¸ì¶œí•˜ëŠ” ê²½ìš°, interfaceì¸ DTOë¥¼ í†µí•´ ì„œë¹„ìŠ¤ ë ˆì´ì–´ì—ì„œ ë°˜í™˜í•˜ë„ë¡ ë¦¬íŒ©í† ë§</li>
  <li><a href="https://github.com/HomoEfficio/dev-tips/blob/master/DTO-DomainObject-Converter.md">ì°¸ê³ </a></li>
</ul>

<h4 id="ì •ë¦¬-1">ì •ë¦¬</h4>

<ul>
  <li><a href="https://github.com/NewWisdom/TIL/issues/26">Service Layerì—ì„œ ë„ë©”ì¸ ê°ì²´ê°€ ì•„ë‹Œ DTOë¥¼ ë°˜í™˜í•´ì•¼í•˜ëŠ” ì´ìœ ? (feat.Open Session In View) </a></li>
</ul>

<h2 id="restassuredì—-ëŒ€í•´">RestAssuredì— ëŒ€í•´</h2>

<ul>
  <li>ì „ ë‹¨ê³„ê¹Œì§€ëŠ” MockMVC ë“±ìœ¼ë¡œ ì»¨íŠ¸ë¡¤ëŸ¬ë‹¨ì„ ë‹¨ìœ„í…ŒìŠ¤íŠ¸ë¡œ ì§„í–‰í–ˆìŒ</li>
  <li>E2E í…ŒìŠ¤íŠ¸ë¥¼ í•œë‹¤ëŠ” ê²ƒì€ ë§ ê·¸ëŒ€ë¡œ ëë¶€í„° ëê¹Œì§€,ìš”ì²­ë¶€í„° ë‚´ê°€ ì›í•˜ëŠ” ì‘ë‹µì„ í…ŒìŠ¤íŠ¸ í•˜ëŠ” ê²ƒì¸ë° <br />
ì´ë ‡ê²Œë˜ë©´ ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ë¥¼ í•˜ëŠ” ì´ìœ ê°€ ìˆì„ê¹Œë¼ëŠ” ê³ ë¯¼ì„ í–ˆìŒ</li>
  <li>ê³ ë¯¼í•œ ê²°ê³¼ â€œë‹¨ìœ„ í…ŒìŠ¤íŠ¸ëŠ” êµ¬í˜„ ë‹¨ê³„ì—ì„œ ë‚´ê°€ êµ¬í˜„í•œ ë ˆì´ì–´(ë‹¨ìœ„)ê°€ ì •ìƒ ë™ì‘í•˜ëŠ”ì§€ë¥¼ í…ŒìŠ¤íŠ¸í•˜ê¸° ìœ„í•´,
ì´í›„ ëª¨ë“  ë‹¨ìœ„ë“¤ì´ ì¡°í•©ë˜ì—ˆì„ ë•Œ í†µí•©í…ŒìŠ¤íŠ¸ë¥¼ í†µí•´ ì• í”Œë¦¬ì¼€ì´ì…”ì´ ì›í•˜ëŠ” ê¸°ëŠ¥ì„ ì˜ ìˆ˜í–‰í•˜ëŠ”ì§€ í…ŒìŠ¤íŠ¸í•œë‹¤â€
ì´ë ‡ê²Œ ê²°ë¡ ì„ ë‚´ë¦¼</li>
</ul>

<p><img src="https://images.velog.io/images/new_wisdom/post/191d92fe-c4e1-4595-b67f-ee1d37e1d9a6/image.png" style="zoom:33%;" /></p>

<h2 id="êµ¬ê°„-ì¶”ê°€-ë¡œì§">êµ¬ê°„ ì¶”ê°€ ë¡œì§</h2>

<ul>
  <li>êµ¬ê°„ì„ ì¶”ê°€í•  ë•Œ ìƒí–‰ì—­, í•˜í–‰ì—­ì´ ì¡´ì¬í•˜ëŠ”ì§€ ë˜ ì´ë¥¼ ì°¾ê³  ìˆ˜ì •í•´ì£¼ê¸° ìœ„í•œ ë§ì€ ë¡œì§ì„ ì‘ì„±í•´ì•¼í–ˆìŒ</li>
  <li>ê·¸ëŸ°ë° ì‚¬ì‹¤ ë¹„ìŠ·í•œ ë¡œì§ì¸ë° ìƒí–‰ì¸ì§€ í•˜í–‰ì¸ì§€ ëŒ€ìƒë§Œ ë‹¬ëìŒ</li>
  <li>ì•„ë˜ì™€ ê°™ì´ ì¼ë‹¨ êµ¬í˜„ì„ ëª©ì ìœ¼ë¡œ í–ˆì„ ë•ŒëŠ” ì—„ì²­ë‚œ ë¶„ê¸°ê°€ ìƒê²¨ë²„ë¦¼</li>
</ul>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Transactional</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">addSection</span><span class="o">(</span><span class="kd">final</span> <span class="n">Long</span> <span class="n">lineId</span><span class="o">,</span> <span class="kd">final</span> <span class="n">SectionRequest</span> <span class="n">sectionRequest</span><span class="o">)</span> <span class="o">{</span>
  <span class="n">Line</span> <span class="n">line</span> <span class="o">=</span> <span class="n">lineRepository</span><span class="o">.</span><span class="na">findById</span><span class="o">(</span><span class="n">lineId</span><span class="o">);</span>
  <span class="n">Section</span> <span class="n">toAddSection</span> <span class="o">=</span> <span class="n">sectionRequest</span><span class="o">.</span><span class="na">toSection</span><span class="o">(</span><span class="n">lineId</span><span class="o">);</span>
  <span class="n">Station</span> <span class="n">targetStation</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="na">registeredStation</span><span class="o">(</span><span class="n">toAddSection</span><span class="o">);</span>
  <span class="k">if</span> <span class="o">(</span><span class="n">toAddSection</span><span class="o">.</span><span class="na">hasUpStation</span><span class="o">(</span><span class="n">targetStation</span><span class="o">))</span> <span class="o">{</span>
    <span class="n">Section</span> <span class="n">targetSection</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="na">findSectionWithUpStation</span><span class="o">(</span><span class="n">targetStation</span><span class="o">);</span>
    <span class="n">checkAddableByDistance</span><span class="o">(</span><span class="n">toAddSection</span><span class="o">,</span> <span class="n">targetSection</span><span class="o">);</span>
    <span class="n">lineRepository</span><span class="o">.</span><span class="na">updateSection</span><span class="o">(</span><span class="n">lineId</span><span class="o">,</span>
                                 <span class="k">new</span> <span class="nf">Section</span><span class="o">(</span><span class="n">targetSection</span><span class="o">.</span><span class="na">id</span><span class="o">(),</span> <span class="n">lineId</span><span class="o">,</span> <span class="n">toAddSection</span><span class="o">.</span><span class="na">downStation</span><span class="o">(),</span> <span class="n">targetSection</span><span class="o">.</span><span class="na">downStation</span><span class="o">(),</span> <span class="n">targetSection</span><span class="o">.</span><span class="na">subtractDistance</span><span class="o">(</span><span class="n">toAddSection</span><span class="o">)));</span>
  <span class="o">}</span>
  <span class="k">if</span> <span class="o">(</span><span class="n">toAddSection</span><span class="o">.</span><span class="na">hasDownStation</span><span class="o">(</span><span class="n">targetStation</span><span class="o">))</span> <span class="o">{</span>
    <span class="n">Section</span> <span class="n">targetSection</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="na">findSectionWithDownStation</span><span class="o">(</span><span class="n">targetStation</span><span class="o">);</span>
    <span class="n">checkAddableByDistance</span><span class="o">(</span><span class="n">toAddSection</span><span class="o">,</span> <span class="n">targetSection</span><span class="o">);</span>
    <span class="n">lineRepository</span><span class="o">.</span><span class="na">updateSection</span><span class="o">(</span><span class="n">lineId</span><span class="o">,</span>
                                 <span class="k">new</span> <span class="nf">Section</span><span class="o">(</span><span class="n">targetSection</span><span class="o">.</span><span class="na">id</span><span class="o">(),</span> <span class="n">lineId</span><span class="o">,</span> <span class="n">targetSection</span><span class="o">.</span><span class="na">upStation</span><span class="o">(),</span> <span class="n">toAddSection</span><span class="o">.</span><span class="na">upStation</span><span class="o">(),</span> <span class="n">targetSection</span><span class="o">.</span><span class="na">subtractDistance</span><span class="o">(</span><span class="n">toAddSection</span><span class="o">)));</span>
  <span class="o">}</span>
  <span class="n">lineRepository</span><span class="o">.</span><span class="na">addSection</span><span class="o">(</span><span class="n">lineId</span><span class="o">,</span> <span class="n">sectionRequest</span><span class="o">.</span><span class="na">getUpStationId</span><span class="o">(),</span> <span class="n">sectionRequest</span><span class="o">.</span><span class="na">getDownStationId</span><span class="o">(),</span> <span class="n">sectionRequest</span><span class="o">.</span><span class="na">getDistance</span><span class="o">());</span>
<span class="o">}</span>
</code></pre></div></div>

<ul>
  <li>ì´ëŠ” ìƒí–‰êµ¬ê°„ ì°¾ê¸°, í•˜í–‰êµ¬ê°„ ì°¾ê¸°ë¥¼ ì „ëµíŒ¨í„´ì„ ì´ìš©í•´ ë¦¬íŒ©í†  í•´ë²„ë ¸ìŒ</li>
</ul>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">LineService</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="n">LineRepository</span> <span class="n">lineRepository</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="n">StationDao</span> <span class="n">stationDao</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">FindSectionStrategy</span><span class="o">&gt;</span> <span class="n">findSectionStrategies</span><span class="o">;</span>
<span class="c1">// ...</span>
</code></pre></div></div>

<ul>
  <li>ì¼ë‹¨ LineServiceê°€ êµ¬ê°„ì„ ì°¾ëŠ” ì „ëµì„ ê°€ì§€ê³  ìˆìŒ</li>
</ul>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Transactional</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">addSection</span><span class="o">(</span><span class="kd">final</span> <span class="n">Long</span> <span class="n">lineId</span><span class="o">,</span> <span class="kd">final</span> <span class="n">SectionRequest</span> <span class="n">sectionRequest</span><span class="o">)</span> <span class="o">{</span>
  <span class="n">Line</span> <span class="n">line</span> <span class="o">=</span> <span class="n">lineRepository</span><span class="o">.</span><span class="na">findById</span><span class="o">(</span><span class="n">lineId</span><span class="o">);</span>
  <span class="n">Section</span> <span class="n">toAddSection</span> <span class="o">=</span> <span class="n">sectionRequest</span><span class="o">.</span><span class="na">toSection</span><span class="o">(</span><span class="n">lineId</span><span class="o">);</span>
  <span class="n">Station</span> <span class="n">targetStation</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="na">registeredStation</span><span class="o">(</span><span class="n">toAddSection</span><span class="o">);</span>
  <span class="n">Section</span> <span class="n">targetSection</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="na">findSectionWithStation</span><span class="o">(</span><span class="n">targetStation</span><span class="o">,</span> <span class="n">findSectionStrategies</span><span class="o">);</span>
  <span class="n">lineRepository</span><span class="o">.</span><span class="na">updateSection</span><span class="o">(</span><span class="n">lineId</span><span class="o">,</span> <span class="n">targetSection</span><span class="o">.</span><span class="na">updateToAdd</span><span class="o">(</span><span class="n">toAddSection</span><span class="o">));</span>
  <span class="n">lineRepository</span><span class="o">.</span><span class="na">addSection</span><span class="o">(</span><span class="n">lineId</span><span class="o">,</span> <span class="n">sectionRequest</span><span class="o">.</span><span class="na">getUpStationId</span><span class="o">(),</span> <span class="n">sectionRequest</span><span class="o">.</span><span class="na">getDownStationId</span><span class="o">(),</span> <span class="n">sectionRequest</span><span class="o">.</span><span class="na">getDistance</span><span class="o">());</span>
<span class="o">}</span>
</code></pre></div></div>

<ul>
  <li>ëŒ€ìƒ êµ¬ê°„ì„ ì°¾ì„ ë•Œ ì „ëµë“¤ì„ ì£¼ì…í•˜ê³ </li>
</ul>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="n">Section</span> <span class="nf">findSectionWithStation</span><span class="o">(</span><span class="n">Station</span> <span class="n">targetStation</span><span class="o">,</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">FindSectionStrategy</span><span class="o">&gt;</span> <span class="n">findSectionStrategies</span><span class="o">)</span> <span class="o">{</span>
  <span class="k">return</span> <span class="n">findSectionStrategies</span><span class="o">.</span><span class="na">stream</span><span class="o">()</span>
    <span class="o">.</span><span class="na">map</span><span class="o">(</span><span class="n">findSectionStrategy</span> <span class="o">-&gt;</span> <span class="n">findSectionStrategy</span><span class="o">.</span><span class="na">findSection</span><span class="o">(</span><span class="n">sections</span><span class="o">,</span> <span class="n">targetStation</span><span class="o">))</span>
    <span class="o">.</span><span class="na">filter</span><span class="o">(</span><span class="nl">Optional:</span><span class="o">:</span><span class="n">isPresent</span><span class="o">)</span>
    <span class="o">.</span><span class="na">map</span><span class="o">(</span><span class="nl">Optional:</span><span class="o">:</span><span class="n">get</span><span class="o">)</span>
    <span class="o">.</span><span class="na">findAny</span><span class="o">()</span>
    <span class="o">.</span><span class="na">orElse</span><span class="o">(</span><span class="n">EMPTY</span><span class="o">);</span>
<span class="o">}</span>
</code></pre></div></div>

<ul>
  <li>Sectionsì—ì„œ ë‹¤ìŒê³¼ ê°™ì´ í•´ë‹¹ êµ¬ê°„ì„ ì°¾ìŒ</li>
</ul>

<h2 id="pr-ë§í¬">PR ë§í¬</h2>

<ul>
  <li><a href="https://github.com/woowacourse/atdd-subway-map/pull/86">STEP1</a></li>
  <li><a href="https://github.com/woowacourse/atdd-subway-map/pull/162">STEP2</a></li>
</ul>

	  ]]></description>
	</item>

	<item>
	  <title>ğŸŒ± ìŠ¤í”„ë§ ë¶€íŠ¸ Profileë¡œ ë‹¤ë¥¸ í™˜ê²½ êµ¬ì„±</title>
	  <link>//profile</link>
	  <author></author>
	  <pubDate>2021-06-09T10:01:00+09:00</pubDate>
	  <guid>//profile</guid>
	  <description><![CDATA[
	     <h2 id="profile">Profile?</h2>

<ul>
  <li>ì• í”Œë¦¬ì¼€ì´ì…˜ ì¼ë¶€ configurationì„ ë¶„ë¦¬í•˜ê³  ì‹¶ì„ ë•Œ ì‚¬ìš©</li>
  <li>ì• í”Œë¦¬ì¼€ì´ì…˜ ì¼ë¶€ configurationì„ íŠ¹ì • í™˜ê²½ì—ì„œë§Œ ê°€ëŠ¥í•˜ê²Œ í•˜ê³  ì‹¶ì„ ë•Œ ì‚¬ìš©</li>
  <li>ê°œë°œ í™˜ê²½ì— ë”°ë¼ ì„¤ì •ê°’ì„ ë‹¬ë¥´ê²Œ ë¡œë”©í•  ë•Œ</li>
</ul>

<h2 id="profile-1">@Profile</h2>

<ul>
  <li><code class="highlighter-rouge">@Component, @Configuration, @ConfigurationProperties</code>ì„ <code class="highlighter-rouge">@Profile</code>ì™€ í•¨ê»˜ ì„ ì–¸</li>
</ul>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="nd">@Configuration</span>
<span class="nd">@Profile</span><span class="o">(</span><span class="s">"production"</span><span class="o">)</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">ProductionConfiguration</span> <span class="o">{</span>

    <span class="c1">// ...</span>

<span class="o">}</span>
</code></pre></div></div>
<ul>
  <li>ì–´í”Œë¦¬ì¼€ì´ì…˜ ì‹¤í–‰ì‹œ <code class="highlighter-rouge">spring.profiles.active</code> í”„ë¡œí¼í‹°ë¡œ í”„ë¡œíŒŒì¼ì„ ì§€ì •í•˜ë©´ í•´ë‹¹ í”„ë¡œíŒŒì¼ì´ ì ìš©ëœ ë¹ˆë§Œ ë“±ë¡ë¨</li>
</ul>

<p><strong>application-properties</strong></p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>spring.profiles.active=dev,hsqldb
</code></pre></div></div>

<h4 id="example">Example</h4>

<ol>
  <li>application-propertiesì— ë‹¤ìŒê³¼ ê°™ì´ ì •ì˜
    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>spring.profiles.active=prod
</code></pre></div>    </div>
  </li>
  <li><code class="highlighter-rouge">@Profile</code> ì–´ë…¸í…Œì´ì…˜ê³¼ í•¨ê»˜ <code class="highlighter-rouge">@Configuration</code> ë“±ë¡</li>
</ol>

<p><img src="https://user-images.githubusercontent.com/43840561/121311111-0f322800-c93f-11eb-9455-436a99434869.png" alt="image" style="zoom:50%;" /></p>

<p><img src="https://user-images.githubusercontent.com/43840561/121311125-13f6dc00-c93f-11eb-8a93-3923630d84fa.png" alt="image" style="zoom:50%;" /></p>

<ol>
  <li>ì–´í”Œë¦¬ì¼€ì´ì…˜ ì‹¤í–‰ì‹œ activeí•œ prodì— ë“±ë¡ëœ hello ë¹ˆì´ ì¶œë ¥ë¨</li>
</ol>

<p><img src="https://user-images.githubusercontent.com/43840561/121311276-3a1c7c00-c93f-11eb-9698-9abf9172184f.png" alt="image" /></p>

<h3 id="profileê³¼-activeprofiles">@Profileê³¼ @ActiveProfiles</h3>
<ul>
  <li>ì„œë¡œ ë‹¤ë¥¸ í™˜ê²½ì—ì„œ ì„œë¡œ ë‹¤ë¥¸ profileì„ í™œì„±í™”í•˜ì—¬ í•„ìš”í•œ ë¹ˆë§Œ ë“±ë¡í•˜ë„ë¡ í•˜ëŠ” ì–´ë…¸í…Œì´ì…˜</li>
  <li><code class="highlighter-rouge">@Profile</code>ì€ SpringBootApplicationì„ ì‹¤í–‰í•  ë•Œ ì‚¬ìš©</li>
  <li><code class="highlighter-rouge">@ActiveProfiles</code>ì€ í…ŒìŠ¤íŠ¸ í™˜ê²½ì—ì„œ ì‚¬ìš©</li>
</ul>

<h2 id="applicationproperties">application.properties</h2>

<ul>
  <li>application-{profile}.properties í˜•ì‹ìœ¼ë¡œ íŒŒì¼ ìƒì„±</li>
  <li>ì´ëŠ” <code class="highlighter-rouge">@ConfigurationProperties</code>ë¡œ ê°„ì£¼ë˜ê³  ë¡œë“œë¨
    <ul>
      <li>*.properties , *.yml íŒŒì¼ì— ìˆëŠ” propertyë¥¼ ìë°” í´ë˜ìŠ¤ì— ê°’ì„ ê°€ì ¸ì™€ì„œ(ë°”ì¸ë”©) ì‚¬ìš©í•  ìˆ˜ ìˆê²Œ í•´ì£¼ëŠ” ì–´ë…¸í…Œì´ì…˜</li>
    </ul>
  </li>
  <li>application-{profile}.propertiesì€ application.properties ë³´ë‹¤ ìš°ì„ ìˆœìœ„ê°€ ë†’ê²Œë¨</li>
  <li>ë¹Œë“œí•  ë•Œ ë‹¤ìŒê³¼ ê°™ì€ ëª…ë ¹ì–´ì™€ í•¨ê»˜ íŠ¹ì • í™˜ê²½ì„¤ì •ì„ ì ìš©í•  ìˆ˜ ìˆìŒ
    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>--spring.profiles.active=production
</code></pre></div>    </div>
  </li>
  <li>properties íŒŒì¼ì— <code class="highlighter-rouge">spring.profiles.include</code>ë¥¼ í†µí•´ ì¶”ê°€í•  í”„ë¡œíŒŒì¼ì„ ì„¤ì •í•  ìˆ˜ ìˆìŒ</li>
</ul>

<h4 id="example-1">Example</h4>

<p><strong>application-properties</strong></p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>spring.profiles.active=dev
profile-common.name = default_name_mazzi
defaultonly.name = defualt_name
</code></pre></div></div>
<p><strong>application-prod.properties</strong></p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>profile-common.name = test_name_mazzi
testonly.name = test_name
</code></pre></div></div>
<p><strong>application-dev.properties</strong></p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>profile-common.name = dev_name_mazzi
devonly.name = dev_name
</code></pre></div></div>
<p><strong>AppRunner</strong></p>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Component</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">AppRunner</span> <span class="kd">implements</span> <span class="n">ApplicationRunner</span> <span class="o">{</span>
    <span class="nd">@Autowired</span>
    <span class="n">Environment</span> <span class="n">env</span><span class="o">;</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">run</span><span class="o">(</span><span class="n">ApplicationArguments</span> <span class="n">args</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">Exception</span> <span class="o">{</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"====================================================="</span><span class="o">);</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"spring.profiles.active : "</span> <span class="o">+</span> <span class="n">args</span><span class="o">.</span><span class="na">getOptionValues</span><span class="o">(</span><span class="s">"spring.profiles.active"</span><span class="o">));</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Enviroment's Active Profile : "</span> <span class="o">+</span> <span class="n">Arrays</span><span class="o">.</span><span class="na">toString</span><span class="o">(</span><span class="n">env</span><span class="o">.</span><span class="na">getActiveProfiles</span><span class="o">()));</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"defaultonly.name : "</span> <span class="o">+</span> <span class="n">env</span><span class="o">.</span><span class="na">getProperty</span><span class="o">(</span><span class="s">"defaultonly.name"</span><span class="o">));</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"testonly.name : "</span> <span class="o">+</span> <span class="n">env</span><span class="o">.</span><span class="na">getProperty</span><span class="o">(</span><span class="s">"testonly.name"</span><span class="o">));</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"devonly.name : "</span> <span class="o">+</span> <span class="n">env</span><span class="o">.</span><span class="na">getProperty</span><span class="o">(</span><span class="s">"devonly.name"</span><span class="o">));</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"profile-common.name : "</span> <span class="o">+</span> <span class="n">env</span><span class="o">.</span><span class="na">getProperty</span><span class="o">(</span><span class="s">"profile-common.name"</span><span class="o">));</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"====================================================="</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>
<p><strong>ì‹¤í–‰ ê²°ê³¼</strong></p>

<p><img src="https://user-images.githubusercontent.com/43840561/121315869-b6b15980-c943-11eb-83a9-7e4214b18fe6.png" alt="image" style="zoom:50%;" /></p>

<ul>
  <li>profile-common.nameëŠ” ëª¨ë“  í”„ë¡œí¼í‹° íŒŒì¼ì´ ê³µí†µìœ¼ë¡œ ê°€ì§„ í”„ë¡œí¼í‹°</li>
  <li>dev í”„ë¡œíŒŒì¼ì„ í™œì„±í™”</li>
  <li>ê³µí†µ ì†ì„±ì¸ <code class="highlighter-rouge">profile-common.name</code>ì€ ìš°ì„ ìˆœìœ„ê°€ ë†’ì€ dev í”„ë¡œíŒŒì¼ì˜ ê²ƒìœ¼ë¡œ ì˜¤ë²„ë¼ì´ë“œ ë¨</li>
</ul>

<hr />
<h3 id="ì°¸ê³ ìë£Œ">ì°¸ê³ ìë£Œ</h3>
<ul>
  <li><a href="https://docs.spring.io/spring-boot/docs/current/reference/html/features.html#features.profiles">ê³µì‹ë¬¸ì„œ</a></li>
  <li><a href="https://yangbox.tistory.com/35">ìŠ¤í”„ë§ë¶€íŠ¸ í”„ë¡œíŒŒì¼(Springboot Profile)ë¡œ ë‹¤ë¥¸ í™˜ê²½ êµ¬ì„±í•˜ê¸°</a></li>
  <li><a href="https://engkimbs.tistory.com/766">ìŠ¤í”„ë§ ë¶€íŠ¸ í”„ë¡œíŒŒì¼(Spring Boot Profile)</a></li>
</ul>

	  ]]></description>
	</item>

	<item>
	  <title>ğŸ“š jwp-chess ë¯¸ì…˜ ì •ë¦¬</title>
	  <link>//jwp-chess-note</link>
	  <author></author>
	  <pubDate>2021-06-09T10:01:00+09:00</pubDate>
	  <guid>//jwp-chess-note</guid>
	  <description><![CDATA[
	     <h2 id="controlleradvice">@ControllerAdvice</h2>

<p><img src="https://images.velog.io/images/new_wisdom/post/d9838b28-b9fd-4cd3-9f8f-f19229e5da70/image.png" style="zoom: 50%;" /></p>

<ul>
  <li>ì „ì—­ ì˜ˆì™¸ë¥¼ ì²˜ë¦¬í•˜ëŠ”ë° ì‚¬ìš©</li>
</ul>

<h4 id="ì •ë¦¬">ì •ë¦¬</h4>

<p><a href="https://github.com/NewWisdom/TIL/issues/1">@ControllerAdvice, @RestControllerAdvice</a></p>

<h2 id="rest-api">REST API</h2>

<p><img src="https://images.velog.io/images/new_wisdom/post/b7428bd8-737e-489a-a59d-d3e8a1adcfd2/image.png" style="zoom:50%;" /></p>

<p><img src="https://images.velog.io/images/new_wisdom/post/3dbc03af-5e1c-4be6-a1e0-7332517831ec/image.png" style="zoom:50%;" /></p>

<ul>
  <li>REST API ì„¤ê³„ ë°©ë²•ì„ ì°¾ì•„ë³´ê³  ê³ ë¯¼í•˜ì—¬ ë°˜ì˜</li>
</ul>

<h4 id="ì •ë¦¬-1">ì •ë¦¬</h4>

<ul>
  <li><a href="https://github.com/NewWisdom/TIL/issues/2">REST API ë””ìì¸</a></li>
</ul>

<h2 id="profile">Profile</h2>

<p><img src="https://images.velog.io/images/new_wisdom/post/4fdbb04e-3c16-4a59-954f-b0020d245842/image.png" style="zoom:50%;" /></p>

<ul>
  <li>ì‹¤ì œ ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ ì‚¬ìš©í•˜ëŠ” DBëŠ” Mysql ê·¸ëŒ€ë¡œ ëƒ…ë‘ê³ </li>
  <li>í…ŒìŠ¤íŠ¸ì—ì„œëŠ” h2ë¥¼ ì‚¬ìš©í•˜ì—¬ h2 ì˜ ì¥ì ì„ ê·¹ëŒ€í™”í•´ì„œ ì‚¬ìš©í•˜ë„ë¡ ë¦¬íŒ©ë˜</li>
  <li>í…ŒìŠ¤íŠ¸ DBë¥¼ ë”°ë¡œ ì„¤ì •í•˜ê¸° ìœ„í•´ ì—´ì‹¬íˆ ì°¾ì•„ë³´ë‹¤ê°€ application-propertiesë¥¼ í™œìš©í•˜ëŠ” ë°©ì•ˆ í•™ìŠµ</li>
  <li>ì²˜ìŒì—ëŠ” application-{í™˜ê²½}-propertiesë¡œ ê°ê° íŒŒì¼ì„ ë§Œë“¤ì–´ì£¼ì—ˆìŒ</li>
  <li>ì•„ë˜ì™€ ê°™ì€ ë¦¬ë·°ë¥¼ ë°›ê³  test.resourceì— application-propertiesë¥¼ ë§Œë“¤ì–´ì¤Œ</li>
</ul>

<p><img src="https://images.velog.io/images/new_wisdom/post/5dc4b405-47bc-4422-83f8-eedaa3b7732e/image.png" style="zoom:50%;" /></p>

<p><img src="https://images.velog.io/images/new_wisdom/post/4aa931db-0a73-4ada-9ba2-2bb0e3b3ea3b/image.png" style="zoom:33%;" /></p>

<h4 id="ì •ë¦¬-2">ì •ë¦¬</h4>

<ul>
  <li>Profileì— ëŒ€í•´ ì¶”ê°€ì ìœ¼ë¡œ í•™ìŠµí•˜ê³  ì •ë¦¬</li>
  <li><a href="https://github.com/NewWisdom/TIL/issues/47">Profile</a></li>
</ul>

<h2 id="í…ŒìŠ¤íŠ¸ì—-ê´€í•˜ì—¬">í…ŒìŠ¤íŠ¸ì— ê´€í•˜ì—¬</h2>

<p><img src="https://images.velog.io/images/new_wisdom/post/03a3dc16-07b5-48d0-bf51-fbea7bacc9f6/image.png" style="zoom:50%;" /></p>

<ul>
  <li>ì§€ë‚œ ë ˆë²¨ ì²´ìŠ¤ ì½”ë“œ ì˜®ê²¨ì˜¤ë©´ì„œ í…ŒìŠ¤íŠ¸ ì½”ë“œëŠ” ë¹¼ê³  ì˜®ê²¨ì™”ì—ˆìŒ ğŸ¥²</li>
  <li>ë°ì´ë¸Œì˜ ê¶Œìœ ëŒ€ë¡œ ê° ë ˆì´ì–´ë³„ í…ŒìŠ¤íŠ¸ ì½”ë“œ ì‘ì„±</li>
  <li>ì²˜ìŒì—ëŠ” ë‹¨ìˆœíˆ <code class="highlighter-rouge">@SpringBootTest</code> (í†µí•©í…ŒìŠ¤íŠ¸)ë¡œ ì§„í–‰í•˜ë ¤ í–ˆìŒ</li>
  <li>ì°¾ì•„ë³´ë‹ˆ ê° ë ˆì´ì–´ë¥¼ ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ë¡œë„ êµ¬í˜„í•  ìˆ˜ ìˆìŒì„ ê¹¨ë‹¬ìŒ</li>
  <li><code class="highlighter-rouge">@WebMvcTest, @jdbcTest</code>ì„ í†µí•´ Controllerì™€ Repository ë ˆì´ì–´ì— ëŒ€í•œ ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ë¥¼ êµ¬í˜„</li>
</ul>

<h4 id="ì •ë¦¬-3">ì •ë¦¬</h4>

<ul>
  <li><a href="https://newwisdom.github.io/unit-test-vs">í†µí•© í…ŒìŠ¤íŠ¸ VS ë‹¨ìœ„ í…ŒìŠ¤íŠ¸</a></li>
</ul>

<h2 id="í•™ìŠµí•˜ë¼ê³ -ë˜ì ¸ì£¼ì‹ -í‚¤ì›Œë“œ">í•™ìŠµí•˜ë¼ê³  ë˜ì ¸ì£¼ì‹  í‚¤ì›Œë“œ</h2>

<p><img src="https://images.velog.io/images/new_wisdom/post/9147f41d-e48f-479d-8573-2f23fcbff416/image.png" style="zoom:50%;" /></p>

<h4 id="ì •ë¦¬-4">ì •ë¦¬</h4>

<ul>
  <li><a href="https://github.com/NewWisdom/TIL/issues/3#issue-862548280">@ResponsebodyëŠ” ì–´ë–¤ ì—­í• ì„ í•´ì¤„ê¹Œ?</a></li>
  <li><a href="https://github.com/NewWisdom/TIL/issues/4#issue-862590487">@Componentscan</a></li>
  <li><a href="https://github.com/NewWisdom/TIL/issues/5#issue-862591289">ìŠ¤í”„ë§ì˜ DI ë°©ë²•</a></li>
  <li><a href="https://github.com/NewWisdom/TIL/issues/6">Springì—ì„œ request ì²˜ë¦¬ ê³¼ì •</a></li>
</ul>

<h2 id="ì´ë²ˆ-ë¯¸ì…˜ì—ì„œ-ì´ëŸ°-í‚¤ì›Œë“œë“¤ì„-í•™ìŠµí–ˆìŒ-">ì´ë²ˆ ë¯¸ì…˜ì—ì„œ ì´ëŸ° í‚¤ì›Œë“œë“¤ì„ í•™ìŠµí–ˆìŒ ğŸ‘»</h2>

<ul>
  <li><a href="https://github.com/NewWisdom/TIL/issues?q=is%3Aissue+is%3Aopen+label%3Ajwp-chess">ë‚´ ê¹ƒí—™ issueì— ë“±ë¡í–ˆì§€ë¡±</a></li>
</ul>

	  ]]></description>
	</item>

	<item>
	  <title>ğŸ“‹ í…ŒìŠ¤íŠ¸ë¡œ ë°°ìš°ëŠ” Spring Auth ê°•ì˜</title>
	  <link>//lecture-auth</link>
	  <author></author>
	  <pubDate>2021-05-28T19:18:00+09:00</pubDate>
	  <guid>//lecture-auth</guid>
	  <description><![CDATA[
	     <h2 id="í”¼ë“œë°±-ê°•ì˜">í”¼ë“œë°± ê°•ì˜</h2>

<h3 id="ì¸ì¦-í—¤ë”">ì¸ì¦ í—¤ë”</h3>

<p>ë¡œê·¸ì¸ì„ í†µí•´ í† í°ì„ ë°œê¸‰ ë°›ì€ í›„ í—¤ë”ì— Authorizationì— í† í°ì„ ì‹¤ì–´ë³´ë‚¸ë‹¤.<br />
ì™œ êµ³ì´ ì´ í—¤ë”ì— í† í°ì„ ë„£ì–´ ë³´ë‚¼ê¹Œ?</p>

<h3 id="http-ì¸ì¦">HTTP ì¸ì¦</h3>

<p><img src="https://images.velog.io/images/new_wisdom/post/567b6a87-15f7-4409-be6a-2a4baf9b3ffb/image.png" style="zoom:50%;" /></p>

<p>HTTP í”„ë¡œí† ì½œì˜ ì •ì˜ì´ê¸° ë•Œë¬¸ì´ë‹¤.</p>

<ol>
  <li>í´ë¼ì´ì–¸íŠ¸ê°€ â€œ/â€ ìš”ì²­ì„ ë³´ë‚¸ë‹¤.</li>
  <li>ì„œë²„ëŠ” ì ‘ê·¼ì„ í•  ìˆ˜ ìˆëŠ”ì§€ í™•ì¸í•˜ê³ , ì—†ìœ¼ë©´ 401ì„ ë³´ë‚¸ë‹¤.</li>
  <li>ì—¬ê¸°ì„œëŠ” basicì´ë¼ëŠ” ë°©ì‹ìœ¼ë¡œ í† í°ì„ ê²€ì¦í•˜ê³  ìˆë‹¤. ì˜ëª»ë˜ì—ˆìœ¼ë‹ˆ ë‹¤ì‹œ ìš”ì²­í•´!</li>
</ol>

<h3 id="http-ì¸ì¦-ìŠ¤í‚´">HTTP ì¸ì¦ ìŠ¤í‚´</h3>

<h4 id="basic">Basic</h4>

<p><img src="https://images.velog.io/images/new_wisdom/post/0e9a8db3-4221-43a8-84fa-c2f81f371ab1/image.png" style="zoom:33%;" /></p>

<ul>
  <li>base64ë¥¼ ì´ìš©í•´ ì¸ì½”ë”©ëœ ì‚¬ìš©ìì˜ id/pw ìŒì˜ ì¸ì¦ ì •ë³´ë¥¼ ì „ë‹¬</li>
  <li>ì•ˆì „ì„ ìœ„í•´ HTTPS(TLS) ì—°ê²° ìœ„ì—ì„œ ë°œìƒë˜ì–´ì•¼ í•¨</li>
</ul>

<h4 id="bearer">Bearer</h4>

<p><img src="https://images.velog.io/images/new_wisdom/post/d631b9a8-b41d-438e-8038-6299f044616a/image.png" style="zoom:33%;" /></p>

<ul>
  <li>bearer tokenì´ë¼ëŠ” ë³´ì•ˆ í† í°ì„ í™œìš©í•˜ëŠ” ì¸ì¦ ìŠ¤í‚´</li>
  <li>Outh2.0ì—ì„œ ì‚¬ìš©í•˜ê¸° ìœ„í•´ ë§Œë“¤ì–´ì§</li>
</ul>

<h2 id="jwt">JWT</h2>

<ul>
  <li>Json Web Token</li>
  <li>ì›¹ í‘œì¤€ (RFC 7519)</li>
  <li>ìì²´ì ìœ¼ë¡œ ê²€ì¦ë˜ì—ˆìŒì„ ì¦ëª…í•´ì£¼ëŠ” signatureë¥¼ í¬í•¨</li>
  <li>ìƒì„±ì‹œ ê²€ì¦ì´ë‚˜ ê¶Œí•œ ì¸ê°€ ì‹œ í•„ìš”í•œ ê°’ì„ ë„£ì–´ ìƒíƒœë¥¼ ë”°ë¡œ ê´€ë¦¬í•˜ì§€ ì•Šì•„ë„ ë¨</li>
</ul>

<h3 id="í† í°ì˜-êµ¬ì„±">í† í°ì˜ êµ¬ì„±</h3>

<p><img src="https://images.velog.io/images/new_wisdom/post/1bcb51b5-e245-4389-9b50-a6d91bc27d2d/image.png" style="zoom:50%;" /></p>

<h4 id="1-header">1. Header</h4>

<ul>
  <li>í† í°ì— ëŒ€í•œ í•´ì„ ë°©ë²•</li>
  <li>alg : ì‹œê·¸ë‹ˆì²˜ì—ì„œ ì‚¬ìš©í•  ì•Œê³ ë¦¬ì¦˜ ë°©ë²•</li>
  <li>typ : í† í°ì˜ íƒ€ì…</li>
</ul>

<h4 id="2-payload">2. Payload</h4>

<ul>
  <li>í† í°ì˜ ë‚´ìš©, ì „ë‹¬í•  ë‚´ìš©</li>
  <li>payloadì˜ ê°ê°ì˜ ê°’ì„ í´ë ˆì„ì´ë¼ê³  í•¨</li>
  <li>sub : í´ë ˆì„ì˜ ì œëª©</li>
  <li>name :</li>
  <li>iat : ìƒì„± ì‹œê°„</li>
  <li>ì´ ì—­ì‹œë„ base64ë¡œ ì¸ì½”ë”©</li>
</ul>

<h4 id="3-signature">3. Signature</h4>

<ul>
  <li>í—¤ë”ì™€ í˜ì´ë¡œë“œê°€ ë³€ì¡°ë˜ì§€ ì•Šì•˜ìŒì„ ê²€ì¦Œ</li>
  <li>base64ë¡œ ì¸ì½”ë”©ì„ í•˜ê³ , ì•Œê³ ë¦¬ì¦˜ê³¼ í‚¤ê°’ìœ¼ë¡œ í•´ë…</li>
</ul>

<p><strong>basicê³¼ bearer ë‘˜ ë‹¤ base64ë¡œ ì¸ì½”ë”© í•˜ë©´ ì–´ë–»ê²Œ êµ¬ë³„í•˜ë‚˜ìš”?</strong></p>

<p>ì´ëŠ” ì„œë²„ì—ì„œ í˜ì´í¬ì²˜ëŸ¼ ì“¸ ìˆ˜ ìˆì§€!</p>

<p><strong>payloadê°€ ê°™ìœ¼ë©´ í† í° ê°’ë„ ê°™ì•„ì§€ë‚˜ìš”?</strong></p>

<p>ê·¼ë° ì•„ë§ˆ iatê°€ ë‹¬ë¼ì„œ ë‹¤ë¥¼ ìˆ˜ ë°–ì— ì—†ì„ ë“¯</p>

<hr />

<h2 id="dispatcher-servlet">Dispatcher Servlet</h2>

<h3 id="ìš”ì²­ì—-ë”°ë¼-ìˆ˜í–‰í• -ë¡œì§-ë¶„ê¸°">ìš”ì²­ì— ë”°ë¼ ìˆ˜í–‰í•  ë¡œì§ ë¶„ê¸°</h3>

<h3 id="dispatcherservlet-ìœ„ì¹˜">DispatcherServlet ìœ„ì¹˜</h3>

<p><img src="https://images.velog.io/images/new_wisdom/post/a3187c31-d891-43dc-af7a-bb4cde6ab4b0/image.png" style="zoom:50%;" /></p>

<ul>
  <li>Handler ì•ì— Interceptorê°€ ìˆìŒ</li>
</ul>

<p>MVC Config ê°ì²´ë„ ëª¨ë‘ ë¹ˆì´ì—ˆë‹¤.</p>

	  ]]></description>
	</item>


</channel>
</rss>
