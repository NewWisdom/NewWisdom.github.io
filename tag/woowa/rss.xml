<?xml version="1.0" encoding="UTF-8" ?>

<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
<channel>
   
      <title>NewWisdom.github.io/</title>
   
   <link>http://localhost:4000</link>
   <description>ë¸”ë¡œê·¸ ì´ì‚¬ì¤‘... ì•„ì§ ì •ë¦¬ê°€ ì•ˆë˜ì—ˆìŒ...</description>
   <language>ko-KR</language>
   <managingEditor> </managingEditor>
   <atom:link href="rss" rel="self" type="application/rss+xml" />
   
	<item>
	  <title>ğŸ“š atdd-subway-fare ë¯¸ì…˜ ì •ë¦¬</title>
	  <link>//atdd-subway-fare-note</link>
	  <author></author>
	  <pubDate>2021-06-16T10:01:01+09:00</pubDate>
	  <guid>//atdd-subway-fare-note</guid>
	  <description><![CDATA[
	     <h2 id="ìš”ê¸ˆ-ì •ì±…">ìš”ê¸ˆ ì •ì±…</h2>

<p><img src="https://images.velog.io/images/new_wisdom/post/cd715abe-edce-405a-811a-2b9cff62398b/image.png" style="zoom:33%;" /></p>

<p><img src="https://images.velog.io/images/new_wisdom/post/9b90163c-02c0-4f7a-8801-0c1d74a5e47e/image.png" style="zoom: 50%;" /></p>

<ul>
  <li>ë¡œê·¸ì¸ ì‚¬ìš©ìì™€ ë¹„ë¡œê·¸ì¸ ì‚¬ìš©ìë¥¼ êµ¬ë³„í•˜ì—¬ ìš”ê¸ˆ ì •ì±…ì„ ì ìš©</li>
  <li>PathControllerì—ì„œëŠ” í† í°ì´ ì—†ì–´ë„ ì˜ˆì™¸ê°€ ì•„ë‹ˆì—ˆê³ </li>
  <li>MemberControllerì—ì„œëŠ” í† í°ì´ ì—†ìœ¼ë©´ ì˜ˆì™¸ì˜€ê¸°ì— Resolverì—ì„œëŠ” ê°ê°ì— ë§ëŠ” ì²˜ë¦¬ë¥¼ í•´ì£¼ì–´ì•¼ í–ˆìŒ</li>
  <li>ë§¨ ì²˜ìŒ í˜ì–´ë‘ ê¸°ëŠ¥ë§Œ ëŒì•„ê°€ê²Œ êµ¬í˜„í–ˆì„ ë•ŒëŠ” ê¸°ì¡´ì— ìˆëŠ” ë¡œê·¸ì¸ëœ ì‚¬ìš©ìì— ëŒ€í•œ ì¸ê°€ ê³¼ì •ì„ ê±°ì¹˜ëŠ” Resolverë¥¼ ì¬ì‚¬ìš©í•˜ë„ë¡ êµ¬í˜„</li>
  <li>ì´ëŸ¬ê¸° ìœ„í•´ì„œëŠ” ì´ ê°ê°ì— ë§ëŠ” ì²˜ë¦¬ë¥¼ ì¼ê°„ Controllerë¡œ ì˜®ê²¨ì•¼ í–ˆìŒ</li>
</ul>

<h4 id="authenticationprincipalargumentresolver">AuthenticationPrincipalArgumentResolver</h4>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Override</span>
<span class="kd">public</span> <span class="n">Object</span> <span class="nf">resolveArgument</span><span class="o">(</span><span class="n">MethodParameter</span> <span class="n">parameter</span><span class="o">,</span> <span class="n">ModelAndViewContainer</span> <span class="n">mavContainer</span><span class="o">,</span> <span class="n">NativeWebRequest</span> <span class="n">webRequest</span><span class="o">,</span> <span class="n">WebDataBinderFactory</span> <span class="n">binderFactory</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">String</span> <span class="n">credentials</span> <span class="o">=</span> <span class="n">AuthorizationExtractor</span><span class="o">.</span><span class="na">extract</span><span class="o">(</span><span class="n">webRequest</span><span class="o">.</span><span class="na">getNativeRequest</span><span class="o">(</span><span class="n">HttpServletRequest</span><span class="o">.</span><span class="na">class</span><span class="o">));</span>
    <span class="n">LoginMember</span> <span class="n">member</span> <span class="o">=</span> <span class="n">authService</span><span class="o">.</span><span class="na">findMemberByToken</span><span class="o">(</span><span class="n">credentials</span><span class="o">);</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">member</span><span class="o">.</span><span class="na">getId</span><span class="o">()</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">throw</span> <span class="k">new</span> <span class="nf">AuthorizationException</span><span class="o">();</span>
    <span class="o">}</span>
    <span class="k">return</span> <span class="n">member</span><span class="o">;</span>
<span class="o">}</span>
</code></pre></div></div>

<h4 id="membercontrollerì—ì„œ-loginmemberì—-ëŒ€í•œ-ì²˜ë¦¬">MemberControllerì—ì„œ LoginMemberì— ëŒ€í•œ ì²˜ë¦¬</h4>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">private</span> <span class="kt">void</span> <span class="nf">unAuthorizedThrowException</span><span class="o">(</span><span class="nd">@AuthenticationPrincipal</span> <span class="n">LoginMember</span> <span class="n">loginMember</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">loginMember</span><span class="o">.</span><span class="na">getId</span><span class="o">()</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">throw</span> <span class="k">new</span> <span class="nf">AuthorizationException</span><span class="o">();</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<ul>
  <li>idê°€ ì—†ìœ¼ë©´ (ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ì‚¬ìš©ìì´ë©´) ì˜ˆì™¸</li>
</ul>

<h4 id="pathcontrollerì—ì„œ-loginmemberì—-ëŒ€í•œ-ì²˜ë¦¬">PathControllerì—ì„œ LoginMemberì— ëŒ€í•œ ì²˜ë¦¬</h4>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">private</span> <span class="n">LoginMember</span> <span class="nf">unLoginMemberWrapper</span><span class="o">(</span><span class="nd">@AuthenticationPrincipal</span> <span class="n">LoginMember</span> <span class="n">loginMember</span><span class="o">)</span> <span class="o">{</span>
  <span class="k">if</span> <span class="o">(</span><span class="n">loginMember</span><span class="o">.</span><span class="na">getId</span><span class="o">()</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">return</span> <span class="k">new</span> <span class="nf">LoginMember</span><span class="o">(</span><span class="kc">null</span><span class="o">,</span> <span class="kc">null</span><span class="o">,</span> <span class="o">-</span><span class="mi">1</span><span class="o">);</span>
  <span class="o">}</span>
  <span class="k">return</span> <span class="n">loginMember</span><span class="o">;</span>
<span class="o">}</span>
</code></pre></div></div>

<ul>
  <li>idê°€ ì¡´ì¬í•˜ì§€ ì•Šìœ¼ë©´ ageë¥¼ <code class="highlighter-rouge">-1</code> ë¡œ wrap</li>
</ul>

<h5 id="ê·¸ëŸ°ë°-ì´ë ‡ê²Œ-êµ¬í˜„í•˜ê³ -ìƒê°í•œ-ë¬¸ì œì ì´">ê·¸ëŸ°ë° ì´ë ‡ê²Œ êµ¬í˜„í•˜ê³  ìƒê°í•œ ë¬¸ì œì ì´â€¦</h5>

<ul>
  <li>Controllerì—ì„œ ì´ë¯¸ ë¦¬ì¡¸ë¹™ëœ LoginMemberì— ëŒ€í•œ ì²˜ë¦¬ë¥¼ ë˜ ê±´ë“œë¦¬ê³  ìˆë‹¤ëŠ” ëŠë‚Œ</li>
  <li>Controllerì—ì„œ LoginMemberì— ëŒ€í•œ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì„ ì•Œê³  ìˆëŠ” ëŠë‚Œì´ë¼ ê°œì„ ì´ í•„ìš”í•˜ë‹¤ê³  ëŠë‚Œ</li>
  <li>ageë¥¼ -1ë¡œ ê°ì‹¸ì„œ ì´ ê²½ìš° ë¹„ë¡œê·¸ì¸ìë¡œ ê°€ì •í•˜ëŠ” ë¡œì§ì´ ê´œì°®ì€ì§€ ì˜ë¬¸ì„ í’ˆê³  ìˆì—ˆìŒ</li>
</ul>

<h4 id="í˜ì–´ì˜-ë¦¬ë·°ì–´ì—ê²Œ-ì˜¨-í”¼ë“œë°±">í˜ì–´ì˜ ë¦¬ë·°ì–´ì—ê²Œ ì˜¨ í”¼ë“œë°±</h4>

<p><img src="https://images.velog.io/images/new_wisdom/post/8c7d30b2-c0f7-45af-b31f-dfd6a6ef247d/image.png" style="zoom:50%;" /></p>

<ul>
  <li>ì¼ë‹¨ <code class="highlighter-rouge">AuthenticationPrincipalArgumentResolver</code> ì™€ <code class="highlighter-rouge">AgeAuthenticationPrincipalArgumentResolver</code> ë‘ê°œë¡œ ë¶„ë¦¬í•˜ì˜€ìŒ</li>
  <li><code class="highlighter-rouge">AgeAuthenticationPrincipalArgumentResolver</code> ì—ì„œëŠ” ìš”ê¸ˆ ì •ì±…ì— í•„ìš”í•œ ê°’ì¸ <code class="highlighter-rouge">age</code> ë§Œ ë°˜í™˜í•˜ë„ë¡ ë¦¬íŒ©í† ë§</li>
</ul>

<h4 id="ageauthenticationprincipalargumentresolver">AgeAuthenticationPrincipalArgumentResolver</h4>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">AgeAuthenticationPrincipalArgumentResolver</span> <span class="kd">implements</span> <span class="n">HandlerMethodArgumentResolver</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="n">AuthService</span> <span class="n">authService</span><span class="o">;</span>

    <span class="kd">public</span> <span class="nf">AgeAuthenticationPrincipalArgumentResolver</span><span class="o">(</span><span class="n">AuthService</span> <span class="n">authService</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">authService</span> <span class="o">=</span> <span class="n">authService</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">supportsParameter</span><span class="o">(</span><span class="n">MethodParameter</span> <span class="n">parameter</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">parameter</span><span class="o">.</span><span class="na">hasParameterAnnotation</span><span class="o">(</span><span class="n">AgeAuthenticationPrincipal</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="n">Object</span> <span class="nf">resolveArgument</span><span class="o">(</span><span class="n">MethodParameter</span> <span class="n">parameter</span><span class="o">,</span> <span class="n">ModelAndViewContainer</span> <span class="n">mavContainer</span><span class="o">,</span> <span class="n">NativeWebRequest</span> <span class="n">webRequest</span><span class="o">,</span> <span class="n">WebDataBinderFactory</span> <span class="n">binderFactory</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">String</span> <span class="n">credentials</span> <span class="o">=</span> <span class="n">AuthorizationExtractor</span><span class="o">.</span><span class="na">extract</span><span class="o">(</span><span class="n">Objects</span><span class="o">.</span><span class="na">requireNonNull</span><span class="o">(</span><span class="n">webRequest</span><span class="o">.</span><span class="na">getNativeRequest</span><span class="o">(</span><span class="n">HttpServletRequest</span><span class="o">.</span><span class="na">class</span><span class="o">)));</span>
        <span class="n">LoginMember</span> <span class="n">memberByToken</span> <span class="o">=</span> <span class="n">authService</span><span class="o">.</span><span class="na">findMemberByToken</span><span class="o">(</span><span class="n">credentials</span><span class="o">);</span>
        <span class="k">return</span> <span class="n">memberByToken</span><span class="o">.</span><span class="na">getAge</span><span class="o">();</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<ul>
  <li><code class="highlighter-rouge">Integer</code> í˜•ì¸ ageë¥¼ ë°˜í™˜í•˜ë„ë¡â€¦.
    <ul>
      <li>ë°˜í™˜íƒ€ì…ì„ ëª…ì‹œì ìœ¼ë¡œ ì ì–´ì¤„ê±¸ ê·¸ë¬ë„¤</li>
    </ul>
  </li>
</ul>

<h4 id="pathserviceì˜-findpath">PathServiceì˜ findPath()</h4>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="n">PathResponse</span> <span class="nf">findPath</span><span class="o">(</span><span class="n">Integer</span> <span class="n">age</span><span class="o">,</span> <span class="n">Long</span> <span class="n">source</span><span class="o">,</span> <span class="n">Long</span> <span class="n">target</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">try</span> <span class="o">{</span>
        <span class="n">List</span><span class="o">&lt;</span><span class="n">Line</span><span class="o">&gt;</span> <span class="n">lines</span> <span class="o">=</span> <span class="n">lineService</span><span class="o">.</span><span class="na">findLines</span><span class="o">();</span>
        <span class="n">Station</span> <span class="n">sourceStation</span> <span class="o">=</span> <span class="n">stationService</span><span class="o">.</span><span class="na">findStationById</span><span class="o">(</span><span class="n">source</span><span class="o">);</span>
        <span class="n">Station</span> <span class="n">targetStation</span> <span class="o">=</span> <span class="n">stationService</span><span class="o">.</span><span class="na">findStationById</span><span class="o">(</span><span class="n">target</span><span class="o">);</span>
        <span class="n">SubwayPath</span> <span class="n">subwayPath</span> <span class="o">=</span> <span class="n">pathFinder</span><span class="o">.</span><span class="na">findPath</span><span class="o">(</span><span class="n">lines</span><span class="o">,</span> <span class="n">sourceStation</span><span class="o">,</span> <span class="n">targetStation</span><span class="o">);</span>
        <span class="kt">int</span> <span class="n">distance</span> <span class="o">=</span> <span class="n">subwayPath</span><span class="o">.</span><span class="na">calculateDistance</span><span class="o">();</span>
        <span class="kt">int</span> <span class="n">lineFare</span> <span class="o">=</span> <span class="n">subwayPath</span><span class="o">.</span><span class="na">getMaxLineFare</span><span class="o">();</span>
        <span class="n">SubwayPathFare</span> <span class="n">subwayPathFare</span> <span class="o">=</span> <span class="k">new</span> <span class="n">SubwayPathFare</span><span class="o">(</span><span class="n">age</span><span class="o">,</span> <span class="n">distance</span><span class="o">,</span> <span class="n">lineFare</span><span class="o">);</span>
        <span class="k">return</span> <span class="n">PathResponseAssembler</span><span class="o">.</span><span class="na">assemble</span><span class="o">(</span><span class="n">subwayPath</span><span class="o">,</span> <span class="n">subwayPathFare</span><span class="o">);</span>
    <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">throw</span> <span class="k">new</span> <span class="nf">InvalidPathException</span><span class="o">();</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<h4 id="subwaypathfare">SubwayPathFare</h4>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">SubwayPathFare</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="n">Integer</span> <span class="n">age</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="kt">int</span> <span class="n">distance</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="kt">int</span> <span class="n">lineFare</span><span class="o">;</span>

    <span class="kd">public</span> <span class="nf">SubwayPathFare</span><span class="o">(</span><span class="n">Integer</span> <span class="n">age</span><span class="o">,</span> <span class="kt">int</span> <span class="n">distance</span><span class="o">,</span> <span class="kt">int</span> <span class="n">lineFare</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">age</span> <span class="o">=</span> <span class="n">wrapAge</span><span class="o">(</span><span class="n">age</span><span class="o">);</span>
        <span class="k">this</span><span class="o">.</span><span class="na">distance</span> <span class="o">=</span> <span class="n">distance</span><span class="o">;</span>
        <span class="k">this</span><span class="o">.</span><span class="na">lineFare</span> <span class="o">=</span> <span class="n">lineFare</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">private</span> <span class="kt">int</span> <span class="nf">wrapAge</span><span class="o">(</span><span class="n">Integer</span> <span class="n">age</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">age</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">return</span> <span class="o">-</span><span class="mi">1</span><span class="o">;</span>
        <span class="o">}</span>
        <span class="k">return</span> <span class="n">age</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kt">int</span> <span class="nf">getFare</span><span class="o">()</span> <span class="o">{</span>
        <span class="kt">int</span> <span class="n">fareByDistance</span> <span class="o">=</span> <span class="n">FareCalculatorByDistance</span><span class="o">.</span><span class="na">from</span><span class="o">(</span><span class="n">distance</span><span class="o">);</span>
        <span class="k">return</span> <span class="n">FareAdjusterByAge</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="n">age</span><span class="o">,</span> <span class="n">fareByDistance</span><span class="o">,</span> <span class="n">lineFare</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<ul>
  <li>ìš”ê¸ˆ ì •ì±…ì„ í•´ë‹¹ ë„ë©”ì¸ì—ì„œ Enumì¸ <code class="highlighter-rouge">FareCalculatorByDistance</code> ì™€ <code class="highlighter-rouge">FareAdjusterByAge</code> ë¥¼ í†µí•´ ê³„ì‚°í•˜ê³  ìˆì—ˆìŒ</li>
  <li><code class="highlighter-rouge">wrapAge()</code> ë¥¼ í†µí•´ null ê°’ìœ¼ë¡œ ageê°€ ë“¤ì–´ì˜¤ë©´ <code class="highlighter-rouge">FareAdjusterByAge.of()</code>ì—ì„œ ìŠ¤íŠ¸ë¦¼ì„ ëŒë¦¬ëŠ”ë°, ì´ì— ì˜ˆì™¸ê°€ ë°œìƒí•˜ì§€ ì•Šë„ë¡ -1ë¡œ í¬ì¥</li>
</ul>

<h5 id="ì°¸ê³ ---fareadjusterbyageof">ì°¸ê³  - FareAdjusterByAge.of()</h5>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">static</span> <span class="kt">int</span> <span class="nf">of</span><span class="o">(</span><span class="kt">int</span> <span class="n">age</span><span class="o">,</span> <span class="kt">int</span> <span class="n">fare</span><span class="o">,</span> <span class="kt">int</span> <span class="n">lineFare</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">return</span> <span class="n">Arrays</span><span class="o">.</span><span class="na">stream</span><span class="o">(</span><span class="n">values</span><span class="o">())</span>
            <span class="o">.</span><span class="na">filter</span><span class="o">(</span><span class="n">ageRange</span> <span class="o">-&gt;</span> <span class="n">ageRange</span><span class="o">.</span><span class="na">minInclusive</span> <span class="o">&lt;=</span> <span class="n">age</span> <span class="o">&amp;&amp;</span> <span class="n">age</span> <span class="o">&lt;</span> <span class="n">ageRange</span><span class="o">.</span><span class="na">maxExclusive</span><span class="o">)</span>
            <span class="o">.</span><span class="na">map</span><span class="o">(</span><span class="n">calculator</span> <span class="o">-&gt;</span> <span class="n">calculator</span><span class="o">.</span><span class="na">adjuster</span><span class="o">.</span><span class="na">apply</span><span class="o">(</span><span class="n">fare</span><span class="o">,</span> <span class="n">lineFare</span><span class="o">))</span>
            <span class="o">.</span><span class="na">findAny</span><span class="o">()</span>
            <span class="o">.</span><span class="na">orElse</span><span class="o">(</span><span class="n">fare</span> <span class="o">+</span> <span class="n">lineFare</span><span class="o">);</span>
<span class="o">}</span>
</code></pre></div></div>

<h4 id="farecalculatorbydistance---ê±°ë¦¬ë³„-ìš”ê¸ˆ-ì •ì±…">FareCalculatorByDistance - ê±°ë¦¬ë³„ ìš”ê¸ˆ ì •ì±…</h4>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">enum</span> <span class="n">FareCalculatorByDistance</span> <span class="o">{</span>
    <span class="n">BASE</span><span class="o">(</span><span class="mi">0</span><span class="o">,</span> <span class="n">Constants</span><span class="o">.</span><span class="na">BASE_MAX_BOUNDARY</span><span class="o">,</span> <span class="n">distance</span> <span class="o">-&gt;</span> <span class="n">Constants</span><span class="o">.</span><span class="na">BASE_FARE</span><span class="o">),</span>
    <span class="n">FIRST_ADDITIONAL</span><span class="o">(</span><span class="n">Constants</span><span class="o">.</span><span class="na">BASE_MAX_BOUNDARY</span><span class="o">,</span> <span class="n">Constants</span><span class="o">.</span><span class="na">FIRST_ADDITIONAL_MAX_BOUNDARY</span><span class="o">,</span>
            <span class="o">(</span><span class="n">distance</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="n">Constants</span><span class="o">.</span><span class="na">BASE_FARE</span> <span class="o">+</span> <span class="o">(</span><span class="kt">int</span><span class="o">)</span> <span class="o">((</span><span class="n">Math</span><span class="o">.</span><span class="na">ceil</span><span class="o">((</span><span class="n">distance</span> <span class="o">-</span> <span class="n">Constants</span><span class="o">.</span><span class="na">BASE_MAX_BOUNDARY</span> <span class="o">-</span> <span class="mi">1</span><span class="o">)</span> <span class="o">/</span> <span class="mi">5</span><span class="o">))</span> <span class="o">+</span> <span class="mi">1</span><span class="o">)</span> <span class="o">*</span> <span class="n">Constants</span><span class="o">.</span><span class="na">EXTRA_FARE</span><span class="o">),</span>
    <span class="n">SECOND_ADDITIONAL</span><span class="o">(</span><span class="n">Constants</span><span class="o">.</span><span class="na">FIRST_ADDITIONAL_MAX_BOUNDARY</span><span class="o">,</span> <span class="n">Integer</span><span class="o">.</span><span class="na">MAX_VALUE</span><span class="o">,</span>
            <span class="o">(</span><span class="n">distance</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="n">Constants</span><span class="o">.</span><span class="na">BASE_FARE</span> <span class="o">+</span> <span class="mi">800</span> <span class="o">+</span> <span class="o">(</span><span class="kt">int</span><span class="o">)</span> <span class="o">((</span><span class="n">Math</span><span class="o">.</span><span class="na">ceil</span><span class="o">((</span><span class="n">distance</span> <span class="o">-</span> <span class="n">Constants</span><span class="o">.</span><span class="na">FIRST_ADDITIONAL_MAX_BOUNDARY</span> <span class="o">-</span> <span class="mi">1</span><span class="o">)</span> <span class="o">/</span> <span class="mi">8</span><span class="o">))</span> <span class="o">+</span> <span class="mi">1</span><span class="o">)</span> <span class="o">*</span> <span class="n">Constants</span><span class="o">.</span><span class="na">EXTRA_FARE</span><span class="o">);</span>


    <span class="kd">private</span> <span class="kd">final</span> <span class="kt">int</span> <span class="n">minExclusive</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="kt">int</span> <span class="n">maxInclusive</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="n">UnaryOperator</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">&gt;</span> <span class="n">calculator</span><span class="o">;</span>

    <span class="n">FareCalculatorByDistance</span><span class="o">(</span><span class="kt">int</span> <span class="n">minExclusive</span><span class="o">,</span> <span class="kt">int</span> <span class="n">maxInclusive</span><span class="o">,</span> <span class="n">UnaryOperator</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">&gt;</span> <span class="n">calculator</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">minExclusive</span> <span class="o">=</span> <span class="n">minExclusive</span><span class="o">;</span>
        <span class="k">this</span><span class="o">.</span><span class="na">maxInclusive</span> <span class="o">=</span> <span class="n">maxInclusive</span><span class="o">;</span>
        <span class="k">this</span><span class="o">.</span><span class="na">calculator</span> <span class="o">=</span> <span class="n">calculator</span><span class="o">;</span>
    <span class="o">}</span>
</code></pre></div></div>

<h4 id="fareadjusterbyage---ë‚˜ì´ë³„-ìš”ê¸ˆ-ì •ì±…">FareAdjusterByAge - ë‚˜ì´ë³„ ìš”ê¸ˆ ì •ì±…</h4>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">enum</span> <span class="n">FareAdjusterByAge</span> <span class="o">{</span>
    <span class="n">PRE_SCHOOLED</span><span class="o">(</span><span class="mi">0</span><span class="o">,</span> <span class="n">Constants</span><span class="o">.</span><span class="na">PRE_SCHOOL_MAX_BOUNDARY</span><span class="o">,</span> <span class="n">getIntegerBinaryOperator</span><span class="o">(</span><span class="mi">0</span><span class="o">)),</span>
    <span class="n">SCHOOL_AGED</span><span class="o">(</span><span class="n">Constants</span><span class="o">.</span><span class="na">PRE_SCHOOL_MAX_BOUNDARY</span><span class="o">,</span> <span class="n">Constants</span><span class="o">.</span><span class="na">SCHOOL_AGED_MAX_BOUNDARY</span><span class="o">,</span> <span class="n">getIntegerBinaryOperator</span><span class="o">(</span><span class="n">Constants</span><span class="o">.</span><span class="na">SCHOOL_AGED_RATE</span><span class="o">)),</span>
    <span class="n">ADOLESCENT</span><span class="o">(</span><span class="n">Constants</span><span class="o">.</span><span class="na">SCHOOL_AGED_MAX_BOUNDARY</span><span class="o">,</span> <span class="n">Constants</span><span class="o">.</span><span class="na">ADOLESCENT_MAX_BOUNDARY</span><span class="o">,</span> <span class="n">getIntegerBinaryOperator</span><span class="o">(</span><span class="n">Constants</span><span class="o">.</span><span class="na">ADOLESCENT_RATE</span><span class="o">));</span>

    <span class="kd">private</span> <span class="kd">final</span> <span class="kt">int</span> <span class="n">minInclusive</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="kt">int</span> <span class="n">maxExclusive</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="n">BinaryOperator</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">&gt;</span> <span class="n">adjuster</span><span class="o">;</span>

    <span class="n">FareAdjusterByAge</span><span class="o">(</span><span class="kt">int</span> <span class="n">minInclusive</span><span class="o">,</span> <span class="kt">int</span> <span class="n">maxExclusive</span><span class="o">,</span> <span class="n">BinaryOperator</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">&gt;</span> <span class="n">adjuster</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">minInclusive</span> <span class="o">=</span> <span class="n">minInclusive</span><span class="o">;</span>
        <span class="k">this</span><span class="o">.</span><span class="na">maxExclusive</span> <span class="o">=</span> <span class="n">maxExclusive</span><span class="o">;</span>
        <span class="k">this</span><span class="o">.</span><span class="na">adjuster</span> <span class="o">=</span> <span class="n">adjuster</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">private</span> <span class="kd">static</span> <span class="n">BinaryOperator</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">&gt;</span> <span class="nf">getIntegerBinaryOperator</span><span class="o">(</span><span class="kt">double</span> <span class="n">rate</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="o">(</span><span class="n">fare</span><span class="o">,</span> <span class="n">lineFare</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="o">(</span><span class="kt">int</span><span class="o">)</span> <span class="o">(((</span><span class="n">fare</span> <span class="o">+</span> <span class="n">lineFare</span><span class="o">)</span> <span class="o">-</span> <span class="mi">350</span><span class="o">)</span> <span class="o">*</span> <span class="n">rate</span><span class="o">);</span>
    <span class="o">}</span>
</code></pre></div></div>

<h4 id="ë¦¬ë·°ì–´ì—ê²Œ-ë°›ì€-í”¼ë“œë°±">ë¦¬ë·°ì–´ì—ê²Œ ë°›ì€ í”¼ë“œë°±</h4>

<p><img src="https://images.velog.io/images/new_wisdom/post/a9f5ac3d-548f-4f90-ad43-e3af67abc64a/image.png" style="zoom:50%;" /></p>

<ul>
  <li>ë¦¬ë·°ì–´ì˜ ì˜ë„ëŠ” Memberë¥¼ ë‚˜íƒ€ë‚´ëŠ” ë„ë©”ì¸ì—ì„œ ageë¥¼ nullableí•˜ê²Œ ë‘ê³  ì´ë¥¼ ì²˜ë¦¬í•˜ëŠ” ê²ƒì´ ë” ëª…í™•í•  ê²ƒ ê°™ë‹¤í•˜ì‹¬</li>
</ul>

<h3 id="ì•„ì‰¬ìš´-ì ">ì•„ì‰¬ìš´ ì </h3>

<h4 id="ë‚˜ì´ë³„-ìš”ê¸ˆì •ì±…ì„-ì ìš©í• -ë•Œ-member-ë„ë©”ì¸ì„-ì‚¬ìš©í•´ë³¼ê±¸">ë‚˜ì´ë³„ ìš”ê¸ˆì •ì±…ì„ ì ìš©í•  ë•Œ Member ë„ë©”ì¸ì„ ì‚¬ìš©í•´ë³¼ê±¸!</h4>

<p>í˜„ì¬ ê²½ë¡œ ì¡°íšŒë¥¼ í•  ë•ŒëŠ” member ë„ë©”ì¸ì´ ë„˜ì–´ì˜¤ì§€ ì•Šê³  age ê°’ë§Œ ë„˜ì–´ì˜¤ë„ë¡ êµ¬í˜„í–ˆì—ˆë‹¤.<br />
ê·¸ëŸ°ë° AgeëŠ” Memberì— ì¢…ì†ë˜ëŠ” í•„ë“œì¸ë° ì´ë¥¼ ë¹¼ì„œ ë…ë¦½ì ìœ¼ë¡œ ì²˜ë¦¬í•˜ê³  ìˆëŠ”ê²Œ ì§€ê¸ˆë³´ë‹ˆ ë§ˆìŒì— ë“¤ì§€ ì•ŠëŠ”ë‹¤.<br />
ë§Œì•½ Memberì˜ ë‹¤ë¥¸ í•„ë“œë“¤ë„ ìš”ê¸ˆì •ì±…ì— ì˜í–‰ì„ ì£¼ê²Œ ëœë‹¤ë©´ ìœ ì§€ë³´ìˆ˜ê°€ ì–´ë ¤ìš´ ì½”ë“œê°€ ëœë‹¤.<br />
í¬ë£¨ë“¤ì´ë‘ ì´ì•¼ê¸°ë¥¼ í•´ë³´ë‹ˆ í•œ ë¦¬ì¡¸ë²„ì—ì„œ Memberë¥¼ ë°˜í™˜í•´ì£¼ëŠ”ë°, ì´ ë°˜í™˜ ë„ë©”ì¸ì„ í•œ ì¸í„°í˜ì´ìŠ¤(ì˜ˆë¥¼ ë“¤ë©´ Member)ë¥¼ ë§Œë“¤ê³  ì´ë¥¼ êµ¬í˜„í•œ <code class="highlighter-rouge">Guest</code>, <code class="highlighter-rouge">LoginMember</code> ë¡œ ë¡œê·¸ì¸, ë¹„ë¡œê·¸ì¸ ì‚¬ìš©ìë¥¼ êµ¬ë³„í•˜ì—¬ ë¡œì§ì„ ìˆ˜í–‰í•˜ëŠ” ë°©ë²•ë„ ìˆë‹¤ê³  í•œë‹¤.</p>

<p>ì´ëŸ¬ë©´ ë¦¬ì¡¸ë²„ë¥¼ ë‚˜ëˆŒ í•„ìš”ë„ ì—†ê³  Memberê°€ ageë¥¼ ê°€ì§€ê³  ë‚˜ì´ì— ê´€í•œ ìš”ê¸ˆ ì •ì±…ì„ ìˆ˜í–‰í•  ë•Œ í•´ë‹¹ ë„ë©”ì¸ì—ê²Œ ë¬¼ì–´ì„œ ì²˜ë¦¬í•  ìˆ˜ ìˆì„ ê²ƒ ê°™ë‹¤.</p>

<h4 id="enumì—-predicateë¥¼-ê°€ì§-í• ê±¸">Enumì— Predicateë¥¼ ê°€ì§ í• ê±¸!</h4>

<p><img src="https://images.velog.io/images/new_wisdom/post/a53fbb31-926c-4123-813c-72f4d7fda9ca/image.png" style="zoom: 50%;" /></p>

<p>ë˜í•œ ê°ê° ìš”ê¸ˆ ì •ì±…ì„ Enumìœ¼ë¡œ êµ¬í˜„í•˜ì˜€ëŠ”ë°, ì—¬ê¸°ì„œ ìƒìˆ˜ë¥¼ ì“°ë‹ˆ ê°€ë…ì„±ì´ ë§¤ìš° ë–¨ì–´ì§€ëŠ” ëŠë‚Œì´ë‹¤.</p>

<p><img src="https://images.velog.io/images/new_wisdom/post/1d4bfdf8-ddba-44dc-83be-af5f15860ae8/image.png" style="zoom:33%;" /></p>

<p>ìƒìˆ˜ë¥¼ ì“´ ì´ìœ ëŠ” ìœ„ì˜ í”¼ë“œë°±ìœ¼ë¡œ ë§¤ì§ ë„˜ë²„ì— ì˜ë¯¸ë¥¼ ë¶€ì—¬í•˜ê³  ì‹¶ì—ˆìœ¼ë‚˜â€¦ <br />
ì´ë ‡ê²Œ í•˜ë‹ˆ ì˜¤íˆë ¤ ê°€ë…ì„±ì„ í—¤ì¹˜ëŠ” ëŠë‚Œì´ì—ˆê³  ë§ˆì§€ë§‰ ë¦¬ë·°ëŒ€ë¡œ Enum ì•ˆì— ë²”ìœ„ë¥¼ íŒë‹¨í•˜ëŠ” <code class="highlighter-rouge">Predicate</code> ë¥¼ ê°€ì§€ë„ë¡ í• ê±¸ ê·¸ë¬ë‹¤.</p>

<h2 id="í”„ë¡ íŠ¸ì—”ë“œì™€ì˜-í˜‘ì—…">í”„ë¡ íŠ¸ì—”ë“œì™€ì˜ í˜‘ì—…</h2>

<ul>
  <li>ë°±ì—”ë“œ 4, í”„ë¡ íŠ¸ì—”ë“œ 2ëª… ì •ë„ì”© íŒ€ì„ ì´ë£¨ì–´ í˜‘ì—…í•˜ëŠ” ë¯¸ì…˜ì´ì—ˆìŒ</li>
  <li><a href="https://www.notion.so/4b3b784386a246babcdef0bda179babb">í•´ë‹¹ ë¬¸ì„œ</a> ì— ìˆëŠ” í”„ë¡ íŠ¸ì—”ë“œ ìš”êµ¬ì‚¬í•­ì„ ë¼ˆëŒ€ì½”ë“œì— ë°˜ì˜í•´ ë‚˜ê°</li>
</ul>

<h2 id="api-ë¬¸ì„œí™”">API ë¬¸ì„œí™”</h2>

<ul>
  <li>Spring Rest Docsë¥¼ í†µí•´ API ë¬¸ì„œí™” ì‘ì—…ì„ ì§„í–‰</li>
  <li>ê¸°ì¡´ì— ìˆëŠ” RestAssured í…ŒìŠ¤íŠ¸ë¥¼ ì´ìš©í•´ APIë¥¼ ë§Œë“¤ìˆ˜ë„ ìˆëŠ”ë°, í˜ì–´ë‘ ê°™ì´ ì‹œë„í•˜ë‹¤ê°€ ê³„ì† ì˜¤ë¥˜ë‚˜ì„œâ€¦.</li>
  <li>ê²°êµ­ MockMvcë¡œ í…ŒìŠ¤íŠ¸ ì½”ë“œ ë‹¤ì‹œì§œì„œ API ë¬¸ì„œë¥¼ ë§Œë“¤ì—ˆìŒ</li>
  <li>ë‹¤ë¥¸ í¬ë£¨ê°€ RestAssuredë¡œ ë¬¸ì„œë¥¼ ë§Œë“¤ì—ˆë˜ë° ê·¸ê±° ë³´ê³  ì‹œë„í•´ë´ì•¼ì§€â€¦</li>
  <li>ë˜ ë¦¬ë·°ì–´ê°€ ì œì‹œí•œ ë°©í–¥ìœ¼ë¡œ API ë¬¸ì„œ ë§Œë“œëŠ” í…ŒìŠ¤íŠ¸ ì½”ë“œë¥¼ ì¡°ê¸ˆ ìˆ˜ì •í–ˆë”ë‹ˆ ë” ì¢‹ì€ ë¬¸ì„œë¥¼ ë§Œë“¤ ìˆ˜ ìˆì—ˆìŒ</li>
</ul>

<h4 id="controllertest">ControllerTest</h4>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@ActiveProfiles</span><span class="o">(</span><span class="s">"test"</span><span class="o">)</span>
<span class="nd">@AutoConfigureRestDocs</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">ControllerTest</span> <span class="o">{</span>
    <span class="nd">@Autowired</span>
    <span class="kd">public</span> <span class="n">MockMvc</span> <span class="n">mockMvc</span><span class="o">;</span>

    <span class="nd">@Autowired</span>
    <span class="kd">public</span> <span class="n">ObjectMapper</span> <span class="n">objectMapper</span><span class="o">;</span>

    <span class="kd">protected</span> <span class="kd">static</span> <span class="n">OperationRequestPreprocessor</span> <span class="nf">getDocumentRequest</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="nf">preprocessRequest</span><span class="o">(</span>
                <span class="n">modifyUris</span><span class="o">()</span>
                        <span class="o">.</span><span class="na">scheme</span><span class="o">(</span><span class="s">"https"</span><span class="o">)</span>
                        <span class="o">.</span><span class="na">host</span><span class="o">(</span><span class="s">"newwisdom-subway.p-e.kr"</span><span class="o">)</span>
                        <span class="o">.</span><span class="na">removePort</span><span class="o">(),</span>
                <span class="n">prettyPrint</span><span class="o">());</span>
    <span class="o">}</span>

    <span class="kd">protected</span> <span class="kd">static</span> <span class="n">OperationResponsePreprocessor</span> <span class="nf">getDocumentResponse</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="nf">preprocessResponse</span><span class="o">(</span><span class="n">prettyPrint</span><span class="o">());</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<ul>
  <li>API ë¬¸ì„œ ë§Œë“œëŠ”ë° í•„ìš”í•œ MockMvc í…ŒìŠ¤íŠ¸ë“¤ì€ ìœ„ í´ë˜ìŠ¤ë¥¼ ìƒì†ë°›ê³  ìˆìŒ</li>
  <li>ë¦¬ë·°ì–´ì˜ ì œì•ˆì„ í†µí•´ <code class="highlighter-rouge">getDocumentRequest()</code>ì™€ <code class="highlighter-rouge">getDocumentResponse()</code> ì„ ì¶”ê°€</li>
</ul>

<p><img src="https://images.velog.io/images/new_wisdom/post/d4396804-6e9e-4046-a749-99c2cbe085db/image.png" style="zoom: 50%;" /></p>

<p><img src="https://images.velog.io/images/new_wisdom/post/edaba672-3c4a-481f-984e-e08fa2ba6f20/image.png" style="zoom:50%;" /></p>

<h2 id="í…ŒìŠ¤íŠ¸-ì½”ë“œì˜-ê°€ë…ì„±">í…ŒìŠ¤íŠ¸ ì½”ë“œì˜ ê°€ë…ì„±</h2>

<p><img src="https://images.velog.io/images/new_wisdom/post/ab0ebe3f-3560-4b80-a470-781c1731354f/image.png" style="zoom:50%;" /></p>

<p><img src="https://images.velog.io/images/new_wisdom/post/24757641-e6c6-4a74-b84a-7a014edfc99c/image.png" style="zoom:50%;" /></p>

<ul>
  <li>ì´ë²ˆ ë¦¬ë·°ì–´ê°€ í…ŒìŠ¤íŠ¸ ì½”ë“œì—ì„œ ê°€ë…ì„±ì„ ì§€í‚¤ì§€ ëª»í•œ ë¶€ë¶„ë“¤ì„ ë§ì´ í”¼ë“œë°± í•´ì£¼ì—ˆìŒ</li>
  <li>í…ŒìŠ¤íŠ¸ ì½”ë“œë„ í•˜ë‚˜ì˜ ë¬¸ì„œì´ë©° ìœ ì§€ë³´ìˆ˜ ëŒ€ìƒì´ê¸° ë•Œë¬¸ì— ê°€ë…ì„±ì„ ê³ ë ¤í•´ì•¼ í•œë‹¤ëŠ” ê²ƒì„ ëŠê¼ˆìŒ</li>
  <li>ì„œë¡œ ë‹¤ë¥¸ í…ŒìŠ¤íŠ¸ì—ì„œ ê³µí†µìœ¼ë¡œ ì“°ì´ëŠ” ë©”ì„œë“œë“¤ì€ ìƒìœ„ í´ë˜ìŠ¤ì¸ AcceptanceTestë¡œ ëŒì–´ ì˜¬ë¦¼</li>
  <li>í…ŒìŠ¤íŠ¸ì— ì“°ì´ëŠ” ë³€ìˆ˜ëª…ë“¤ë„ ë§¥ë½ì„ íŒŒì•…í•˜ê¸° ì‰½ë„ë¡ ë³€ê²½</li>
  <li>ìƒìˆ˜ì²˜ë¦¬ë„ ì‹ ê²½ì”€</li>
</ul>

<h2 id="ì˜ˆì™¸-ì²˜ë¦¬">ì˜ˆì™¸ ì²˜ë¦¬</h2>

<p><img src="https://images.velog.io/images/new_wisdom/post/2518ddc4-c4ce-4a7a-8ee1-49becedb7936/image.png" style="zoom: 50%;" /></p>

<ul>
  <li>â€œì¼ë‹¨ í”„ë¡ íŠ¸ì˜ ìš”êµ¬ì‚¬í•­ ë‹¤ ë°˜ì˜í•˜ë„ë¡ êµ¬í˜„í•´ë³´ì!â€ë¡œ ì¡ê³  í–ˆë”ë‹ˆ ë¬´ìˆ˜í•œ ì»¤ìŠ¤í…€ ì˜ˆì™¸ê°€ ë§Œë“¤ì–´ì¡Œë‹¤â€¦^ã… ^</li>
  <li>ì´ë¥¼ ê°œì„ í•  ë°©ë²•ì„ ì°¾ë‹¤ê°€â€¦ í¬ë£¨ë“¤í•œí…Œ ë“¤ì€ <a href="https://cheese10yun.github.io/spring-guide-exception/">Spring Guide - Exception ì „ëµ</a> ì„ ì ìš©í•´ë³´ê¸°ë¡œ~</li>
  <li>RuntimeExceptionì„ ìƒì†ë°›ëŠ” BuisnessExceptionì„ ë§Œë“¤ê³  í•„ë“œì— ìƒíƒœì½”ë“œì™€ ErrorMessage(DTO)ë¥¼ ê°€ì§€ë„ë¡ êµ¬í˜„</li>
  <li>ì´ë¥¼ ìƒì†í•˜ëŠ” ìƒíƒœì½”ë“œ 400ì¸ BusinessExceptionê³¼ ìƒíƒœì½”ë“œ 401ì¸ AuthorizationExceptionì„ ë§Œë“¦</li>
  <li>ë˜ ì´ë¥¼ ìƒì†ë°›ëŠ” ê°ê°ì˜ í´ë¼ì´ì–¸íŠ¸ì˜ ìš”êµ¬ì‚¬í•­ì— ë§ëŠ” ì»¤ìŠ¤í…€ ì˜ˆì™¸ ë§Œë“¦</li>
  <li>
    <p>ControllerAdviceì—ì„œëŠ” ë‹¤ìŒê³¼ ê°™ì´ BuisnessExceptionì„ ì¡ê³  ì´ ì˜ˆì™¸ì—ì„œ ìƒíƒœì½”ë“œì™€ ì˜ˆì™¸ ë©”ì‹œì§€ë¥¼ êº¼ë‚´ë„ë¡ êµ¬í˜„</p>
  </li>
  <li>ì´ë ‡ê²Œ ë˜ë©´ ì–´ë“œë°”ì´ìŠ¤ì—ì„œ ìˆ˜ë§ì€ ì»¤ìŠ¤í…€ ì˜ˆì™¸ë“¤ì„ BuisnessException í•˜ë‚˜ë§Œ ì¡ê³  ì²˜ë¦¬í•  ìˆ˜ ìˆìŒ</li>
  <li>ìƒíƒœì½”ë“œì— ë”°ë¥¸ í´ë˜ìŠ¤ë¥¼ ë‘ì–´ ì´ê°€ ë³€ê²½ë˜ì–´ë„ ìœ ì§€ë³´ìˆ˜ê°€ ì‰¬ì›€</li>
</ul>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@ExceptionHandler</span><span class="o">(</span><span class="n">BusinessException</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>
<span class="kd">public</span> <span class="n">ResponseEntity</span><span class="o">&lt;</span><span class="n">ErrorMessage</span><span class="o">&gt;</span> <span class="nf">handleRuntimeException</span><span class="o">(</span><span class="n">BusinessException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>

  <span class="k">return</span> <span class="n">ResponseEntity</span><span class="o">.</span><span class="na">status</span><span class="o">(</span><span class="n">e</span><span class="o">.</span><span class="na">getHttpStatus</span><span class="o">()).</span><span class="na">body</span><span class="o">(</span><span class="n">e</span><span class="o">.</span><span class="na">getErrorMessage</span><span class="o">());</span>
<span class="o">}</span>
</code></pre></div></div>

<h4 id="businessexception">BusinessException</h4>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">BusinessException</span> <span class="kd">extends</span> <span class="n">RuntimeException</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="n">HttpStatus</span> <span class="n">httpStatus</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="n">ErrorMessage</span> <span class="n">errorMessage</span><span class="o">;</span>

    <span class="kd">public</span> <span class="nf">BusinessException</span><span class="o">(</span><span class="n">HttpStatus</span> <span class="n">httpStatus</span><span class="o">,</span> <span class="n">String</span> <span class="n">errorMessage</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">(</span><span class="n">httpStatus</span><span class="o">,</span> <span class="k">new</span> <span class="n">ErrorMessage</span><span class="o">(</span><span class="n">errorMessage</span><span class="o">));</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="nf">BusinessException</span><span class="o">(</span><span class="n">HttpStatus</span> <span class="n">httpStatus</span><span class="o">,</span> <span class="n">ErrorMessage</span> <span class="n">errorMessage</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">httpStatus</span> <span class="o">=</span> <span class="n">httpStatus</span><span class="o">;</span>
        <span class="k">this</span><span class="o">.</span><span class="na">errorMessage</span> <span class="o">=</span> <span class="n">errorMessage</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="n">HttpStatus</span> <span class="nf">getHttpStatus</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">httpStatus</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="n">ErrorMessage</span> <span class="nf">getErrorMessage</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">errorMessage</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<h4 id="authorizationexception">AuthorizationException</h4>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">AuthorizationException</span> <span class="kd">extends</span> <span class="n">BusinessException</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="nf">AuthorizationException</span><span class="o">(</span><span class="n">String</span> <span class="n">message</span><span class="o">)</span> <span class="o">{</span>
        <span class="kd">super</span><span class="o">(</span><span class="n">HttpStatus</span><span class="o">.</span><span class="na">UNAUTHORIZED</span><span class="o">,</span> <span class="n">message</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<ul>
  <li>BusinessExceptionì„ ìƒì†</li>
  <li>401 ìƒíƒœì½”ë“œ</li>
</ul>

<h4 id="badrequestexception">BadRequestException</h4>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">BadRequestException</span> <span class="kd">extends</span> <span class="n">BusinessException</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="nf">BadRequestException</span><span class="o">(</span><span class="n">String</span> <span class="n">message</span><span class="o">)</span> <span class="o">{</span>
        <span class="kd">super</span><span class="o">(</span><span class="n">HttpStatus</span><span class="o">.</span><span class="na">BAD_REQUEST</span><span class="o">,</span> <span class="n">message</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<ul>
  <li>BusinessExceptionì„ ìƒì†</li>
  <li>400 ìƒíƒœì½”ë“œ</li>
</ul>

<h2 id="ë°°í¬-ìŠ¤í¬ë¦½íŠ¸">ë°°í¬ ìŠ¤í¬ë¦½íŠ¸</h2>

<ul>
  <li>ì‹¤ì œ API ì‚¬ìš©ì´ ê°€ëŠ¥í•˜ë„ë¡ EC2ì— ë°°í¬í•˜ì—¬ì•¼ í–ˆìŒ</li>
  <li>í”„ë¡œì íŠ¸ê°€ ì—…ë°ì´íŠ¸ë˜ë©´ í”„ë¡œì„¸ìŠ¤ë¥¼ ì¬ì‹œë™í•´ì•¼í–ˆìŒ</li>
  <li>ì´ëŸ¬ë©´ ì—¬ëŸ¬ê°€ì§€ ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•´ì•¼ í•¨â€¦.</li>
  <li>ì´ë¥¼ ìŠ¤í¬ë¦½íŠ¸ë¡œ ë§Œë“¤ì–´ í•œë²ˆì— ì²˜ë¦¬í•˜ë„ë¡ êµ¬í˜„!</li>
</ul>

<h4 id="deploy-prodsh">deploy-prod.sh</h4>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">#!/bin/bash</span>
<span class="c">#!/bin/bash in the top of your scripts then you are telling your system to use bash as a default shell.</span>

<span class="nv">REPOSITORY</span><span class="o">=</span>/home/ubuntu/ <span class="c"># ê²½ë¡œ ì„¤ì •</span>
<span class="nv">PROJECT_NAME</span><span class="o">=</span>atdd-subway-fare

<span class="nb">cd</span> <span class="nv">$REPOSITORY</span>/<span class="nv">$PROJECT_NAME</span>/ <span class="c"># ê²½ë¡œë¡œ ì ‘ê·¼</span>

<span class="nb">echo</span> <span class="s2">"&gt; git reset --hard"</span> 

git reset <span class="nt">--hard</span> <span class="c"># ê¹ƒí—ˆë¸Œ ì´ˆê¸°í™”</span>

<span class="nb">echo</span> <span class="s2">"&gt; git pull origin step1"</span>

git pull origin step1 <span class="c"># pull ë•¡ê²¨ì˜¤ê¸°</span>

<span class="nb">echo</span> <span class="s2">"&gt; í”„ë¡œì íŠ¸ Build ì‹œì‘"</span>

./gradlew clean build <span class="c"># ë¹Œë“œ</span>

<span class="nb">echo</span> <span class="s2">"&gt; Build íŒŒì¼ ê²½ë¡œ ë³µì‚¬"</span>

<span class="nv">JAR_LOCATION</span><span class="o">=</span><span class="k">$(</span>find ./<span class="k">*</span> <span class="nt">-name</span> <span class="s2">"*jar"</span> | <span class="nb">grep </span>atdd-subway-fare<span class="k">)</span>

<span class="nb">echo</span> <span class="s2">"&gt; í˜„ì¬ êµ¬ë™ì¤‘ì¸ ì• í”Œë¦¬ì¼€ì´ì…˜ pid í™•ì¸"</span>

<span class="nv">CURRENT_PID</span><span class="o">=</span><span class="k">$(</span>pgrep <span class="nt">-f</span> <span class="k">${</span><span class="nv">PROJECT_NAME</span><span class="k">}</span><span class="o">[</span><span class="nt">-A-z0-9</span>.]<span class="k">*</span>.jar<span class="nv">$)</span> <span class="c"># ì‹¤í–‰ì‹œì¼œì ¸ìˆëŠ” jar pid ë°›ê¸° </span>


<span class="k">if</span> <span class="o">[</span> <span class="nt">-z</span> <span class="s2">"</span><span class="nv">$CURRENT_PID</span><span class="s2">"</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span> <span class="c"># -z í”Œë˜ê·¸ëŠ” nullì¸ê²ƒì„ ì²´í¬í•¨, PIDê°€ nullì¸ ê²½ìš° ifì ˆ ì•ˆìœ¼ë¡œ ë“¤ì–´ê°</span>
    <span class="nb">echo</span> <span class="s2">"&gt; í˜„ì¬ êµ¬ë™ ì¤‘ì¸ ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ì—†ìœ¼ë¯€ë¡œ ì¢…ë£Œí•˜ì§€ ì•ŠìŠµë‹ˆë‹¤."</span>
<span class="k">else
    </span><span class="nb">echo</span> <span class="s2">"&gt; í˜„ì¬ êµ¬ë™ì¤‘ì¸ ì• í”Œë¦¬ì¼€ì´ì…˜ ì¢…ë£Œ(pid : </span><span class="nv">$CURRENT_PID</span><span class="s2">)"</span>
    <span class="nb">echo</span> <span class="s2">"&gt; kill -15 </span><span class="nv">$CURRENT_PID</span><span class="s2">"</span>
    <span class="nb">kill</span> <span class="nt">-15</span> <span class="nv">$CURRENT_PID</span>
    sleep 5
<span class="k">fi

</span><span class="nb">echo</span> <span class="s2">"&gt; ìƒˆ ì• í”Œë¦¬ì¼€ì´ì…˜ ë°°í¬"</span>
<span class="nb">echo</span> <span class="s2">"&gt; JAR Location: </span><span class="nv">$JAR_LOCATION</span><span class="s2">"</span> í•´ë‹¹ jaríŒŒì¼ ì‹¤í–‰

<span class="c">#nohup java -jar ì‹¤í–‰</span>
nohup java <span class="nt">-jar</span> <span class="nt">-Dspring</span>.profiles.active<span class="o">=</span>prod <span class="k">${</span><span class="nv">JAR_LOCATION</span><span class="k">}</span> 1&gt; log-prod.md 2&gt;&amp;1  &amp;
</code></pre></div></div>


	  ]]></description>
	</item>

	<item>
	  <title>ğŸ“š atdd-subway-path ë¯¸ì…˜ ì •ë¦¬</title>
	  <link>//atdd-subway-path-note</link>
	  <author></author>
	  <pubDate>2021-06-11T10:01:00+09:00</pubDate>
	  <guid>//atdd-subway-path-note</guid>
	  <description><![CDATA[
	     <h2 id="step1-2">STEP1, 2</h2>

<h3 id="jwttokenprovider">JwtTokenProvider</h3>

<ul>
  <li>jwt í† í° ìƒì„±, í† í° ê²€ì¦, í† í°ì—ì„œ ì¸ì¦ ì •ë³´ ì¶”ì¶œí•˜ëŠ” ìœ í‹¸ í´ë˜ìŠ¤</li>
</ul>

<h3 id="authorizationextractor">AuthorizationExtractor</h3>

<ul>
  <li>HTTPì˜ <code class="highlighter-rouge">Authorization</code> Headerì—ì„œ Bearer íƒ€ì…ì¸ ê²½ìš° Access Tokenì„ ì¶”ì¶œí•˜ëŠ” ìœ í‹¸ í´ë˜ìŠ¤</li>
</ul>

<h3 id="authenticationprincipalconfig">AuthenticationPrincipalConfig</h3>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Configuration</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">AuthenticationPrincipalConfig</span> <span class="kd">implements</span> <span class="n">WebMvcConfigurer</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="n">AuthService</span> <span class="n">authService</span><span class="o">;</span>

    <span class="kd">public</span> <span class="nf">AuthenticationPrincipalConfig</span><span class="o">(</span><span class="n">AuthService</span> <span class="n">authService</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">authService</span> <span class="o">=</span> <span class="n">authService</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">addArgumentResolvers</span><span class="o">(</span><span class="n">List</span> <span class="n">argumentResolvers</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">argumentResolvers</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">createAuthenticationPrincipalArgumentResolver</span><span class="o">());</span>
    <span class="o">}</span>

    <span class="nd">@Bean</span>
    <span class="kd">public</span> <span class="n">AuthenticationPrincipalArgumentResolver</span> <span class="nf">createAuthenticationPrincipalArgumentResolver</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="k">new</span> <span class="nf">AuthenticationPrincipalArgumentResolver</span><span class="o">(</span><span class="n">authService</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<ul>
  <li>AuthenticationPrincipalArgumentResolverëŠ” ë¹ˆ ë“±ë¡ì´ ë˜ì–´ìˆì§€ ì•ŠìŒ</li>
  <li>í•´ë‹¹ ë¦¬ì¡¸ë²„ë¥¼ í™œìš©í•  ìˆ˜ ìˆë„ë¡ ë“±ë¡í•´ì£¼ëŠ” java config</li>
  <li><code class="highlighter-rouge">AuthenticationPrincipalArgumentResolver</code>ë¥¼ ë§Œë“¤ê³  ë“±ë¡</li>
</ul>

<h3 id="authenticationprincipalargumentresolver">AuthenticationPrincipalArgumentResolver</h3>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">AuthenticationPrincipalArgumentResolver</span> <span class="kd">implements</span> <span class="n">HandlerMethodArgumentResolver</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="n">AuthService</span> <span class="n">authService</span><span class="o">;</span>

    <span class="kd">public</span> <span class="nf">AuthenticationPrincipalArgumentResolver</span><span class="o">(</span><span class="n">AuthService</span> <span class="n">authService</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">authService</span> <span class="o">=</span> <span class="n">authService</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="c1">// resolveArgument ë©”ì„œë“œê°€ ë™ì‘í•˜ëŠ” ì¡°ê±´ì„ ì •ì˜í•˜ëŠ” ë©”ì„œë“œ</span>
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">supportsParameter</span><span class="o">(</span><span class="n">MethodParameter</span> <span class="n">parameter</span><span class="o">)</span> <span class="o">{</span>
        <span class="c1">// íŒŒë¼ë¯¸í„° ì¤‘ @AuthenticationPrincipalì´ ë¶™ì€ ê²½ìš° ë™ì‘í•˜ê²Œ ì„¤ì •</span>
        <span class="k">return</span> <span class="n">parameter</span><span class="o">.</span><span class="na">hasParameterAnnotation</span><span class="o">(</span><span class="n">AuthenticationPrincipal</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="c1">// supportsParameterê°€ trueì¸ ê²½ìš° ë™ì‘</span>
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="n">Member</span> <span class="nf">resolveArgument</span><span class="o">(</span><span class="n">MethodParameter</span> <span class="n">parameter</span><span class="o">,</span> <span class="n">ModelAndViewContainer</span> <span class="n">mavContainer</span><span class="o">,</span> <span class="n">NativeWebRequest</span> <span class="n">webRequest</span><span class="o">,</span> <span class="n">WebDataBinderFactory</span> <span class="n">binderFactory</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">String</span> <span class="n">token</span> <span class="o">=</span> <span class="n">AuthorizationExtractor</span><span class="o">.</span><span class="na">extract</span><span class="o">((</span><span class="n">HttpServletRequest</span><span class="o">)</span> <span class="n">webRequest</span><span class="o">.</span><span class="na">getNativeRequest</span><span class="o">());</span>
        <span class="k">return</span> <span class="n">authService</span><span class="o">.</span><span class="na">findMemberByToken</span><span class="o">(</span><span class="n">token</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<ul>
  <li>
    <p>ì»¨íŠ¸ë¡¤ëŸ¬ ë©”ì„œë“œì—ì„œ íŠ¹ì • ì¡°ê±´ì— ë§ëŠ” íŒŒë¼ë¯¸í„°ê°€ ìˆì„ ë•Œ ì›í•˜ëŠ” ê°’ì„ ë°”ì¸ë”©í•´ì£¼ëŠ” ì¸í„°í˜ì´ìŠ¤</p>
  </li>
  <li>
    <p><code class="highlighter-rouge">resolveArgument</code> ì—ì„œ <code class="highlighter-rouge">Member</code> ë„ë©”ì¸ ìì²´ë¥¼ ë°˜í™˜í–ˆì—ˆìŒ</p>
  </li>
</ul>

<h4 id="ê´€ë ¨-ì •ë¦¬">ê´€ë ¨ ì •ë¦¬</h4>

<ul>
  <li><a href="https://github.com/NewWisdom/TIL/issues/13">Spring MVC Config í•™ìŠµ í…ŒìŠ¤íŠ¸</a></li>
</ul>

<h3 id="authinterceptor">AuthInterceptor</h3>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Component</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">AuthInterceptor</span> <span class="kd">implements</span> <span class="n">HandlerInterceptor</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="n">AuthService</span> <span class="n">authService</span><span class="o">;</span>

    <span class="kd">public</span> <span class="nf">AuthInterceptor</span><span class="o">(</span><span class="n">AuthService</span> <span class="n">authService</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">authService</span> <span class="o">=</span> <span class="n">authService</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">preHandle</span><span class="o">(</span><span class="n">HttpServletRequest</span> <span class="n">request</span><span class="o">,</span> <span class="n">HttpServletResponse</span> <span class="n">response</span><span class="o">,</span> <span class="n">Object</span> <span class="n">handler</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">Exception</span> <span class="o">{</span>
        <span class="n">String</span> <span class="n">token</span> <span class="o">=</span> <span class="n">AuthorizationExtractor</span><span class="o">.</span><span class="na">extract</span><span class="o">(</span><span class="n">request</span><span class="o">);</span>
        <span class="n">authService</span><span class="o">.</span><span class="na">validateToken</span><span class="o">(</span><span class="n">token</span><span class="o">);</span>
        <span class="k">return</span> <span class="kc">true</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<ul>
  <li>
    <p>ì¸ì¦ / ì¸ê°€ì— ëŒ€í•œ í† í° ê²€ì¦ì„ ë‹´ë‹¹</p>
  </li>
  <li>
    <p>í† í°ì´ ìœ íš¨í•˜ë©´ trueë¥¼ ë°˜í™˜í•˜ë„ë¡</p>
  </li>
  <li>
    <p><code class="highlighter-rouge">AuthorizationExtractor.extract()</code> ê°€ ë¦¬ì¡¸ë²„ë‘ ì¤‘ë³µì´ ë˜ëŠ”ë°?</p>

    <ul>
      <li>ì–´ì©” ìˆ˜ ì—†ìŒ. ì´ ë‘˜ì€ ì„œë¡œ ëª¨ë¥´ëŠ” ê´€ê³„ë¡œ ë…ë¦½ì ì´ë‹ˆ</li>
      <li>ë³€ê²½ì˜ ì˜í–¥ë„ ìµœì†Œí™”ë¥¼ ìœ„í•´ JwtProviderê°€ ì•„ë‹Œ JwtProviderë¥¼ í¬í•¨í•œ AuthServiceë¥¼ ê°€ì§€ë„ë¡</li>
    </ul>
  </li>
</ul>

<h2 id="step3">STEP3</h2>

<h4 id="graph---ê·¸ë˜í”„-ì—­í• ì„-í•˜ëŠ”-ë„ë©”ì¸">Graph - ê·¸ë˜í”„ ì—­í• ì„ í•˜ëŠ” ë„ë©”ì¸</h4>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Graph</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="n">WeightedMultigraph</span><span class="o">&lt;</span><span class="n">Station</span><span class="o">,</span> <span class="n">DefaultWeightedEdge</span><span class="o">&gt;</span> <span class="n">graph</span> <span class="o">=</span> <span class="k">new</span> <span class="n">WeightedMultigraph</span><span class="o">(</span><span class="n">DefaultWeightedEdge</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>

    <span class="kd">public</span> <span class="nf">Graph</span><span class="o">(</span><span class="n">List</span><span class="o">&lt;</span><span class="n">Section</span><span class="o">&gt;</span> <span class="n">sections</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">initPath</span><span class="o">(</span><span class="n">sections</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="kd">private</span> <span class="kt">void</span> <span class="nf">initPath</span><span class="o">(</span><span class="n">List</span><span class="o">&lt;</span><span class="n">Section</span><span class="o">&gt;</span> <span class="n">sections</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">for</span> <span class="o">(</span><span class="n">Section</span> <span class="n">section</span> <span class="o">:</span> <span class="n">sections</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">initEdge</span><span class="o">(</span><span class="n">section</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>

    <span class="kd">private</span> <span class="kt">void</span> <span class="nf">initEdge</span><span class="o">(</span><span class="n">Section</span> <span class="n">section</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">addVertex</span><span class="o">(</span><span class="n">section</span><span class="o">.</span><span class="na">getUpStation</span><span class="o">());</span>
        <span class="n">addVertex</span><span class="o">(</span><span class="n">section</span><span class="o">.</span><span class="na">getDownStation</span><span class="o">());</span>
        <span class="n">graph</span><span class="o">.</span><span class="na">setEdgeWeight</span><span class="o">(</span><span class="n">graph</span><span class="o">.</span><span class="na">addEdge</span><span class="o">(</span><span class="n">section</span><span class="o">.</span><span class="na">getUpStation</span><span class="o">(),</span> <span class="n">section</span><span class="o">.</span><span class="na">getDownStation</span><span class="o">()),</span> <span class="n">section</span><span class="o">.</span><span class="na">getDistance</span><span class="o">());</span>
    <span class="o">}</span>

    <span class="kd">private</span> <span class="kt">void</span> <span class="nf">addVertex</span><span class="o">(</span><span class="n">Station</span> <span class="n">station</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">if</span> <span class="o">(!</span><span class="n">graph</span><span class="o">.</span><span class="na">containsVertex</span><span class="o">(</span><span class="n">station</span><span class="o">))</span> <span class="o">{</span>
            <span class="n">graph</span><span class="o">.</span><span class="na">addVertex</span><span class="o">(</span><span class="n">station</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="n">Path</span> <span class="nf">shortestPath</span><span class="o">(</span><span class="n">Station</span> <span class="n">source</span><span class="o">,</span> <span class="n">Station</span> <span class="n">target</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">DijkstraShortestPath</span><span class="o">&lt;</span><span class="n">Station</span><span class="o">,</span> <span class="n">DefaultWeightedEdge</span><span class="o">&gt;</span> <span class="n">dijkstraShortestPath</span> <span class="o">=</span> <span class="k">new</span> <span class="n">DijkstraShortestPath</span><span class="o">&lt;&gt;(</span><span class="n">graph</span><span class="o">);</span>
        <span class="k">return</span> <span class="k">new</span> <span class="nf">Path</span><span class="o">(</span><span class="n">dijkstraShortestPath</span><span class="o">.</span><span class="na">getPath</span><span class="o">(</span><span class="n">source</span><span class="o">,</span> <span class="n">target</span><span class="o">).</span><span class="na">getVertexList</span><span class="o">(),</span> <span class="n">dijkstraShortestPath</span><span class="o">.</span><span class="na">getPathWeight</span><span class="o">(</span><span class="n">source</span><span class="o">,</span> <span class="n">target</span><span class="o">));</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<h4 id="path---ì‚¬ì‹¤ìƒ-dto-ëŠë‚Œ">Path - ì‚¬ì‹¤ìƒ DTO ëŠë‚Œâ€¦</h4>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Path</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">Station</span><span class="o">&gt;</span> <span class="n">stations</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="kt">double</span> <span class="n">distance</span><span class="o">;</span>

    <span class="kd">public</span> <span class="nf">Path</span><span class="o">(</span><span class="n">List</span><span class="o">&lt;</span><span class="n">Station</span><span class="o">&gt;</span> <span class="n">stations</span><span class="o">,</span> <span class="kt">double</span> <span class="n">distance</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">stations</span> <span class="o">=</span> <span class="n">stations</span><span class="o">;</span>
        <span class="k">this</span><span class="o">.</span><span class="na">distance</span> <span class="o">=</span> <span class="n">distance</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">Station</span><span class="o">&gt;</span> <span class="nf">stations</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">stations</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kt">double</span> <span class="nf">distance</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">distance</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<h4 id="ì²˜ìŒ-êµ¬í˜„í•œ-ë¡œì§---ëª¨ë“ -lineì„-ë¶ˆëŸ¬ì™€-ìµœë‹¨-ê±°ë¦¬-ì¡°íšŒ">ì²˜ìŒ êµ¬í˜„í•œ ë¡œì§ - ëª¨ë“  Lineì„ ë¶ˆëŸ¬ì™€ ìµœë‹¨ ê±°ë¦¬ ì¡°íšŒ</h4>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="n">PathResponse</span> <span class="nf">findPath</span><span class="o">(</span><span class="n">Long</span> <span class="n">sourceId</span><span class="o">,</span> <span class="n">Long</span> <span class="n">targetId</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">List</span><span class="o">&lt;</span><span class="n">Line</span><span class="o">&gt;</span> <span class="n">lines</span> <span class="o">=</span> <span class="n">lineDao</span><span class="o">.</span><span class="na">findAll</span><span class="o">();</span>
        <span class="n">Graph</span> <span class="n">graph</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Graph</span><span class="o">(</span><span class="n">lines</span><span class="o">);</span>
        <span class="n">Path</span> <span class="n">path</span> <span class="o">=</span> <span class="n">graph</span><span class="o">.</span><span class="na">shortestPath</span><span class="o">(</span><span class="n">stationDao</span><span class="o">.</span><span class="na">findById</span><span class="o">(</span><span class="n">sourceId</span><span class="o">),</span> <span class="n">stationDao</span><span class="o">.</span><span class="na">findById</span><span class="o">(</span><span class="n">targetId</span><span class="o">));</span>
        <span class="k">return</span> <span class="k">new</span> <span class="nf">PathResponse</span><span class="o">(</span><span class="n">StationResponse</span><span class="o">.</span><span class="na">listOf</span><span class="o">(</span><span class="n">path</span><span class="o">.</span><span class="na">stations</span><span class="o">()),</span> <span class="o">(</span><span class="kt">int</span><span class="o">)</span> <span class="n">path</span><span class="o">.</span><span class="na">distance</span><span class="o">());</span>
    <span class="o">}</span>
</code></pre></div></div>

<p><img src="https://images.velog.io/images/new_wisdom/post/452f11f4-a8e7-4365-a71c-9c2be5f6435a/image.png" style="zoom:50%;" /></p>

<ul>
  <li>ì‚¬ì‹¤ ì²˜ìŒì—ëŠ” sectionsë§Œ ê°€ì ¸ì™€ì„œ ê·¸ë˜í”„ë¥¼ ê·¸ë ¸ìœ¼ë‚˜, ì´ë ‡ê²Œ ë˜ë©´ í•´ë‹¹ ì—­ì˜ ì´ë¦„ë“¤ì„ ê°€ì ¸ì˜¬ ìˆ˜ ì—†ì—ˆìŒ</li>
  <li>ê¸°ì¡´ ì½”ë“œë¥¼ ì‚¬ìš©í•˜ë ¤ê³  ì¼ë‹¨ LineDaoë¥¼ ì´ìš©í–ˆì—ˆëŠ”ë°, ì¬ì—°ë§ì˜ ë¦¬ë·°ëŒ€ë¡œ ëª¨ë“  Lineì„ ì¡°íšŒí•˜ê¸° ë³´ë‹¤ í•„ìš”í•œ Sectionsë§Œ ì¡°íšŒí•˜ë„ë¡ ë¦¬íŒ©í† ë§</li>
</ul>

<p><img src="https://images.velog.io/images/new_wisdom/post/88d775c4-942a-4437-8f62-a7b0215a96a1/image.png" style="zoom:50%;" /></p>

<ul>
  <li>ì´ ë¶€ë¶„ì€ DMìœ¼ë¡œ ì´ì•¼ê¸°ë¥¼ ë‚˜ëˆ´ëŠ”ë°,</li>
</ul>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Service</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">PathService</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="n">SectionDao</span> <span class="n">sectionDao</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="n">StationDao</span> <span class="n">stationDao</span><span class="o">;</span>

    <span class="kd">public</span> <span class="nf">PathService</span><span class="o">(</span><span class="n">SectionDao</span> <span class="n">sectionDao</span><span class="o">,</span> <span class="n">StationDao</span> <span class="n">stationDao</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">sectionDao</span> <span class="o">=</span> <span class="n">sectionDao</span><span class="o">;</span>
        <span class="k">this</span><span class="o">.</span><span class="na">stationDao</span> <span class="o">=</span> <span class="n">stationDao</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="n">PathResponse</span> <span class="nf">findPath</span><span class="o">(</span><span class="n">Long</span> <span class="n">sourceId</span><span class="o">,</span> <span class="n">Long</span> <span class="n">targetId</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">List</span><span class="o">&lt;</span><span class="n">Section</span><span class="o">&gt;</span> <span class="n">sections</span> <span class="o">=</span> <span class="n">sectionDao</span><span class="o">.</span><span class="na">findByStationIds</span><span class="o">(</span><span class="n">Arrays</span><span class="o">.</span><span class="na">asList</span><span class="o">(</span><span class="n">sourceId</span><span class="o">,</span> <span class="n">targetId</span><span class="o">));</span>
        <span class="n">Graph</span> <span class="n">graph</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Graph</span><span class="o">(</span><span class="n">sections</span><span class="o">);</span>
        <span class="n">Path</span> <span class="n">path</span> <span class="o">=</span> <span class="n">graph</span><span class="o">.</span><span class="na">shortestPath</span><span class="o">(</span><span class="k">new</span> <span class="n">Station</span><span class="o">(</span><span class="n">sourceId</span><span class="o">),</span> <span class="k">new</span> <span class="n">Station</span><span class="o">(</span><span class="n">targetId</span><span class="o">));</span>
        <span class="k">return</span> <span class="k">new</span> <span class="nf">PathResponse</span><span class="o">(</span><span class="n">StationResponse</span><span class="o">.</span><span class="na">listOf</span><span class="o">(</span><span class="n">combineStationById</span><span class="o">(</span><span class="n">path</span><span class="o">)),</span> <span class="o">(</span><span class="kt">int</span><span class="o">)</span> <span class="n">path</span><span class="o">.</span><span class="na">distance</span><span class="o">());</span>
    <span class="o">}</span>

    <span class="kd">private</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">Station</span><span class="o">&gt;</span> <span class="nf">combineStationById</span><span class="o">(</span><span class="n">Path</span> <span class="n">path</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">List</span><span class="o">&lt;</span><span class="n">Long</span><span class="o">&gt;</span> <span class="n">stationIds</span> <span class="o">=</span> <span class="n">path</span><span class="o">.</span><span class="na">stations</span><span class="o">()</span>
                <span class="o">.</span><span class="na">stream</span><span class="o">()</span>
                <span class="o">.</span><span class="na">map</span><span class="o">(</span><span class="nl">Station:</span><span class="o">:</span><span class="n">getId</span><span class="o">)</span>
                <span class="o">.</span><span class="na">collect</span><span class="o">(</span><span class="n">Collectors</span><span class="o">.</span><span class="na">toList</span><span class="o">());</span>
        <span class="k">return</span> <span class="n">stationDao</span><span class="o">.</span><span class="na">findByIds</span><span class="o">(</span><span class="n">stationIds</span><span class="o">).</span><span class="na">sortedStation</span><span class="o">(</span><span class="n">stationIds</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<h2 id="cors-ì´ìŠˆ-í•´ê²°-ë²•">CORS ì´ìŠˆ í•´ê²° ë²•</h2>

<ul>
  <li>ë‚˜ê°™ì€ ê²½ìš°ëŠ” frontìª½ì— í”„ë¡ì‹œ ì„œë²„ë¥¼ ë‘ì–´ í•´ë‹¹ ì´ìŠˆê°€ ë°œìƒí•˜ì§€ ì•Šë„ë¡ í•˜ì˜€ìŒ</li>
</ul>

<h4 id="ì •ë¦¬">ì •ë¦¬</h4>

<ul>
  <li><a href="https://github.com/NewWisdom/TIL/issues/54">ë‚´ê°€ CORS ì´ìŠˆë¥¼ í•´ê²°í•œ ë°©ë²• - Proxy </a></li>
</ul>

<h2 id="cookie-vs-localstorage">Cookie vs LocalStorage</h2>

<p><img src="https://images.velog.io/images/new_wisdom/post/4d9503c2-642a-4ed5-9531-acfc39e6f29b/image.png" style="zoom:50%;" /></p>

<ul>
  <li><a href="https://woowacourse.github.io/javable/post/2020-08-31-where_to_store_token/">í† í°ì„ ì–´ë””ì— ì €ì¥í• ê¹Œ?</a> ê¸€ì„ ë³´ê³  í† í°ì„ ì¿ í‚¤ì— ì €ì¥</li>
  <li>ì¬ì—°ë§ì˜ ë¦¬ë·°ë¡œ ì¿ í‚¤ë¥¼ ì‚¬ìš©í–ˆì„ ë•Œì˜ ë¬¸ì œì ì„ ì•Œì•„ë´„</li>
  <li>XSS ê³µê²©ì„ ë§‰ì„ ìˆ˜ ìˆëŠ” HTTP-Only ì¿ í‚¤ë¥¼ ê³ ë ¤</li>
  <li>í•˜ì§€ë§Œ ì´ëŠ” JSì—ì„œ êº¼ë‚´ ì“¸ ìˆ˜ ì—†ì–´ í—¤ë”ì— í† í°ì„ ì‹¤ì–´ ë³´ë‚¼ ìˆ˜ ì—†ëŠ” ì´ìŠˆ</li>
  <li>(ë¯¸ì…˜ ìš”êµ¬ì‚¬í•­ê³¼ OAuth í‘œì¤€ ë“±ì„ ê³ ë ¤í•´) ì¬ì—°ë§ê³¼ ë‚˜ëˆˆ DM ë‚´ìš©ê³¼ ê°™ì´ ë‹¤ìŒê³¼ ê°™ì€ ë¬¸ì œë“¤ë¡œ ì¿ í‚¤ ëŒ€ì‹  LocalStorageì— í† í°ì„ ì €ì¥í•˜ë„ë¡ ë³€ê²½</li>
</ul>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>* ì›¹ ì´ì™¸ì˜ í´ë¼ì´ì–¸íŠ¸ê¹Œì§€ ê³ ë ¤í•˜ëŠ” ê²ƒì´ ì¢‹ë‹¤ê³  ìƒê°
* OAuth í‘œì¤€ì„ ì§€í‚¤ê¸° ìœ„í•¨
* ì‚¬ì‹¤ HttpOnlyë¥¼ í†µí•´ ë³´í˜¸í•˜ì—¬ë„, í•˜ì´ì¬í‚¹ ë“± ë§ì€ ë³´ì•ˆì  ìœ„í—˜ì´ ì¡´ì¬í•˜ê¸° ë•Œë¬¸ì— ì•…ì˜ì ì¸ ì˜ë„ë¥¼ ê°€ì§„ ì‚¬ëŒì´ ë¶ˆí¸í•´ì§ˆ ë¿ ë³´ì•ˆì ìœ¼ë¡œ ì™„ë²½í•˜ê²Œ ì²˜ë¦¬ë˜ì§€ ì•ŠìŒ
* MDNì—ì„œë„ HTML5 ì´í›„ë¶€í„° Cookieë¥¼ ì €ì¥ì†Œì™€ ê°™ì€ ìš©ë„ë¡œ ì‚¬ìš©í•˜ì§€ ì•Šì„ ê²ƒì„ ê¶Œì¥
</code></pre></div></div>

<h4 id="ì •ë¦¬-1">ì •ë¦¬</h4>

<ul>
  <li><a href="https://github.com/NewWisdom/TIL/issues/21">XSS, CSRF</a></li>
  <li><a href="https://github.com/NewWisdom/TIL/issues/22">SameSite Cookie</a></li>
  <li><a href="https://github.com/NewWisdom/TIL/issues/33">Cookie VS Local Storage</a></li>
</ul>

<h2 id="front">Front</h2>

<p><img src="https://images.velog.io/images/new_wisdom/post/a00c23b4-79f3-46f2-891d-863f25e8a418/image.png" style="zoom:50%;" /></p>

<ul>
  <li><code class="highlighter-rouge">vue.config</code>ë¥¼ í†µí•´ ì¤‘ë³µë˜ëŠ” URLì— ëŒ€í•œ ì„¤ì •</li>
  <li>ì¤‘ë³µë˜ëŠ” fetchëŠ” ëª¨ë“ˆë¡œ ë”°ë¡œ ë§Œë“¤ì–´ì„œ(fetch.js) ì‚¬ìš©í•˜ë„ë¡ ë³€ê²½</li>
</ul>

<p><img src="https://images.velog.io/images/new_wisdom/post/4b5e5a10-0ebf-4d5b-8750-b6a5ccf92652/image.png" style="zoom:50%;" /></p>

<h2 id="argumentresolverì™€-authinterceptor">ArgumentResolverì™€ AuthInterceptor</h2>

<p><img src="https://images.velog.io/images/new_wisdom/post/336584ce-5eaf-45d6-ab2f-c4066eb03ab1/image.png" style="zoom:50%;" /></p>

<h4 id="argumentresolver">ArgumentResolver</h4>
<blockquote>
  <p>Strategy interface for resolving method parameters into argument values in the context of a given request.</p>
  <ul>
    <li>ë§¤ê°œë³€ìˆ˜ì˜ ë¦¬ì¡¸ë¹™</li>
    <li>ì»¨íŠ¸ë¡¤ëŸ¬ì—ì„œ íŒŒë¼ë¯¸í„°ë¥¼ ë°”ì¸ë”© í•´ì£¼ëŠ” ì—­í• 
      <h4 id="authinterceptor-1">AuthInterceptor</h4>
      <p>Workflow interface that allows for customized handler execution chains. Applications can register any number of existing or custom interceptors for certain groups of handlers, to add common preprocessing behavior without needing to modify each handler implementation.
A HandlerInterceptor gets called before the appropriate HandlerAdapter triggers the execution of the handler itself. This mechanism can be used for a large field of preprocessing aspects, e.g. for authorization checks, or common handler behavior like locale or theme changes. Its main purpose is to allow for factoring out repetitive handler code.</p>
    </li>
    <li>ê¶Œí•œ í™•ì¸ ë˜ëŠ” ë¡œì¼€ì¼ ë˜ëŠ” í…Œë§ˆ ë³€ê²½ê³¼ ê°™ì€ ì¼ë°˜ì ì¸ í•¸ë“¤ëŸ¬ ë™ì‘ê³¼ ê°™ì€ ì „ì²˜ë¦¬ ì¸¡ë©´ì˜ ë„“ì€ ë¶„ì•¼ì— ì‚¬ìš©</li>
    <li>ì¸ì¦ / ì¸ê°€ì— ëŒ€í•œ ê²€ì‚¬</li>
    <li>ì£¼ìš” ëª©ì ì€ ë°˜ë³µì  ì¸ í•¸ë“¤ëŸ¬ ì½”ë“œë¥¼ ì œê±°í•˜ëŠ” ê²ƒ</li>
    <li>Spring docì—ì„œ ê³µì‹ì ìœ¼ë¡œ authorization checksë¥¼ í•˜ëŠ” ì• ë¼ê³  ì§€ì •í•´ì¤€ ì¡´ì¬</li>
    <li><a href="https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/web/servlet/HandlerInterceptor.html">ê³µì‹ë¬¸ì„œ</a></li>
  </ul>
</blockquote>

<p><strong>ì¸í„°ì…‰í„°ì™€ ë¦¬ì¡¸ë²„ëŠ” ì„œë¡œë¥¼ ëª¨ë¥´ëŠ” ê´€ê³„ì´ê³  ë…ë¦½ì ìœ¼ë¡œ ê°€ì•¼í•¨</strong></p>
<h4 id="ì°¸ê³ í• -ê¸€">ì°¸ê³ í•  ê¸€</h4>
<ul>
  <li><a href="https://velog.io/@sa833591/Spring-Filter-Interceptor-AOP-%EC%B0%A8%EC%9D%B4-yvmv4k96">Filter, Interceptor, AOP ì°¨ì´
</a></li>
</ul>

<h4 id="ì •ë¦¬-2">ì •ë¦¬</h4>

<ul>
  <li><a href="https://github.com/NewWisdom/TIL/issues/28">HandlerInterceptor</a></li>
</ul>

<h2 id="ë‹¤ì‹œ-êµ¬í˜„í•œë‹¤ë©´">ë‹¤ì‹œ êµ¬í˜„í•œë‹¤ë©´?</h2>

<h4 id="argumentresolver-ì—ì„œ-dtoì¸-loginmemberë¥¼-ë°˜í™˜í•˜ê²Œ-í• ê±¸">ArgumentResolver ì—ì„œ DTOì¸ LoginMemberë¥¼ ë°˜í™˜í•˜ê²Œ í• ê±¸!</h4>

<ul>
  <li>ë„ë©”ì¸ì„ ë°˜í™˜í•˜ë©´ ë·°ì™€ ì»¨íŠ¸ë¡¤ëŸ¬ì— ë…¸ì¶œì‹œí‚¤ê³  ë„ë©”ì¸ì„ ì¡°ì‘í•  ê°€ëŠ¥ì„±ì´ ìˆìŒ</li>
  <li>ë˜ ë¶ˆí•„ìš”í•œ pw í•„ë“œë„ ê°€ì§€ê²Œ ë¨</li>
</ul>

<h4 id="ë¹„ë²ˆ-ì•”í˜¸í™”ì™€-member-ê°ì²´ì—ì„œ-ë¹„ë²ˆì„-í™•ì¸í•˜ê²Œ-í• ê±¸">ë¹„ë²ˆ ì•”í˜¸í™”ì™€ member ê°ì²´ì—ì„œ ë¹„ë²ˆì„ í™•ì¸í•˜ê²Œ í• ê±¸!</h4>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="n">TokenResponse</span> <span class="nf">createToken</span><span class="o">(</span><span class="n">TokenRequest</span> <span class="n">tokenRequest</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">Member</span> <span class="n">member</span> <span class="o">=</span> <span class="n">memberDao</span><span class="o">.</span><span class="na">findByEmailAndPassword</span><span class="o">(</span><span class="n">tokenRequest</span><span class="o">.</span><span class="na">getEmail</span><span class="o">(),</span> <span class="n">tokenRequest</span><span class="o">.</span><span class="na">getPassword</span><span class="o">())</span>
            <span class="o">.</span><span class="na">orElseThrow</span><span class="o">(()</span> <span class="o">-&gt;</span> <span class="k">new</span> <span class="n">AuthorizationException</span><span class="o">(</span><span class="s">"ë¡œê·¸ì¸ ì‹¤íŒ¨ì…ë‹ˆë‹¤."</span><span class="o">));</span>
    <span class="n">String</span> <span class="n">accessToken</span> <span class="o">=</span> <span class="n">jwtTokenProvider</span><span class="o">.</span><span class="na">createToken</span><span class="o">(</span><span class="n">String</span><span class="o">.</span><span class="na">valueOf</span><span class="o">(</span><span class="n">member</span><span class="o">.</span><span class="na">getId</span><span class="o">()));</span>
    <span class="k">return</span> <span class="k">new</span> <span class="nf">TokenResponse</span><span class="o">(</span><span class="n">accessToken</span><span class="o">);</span>
<span class="o">}</span>
</code></pre></div></div>

<ul>
  <li>ë¹„ë²ˆì„ ì•”í˜¸í™” í•  ë•ŒëŠ” Spring Securityì˜ <code class="highlighter-rouge">BCryptPasswordEncoder()</code> ë¥¼ ì‚¬ìš©</li>
  <li>íšŒì›ê°€ì…í•  ë•Œ ì…ë ¥í•œ ë¹„ë²ˆì„ ì¸ì½”ë”©í•˜ì—¬ ì €ì¥</li>
  <li>ê·¸ëŸ°ë° ë§Œì•½ ì—¬ê¸°ì„œ ë¡œê·¸ì¸í•  ë•Œ ì…ë ¥í•œ ë¹„ë²ˆì„ <code class="highlighter-rouge">encoder.encode()</code> í•˜ì—¬ ì¡°íšŒí•˜ë©´ ì‹¤íŒ¨</li>
  <li>ì™œëƒë©´ ë™ì¼í•œ ì›ë¬¸ì´ì–´ë„ ê°ê¸° ë‹¤ë¥¸ ì¸ì½”ë”©ëœ ê°’ì„ ë‚´ë±‰ê¸° ë•Œë¬¸</li>
</ul>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">PasswordEncoder</span> <span class="n">encoder</span> <span class="o">=</span> <span class="k">new</span> <span class="n">BCryptPasswordEncoder</span><span class="o">();</span>
<span class="n">String</span> <span class="err">ì›ë¬¸</span> <span class="o">=</span> <span class="s">"qwe123"</span><span class="o">;</span>
<span class="n">String</span> <span class="err">ì•”í˜¸í™”ëœ</span><span class="n">_</span><span class="err">ì›ë¬¸</span> <span class="o">=</span> <span class="n">encoder</span><span class="o">.</span><span class="na">encode</span><span class="o">(</span><span class="err">ì›ë¬¸</span><span class="o">);</span>
<span class="n">String</span> <span class="err">ì•”í˜¸í™”ëœ</span><span class="n">_</span><span class="err">ì›ë¬¸</span><span class="n">_2</span> <span class="o">=</span> <span class="n">encoder</span><span class="o">.</span><span class="na">encode</span><span class="o">(</span><span class="err">ì›ë¬¸</span><span class="o">);</span>

<span class="n">encorder</span><span class="o">.</span><span class="na">matches</span><span class="o">(</span><span class="err">ì›ë¬¸</span><span class="o">,</span> <span class="err">ì•”í˜¸í™”ëœ</span> <span class="err">ì›ë¬¸</span><span class="o">);</span> <span class="c1">// true</span>
<span class="err">ì•”í˜¸í™”ëœ</span><span class="n">_</span><span class="err">ì›ë¬¸</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="err">ì•”í˜¸í™”ëœ</span><span class="n">_</span><span class="err">ì›ë¬¸</span><span class="mi">2</span><span class="o">);</span> <span class="c1">//false</span>
</code></pre></div></div>

<ul>
  <li>ë•Œë¬¸ì— ì¿¼ë¦¬ë¡œ Memberë¥¼ ë°›ì•„ì˜¤ê³  ì´ ê°ì²´ì—ì„œ <code class="highlighter-rouge">encorder.matches()</code>ë¥¼ ì´ìš©í•´ ë¹„ë²ˆì„ í™•ì¸í•˜ì</li>
</ul>

<h4 id="ìµœë‹¨ê±°ë¦¬-ì°¾ëŠ”-ë¡œì§ì„-ì „ëµ-íŒ¨í„´ìœ¼ë¡œ-êµ¬í˜„í• ê±¸">ìµœë‹¨ê±°ë¦¬ ì°¾ëŠ” ë¡œì§ì„ ì „ëµ íŒ¨í„´ìœ¼ë¡œ êµ¬í˜„í• ê±¸!</h4>

<ul>
  <li>ë„ë©”ì¸ì— ì™¸ë¶€ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ê°€ì§€ê³  ìˆëŠ” ê²ƒì´ ì˜³ì€ê°€?</li>
  <li>ë§Œì•½ ì•Œê³ ë¦¬ì¦˜ì´ ë³€ê²½ë˜ë©´ ë„ë©”ì¸ì—ë„ ì˜í–¥ì´ ê°</li>
  <li>ì „ëµíŒ¨í„´ìœ¼ë¡œ Dijkstra ì•Œê³ ë¦¬ì¦˜ì„ ì£¼ì…í•˜ì</li>
</ul>

<hr />

<h2 id="2021-06-16-ìœ„-ì‚¬í•­ë“¤ì„-ë°˜ì˜í•˜ì—¬-ë‹¤ì‹œ-êµ¬í˜„">2021-06-16 ìœ„ ì‚¬í•­ë“¤ì„ ë°˜ì˜í•˜ì—¬ ë‹¤ì‹œ êµ¬í˜„</h2>

<h3 id="argumentresolverì—ì„œ-dtoì¸-loginmember-ë°˜í™˜í•˜ë„ë¡-ë¦¬íŒ©í† ë§">ArgumentResolverì—ì„œ DTOì¸ LoginMember ë°˜í™˜í•˜ë„ë¡ ë¦¬íŒ©í† ë§</h3>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">AuthenticationPrincipalArgumentResolver</span> <span class="kd">implements</span> <span class="n">HandlerMethodArgumentResolver</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="n">AuthService</span> <span class="n">authService</span><span class="o">;</span>

    <span class="kd">public</span> <span class="nf">AuthenticationPrincipalArgumentResolver</span><span class="o">(</span><span class="n">AuthService</span> <span class="n">authService</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">authService</span> <span class="o">=</span> <span class="n">authService</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">supportsParameter</span><span class="o">(</span><span class="n">MethodParameter</span> <span class="n">parameter</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">parameter</span><span class="o">.</span><span class="na">hasParameterAnnotation</span><span class="o">(</span><span class="n">AuthenticationPrincipal</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="n">LoginMember</span> <span class="nf">resolveArgument</span><span class="o">(</span><span class="n">MethodParameter</span> <span class="n">parameter</span><span class="o">,</span> <span class="n">ModelAndViewContainer</span> <span class="n">mavContainer</span><span class="o">,</span> <span class="n">NativeWebRequest</span> <span class="n">webRequest</span><span class="o">,</span> <span class="n">WebDataBinderFactory</span> <span class="n">binderFactory</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">String</span> <span class="n">token</span> <span class="o">=</span> <span class="n">AuthorizationExtractor</span><span class="o">.</span><span class="na">extract</span><span class="o">((</span><span class="n">HttpServletRequest</span><span class="o">)</span> <span class="n">webRequest</span><span class="o">.</span><span class="na">getNativeRequest</span><span class="o">());</span>
        <span class="k">return</span> <span class="n">authService</span><span class="o">.</span><span class="na">findLoginMemberByToken</span><span class="o">(</span><span class="n">token</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<h4 id="loginmember">LoginMember</h4>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">LoginMember</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="n">Long</span> <span class="n">id</span><span class="o">;</span>
    <span class="kd">private</span> <span class="n">String</span> <span class="n">email</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kt">int</span> <span class="n">age</span><span class="o">;</span>

    <span class="kd">public</span> <span class="nf">LoginMember</span><span class="o">(</span><span class="n">Member</span> <span class="n">member</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">(</span><span class="n">member</span><span class="o">.</span><span class="na">getId</span><span class="o">(),</span> <span class="n">member</span><span class="o">.</span><span class="na">getEmail</span><span class="o">(),</span> <span class="n">member</span><span class="o">.</span><span class="na">getAge</span><span class="o">());</span>
    <span class="o">}</span>
</code></pre></div></div>

<ul>
  <li>
    <p>ë¡œì§ì— í•„ìš”í•œ ì •ë³´ë§Œ ë‹´ê³  ìˆëŠ” DTO ìƒì„±</p>
  </li>
  <li>ì•„ ì°¸ê³ ë¡œ Interceptorì—ì„œëŠ” í† í° ê²€ì¦ë§Œ í•˜ë„ë¡ í•¨
    <ul>
      <li>ì°¨í”¼ ì´ë¯¸ ë¡œê·¸ì¸ìœ¼ë¡œ ì•„ì´ë”” ë¹„ë²ˆì„ ê²€ì¦í–ˆì–ì•„?</li>
    </ul>
  </li>
  <li>ë¦¬ì¡¸ë²„ì—ì„œëŠ” í† í°ì„ í†µí•´ ì§„ì§œ ë§¤ê°œë³€ìˆ˜ ë¦¬ì¡¸ë¹™ë§Œ ë‹´ë‹¹</li>
</ul>

<h3 id="member-ê°ì²´ì—ì„œ-ë¹„ë²ˆì„-í™•ì¸í•˜ë„ë¡">member ê°ì²´ì—ì„œ ë¹„ë²ˆì„ í™•ì¸í•˜ë„ë¡</h3>

<h4 id="authservice">AuthService</h4>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="n">TokenResponse</span> <span class="nf">createToken</span><span class="o">(</span><span class="n">TokenRequest</span> <span class="n">tokenRequest</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">Member</span> <span class="n">member</span> <span class="o">=</span> <span class="n">findMember</span><span class="o">(</span><span class="n">tokenRequest</span><span class="o">);</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">member</span><span class="o">.</span><span class="na">isInvalidPassword</span><span class="o">(</span><span class="n">tokenRequest</span><span class="o">.</span><span class="na">getPassword</span><span class="o">()))</span> <span class="o">{</span>
        <span class="k">throw</span> <span class="k">new</span> <span class="nf">AuthorizationException</span><span class="o">(</span><span class="s">"ë¡œê·¸ì¸ ì‹¤íŒ¨ì…ë‹ˆë‹¤."</span><span class="o">);</span>
    <span class="o">}</span>
    <span class="n">String</span> <span class="n">accessToken</span> <span class="o">=</span> <span class="n">jwtTokenProvider</span><span class="o">.</span><span class="na">createToken</span><span class="o">(</span><span class="n">String</span><span class="o">.</span><span class="na">valueOf</span><span class="o">(</span><span class="n">member</span><span class="o">.</span><span class="na">getId</span><span class="o">()));</span>
    <span class="k">return</span> <span class="k">new</span> <span class="nf">TokenResponse</span><span class="o">(</span><span class="n">accessToken</span><span class="o">);</span>
<span class="o">}</span>

<span class="kd">private</span> <span class="n">Member</span> <span class="nf">findMember</span><span class="o">(</span><span class="n">TokenRequest</span> <span class="n">tokenRequest</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">return</span> <span class="n">memberDao</span><span class="o">.</span><span class="na">findByEmail</span><span class="o">(</span><span class="n">tokenRequest</span><span class="o">.</span><span class="na">getEmail</span><span class="o">())</span>
            <span class="o">.</span><span class="na">orElseThrow</span><span class="o">(()</span> <span class="o">-&gt;</span> <span class="k">new</span> <span class="n">AuthorizationException</span><span class="o">(</span><span class="s">"ë¡œê·¸ì¸ ì‹¤íŒ¨ì…ë‹ˆë‹¤."</span><span class="o">));</span>
<span class="o">}</span>
</code></pre></div></div>

<ul>
  <li>ì¶”í›„ ë‹¨ë°©í–¥ ë¹„ë²ˆ ì•”í˜¸í™”ë¥¼ ìœ„í•´ ê°ì²´ì—ì„œ ë¹„ë²ˆì„ ë¹„êµí•˜ë„ë¡ ë³€ê²½</li>
</ul>

<h3 id="ìµœë‹¨ê±°ë¦¬-ì°¾ëŠ”-ë¡œì§ì„-ì „ëµ-íŒ¨í„´ìœ¼ë¡œ">ìµœë‹¨ê±°ë¦¬ ì°¾ëŠ” ë¡œì§ì„ ì „ëµ íŒ¨í„´ìœ¼ë¡œ</h3>

<p><img src="https://images.velog.io/images/new_wisdom/post/923976a2-131b-45c4-8911-c8a0b3da1e0c/image.png" style="zoom:33%;" /></p>

<ul>
  <li>ìµœë‹¨ ê²½ë¡œ ì°¾ê¸° ì „ëµì„ ì¸í„°í˜ì´ìŠ¤ë¡œ, ì´ë¥¼ ë‹¤ìµìŠ¤íŠ¸ë¼ë¡œ êµ¬í˜„í•œ í´ë˜ìŠ¤ë¥¼ ë§Œë“¦</li>
  <li>ì•Œê³ ë¦¬ì¦˜ì„ ì½”ë“œì˜ ì˜í–¥ì—†ì´ ë³€ê²½í•  ìˆ˜ ìˆë„ë¡</li>
</ul>

<h4 id="subwaygraph">SubwayGraph</h4>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">SubwayGraph</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="n">WeightedMultigraph</span><span class="o">&lt;</span><span class="n">Station</span><span class="o">,</span> <span class="n">DefaultWeightedEdge</span><span class="o">&gt;</span> <span class="n">graph</span><span class="o">;</span>

    <span class="kd">public</span> <span class="nf">SubwayGraph</span><span class="o">(</span><span class="n">WeightedMultigraph</span><span class="o">&lt;</span><span class="n">Station</span><span class="o">,</span> <span class="n">DefaultWeightedEdge</span><span class="o">&gt;</span> <span class="n">graph</span><span class="o">,</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">Section</span><span class="o">&gt;</span> <span class="n">sections</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">graph</span> <span class="o">=</span> <span class="n">graph</span><span class="o">;</span>
        <span class="n">initPath</span><span class="o">(</span><span class="n">sections</span><span class="o">);</span>
    <span class="o">}</span>
   <span class="c1">// ...</span>
</code></pre></div></div>

<ul>
  <li>ê·¸ë˜í”„ ë„ë©”ì¸</li>
</ul>

<h4 id="shortestpathstrategy-ì¸í„°í˜ì´ìŠ¤">ShortestPathStrategy ì¸í„°í˜ì´ìŠ¤</h4>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">interface</span> <span class="nc">ShortestPathStrategy</span> <span class="o">{</span>
    <span class="n">List</span><span class="o">&lt;</span><span class="n">Station</span><span class="o">&gt;</span> <span class="nf">getVertexList</span><span class="o">(</span><span class="n">Station</span> <span class="n">source</span><span class="o">,</span> <span class="n">Station</span> <span class="n">target</span><span class="o">);</span>

    <span class="kt">double</span> <span class="nf">getPathWeight</span><span class="o">(</span><span class="n">Station</span> <span class="n">source</span><span class="o">,</span> <span class="n">Station</span> <span class="n">target</span><span class="o">);</span>
<span class="o">}</span>
</code></pre></div></div>

<ul>
  <li>ì „ëµë§ˆë‹¤ <code class="highlighter-rouge">getVertexList()</code> ì™€ <code class="highlighter-rouge">getPathWeight()</code> ë¥¼ ê³„ì‚°í•˜ë„ë¡ ëª…ì„¸</li>
</ul>

<h4 id="dijkstrashortestpathstrategy">DijkstraShortestPathStrategy</h4>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">DijkstraShortestPathStrategy</span> <span class="kd">implements</span> <span class="n">ShortestPathStrategy</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="n">ShortestPathAlgorithm</span><span class="o">&lt;</span><span class="n">Station</span><span class="o">,</span> <span class="n">DefaultWeightedEdge</span><span class="o">&gt;</span> <span class="n">shortestPathAlgorithm</span><span class="o">;</span>

    <span class="kd">public</span> <span class="nf">DijkstraShortestPathStrategy</span><span class="o">(</span><span class="n">SubwayGraph</span> <span class="n">subwayGraph</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">shortestPathAlgorithm</span> <span class="o">=</span> <span class="k">new</span> <span class="n">DijkstraShortestPath</span><span class="o">&lt;&gt;(</span><span class="n">subwayGraph</span><span class="o">.</span><span class="na">getGraph</span><span class="o">());</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">Station</span><span class="o">&gt;</span> <span class="nf">getVertexList</span><span class="o">(</span><span class="n">Station</span> <span class="n">source</span><span class="o">,</span> <span class="n">Station</span> <span class="n">target</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">shortestPathAlgorithm</span><span class="o">.</span><span class="na">getPath</span><span class="o">(</span><span class="n">source</span><span class="o">,</span> <span class="n">target</span><span class="o">).</span><span class="na">getVertexList</span><span class="o">();</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">double</span> <span class="nf">getPathWeight</span><span class="o">(</span><span class="n">Station</span> <span class="n">source</span><span class="o">,</span> <span class="n">Station</span> <span class="n">target</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">shortestPathAlgorithm</span><span class="o">.</span><span class="na">getPathWeight</span><span class="o">(</span><span class="n">source</span><span class="o">,</span> <span class="n">target</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<ul>
  <li>SubwayGraphë¥¼ ë°›ì•„ì„œ ìµœë‹¨ ê²½ë¡œë¥¼ êµ¬í•  ìˆ˜ ìˆìŒ</li>
</ul>

<h4 id="shortestpathfinder">ShortestPathFinder</h4>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">ShortestPathFinder</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="n">ShortestPathStrategy</span> <span class="n">shortestPathStrategy</span><span class="o">;</span>

    <span class="kd">public</span> <span class="nf">ShortestPathFinder</span><span class="o">(</span><span class="n">ShortestPathStrategy</span> <span class="n">shortestPathStrategy</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">shortestPathStrategy</span> <span class="o">=</span> <span class="n">shortestPathStrategy</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="n">Path</span> <span class="nf">findShortestPath</span><span class="o">(</span><span class="n">Station</span> <span class="n">source</span><span class="o">,</span> <span class="n">Station</span> <span class="n">target</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="k">new</span> <span class="nf">Path</span><span class="o">(</span><span class="n">shortestPathStrategy</span><span class="o">.</span><span class="na">getVertexList</span><span class="o">(</span><span class="n">source</span><span class="o">,</span> <span class="n">target</span><span class="o">),</span> <span class="n">shortestPathStrategy</span><span class="o">.</span><span class="na">getPathWeight</span><span class="o">(</span><span class="n">source</span><span class="o">,</span> <span class="n">target</span><span class="o">));</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<ul>
  <li>ìµœë‹¨ ê²½ë¡œë¥¼ ì°¾ëŠ” ì—­í• </li>
  <li>ì „ëµì„ ì£¼ì…ë°›ì•„ ìµœë‹¨ ê²½ë¡œë¥¼ êµ¬í•˜ê³  ì‹¶ì–´ ë„ë©”ì¸ì„ ë¶„ë¦¬í•˜ì˜€ìŒâ€¦</li>
</ul>

<h4 id="ë³€ê²½ëœ-pathservice">ë³€ê²½ëœ PathService</h4>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="n">PathResponse</span> <span class="nf">findPath</span><span class="o">(</span><span class="n">Long</span> <span class="n">sourceId</span><span class="o">,</span> <span class="n">Long</span> <span class="n">targetId</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">List</span><span class="o">&lt;</span><span class="n">Section</span><span class="o">&gt;</span> <span class="n">sections</span> <span class="o">=</span> <span class="n">sectionDao</span><span class="o">.</span><span class="na">findByStationIds</span><span class="o">(</span><span class="n">Arrays</span><span class="o">.</span><span class="na">asList</span><span class="o">(</span><span class="n">sourceId</span><span class="o">,</span> <span class="n">targetId</span><span class="o">));</span>
    <span class="n">SubwayGraph</span> <span class="n">subwayGraph</span> <span class="o">=</span> <span class="k">new</span> <span class="n">SubwayGraph</span><span class="o">(</span><span class="k">new</span> <span class="n">WeightedMultigraph</span><span class="o">&lt;&gt;(</span><span class="n">DefaultWeightedEdge</span><span class="o">.</span><span class="na">class</span><span class="o">),</span> <span class="n">sections</span><span class="o">);</span>
    <span class="n">ShortestPathFinder</span> <span class="n">shortestPathFinder</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ShortestPathFinder</span><span class="o">(</span><span class="k">new</span> <span class="n">DijkstraShortestPathStrategy</span><span class="o">(</span><span class="n">subwayGraph</span><span class="o">));</span>
    <span class="n">Path</span> <span class="n">shortestPath</span> <span class="o">=</span> <span class="n">shortestPathFinder</span><span class="o">.</span><span class="na">findShortestPath</span><span class="o">(</span><span class="k">new</span> <span class="n">Station</span><span class="o">(</span><span class="n">sourceId</span><span class="o">),</span> <span class="k">new</span> <span class="n">Station</span><span class="o">(</span><span class="n">targetId</span><span class="o">));</span>
    <span class="k">return</span> <span class="k">new</span> <span class="nf">PathResponse</span><span class="o">(</span><span class="n">StationResponse</span><span class="o">.</span><span class="na">listOf</span><span class="o">(</span><span class="n">combineStationById</span><span class="o">(</span><span class="n">shortestPath</span><span class="o">)),</span> <span class="o">(</span><span class="kt">int</span><span class="o">)</span> <span class="n">shortestPath</span><span class="o">.</span><span class="na">distance</span><span class="o">());</span>
<span class="o">}</span>

<span class="kd">private</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">Station</span><span class="o">&gt;</span> <span class="nf">combineStationById</span><span class="o">(</span><span class="n">Path</span> <span class="n">path</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">List</span><span class="o">&lt;</span><span class="n">Long</span><span class="o">&gt;</span> <span class="n">stationIds</span> <span class="o">=</span> <span class="n">path</span><span class="o">.</span><span class="na">stations</span><span class="o">()</span>
            <span class="o">.</span><span class="na">stream</span><span class="o">()</span>
            <span class="o">.</span><span class="na">map</span><span class="o">(</span><span class="nl">Station:</span><span class="o">:</span><span class="n">getId</span><span class="o">)</span>
            <span class="o">.</span><span class="na">collect</span><span class="o">(</span><span class="n">Collectors</span><span class="o">.</span><span class="na">toList</span><span class="o">());</span>
    <span class="k">return</span> <span class="n">stationDao</span><span class="o">.</span><span class="na">findByIds</span><span class="o">(</span><span class="n">stationIds</span><span class="o">).</span><span class="na">sortedStation</span><span class="o">(</span><span class="n">stationIds</span><span class="o">);</span>
<span class="o">}</span>
</code></pre></div></div>

<h4 id="ë°˜ì˜ëœ-ì½”ë“œëŠ”-ì—¬ê¸°ì—-"><a href="https://github.com/NewWisdom/atdd-subway-path/tree/step5">ë°˜ì˜ëœ ì½”ë“œëŠ” ì—¬ê¸°ì— ğŸ‘»</a></h4>


	  ]]></description>
	</item>

	<item>
	  <title>ğŸ“š atdd-subway-map ë¯¸ì…˜ ì •ë¦¬</title>
	  <link>//atdd-subway-map</link>
	  <author></author>
	  <pubDate>2021-06-11T10:01:00+09:00</pubDate>
	  <guid>//atdd-subway-map</guid>
	  <description><![CDATA[
	     <h2 id="ì¤‘ë³µë˜ëŠ”-í…ŒìŠ¤íŠ¸-ë©”ì„œë“œ">ì¤‘ë³µë˜ëŠ” í…ŒìŠ¤íŠ¸ ë©”ì„œë“œ</h2>

<p><img src="https://images.velog.io/images/new_wisdom/post/73cdc1c4-063d-4a4e-af29-6520fecb721e/image.png" style="zoom:50%;" /></p>

<ul>
  <li>ì¤‘ë³µë˜ëŠ” í…ŒìŠ¤íŠ¸ ë©”ì„œë“œëŠ” ì¶”ì¶œí•˜ì</li>
  <li>í…ŒìŠ¤íŠ¸ì½”ë“œë„ ìœ ì§€ë³´ìˆ˜ì˜ ëŒ€ìƒì´ë©° í•˜ë‚˜ì˜ ë¬¸ì„œì´ê¸° ë•Œë¬¸ì— ê°€ë…ì„±ì„ ê³ ë ¤í•˜ì</li>
</ul>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">private</span> <span class="n">ExtractableResponse</span><span class="o">&lt;</span><span class="n">Response</span><span class="o">&gt;</span> <span class="nf">addSection</span><span class="o">(</span><span class="n">String</span> <span class="n">content</span><span class="o">)</span> <span class="o">{</span>
  <span class="k">return</span> <span class="n">RestAssured</span><span class="o">.</span><span class="na">given</span><span class="o">().</span><span class="na">log</span><span class="o">().</span><span class="na">all</span><span class="o">()</span>
    <span class="o">.</span><span class="na">body</span><span class="o">(</span><span class="n">content</span><span class="o">)</span>
    <span class="o">.</span><span class="na">contentType</span><span class="o">(</span><span class="n">MediaType</span><span class="o">.</span><span class="na">APPLICATION_JSON_VALUE</span><span class="o">)</span>
    <span class="o">.</span><span class="na">when</span><span class="o">()</span>
    <span class="o">.</span><span class="na">post</span><span class="o">(</span><span class="s">"/lines/{id}/sections"</span><span class="o">,</span> <span class="mi">1L</span><span class="o">)</span>
    <span class="o">.</span><span class="na">then</span><span class="o">().</span><span class="na">log</span><span class="o">().</span><span class="na">all</span><span class="o">()</span>
    <span class="o">.</span><span class="na">extract</span><span class="o">();</span>
<span class="o">}</span>
</code></pre></div></div>

<h2 id="ì˜ˆì™¸-ì²˜ë¦¬ëŠ”-daoì—ì„œ">ì˜ˆì™¸ ì²˜ë¦¬ëŠ” DAOì—ì„œ</h2>

<p><img src="https://images.velog.io/images/new_wisdom/post/004aa497-1875-4a85-ba7d-2ab1c0f4f40e/image.png" style="zoom:50%;" /></p>

<ul>
  <li>DAOì—ì„œ ì˜ˆì™¸ë¥¼ ì²´í¬í•´ì£¼ê³  ìˆì—ˆìŒ</li>
  <li>DAOëŠ” ë§ê·¸ëŒ€ë¡œ DBì— ì–´ì„¸ìŠ¤í•˜ëŠ” ì—­í• ë§Œ í•  ë¿</li>
  <li>ì´ ê²°ê³¼ì— ëŒ€í•œ ì˜ˆì™¸ëŠ” ì„œë¹„ìŠ¤ê°€ ì•Œì•„ì„œ í•˜ë„ë¡ í•˜ì</li>
</ul>

<h2 id="validì™€-validatedë¡œ-dto-ê²€ì¦">@Validì™€ @Validatedë¡œ DTO ê²€ì¦</h2>

<ul>
  <li><code class="highlighter-rouge">@Valid</code> ë¥¼ í†µí•´ DTOì—ì„œ ìš”ì²­ì— ëŒ€í•œ ê²€ì¦ì„ í•˜ê²Œ í•´ì¤Œ</li>
  <li>Validationì„ groupí™” í•  ìˆ˜ ìˆëŠ” ì ì„ ì´ìš©í•´ì„œ ê°ê¸° ìš”ì²­ë§ˆë‹¤ groupì„ ì§€ì–´ í•œ DTOë¥¼ ì‚¬ìš©í•´ë„ ê°ê° ìš”ì²­ì— ë§ëŠ” ê²€ì¦ì„ ì§„í–‰</li>
</ul>

<h4 id="ì •ë¦¬">ì •ë¦¬</h4>

<ul>
  <li><a href="https://github.com/NewWisdom/TIL/issues/30">@Valid / @Validationìœ¼ë¡œ ìš”ì²­ê°’ ê²€ì¦</a></li>
</ul>

<h2 id="validë¡œ-ì¡ì€-ì˜ˆì™¸-ë©”ì‹œì§€-ì²˜ë¦¬">Validë¡œ ì¡ì€ ì˜ˆì™¸ ë©”ì‹œì§€ ì²˜ë¦¬</h2>

<p><img src="https://images.velog.io/images/new_wisdom/post/2ca1114f-98c3-4ce6-b968-0212fcbbc658/image.png" style="zoom: 50%;" /></p>

<ul>
  <li>Valid ì–´ë…¸í…Œì´ì…˜ìœ¼ë¡œ ì¡ì€ MethodArgumentNotValidExceptionì˜ ë©”ì‹œì§€ë¥¼ ì œëŒ€ë¡œ ì¶œë ¥í•˜ê³  ìˆì§€ ì•Šì•˜ìŒ</li>
  <li>ê²Œì´ì¸ ê°€ ì œì•ˆí•´ì¤€ ë°©ë²•ì„ ì ìš©í•˜ë‹ˆ BindingResultì— ìˆëŠ” ì˜ˆì™¸ ë©”ì‹œì§€ë“¤ì„ ì¶”ì¶œí•˜ì—¬ ë˜ì ¸ì¤„ ìˆ˜ ìˆì—ˆìŒ</li>
</ul>

<h2 id="service-ë ˆì´ì–´ì—ì„œ-ë„ë©”ì¸ì´-ì•„ë‹Œ-dtoë¥¼-ë°˜í™˜í•˜ì">Service ë ˆì´ì–´ì—ì„œ ë„ë©”ì¸ì´ ì•„ë‹Œ DTOë¥¼ ë°˜í™˜í•˜ì</h2>

<p><img src="https://images.velog.io/images/new_wisdom/post/a2e62828-da05-401f-bad8-e1e86f9b7c9a/image.png" style="zoom:50%;" /></p>

<ul>
  <li>Controllerì—ì„œ ë„ë©”ì¸ì„ ê°€ì ¸ë‹¤ ì¨ì„œ í™”ë©´ì— í•„ìš”í•œ ë°ì´í„°ë¥¼ í‘œí˜„í•˜ê¸° ìœ„í•´ ë„ë©”ì¸ ìì²´ë‚˜ ë„ë©”ì¸ì˜ getterë¥¼ ë…¸ì¶œì‹œí‚¤ê³  ìˆì—ˆìŒ</li>
  <li>ë„ë©”ì¸ì˜ ì •ë³´ë¥¼ ì™¸ë¶€(view)ì— ë…¸ì¶œí•˜ëŠ” ê²½ìš°, interfaceì¸ DTOë¥¼ í†µí•´ ì„œë¹„ìŠ¤ ë ˆì´ì–´ì—ì„œ ë°˜í™˜í•˜ë„ë¡ ë¦¬íŒ©í† ë§</li>
  <li><a href="https://github.com/HomoEfficio/dev-tips/blob/master/DTO-DomainObject-Converter.md">ì°¸ê³ </a></li>
</ul>

<h4 id="ì •ë¦¬-1">ì •ë¦¬</h4>

<ul>
  <li><a href="https://github.com/NewWisdom/TIL/issues/26">Service Layerì—ì„œ ë„ë©”ì¸ ê°ì²´ê°€ ì•„ë‹Œ DTOë¥¼ ë°˜í™˜í•´ì•¼í•˜ëŠ” ì´ìœ ? (feat.Open Session In View) </a></li>
</ul>

<h2 id="restassuredì—-ëŒ€í•´">RestAssuredì— ëŒ€í•´</h2>

<ul>
  <li>ì „ ë‹¨ê³„ê¹Œì§€ëŠ” MockMVC ë“±ìœ¼ë¡œ ì»¨íŠ¸ë¡¤ëŸ¬ë‹¨ì„ ë‹¨ìœ„í…ŒìŠ¤íŠ¸ë¡œ ì§„í–‰í–ˆìŒ</li>
  <li>E2E í…ŒìŠ¤íŠ¸ë¥¼ í•œë‹¤ëŠ” ê²ƒì€ ë§ ê·¸ëŒ€ë¡œ ëë¶€í„° ëê¹Œì§€,ìš”ì²­ë¶€í„° ë‚´ê°€ ì›í•˜ëŠ” ì‘ë‹µì„ í…ŒìŠ¤íŠ¸ í•˜ëŠ” ê²ƒì¸ë° <br />
ì´ë ‡ê²Œë˜ë©´ ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ë¥¼ í•˜ëŠ” ì´ìœ ê°€ ìˆì„ê¹Œë¼ëŠ” ê³ ë¯¼ì„ í–ˆìŒ</li>
  <li>ê³ ë¯¼í•œ ê²°ê³¼ â€œë‹¨ìœ„ í…ŒìŠ¤íŠ¸ëŠ” êµ¬í˜„ ë‹¨ê³„ì—ì„œ ë‚´ê°€ êµ¬í˜„í•œ ë ˆì´ì–´(ë‹¨ìœ„)ê°€ ì •ìƒ ë™ì‘í•˜ëŠ”ì§€ë¥¼ í…ŒìŠ¤íŠ¸í•˜ê¸° ìœ„í•´,
ì´í›„ ëª¨ë“  ë‹¨ìœ„ë“¤ì´ ì¡°í•©ë˜ì—ˆì„ ë•Œ í†µí•©í…ŒìŠ¤íŠ¸ë¥¼ í†µí•´ ì• í”Œë¦¬ì¼€ì´ì…”ì´ ì›í•˜ëŠ” ê¸°ëŠ¥ì„ ì˜ ìˆ˜í–‰í•˜ëŠ”ì§€ í…ŒìŠ¤íŠ¸í•œë‹¤â€
ì´ë ‡ê²Œ ê²°ë¡ ì„ ë‚´ë¦¼</li>
</ul>

<p><img src="https://images.velog.io/images/new_wisdom/post/191d92fe-c4e1-4595-b67f-ee1d37e1d9a6/image.png" style="zoom:33%;" /></p>

<h2 id="êµ¬ê°„-ì¶”ê°€-ë¡œì§">êµ¬ê°„ ì¶”ê°€ ë¡œì§</h2>

<ul>
  <li>êµ¬ê°„ì„ ì¶”ê°€í•  ë•Œ ìƒí–‰ì—­, í•˜í–‰ì—­ì´ ì¡´ì¬í•˜ëŠ”ì§€ ë˜ ì´ë¥¼ ì°¾ê³  ìˆ˜ì •í•´ì£¼ê¸° ìœ„í•œ ë§ì€ ë¡œì§ì„ ì‘ì„±í•´ì•¼í–ˆìŒ</li>
  <li>ê·¸ëŸ°ë° ì‚¬ì‹¤ ë¹„ìŠ·í•œ ë¡œì§ì¸ë° ìƒí–‰ì¸ì§€ í•˜í–‰ì¸ì§€ ëŒ€ìƒë§Œ ë‹¬ëìŒ</li>
  <li>ì•„ë˜ì™€ ê°™ì´ ì¼ë‹¨ êµ¬í˜„ì„ ëª©ì ìœ¼ë¡œ í–ˆì„ ë•ŒëŠ” ì—„ì²­ë‚œ ë¶„ê¸°ê°€ ìƒê²¨ë²„ë¦¼</li>
</ul>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Transactional</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">addSection</span><span class="o">(</span><span class="kd">final</span> <span class="n">Long</span> <span class="n">lineId</span><span class="o">,</span> <span class="kd">final</span> <span class="n">SectionRequest</span> <span class="n">sectionRequest</span><span class="o">)</span> <span class="o">{</span>
  <span class="n">Line</span> <span class="n">line</span> <span class="o">=</span> <span class="n">lineRepository</span><span class="o">.</span><span class="na">findById</span><span class="o">(</span><span class="n">lineId</span><span class="o">);</span>
  <span class="n">Section</span> <span class="n">toAddSection</span> <span class="o">=</span> <span class="n">sectionRequest</span><span class="o">.</span><span class="na">toSection</span><span class="o">(</span><span class="n">lineId</span><span class="o">);</span>
  <span class="n">Station</span> <span class="n">targetStation</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="na">registeredStation</span><span class="o">(</span><span class="n">toAddSection</span><span class="o">);</span>
  <span class="k">if</span> <span class="o">(</span><span class="n">toAddSection</span><span class="o">.</span><span class="na">hasUpStation</span><span class="o">(</span><span class="n">targetStation</span><span class="o">))</span> <span class="o">{</span>
    <span class="n">Section</span> <span class="n">targetSection</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="na">findSectionWithUpStation</span><span class="o">(</span><span class="n">targetStation</span><span class="o">);</span>
    <span class="n">checkAddableByDistance</span><span class="o">(</span><span class="n">toAddSection</span><span class="o">,</span> <span class="n">targetSection</span><span class="o">);</span>
    <span class="n">lineRepository</span><span class="o">.</span><span class="na">updateSection</span><span class="o">(</span><span class="n">lineId</span><span class="o">,</span>
                                 <span class="k">new</span> <span class="nf">Section</span><span class="o">(</span><span class="n">targetSection</span><span class="o">.</span><span class="na">id</span><span class="o">(),</span> <span class="n">lineId</span><span class="o">,</span> <span class="n">toAddSection</span><span class="o">.</span><span class="na">downStation</span><span class="o">(),</span> <span class="n">targetSection</span><span class="o">.</span><span class="na">downStation</span><span class="o">(),</span> <span class="n">targetSection</span><span class="o">.</span><span class="na">subtractDistance</span><span class="o">(</span><span class="n">toAddSection</span><span class="o">)));</span>
  <span class="o">}</span>
  <span class="k">if</span> <span class="o">(</span><span class="n">toAddSection</span><span class="o">.</span><span class="na">hasDownStation</span><span class="o">(</span><span class="n">targetStation</span><span class="o">))</span> <span class="o">{</span>
    <span class="n">Section</span> <span class="n">targetSection</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="na">findSectionWithDownStation</span><span class="o">(</span><span class="n">targetStation</span><span class="o">);</span>
    <span class="n">checkAddableByDistance</span><span class="o">(</span><span class="n">toAddSection</span><span class="o">,</span> <span class="n">targetSection</span><span class="o">);</span>
    <span class="n">lineRepository</span><span class="o">.</span><span class="na">updateSection</span><span class="o">(</span><span class="n">lineId</span><span class="o">,</span>
                                 <span class="k">new</span> <span class="nf">Section</span><span class="o">(</span><span class="n">targetSection</span><span class="o">.</span><span class="na">id</span><span class="o">(),</span> <span class="n">lineId</span><span class="o">,</span> <span class="n">targetSection</span><span class="o">.</span><span class="na">upStation</span><span class="o">(),</span> <span class="n">toAddSection</span><span class="o">.</span><span class="na">upStation</span><span class="o">(),</span> <span class="n">targetSection</span><span class="o">.</span><span class="na">subtractDistance</span><span class="o">(</span><span class="n">toAddSection</span><span class="o">)));</span>
  <span class="o">}</span>
  <span class="n">lineRepository</span><span class="o">.</span><span class="na">addSection</span><span class="o">(</span><span class="n">lineId</span><span class="o">,</span> <span class="n">sectionRequest</span><span class="o">.</span><span class="na">getUpStationId</span><span class="o">(),</span> <span class="n">sectionRequest</span><span class="o">.</span><span class="na">getDownStationId</span><span class="o">(),</span> <span class="n">sectionRequest</span><span class="o">.</span><span class="na">getDistance</span><span class="o">());</span>
<span class="o">}</span>
</code></pre></div></div>

<ul>
  <li>ì´ëŠ” ìƒí–‰êµ¬ê°„ ì°¾ê¸°, í•˜í–‰êµ¬ê°„ ì°¾ê¸°ë¥¼ ì „ëµíŒ¨í„´ì„ ì´ìš©í•´ ë¦¬íŒ©í†  í•´ë²„ë ¸ìŒ</li>
</ul>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">LineService</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="n">LineRepository</span> <span class="n">lineRepository</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="n">StationDao</span> <span class="n">stationDao</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">FindSectionStrategy</span><span class="o">&gt;</span> <span class="n">findSectionStrategies</span><span class="o">;</span>
<span class="c1">// ...</span>
</code></pre></div></div>

<ul>
  <li>ì¼ë‹¨ LineServiceê°€ êµ¬ê°„ì„ ì°¾ëŠ” ì „ëµì„ ê°€ì§€ê³  ìˆìŒ</li>
</ul>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Transactional</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">addSection</span><span class="o">(</span><span class="kd">final</span> <span class="n">Long</span> <span class="n">lineId</span><span class="o">,</span> <span class="kd">final</span> <span class="n">SectionRequest</span> <span class="n">sectionRequest</span><span class="o">)</span> <span class="o">{</span>
  <span class="n">Line</span> <span class="n">line</span> <span class="o">=</span> <span class="n">lineRepository</span><span class="o">.</span><span class="na">findById</span><span class="o">(</span><span class="n">lineId</span><span class="o">);</span>
  <span class="n">Section</span> <span class="n">toAddSection</span> <span class="o">=</span> <span class="n">sectionRequest</span><span class="o">.</span><span class="na">toSection</span><span class="o">(</span><span class="n">lineId</span><span class="o">);</span>
  <span class="n">Station</span> <span class="n">targetStation</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="na">registeredStation</span><span class="o">(</span><span class="n">toAddSection</span><span class="o">);</span>
  <span class="n">Section</span> <span class="n">targetSection</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="na">findSectionWithStation</span><span class="o">(</span><span class="n">targetStation</span><span class="o">,</span> <span class="n">findSectionStrategies</span><span class="o">);</span>
  <span class="n">lineRepository</span><span class="o">.</span><span class="na">updateSection</span><span class="o">(</span><span class="n">lineId</span><span class="o">,</span> <span class="n">targetSection</span><span class="o">.</span><span class="na">updateToAdd</span><span class="o">(</span><span class="n">toAddSection</span><span class="o">));</span>
  <span class="n">lineRepository</span><span class="o">.</span><span class="na">addSection</span><span class="o">(</span><span class="n">lineId</span><span class="o">,</span> <span class="n">sectionRequest</span><span class="o">.</span><span class="na">getUpStationId</span><span class="o">(),</span> <span class="n">sectionRequest</span><span class="o">.</span><span class="na">getDownStationId</span><span class="o">(),</span> <span class="n">sectionRequest</span><span class="o">.</span><span class="na">getDistance</span><span class="o">());</span>
<span class="o">}</span>
</code></pre></div></div>

<ul>
  <li>ëŒ€ìƒ êµ¬ê°„ì„ ì°¾ì„ ë•Œ ì „ëµë“¤ì„ ì£¼ì…í•˜ê³ </li>
</ul>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="n">Section</span> <span class="nf">findSectionWithStation</span><span class="o">(</span><span class="n">Station</span> <span class="n">targetStation</span><span class="o">,</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">FindSectionStrategy</span><span class="o">&gt;</span> <span class="n">findSectionStrategies</span><span class="o">)</span> <span class="o">{</span>
  <span class="k">return</span> <span class="n">findSectionStrategies</span><span class="o">.</span><span class="na">stream</span><span class="o">()</span>
    <span class="o">.</span><span class="na">map</span><span class="o">(</span><span class="n">findSectionStrategy</span> <span class="o">-&gt;</span> <span class="n">findSectionStrategy</span><span class="o">.</span><span class="na">findSection</span><span class="o">(</span><span class="n">sections</span><span class="o">,</span> <span class="n">targetStation</span><span class="o">))</span>
    <span class="o">.</span><span class="na">filter</span><span class="o">(</span><span class="nl">Optional:</span><span class="o">:</span><span class="n">isPresent</span><span class="o">)</span>
    <span class="o">.</span><span class="na">map</span><span class="o">(</span><span class="nl">Optional:</span><span class="o">:</span><span class="n">get</span><span class="o">)</span>
    <span class="o">.</span><span class="na">findAny</span><span class="o">()</span>
    <span class="o">.</span><span class="na">orElse</span><span class="o">(</span><span class="n">EMPTY</span><span class="o">);</span>
<span class="o">}</span>
</code></pre></div></div>

<ul>
  <li>Sectionsì—ì„œ ë‹¤ìŒê³¼ ê°™ì´ í•´ë‹¹ êµ¬ê°„ì„ ì°¾ìŒ</li>
</ul>

<h2 id="pr-ë§í¬">PR ë§í¬</h2>

<ul>
  <li><a href="https://github.com/woowacourse/atdd-subway-map/pull/86">STEP1</a></li>
  <li><a href="https://github.com/woowacourse/atdd-subway-map/pull/162">STEP2</a></li>
</ul>

	  ]]></description>
	</item>

	<item>
	  <title>ğŸŒ± ìŠ¤í”„ë§ ë¶€íŠ¸ Profileë¡œ ë‹¤ë¥¸ í™˜ê²½ êµ¬ì„±</title>
	  <link>//profile</link>
	  <author></author>
	  <pubDate>2021-06-09T10:01:00+09:00</pubDate>
	  <guid>//profile</guid>
	  <description><![CDATA[
	     <h2 id="profile">Profile?</h2>

<ul>
  <li>ì• í”Œë¦¬ì¼€ì´ì…˜ ì¼ë¶€ configurationì„ ë¶„ë¦¬í•˜ê³  ì‹¶ì„ ë•Œ ì‚¬ìš©</li>
  <li>ì• í”Œë¦¬ì¼€ì´ì…˜ ì¼ë¶€ configurationì„ íŠ¹ì • í™˜ê²½ì—ì„œë§Œ ê°€ëŠ¥í•˜ê²Œ í•˜ê³  ì‹¶ì„ ë•Œ ì‚¬ìš©</li>
  <li>ê°œë°œ í™˜ê²½ì— ë”°ë¼ ì„¤ì •ê°’ì„ ë‹¬ë¥´ê²Œ ë¡œë”©í•  ë•Œ</li>
</ul>

<h2 id="profile-1">@Profile</h2>

<ul>
  <li><code class="highlighter-rouge">@Component, @Configuration, @ConfigurationProperties</code>ì„ <code class="highlighter-rouge">@Profile</code>ì™€ í•¨ê»˜ ì„ ì–¸</li>
</ul>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="nd">@Configuration</span>
<span class="nd">@Profile</span><span class="o">(</span><span class="s">"production"</span><span class="o">)</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">ProductionConfiguration</span> <span class="o">{</span>

    <span class="c1">// ...</span>

<span class="o">}</span>
</code></pre></div></div>
<ul>
  <li>ì–´í”Œë¦¬ì¼€ì´ì…˜ ì‹¤í–‰ì‹œ <code class="highlighter-rouge">spring.profiles.active</code> í”„ë¡œí¼í‹°ë¡œ í”„ë¡œíŒŒì¼ì„ ì§€ì •í•˜ë©´ í•´ë‹¹ í”„ë¡œíŒŒì¼ì´ ì ìš©ëœ ë¹ˆë§Œ ë“±ë¡ë¨</li>
</ul>

<p><strong>application-properties</strong></p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>spring.profiles.active=dev,hsqldb
</code></pre></div></div>

<h4 id="example">Example</h4>

<ol>
  <li>application-propertiesì— ë‹¤ìŒê³¼ ê°™ì´ ì •ì˜
    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>spring.profiles.active=prod
</code></pre></div>    </div>
  </li>
  <li><code class="highlighter-rouge">@Profile</code> ì–´ë…¸í…Œì´ì…˜ê³¼ í•¨ê»˜ <code class="highlighter-rouge">@Configuration</code> ë“±ë¡</li>
</ol>

<p><img src="https://user-images.githubusercontent.com/43840561/121311111-0f322800-c93f-11eb-9455-436a99434869.png" alt="image" style="zoom:50%;" /></p>

<p><img src="https://user-images.githubusercontent.com/43840561/121311125-13f6dc00-c93f-11eb-8a93-3923630d84fa.png" alt="image" style="zoom:50%;" /></p>

<ol>
  <li>ì–´í”Œë¦¬ì¼€ì´ì…˜ ì‹¤í–‰ì‹œ activeí•œ prodì— ë“±ë¡ëœ hello ë¹ˆì´ ì¶œë ¥ë¨</li>
</ol>

<p><img src="https://user-images.githubusercontent.com/43840561/121311276-3a1c7c00-c93f-11eb-9698-9abf9172184f.png" alt="image" /></p>

<h3 id="profileê³¼-activeprofiles">@Profileê³¼ @ActiveProfiles</h3>
<ul>
  <li>ì„œë¡œ ë‹¤ë¥¸ í™˜ê²½ì—ì„œ ì„œë¡œ ë‹¤ë¥¸ profileì„ í™œì„±í™”í•˜ì—¬ í•„ìš”í•œ ë¹ˆë§Œ ë“±ë¡í•˜ë„ë¡ í•˜ëŠ” ì–´ë…¸í…Œì´ì…˜</li>
  <li><code class="highlighter-rouge">@Profile</code>ì€ SpringBootApplicationì„ ì‹¤í–‰í•  ë•Œ ì‚¬ìš©</li>
  <li><code class="highlighter-rouge">@ActiveProfiles</code>ì€ í…ŒìŠ¤íŠ¸ í™˜ê²½ì—ì„œ ì‚¬ìš©</li>
</ul>

<h2 id="applicationproperties">application.properties</h2>

<ul>
  <li>application-{profile}.properties í˜•ì‹ìœ¼ë¡œ íŒŒì¼ ìƒì„±</li>
  <li>ì´ëŠ” <code class="highlighter-rouge">@ConfigurationProperties</code>ë¡œ ê°„ì£¼ë˜ê³  ë¡œë“œë¨
    <ul>
      <li>*.properties , *.yml íŒŒì¼ì— ìˆëŠ” propertyë¥¼ ìë°” í´ë˜ìŠ¤ì— ê°’ì„ ê°€ì ¸ì™€ì„œ(ë°”ì¸ë”©) ì‚¬ìš©í•  ìˆ˜ ìˆê²Œ í•´ì£¼ëŠ” ì–´ë…¸í…Œì´ì…˜</li>
    </ul>
  </li>
  <li>application-{profile}.propertiesì€ application.properties ë³´ë‹¤ ìš°ì„ ìˆœìœ„ê°€ ë†’ê²Œë¨</li>
  <li>ë¹Œë“œí•  ë•Œ ë‹¤ìŒê³¼ ê°™ì€ ëª…ë ¹ì–´ì™€ í•¨ê»˜ íŠ¹ì • í™˜ê²½ì„¤ì •ì„ ì ìš©í•  ìˆ˜ ìˆìŒ
    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>--spring.profiles.active=production
</code></pre></div>    </div>
  </li>
  <li>properties íŒŒì¼ì— <code class="highlighter-rouge">spring.profiles.include</code>ë¥¼ í†µí•´ ì¶”ê°€í•  í”„ë¡œíŒŒì¼ì„ ì„¤ì •í•  ìˆ˜ ìˆìŒ</li>
</ul>

<h4 id="example-1">Example</h4>

<p><strong>application-properties</strong></p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>spring.profiles.active=dev
profile-common.name = default_name_mazzi
defaultonly.name = defualt_name
</code></pre></div></div>
<p><strong>application-prod.properties</strong></p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>profile-common.name = test_name_mazzi
testonly.name = test_name
</code></pre></div></div>
<p><strong>application-dev.properties</strong></p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>profile-common.name = dev_name_mazzi
devonly.name = dev_name
</code></pre></div></div>
<p><strong>AppRunner</strong></p>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Component</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">AppRunner</span> <span class="kd">implements</span> <span class="n">ApplicationRunner</span> <span class="o">{</span>
    <span class="nd">@Autowired</span>
    <span class="n">Environment</span> <span class="n">env</span><span class="o">;</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">run</span><span class="o">(</span><span class="n">ApplicationArguments</span> <span class="n">args</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">Exception</span> <span class="o">{</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"====================================================="</span><span class="o">);</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"spring.profiles.active : "</span> <span class="o">+</span> <span class="n">args</span><span class="o">.</span><span class="na">getOptionValues</span><span class="o">(</span><span class="s">"spring.profiles.active"</span><span class="o">));</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Enviroment's Active Profile : "</span> <span class="o">+</span> <span class="n">Arrays</span><span class="o">.</span><span class="na">toString</span><span class="o">(</span><span class="n">env</span><span class="o">.</span><span class="na">getActiveProfiles</span><span class="o">()));</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"defaultonly.name : "</span> <span class="o">+</span> <span class="n">env</span><span class="o">.</span><span class="na">getProperty</span><span class="o">(</span><span class="s">"defaultonly.name"</span><span class="o">));</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"testonly.name : "</span> <span class="o">+</span> <span class="n">env</span><span class="o">.</span><span class="na">getProperty</span><span class="o">(</span><span class="s">"testonly.name"</span><span class="o">));</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"devonly.name : "</span> <span class="o">+</span> <span class="n">env</span><span class="o">.</span><span class="na">getProperty</span><span class="o">(</span><span class="s">"devonly.name"</span><span class="o">));</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"profile-common.name : "</span> <span class="o">+</span> <span class="n">env</span><span class="o">.</span><span class="na">getProperty</span><span class="o">(</span><span class="s">"profile-common.name"</span><span class="o">));</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"====================================================="</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>
<p><strong>ì‹¤í–‰ ê²°ê³¼</strong></p>

<p><img src="https://user-images.githubusercontent.com/43840561/121315869-b6b15980-c943-11eb-83a9-7e4214b18fe6.png" alt="image" style="zoom:50%;" /></p>

<ul>
  <li>profile-common.nameëŠ” ëª¨ë“  í”„ë¡œí¼í‹° íŒŒì¼ì´ ê³µí†µìœ¼ë¡œ ê°€ì§„ í”„ë¡œí¼í‹°</li>
  <li>dev í”„ë¡œíŒŒì¼ì„ í™œì„±í™”</li>
  <li>ê³µí†µ ì†ì„±ì¸ <code class="highlighter-rouge">profile-common.name</code>ì€ ìš°ì„ ìˆœìœ„ê°€ ë†’ì€ dev í”„ë¡œíŒŒì¼ì˜ ê²ƒìœ¼ë¡œ ì˜¤ë²„ë¼ì´ë“œ ë¨</li>
</ul>

<hr />
<h3 id="ì°¸ê³ ìë£Œ">ì°¸ê³ ìë£Œ</h3>
<ul>
  <li><a href="https://docs.spring.io/spring-boot/docs/current/reference/html/features.html#features.profiles">ê³µì‹ë¬¸ì„œ</a></li>
  <li><a href="https://yangbox.tistory.com/35">ìŠ¤í”„ë§ë¶€íŠ¸ í”„ë¡œíŒŒì¼(Springboot Profile)ë¡œ ë‹¤ë¥¸ í™˜ê²½ êµ¬ì„±í•˜ê¸°</a></li>
  <li><a href="https://engkimbs.tistory.com/766">ìŠ¤í”„ë§ ë¶€íŠ¸ í”„ë¡œíŒŒì¼(Spring Boot Profile)</a></li>
</ul>

	  ]]></description>
	</item>

	<item>
	  <title>ğŸ“š jwp-chess ë¯¸ì…˜ ì •ë¦¬</title>
	  <link>//jwp-chess-note</link>
	  <author></author>
	  <pubDate>2021-06-09T10:01:00+09:00</pubDate>
	  <guid>//jwp-chess-note</guid>
	  <description><![CDATA[
	     <h2 id="controlleradvice">@ControllerAdvice</h2>

<p><img src="https://images.velog.io/images/new_wisdom/post/d9838b28-b9fd-4cd3-9f8f-f19229e5da70/image.png" style="zoom: 50%;" /></p>

<ul>
  <li>ì „ì—­ ì˜ˆì™¸ë¥¼ ì²˜ë¦¬í•˜ëŠ”ë° ì‚¬ìš©</li>
</ul>

<h4 id="ì •ë¦¬">ì •ë¦¬</h4>

<p><a href="https://github.com/NewWisdom/TIL/issues/1">@ControllerAdvice, @RestControllerAdvice</a></p>

<h2 id="rest-api">REST API</h2>

<p><img src="https://images.velog.io/images/new_wisdom/post/b7428bd8-737e-489a-a59d-d3e8a1adcfd2/image.png" style="zoom:50%;" /></p>

<p><img src="https://images.velog.io/images/new_wisdom/post/3dbc03af-5e1c-4be6-a1e0-7332517831ec/image.png" style="zoom:50%;" /></p>

<ul>
  <li>REST API ì„¤ê³„ ë°©ë²•ì„ ì°¾ì•„ë³´ê³  ê³ ë¯¼í•˜ì—¬ ë°˜ì˜</li>
</ul>

<h4 id="ì •ë¦¬-1">ì •ë¦¬</h4>

<ul>
  <li><a href="https://github.com/NewWisdom/TIL/issues/2">REST API ë””ìì¸</a></li>
</ul>

<h2 id="profile">Profile</h2>

<p><img src="https://images.velog.io/images/new_wisdom/post/4fdbb04e-3c16-4a59-954f-b0020d245842/image.png" style="zoom:50%;" /></p>

<ul>
  <li>ì‹¤ì œ ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ ì‚¬ìš©í•˜ëŠ” DBëŠ” Mysql ê·¸ëŒ€ë¡œ ëƒ…ë‘ê³ </li>
  <li>í…ŒìŠ¤íŠ¸ì—ì„œëŠ” h2ë¥¼ ì‚¬ìš©í•˜ì—¬ h2 ì˜ ì¥ì ì„ ê·¹ëŒ€í™”í•´ì„œ ì‚¬ìš©í•˜ë„ë¡ ë¦¬íŒ©ë˜</li>
  <li>í…ŒìŠ¤íŠ¸ DBë¥¼ ë”°ë¡œ ì„¤ì •í•˜ê¸° ìœ„í•´ ì—´ì‹¬íˆ ì°¾ì•„ë³´ë‹¤ê°€ application-propertiesë¥¼ í™œìš©í•˜ëŠ” ë°©ì•ˆ í•™ìŠµ</li>
  <li>ì²˜ìŒì—ëŠ” application-{í™˜ê²½}-propertiesë¡œ ê°ê° íŒŒì¼ì„ ë§Œë“¤ì–´ì£¼ì—ˆìŒ</li>
  <li>ì•„ë˜ì™€ ê°™ì€ ë¦¬ë·°ë¥¼ ë°›ê³  test.resourceì— application-propertiesë¥¼ ë§Œë“¤ì–´ì¤Œ</li>
</ul>

<p><img src="https://images.velog.io/images/new_wisdom/post/5dc4b405-47bc-4422-83f8-eedaa3b7732e/image.png" style="zoom:50%;" /></p>

<p><img src="https://images.velog.io/images/new_wisdom/post/4aa931db-0a73-4ada-9ba2-2bb0e3b3ea3b/image.png" style="zoom:33%;" /></p>

<h4 id="ì •ë¦¬-2">ì •ë¦¬</h4>

<ul>
  <li>Profileì— ëŒ€í•´ ì¶”ê°€ì ìœ¼ë¡œ í•™ìŠµí•˜ê³  ì •ë¦¬</li>
  <li><a href="https://github.com/NewWisdom/TIL/issues/47">Profile</a></li>
</ul>

<h2 id="í…ŒìŠ¤íŠ¸ì—-ê´€í•˜ì—¬">í…ŒìŠ¤íŠ¸ì— ê´€í•˜ì—¬</h2>

<p><img src="https://images.velog.io/images/new_wisdom/post/03a3dc16-07b5-48d0-bf51-fbea7bacc9f6/image.png" style="zoom:50%;" /></p>

<ul>
  <li>ì§€ë‚œ ë ˆë²¨ ì²´ìŠ¤ ì½”ë“œ ì˜®ê²¨ì˜¤ë©´ì„œ í…ŒìŠ¤íŠ¸ ì½”ë“œëŠ” ë¹¼ê³  ì˜®ê²¨ì™”ì—ˆìŒ ğŸ¥²</li>
  <li>ë°ì´ë¸Œì˜ ê¶Œìœ ëŒ€ë¡œ ê° ë ˆì´ì–´ë³„ í…ŒìŠ¤íŠ¸ ì½”ë“œ ì‘ì„±</li>
  <li>ì²˜ìŒì—ëŠ” ë‹¨ìˆœíˆ <code class="highlighter-rouge">@SpringBootTest</code> (í†µí•©í…ŒìŠ¤íŠ¸)ë¡œ ì§„í–‰í•˜ë ¤ í–ˆìŒ</li>
  <li>ì°¾ì•„ë³´ë‹ˆ ê° ë ˆì´ì–´ë¥¼ ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ë¡œë„ êµ¬í˜„í•  ìˆ˜ ìˆìŒì„ ê¹¨ë‹¬ìŒ</li>
  <li><code class="highlighter-rouge">@WebMvcTest, @jdbcTest</code>ì„ í†µí•´ Controllerì™€ Repository ë ˆì´ì–´ì— ëŒ€í•œ ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ë¥¼ êµ¬í˜„</li>
</ul>

<h4 id="ì •ë¦¬-3">ì •ë¦¬</h4>

<ul>
  <li><a href="https://newwisdom.github.io/unit-test-vs">í†µí•© í…ŒìŠ¤íŠ¸ VS ë‹¨ìœ„ í…ŒìŠ¤íŠ¸</a></li>
</ul>

<h2 id="í•™ìŠµí•˜ë¼ê³ -ë˜ì ¸ì£¼ì‹ -í‚¤ì›Œë“œ">í•™ìŠµí•˜ë¼ê³  ë˜ì ¸ì£¼ì‹  í‚¤ì›Œë“œ</h2>

<p><img src="https://images.velog.io/images/new_wisdom/post/9147f41d-e48f-479d-8573-2f23fcbff416/image.png" style="zoom:50%;" /></p>

<h4 id="ì •ë¦¬-4">ì •ë¦¬</h4>

<ul>
  <li><a href="https://github.com/NewWisdom/TIL/issues/3#issue-862548280">@ResponsebodyëŠ” ì–´ë–¤ ì—­í• ì„ í•´ì¤„ê¹Œ?</a></li>
  <li><a href="https://github.com/NewWisdom/TIL/issues/4#issue-862590487">@Componentscan</a></li>
  <li><a href="https://github.com/NewWisdom/TIL/issues/5#issue-862591289">ìŠ¤í”„ë§ì˜ DI ë°©ë²•</a></li>
  <li><a href="https://github.com/NewWisdom/TIL/issues/6">Springì—ì„œ request ì²˜ë¦¬ ê³¼ì •</a></li>
</ul>

<h2 id="ì´ë²ˆ-ë¯¸ì…˜ì—ì„œ-ì´ëŸ°-í‚¤ì›Œë“œë“¤ì„-í•™ìŠµí–ˆìŒ-">ì´ë²ˆ ë¯¸ì…˜ì—ì„œ ì´ëŸ° í‚¤ì›Œë“œë“¤ì„ í•™ìŠµí–ˆìŒ ğŸ‘»</h2>

<ul>
  <li><a href="https://github.com/NewWisdom/TIL/issues?q=is%3Aissue+is%3Aopen+label%3Ajwp-chess">ë‚´ ê¹ƒí—™ issueì— ë“±ë¡í–ˆì§€ë¡±</a></li>
</ul>

	  ]]></description>
	</item>

	<item>
	  <title>ğŸ“‹ í…ŒìŠ¤íŠ¸ë¡œ ë°°ìš°ëŠ” Spring Auth ê°•ì˜</title>
	  <link>//lecture-auth</link>
	  <author></author>
	  <pubDate>2021-05-28T19:18:00+09:00</pubDate>
	  <guid>//lecture-auth</guid>
	  <description><![CDATA[
	     <h2 id="í”¼ë“œë°±-ê°•ì˜">í”¼ë“œë°± ê°•ì˜</h2>

<h3 id="ì¸ì¦-í—¤ë”">ì¸ì¦ í—¤ë”</h3>

<p>ë¡œê·¸ì¸ì„ í†µí•´ í† í°ì„ ë°œê¸‰ ë°›ì€ í›„ í—¤ë”ì— Authorizationì— í† í°ì„ ì‹¤ì–´ë³´ë‚¸ë‹¤.<br />
ì™œ êµ³ì´ ì´ í—¤ë”ì— í† í°ì„ ë„£ì–´ ë³´ë‚¼ê¹Œ?</p>

<h3 id="http-ì¸ì¦">HTTP ì¸ì¦</h3>

<p><img src="https://images.velog.io/images/new_wisdom/post/567b6a87-15f7-4409-be6a-2a4baf9b3ffb/image.png" style="zoom:50%;" /></p>

<p>HTTP í”„ë¡œí† ì½œì˜ ì •ì˜ì´ê¸° ë•Œë¬¸ì´ë‹¤.</p>

<ol>
  <li>í´ë¼ì´ì–¸íŠ¸ê°€ â€œ/â€ ìš”ì²­ì„ ë³´ë‚¸ë‹¤.</li>
  <li>ì„œë²„ëŠ” ì ‘ê·¼ì„ í•  ìˆ˜ ìˆëŠ”ì§€ í™•ì¸í•˜ê³ , ì—†ìœ¼ë©´ 401ì„ ë³´ë‚¸ë‹¤.</li>
  <li>ì—¬ê¸°ì„œëŠ” basicì´ë¼ëŠ” ë°©ì‹ìœ¼ë¡œ í† í°ì„ ê²€ì¦í•˜ê³  ìˆë‹¤. ì˜ëª»ë˜ì—ˆìœ¼ë‹ˆ ë‹¤ì‹œ ìš”ì²­í•´!</li>
</ol>

<h3 id="http-ì¸ì¦-ìŠ¤í‚´">HTTP ì¸ì¦ ìŠ¤í‚´</h3>

<h4 id="basic">Basic</h4>

<p><img src="https://images.velog.io/images/new_wisdom/post/0e9a8db3-4221-43a8-84fa-c2f81f371ab1/image.png" style="zoom:33%;" /></p>

<ul>
  <li>base64ë¥¼ ì´ìš©í•´ ì¸ì½”ë”©ëœ ì‚¬ìš©ìì˜ id/pw ìŒì˜ ì¸ì¦ ì •ë³´ë¥¼ ì „ë‹¬</li>
  <li>ì•ˆì „ì„ ìœ„í•´ HTTPS(TLS) ì—°ê²° ìœ„ì—ì„œ ë°œìƒë˜ì–´ì•¼ í•¨</li>
</ul>

<h4 id="bearer">Bearer</h4>

<p><img src="https://images.velog.io/images/new_wisdom/post/d631b9a8-b41d-438e-8038-6299f044616a/image.png" style="zoom:33%;" /></p>

<ul>
  <li>bearer tokenì´ë¼ëŠ” ë³´ì•ˆ í† í°ì„ í™œìš©í•˜ëŠ” ì¸ì¦ ìŠ¤í‚´</li>
  <li>Outh2.0ì—ì„œ ì‚¬ìš©í•˜ê¸° ìœ„í•´ ë§Œë“¤ì–´ì§</li>
</ul>

<h2 id="jwt">JWT</h2>

<ul>
  <li>Json Web Token</li>
  <li>ì›¹ í‘œì¤€ (RFC 7519)</li>
  <li>ìì²´ì ìœ¼ë¡œ ê²€ì¦ë˜ì—ˆìŒì„ ì¦ëª…í•´ì£¼ëŠ” signatureë¥¼ í¬í•¨</li>
  <li>ìƒì„±ì‹œ ê²€ì¦ì´ë‚˜ ê¶Œí•œ ì¸ê°€ ì‹œ í•„ìš”í•œ ê°’ì„ ë„£ì–´ ìƒíƒœë¥¼ ë”°ë¡œ ê´€ë¦¬í•˜ì§€ ì•Šì•„ë„ ë¨</li>
</ul>

<h3 id="í† í°ì˜-êµ¬ì„±">í† í°ì˜ êµ¬ì„±</h3>

<p><img src="https://images.velog.io/images/new_wisdom/post/1bcb51b5-e245-4389-9b50-a6d91bc27d2d/image.png" style="zoom:50%;" /></p>

<h4 id="1-header">1. Header</h4>

<ul>
  <li>í† í°ì— ëŒ€í•œ í•´ì„ ë°©ë²•</li>
  <li>alg : ì‹œê·¸ë‹ˆì²˜ì—ì„œ ì‚¬ìš©í•  ì•Œê³ ë¦¬ì¦˜ ë°©ë²•</li>
  <li>typ : í† í°ì˜ íƒ€ì…</li>
</ul>

<h4 id="2-payload">2. Payload</h4>

<ul>
  <li>í† í°ì˜ ë‚´ìš©, ì „ë‹¬í•  ë‚´ìš©</li>
  <li>payloadì˜ ê°ê°ì˜ ê°’ì„ í´ë ˆì„ì´ë¼ê³  í•¨</li>
  <li>sub : í´ë ˆì„ì˜ ì œëª©</li>
  <li>name :</li>
  <li>iat : ìƒì„± ì‹œê°„</li>
  <li>ì´ ì—­ì‹œë„ base64ë¡œ ì¸ì½”ë”©</li>
</ul>

<h4 id="3-signature">3. Signature</h4>

<ul>
  <li>í—¤ë”ì™€ í˜ì´ë¡œë“œê°€ ë³€ì¡°ë˜ì§€ ì•Šì•˜ìŒì„ ê²€ì¦Œ</li>
  <li>base64ë¡œ ì¸ì½”ë”©ì„ í•˜ê³ , ì•Œê³ ë¦¬ì¦˜ê³¼ í‚¤ê°’ìœ¼ë¡œ í•´ë…</li>
</ul>

<p><strong>basicê³¼ bearer ë‘˜ ë‹¤ base64ë¡œ ì¸ì½”ë”© í•˜ë©´ ì–´ë–»ê²Œ êµ¬ë³„í•˜ë‚˜ìš”?</strong></p>

<p>ì´ëŠ” ì„œë²„ì—ì„œ í˜ì´í¬ì²˜ëŸ¼ ì“¸ ìˆ˜ ìˆì§€!</p>

<p><strong>payloadê°€ ê°™ìœ¼ë©´ í† í° ê°’ë„ ê°™ì•„ì§€ë‚˜ìš”?</strong></p>

<p>ê·¼ë° ì•„ë§ˆ iatê°€ ë‹¬ë¼ì„œ ë‹¤ë¥¼ ìˆ˜ ë°–ì— ì—†ì„ ë“¯</p>

<hr />

<h2 id="dispatcher-servlet">Dispatcher Servlet</h2>

<h3 id="ìš”ì²­ì—-ë”°ë¼-ìˆ˜í–‰í• -ë¡œì§-ë¶„ê¸°">ìš”ì²­ì— ë”°ë¼ ìˆ˜í–‰í•  ë¡œì§ ë¶„ê¸°</h3>

<h3 id="dispatcherservlet-ìœ„ì¹˜">DispatcherServlet ìœ„ì¹˜</h3>

<p><img src="https://images.velog.io/images/new_wisdom/post/a3187c31-d891-43dc-af7a-bb4cde6ab4b0/image.png" style="zoom:50%;" /></p>

<ul>
  <li>Handler ì•ì— Interceptorê°€ ìˆìŒ</li>
</ul>

<p>MVC Config ê°ì²´ë„ ëª¨ë‘ ë¹ˆì´ì—ˆë‹¤.</p>

	  ]]></description>
	</item>

	<item>
	  <title>ğŸ“‹ Kotlinì„ ì •ë³µí•´ë´…ì‹œë‹¤ 2</title>
	  <link>//kotlin2</link>
	  <author></author>
	  <pubDate>2021-05-26T19:18:00+09:00</pubDate>
	  <guid>//kotlin2</guid>
	  <description><![CDATA[
	     <h2 id="ì½”í‹€ë¦°-dsl">ì½”í‹€ë¦° DSL</h2>

<h3 id="dlsë€">DLSë€?</h3>

<ul>
  <li>ë„ë©”ì¸ íŠ¹í™” ì–¸ì–´ (Domain-specific language) â†”ï¸ ë²”ìš© í”„ë¡œê·¸ë˜ë° ì–¸ì–´</li>
  <li>ì„ ì–¸ì  ì–¸ì–´</li>
  <li>ì„¸ë¶€ ì‹¤í–‰ì€ ì–¸ì–´ë¥¼ í•´ì„í•˜ëŠ” ì—”ì§„ì— ë§¡ê¹€</li>
  <li>ì»´íŒŒì¼ ì‹œì ì— ì œëŒ€ë¡œ ê²€ì¦í•˜ëŠ” ê²ƒì´ ì–´ë ¤ì›€</li>
</ul>

<h3 id="ì½”í‹€ë¦°-dslì´ë€">ì½”í‹€ë¦° DSLì´ë€?</h3>

<ul>
  <li>ë²”ìš© ì–¸ì–´(= ì½”í‹€ë¦°)ë¡œ ì‘ì„±ëœ í”„ë¡œê·¸ë¨ì˜ ì¼ë¶€</li>
  <li>ë²”ìš© ì–¸ì–´ì™€ ë™ì¼í•œ ë¬¸ë²• ì‚¬ìš©</li>
  <li>í˜¸ì¶œ ê²°ê³¼ë¥¼ ê°ì²´ë¡œ ë³€í™˜í•˜ê¸° ìœ„í•´ ë…¸ë ¥í•  í•„ìš” ì—†ìŒ</li>
  <li>íƒ€ì… ì•ˆì •ì„± ë³´ì¥</li>
</ul>

<h3 id="ì½”í‹€ë¦°ì€-ê°„ê²°í•œ-êµ¬ë¬¸ì„-ì–´ë–»ê²Œ-ì§€ì›í•˜ëŠ”ê°€">ì½”í‹€ë¦°ì€ ê°„ê²°í•œ êµ¬ë¬¸ì„ ì–´ë–»ê²Œ ì§€ì›í•˜ëŠ”ê°€?</h3>

<ul>
  <li>í™•ì¥ í•¨ìˆ˜</li>
  <li>ì¤‘ìœ„ í˜¸ì¶œ</li>
  <li>ì—°ì‚°ì ì˜¤ë²„ë¡œë”©</li>
  <li>get ë©”ì„œë“œì— ëŒ€í•œ ê´€ë¡€</li>
  <li>ëŒë‹¤ë¥¼ ê´„í˜¸ ë°–ìœ¼ë¡œ ë¹¼ëŠ” ê´€ë¡€</li>
  <li>ìˆ˜ì‹  ê°ì²´ ì§€ì • ëŒë‹¤</li>
</ul>

<h3 id="í™•ì¥-í•¨ìˆ˜-extension-functions">í™•ì¥ í•¨ìˆ˜ Extension functions</h3>

<ul>
  <li>ì½”í‹€ë¦°ì€ í´ë˜ìŠ¤ë¥¼ í™•ì¥í•´ì„œ ìƒˆë¡œìš´ ê¸°ëŠ¥ì„ ê°œë°œí•  ìˆ˜ ìˆë„ë¡ ì§€ì›</li>
  <li><code class="highlighter-rouge">ìƒì†</code> ê³¼ëŠ” ì¡°ê¸ˆ ë‹¤ë¥¸ ê°œë…</li>
  <li>ex) ì™¸ë¶€ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•  ë•Œ ì´ ìì²´ í´ë˜ìŠ¤ëŠ” ë³€ê²½í•  ìˆ˜  ì—†ì§€ë§Œ ì´ë¥¼ í™•ì¥í•´ ì›í•˜ëŠ” ìƒˆë¡œìš´ í•¨ìˆ˜ë¥¼ ë§Œë“¤ ìˆ˜ ìˆìŒ</li>
</ul>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="s">"Kotlin"</span><span class="p">.</span><span class="n">lastChar</span><span class="p">()</span>

<span class="k">fun</span> <span class="nf">String</span><span class="p">.</span><span class="n">lastChar</span><span class="p">():</span> <span class="n">Char</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="k">get</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="n">length</span> <span class="p">-</span> <span class="m">1</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div></div>

<h3 id="ì¤‘ìœ„-í‘œê¸°-infix-notation">ì¤‘ìœ„ í‘œê¸° Infix notation</h3>

<h4 id="ì¤‘ìœ„í‘œê¸°ë²•">ì¤‘ìœ„í‘œê¸°ë²•?</h4>

<p><strong>infix(ì¤‘ìœ„í‘œê¸°ë²•)</strong> : ì¼ìƒìƒí™œì—ì„œì˜ ìˆ˜ì‹ í‘œê¸°ë²•ìœ¼ë¡œ ë‘ ê°œì˜ í”¼ì—°ì‚°ì ì‚¬ì´ì— ì—°ì‚°ìê°€ ì¡´ì¬í•˜ëŠ” í‘œí˜„ë°©ì‹ì´ë‹¤.  ex) X + Y</p>

<p>Kotlinì—ì„œ <code class="highlighter-rouge">infix</code> í‚¤ì›Œë“œë¥¼ ì‚¬ìš©í•˜ì—¬ ì¤‘ìœ„í‘œê¸°ë²•ìœ¼ë¡œ í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•  ìˆ˜ ìˆë‹¤. ë‹¨, ì•„ë˜ ìš”ê±´ì„ ì¶©ì¡±í•´ì•¼ í•œë‹¤.</p>

<ul>
  <li>They must be member functions or extension functions. (ë©¤ë²„ í•¨ìˆ˜ í˜¹ì€ í™•ì¥ í•¨ìˆ˜ì¼ ë•Œ)</li>
  <li>They must have a single parameter. (ë‹¨ì¼ ë§¤ê°œ ë³€ìˆ˜ì¼ ë•Œ)</li>
  <li>The parameter must not accept a variable number of arguments and must have no default value. (ê°€ë³€ì¸ìë¥¼ ë°›ìœ¼ë©´ ì•ˆë˜ê³  ê¸°ë³¸ ê°’ì„ ê°€ì§€ë©´ ì•ˆëœë‹¤.)</li>
</ul>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="m">1</span> <span class="n">to</span> <span class="s">"one"</span>

<span class="k">infix</span> <span class="k">fun</span> <span class="nf">Any</span><span class="p">.</span><span class="n">to</span><span class="p">(</span><span class="n">other</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="p">=</span> <span class="n">Pair</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="n">other</span><span class="p">)</span>
</code></pre></div></div>

<h3 id="ì—°ì‚°ì-ì˜¤ë²„ë¡œë”©-operator-overloading">ì—°ì‚°ì ì˜¤ë²„ë¡œë”© Operator overloading</h3>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">Point</span><span class="p">(</span><span class="m">0</span><span class="p">,</span> <span class="m">1</span><span class="p">)</span> <span class="p">+</span> <span class="n">Point</span><span class="p">(</span><span class="m">1</span><span class="p">,</span> <span class="m">2</span><span class="p">)</span>

<span class="kd">data class</span> <span class="nc">Point</span><span class="p">(</span><span class="kd">val</span> <span class="py">x</span><span class="p">:</span> <span class="n">Int</span><span class="p">,</span> <span class="kd">val</span> <span class="py">y</span><span class="p">:</span> <span class="n">Int</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">operator</span> <span class="k">fun</span> <span class="nf">plus</span><span class="p">(</span><span class="n">other</span><span class="p">:</span> <span class="n">Point</span><span class="p">):</span> <span class="n">Point</span> <span class="p">=</span> <span class="n">Point</span><span class="p">(</span><span class="n">x</span> <span class="p">+</span> <span class="n">other</span><span class="p">.</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="p">+</span> <span class="n">other</span><span class="p">.</span><span class="n">y</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div></div>

<ul>
  <li>plus í•¨ìˆ˜ ì•ì— <code class="highlighter-rouge">operator</code> í‚¤ì›Œë“œë¥¼ ë¶™ì—¬ ì—°ì‚°ì ì˜¤ë²„ë¡œë”©ì„ í•˜ëŠ” í•¨ìˆ˜ì„ì„ ëª…ì‹œ</li>
  <li>í™•ì¥ í•¨ìˆ˜ë¡œ ì •ì˜í•  ìˆ˜ë„ ìˆìŒ</li>
</ul>

<h4 id="ì´í•­-ì‚°ìˆ -ì—°ì‚°-ì˜¤ë²„ë¡œë”©">ì´í•­ ì‚°ìˆ  ì—°ì‚° ì˜¤ë²„ë¡œë”©</h4>

<table>
  <thead>
    <tr>
      <th style="text-align: center">ì—°ì‚° ìš°ì„ ìˆœìœ„</th>
      <th style="text-align: center">ì‹</th>
      <th style="text-align: center">í•¨ìˆ˜ ì´ë¦„</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: center">1</td>
      <td style="text-align: center">a * b</td>
      <td style="text-align: center">times</td>
    </tr>
    <tr>
      <td style="text-align: center">1</td>
      <td style="text-align: center">a / b</td>
      <td style="text-align: center">div</td>
    </tr>
    <tr>
      <td style="text-align: center">1</td>
      <td style="text-align: center">a % b</td>
      <td style="text-align: center">mod(1.1ë¶€í„° rem)</td>
    </tr>
    <tr>
      <td style="text-align: center">2</td>
      <td style="text-align: center">a + b</td>
      <td style="text-align: center">plus</td>
    </tr>
    <tr>
      <td style="text-align: center">2</td>
      <td style="text-align: center">a - b</td>
      <td style="text-align: center">minus</td>
    </tr>
  </tbody>
</table>

<ul>
  <li>ë” ë§ì€ ì—°ì‚°ìì— ëŒ€í•œ ë©”ì„œë“œëŠ” <strong><a href="https://kotlinlang.org/docs/operator-overloading.html#unary-prefix-operators">ê³µì‹ë¬¸ì„œ</a></strong> ì°¸ê³ </li>
</ul>

<h3 id="get-ë©”ì„œë“œì—-ëŒ€í•œ-ê´€ë¡€-indexed-access-operator">get ë©”ì„œë“œì— ëŒ€í•œ ê´€ë¡€ Indexed access operator</h3>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">val</span> <span class="py">names</span> <span class="p">=</span> <span class="n">listOf</span><span class="p">(</span><span class="s">"am"</span><span class="p">,</span> <span class="s">"mazzi"</span><span class="p">)</span>
<span class="n">names</span><span class="p">.</span><span class="k">get</span><span class="p">(</span><span class="m">0</span><span class="p">)</span>
<span class="n">names</span><span class="p">[</span><span class="m">0</span><span class="p">]</span>
</code></pre></div></div>

<ul>
  <li>getì´ ì•„ë‹Œ ì¸ë±ìŠ¤ë¡œ ì ‘ê·¼í•œë‹¤.</li>
</ul>

<h3 id="ëŒë‹¤ë¥¼-ê´„í˜¸-ë°–ìœ¼ë¡œ-ë¹¼ë‚´ëŠ”-ê´€ë¡€-passing-a-lambda-to-the-last-parameter">ëŒë‹¤ë¥¼ ê´„í˜¸ ë°–ìœ¼ë¡œ ë¹¼ë‚´ëŠ” ê´€ë¡€ Passing a lambda to the last parameter</h3>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">check</span><span class="p">(</span><span class="k">false</span><span class="p">)</span> <span class="p">{</span> <span class="s">"Check failed."</span> <span class="p">}</span>
</code></pre></div></div>

<h3 id="ìˆ˜ì‹ -ê°ì²´-ì§€ì •-ëŒë‹¤-lambda-with-receiver">ìˆ˜ì‹  ê°ì²´ ì§€ì • ëŒë‹¤ Lambda with receiver</h3>

<ul>
  <li>ëŒë‹¤ í•¨ìˆ˜ë¥¼ ì“¸ ë•Œ ë‚´ê°€ ìì£¼ ì“°ê³ ì‹¶ì€ ê°ì²´ë¥¼ ë¯¸ë¦¬ ì§€ì •í•´ì„œ ì‚¬ìš©í•˜ëŠ” ëŒë‹¤</li>
</ul>

<h4 id="ìˆ˜ì‹ -ê°ì²´">ìˆ˜ì‹  ê°ì²´?</h4>

<ul>
  <li>í™•ì¥ í•¨ìˆ˜ì—ì„œì˜ thisëŠ” í™•ì¥ëœ í´ë˜ìŠ¤ì˜ ê°ì²´</li>
  <li>ì¦‰ í™•ì¥ í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ëŠ” ê·¸ ê°ì²´ë¥¼ ì˜ë¯¸í•˜ëŠ”ë° ì´ ê°ì²´ê°€ ë°”ë¡œ ìˆ˜ì‹  ê°ì²´</li>
</ul>

<h4 id="with">with</h4>

<ul>
  <li>ì²« ë²ˆì§¸ ì¸ìë¡œ ë°›ì€ ê°ì²´ë¥¼ ë‘ ë²ˆì§¸ ì¸ìë¡œ ë°›ì€ ëŒë‹¤ì˜ ìˆ˜ì‹  ê°ì²´ë¡œ ë§Œë“¦</li>
</ul>

<p><strong>withë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šì„ ê²½ìš°</strong></p>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">fun</span> <span class="nf">alphabet</span><span class="p">():</span> <span class="n">String</span> <span class="p">{</span>
    <span class="kd">val</span> <span class="py">result</span> <span class="p">=</span> <span class="n">StringBuilder</span><span class="p">()</span>
    <span class="k">for</span> <span class="p">(</span><span class="n">letter</span> <span class="k">in</span> <span class="sc">'A'</span><span class="o">..</span><span class="sc">'Z'</span><span class="p">)</span> <span class="p">{</span>
    	<span class="n">result</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">letter</span><span class="p">)</span>
    <span class="p">}</span>
    <span class="n">result</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="s">"\nNow I know this alphabet!"</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">result</span><span class="p">.</span><span class="n">toString</span><span class="p">()</span>
<span class="p">}</span>
</code></pre></div></div>

<ul>
  <li><code class="highlighter-rouge">result</code> ì˜ ì¤‘ë³µì´ ë°œìƒ</li>
</ul>

<h4 id="withë¥¼-ì‚¬ìš©í•œ-ê²½ìš°">withë¥¼ ì‚¬ìš©í•œ ê²½ìš°</h4>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">fun</span> <span class="nf">alphabet</span><span class="p">():</span> <span class="n">String</span> <span class="p">{</span>
    <span class="kd">val</span> <span class="py">stringBuilder</span> <span class="p">=</span> <span class="n">StringBuilder</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">with</span><span class="p">(</span><span class="n">stringBuilder</span><span class="p">)</span> <span class="p">{</span>
    	<span class="k">for</span> <span class="p">(</span><span class="n">letter</span> <span class="k">in</span> <span class="sc">'A'</span><span class="o">..</span><span class="sc">'Z'</span><span class="p">)</span> <span class="p">{</span>
    		<span class="k">this</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">letter</span><span class="p">)</span>
    	<span class="p">}</span>
        <span class="n">append</span><span class="p">(</span><span class="s">"\n amazzi~~~!"</span><span class="p">)</span>
        <span class="k">this</span><span class="p">.</span><span class="n">toString</span><span class="p">()</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="c1">// ë¶ˆí•„ìš”í•œ stringBuilder ë³€ìˆ˜ë¥¼ ì—†ì• ë©´ alpabet í•¨ìˆ˜ê°€ ì‹ì˜ ê²°ê³¼ë¥¼ ë°”ë¡œ ë°˜í™˜í•˜ê²Œ ëœë‹¤.
// ëŒë‹¤ ì‹ì˜ ë³¸ë¬¸ì— ìˆëŠ” ë§ˆì§€ë§‰ ì‹ì˜ ê°’ì„ ë°˜í™˜
</span><span class="k">fun</span> <span class="nf">alphabet</span><span class="p">():</span> <span class="n">String</span> <span class="p">=</span> <span class="n">with</span><span class="p">(</span><span class="n">StringBuilder</span><span class="p">())</span> <span class="p">{</span>
    	<span class="k">for</span> <span class="p">(</span><span class="n">letter</span> <span class="k">in</span> <span class="sc">'A'</span><span class="o">..</span><span class="sc">'Z'</span><span class="p">)</span> <span class="p">{</span>
    		<span class="n">append</span><span class="p">(</span><span class="n">letter</span><span class="p">)</span>
    	<span class="p">}</span>
        <span class="n">append</span><span class="p">(</span><span class="s">"\nNow I know this alphabet!"</span><span class="p">)</span>
        <span class="n">toString</span><span class="p">()</span>
    <span class="p">}</span>
<span class="p">}</span>

</code></pre></div></div>

<ul>
  <li>with(stringBuilder, { â€¦ }) ì™€ ê°™ì€ ëŒë‹¤ í•¨ìˆ˜</li>
</ul>

<h4 id="apply">apply</h4>

<ul>
  <li>withì™€ ìœ ì‚¬</li>
  <li>ìœ ì¼í•œ ì°¨ì´ëŠ” í•­ìƒ ìì‹ ì—ê²Œ ì „ë‹¬ëœ ê°ì²´ë¥¼ ë°˜í™˜</li>
  <li>ê°ì²´ì˜ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ë§Œë“¤ë©´ì„œ ì¦‰ì‹œ í”„ë¡œí¼í‹° ì¤‘ ì¼ë¶€ë¥¼ ì´ˆê¸°í™”í•´ì•¼ë˜ëŠ” ê²½ìš° ìœ ìš©</li>
</ul>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">fun</span> <span class="nf">alphabet</span><span class="p">():</span> <span class="n">String</span> <span class="p">=</span> <span class="n">StringBuilder</span><span class="p">().</span><span class="n">apply</span> <span class="p">{</span>
    	<span class="k">for</span> <span class="p">(</span><span class="n">letter</span> <span class="k">in</span> <span class="sc">'A'</span><span class="o">..</span><span class="sc">'Z'</span><span class="p">)</span> <span class="p">{</span>
    		<span class="n">append</span><span class="p">(</span><span class="n">letter</span><span class="p">)</span>
    	<span class="p">}</span>
        <span class="n">append</span><span class="p">(</span><span class="s">"\nNow I know this alphabet!"</span><span class="p">)</span>
    <span class="p">}.</span><span class="n">toString</span><span class="p">()</span>
</code></pre></div></div>

<h3 id="ì´ˆê¸°í™”ë¥¼-ì§€ì—°í•˜ëŠ”-ë°©ë²•">ì´ˆê¸°í™”ë¥¼ ì§€ì—°í•˜ëŠ” ë°©ë²•</h3>

<ul>
  <li>ì½”í‹€ë¦°ì—ì„œëŠ” ë³€ìˆ˜ ì„ ì–¸ì„ ë¨¼ì €í•˜ê³ , ì´ˆê¸°íšŒëŠ” ë’¤ë¡œ ë¯¸ë£¨ëŠ” ê¸°ëŠ¥ë“¤ì„ ì œê³µ</li>
  <li>ì‚¬ìš©í• ì§€ ëª¨ë¥¸ëŠ” ë°ì´í„°ë¥¼ ë¯¸ë¦¬ ì´ˆê¸°í™”í•  í•„ìš”ê°€ ì—†ì–´ ì„±ëŠ¥ í–¥ìƒì— ë„ì›€</li>
</ul>

<h4 id="lateinit">lateInit</h4>

<ul>
  <li>í•„ìš”í•  ë•Œ ì´ˆê¸°í™”í•˜ê³  ì‚¬ìš©</li>
  <li>ì´ˆê¸°í™” í•˜ì§€ ì•Šê³  ì‚¬ìš©í•˜ë©´ ì˜ˆì™¸ ë°œìƒ</li>
  <li><code class="highlighter-rouge">var</code> ì—ë§Œ ì‚¬ìš© ê°€ëŠ¥</li>
  <li>ì›ì‹œ íƒ€ì…ì—ëŠ” ì ìš©í•  ìˆ˜ ì—†ìŒ</li>
  <li>custom getter/setter ì‚¬ìš© ë¶ˆê°€</li>
  <li>non-null í”„ë¡œí¼í‹°ë§Œ ì‚¬ìš© ê°€ëŠ¥</li>
</ul>

<h4 id="lazy">lazy</h4>

<ul>
  <li>ë³€ìˆ˜ë¥¼ ì„ ì–¸í•  ë•Œ ì´ˆê¸°í™” ì½”ë“œë„ í•¨ê»˜ ì •ì˜</li>
  <li>ë³€ìˆ˜ê°€ ì‚¬ìš©ë  ë•Œ ì´ˆê¸°í™” ì½”ë“œë„ ë™ì‘í•˜ì—¬ ë³€ìˆ˜ê°€ ì´ˆê¸°í™” ë¨</li>
</ul>

<hr />

<h2 id="0602-ì½”ë“œë¦¬ë·°">0602 ì½”ë“œë¦¬ë·°</h2>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">enum</span> <span class="kd">class</span> <span class="nc">Symbol</span><span class="p">(</span><span class="kd">val</span> <span class="py">symbol</span><span class="p">:</span> <span class="n">String</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">DIAMOND</span><span class="p">(</span><span class="s">"ë‹¤ì´ì•„ëª¬ë“œ"</span><span class="p">),</span>
    <span class="n">SPADE</span><span class="p">(</span><span class="s">"ìŠ¤í˜ì´ë“œ"</span><span class="p">),</span>
    <span class="n">HEART</span><span class="p">(</span><span class="s">"í•˜íŠ¸"</span><span class="p">),</span>
    <span class="n">CLOVER</span><span class="p">(</span><span class="s">"í´ë¡œë²„"</span><span class="p">),</span>
  <span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<ul>
  <li>1.4ë¶€í„° <code class="highlighter-rouge">,</code> ë¡œ ëë‚˜ë„ ì»´íŒŒì¼ ì—ëŸ¬ê°€ ì•ˆë‚¨</li>
</ul>

<h3 id="propertyì™€-field">Propertyì™€ Field</h3>

<h4 id="field">Field</h4>

<ul>
  <li>ë‹¨ìˆœíˆ ê°’ë§Œ ê°€ì§</li>
  <li>ê°’ì„ ê°€ì ¸ì˜¤ê±°ë‚˜ ë³€ê²½í•  ë•ŒëŠ” ì§ì ‘ ì°¸ì¡°</li>
  <li>í•¨ìˆ˜ë‚˜ ë¸”ë¡ ë‚´ë¶€ì— ì„ ì–¸ëœ ì§€ì—­ ë³€ìˆ˜ëŠ” ëª¨ë‘ í•„ë“œë¡œ ê°„ì£¼</li>
</ul>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">var</span> <span class="py">count</span> <span class="p">=</span> <span class="m">100</span> <span class="c1">// ë©”ëª¨ë¦¬ê°€ í• ë‹¹ë˜ê³  ê°’ì´ ì €ì¥ë¨
</span><span class="n">println</span><span class="p">(</span><span class="n">count</span><span class="p">)</span> <span class="c1">// count ë³€ìˆ˜ê°’ì„ ì§ì ‘ ì°¸ì¡°í•˜ì—¬ ê°€ì ¸ì˜´
</span><span class="n">count</span> <span class="p">+=</span> <span class="m">200</span> <span class="c1">// count ë³€ìˆ˜ê°’ì„ ì§ì ‘ ë³€ê²½
</span></code></pre></div></div>

<h4 id="property">Property</h4>

<ul>
  <li>ìµœìƒìœ„ ë³€ìˆ˜(í•¨ìˆ˜ë‚˜ í´ë˜ìŠ¤ ì™¸ë¶€ì— ì •ì˜ë¨)ë‚˜ í´ë˜ìŠ¤ì˜ ë©¤ë²„ ë³€ìˆ˜ë¡œ ì„ ì–¸ë¨</li>
  <li>ì„ ì–¸ ì‹œ í•´ë‹¹ ì†ì„±ì˜ getter/ setterê°€ ìë™ìœ¼ë¡œ ìƒì„±ë¨</li>
  <li><code class="highlighter-rouge">val</code> ë¡œ ì„ ì–¸ì‹œ getter ë§Œ ìƒì„±ë¨</li>
  <li>ê°’ì„ ê°€ì§€ì§€ë§Œ ì†ì„±ì˜ ê°’ì„ ê°€ì ¸ì˜¤ê±°ë‚˜ ë³€ê²½í•  ë•ŒëŠ” ìë™ìœ¼ë¡œ ê´€ë ¨ í•¨ìˆ˜ê°€ í˜¸ì¶œë¨
    <ul>
      <li>ì´ë¥¼ <strong>ì ‘ê·¼ì</strong> ë¼ê³  í•¨</li>
    </ul>
  </li>
</ul>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">var</span> <span class="py">count</span> <span class="p">=</span> <span class="m">100</span> <span class="c1">// ë©”ëª¨ë¦¬ê°€ í• ë‹¹ë˜ê³  ê°’ì´ ì €ì¥ë¨
</span><span class="n">println</span><span class="p">(</span><span class="n">count</span><span class="p">)</span> <span class="c1">// count ì†ì„±ì˜ ì ‘ê·¼ìê°€ í˜¸ì¶œë˜ì–´ ì†ì„±ê°’ì„ ë°˜í™˜
</span><span class="n">count</span> <span class="p">+=</span> <span class="m">200</span> <span class="c1">// count ì†ì„±ì˜ ì ‘ê·¼ìê°€ í˜¸ì¶œë˜ì–´ ì†ì„±ê°’ì„ ë³€í™˜
</span></code></pre></div></div>

<p><strong>ì—¥ ê·¼ë° í•„ë“œì™€ ë™ì¼í•˜ê²Œ ì½”ë“œë¥¼ ì‘ì„±í•˜ëŠ”ë°? ğŸ¤”</strong></p>

<ul>
  <li>í”„ë¡œê·¸ë˜ë¨¸ê°€ ë³´ëŠ” ê´€ì ì—ì„œëŠ” ê°™ì§€ë§Œ, ì½”í‹€ë¦° ì»´íŒŒì¼ëŸ¬ëŠ” ë‹¤ë¥´ê²Œ ë™ì‘í•¨</li>
  <li>ë‹¤ìŒê³¼ ê°™ì´ count  ì†ì„±ì˜ ì ‘ê·¼ìë¥¼ ìë™ìœ¼ë¡œ ìƒì„±</li>
  <li>count ì†ì„±ì˜ ê°’ì„ ê°€ì ¸ì˜¤ê±°ë‚˜ ë³€ê²½í•  ë•Œ ìë™ìœ¼ë¡œ í˜¸ì¶œ ë¨</li>
</ul>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">var</span> <span class="py">couhnt</span> <span class="p">=</span> <span class="m">100</span>
	<span class="k">get</span><span class="p">()</span> <span class="p">=</span> <span class="n">field</span>
	<span class="k">set</span><span class="p">(</span><span class="n">value</span><span class="p">:</span> <span class="n">Int</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">field</span> <span class="p">=</span> <span class="n">value</span>
  <span class="p">}</span>
</code></pre></div></div>

<ul>
  <li><code class="highlighter-rouge">get()</code> ê³¼ <code class="highlighter-rouge">set()</code> ì´ ì ‘ê·¼ì</li>
</ul>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">fun</span> <span class="nf">main</span><span class="p">(</span><span class="n">args</span><span class="p">:</span> <span class="n">Array</span><span class="p">&lt;</span><span class="n">String</span><span class="p">&gt;)</span> <span class="p">{</span>
  <span class="n">pro1</span> <span class="p">+=</span> <span class="n">pro2</span>
  <span class="n">println</span><span class="p">(</span><span class="n">pro1</span><span class="p">)</span>
<span class="p">}</span>

<span class="kd">var</span> <span class="py">pro1</span> <span class="p">=</span> <span class="m">100</span> <span class="c1">// ìµœìƒìœ„ ìˆ˜ì¤€ì˜ ë³€ìˆ˜ì´ë¯€ë¡œ ì†ì„±ì„
</span><span class="kd">var</span> <span class="py">pro2</span> <span class="p">=</span> <span class="m">200</span> <span class="c1">// ìµœìƒìœ„ ìˆ˜ì¤€ì˜ ë³€ìˆ˜ì´ë¯€ë¡œ ì†ì„±ì„
</span></code></pre></div></div>

<ul>
  <li>pro2ì˜ ê²Œí„°ê°€ í˜¸ì¶œë˜ì–´ ê°’ì„ ê°€ì ¸ì˜´</li>
  <li>pro1ì˜ ê²Œí„°ì—ì„œ ë°˜í™˜ëœ ê°’ê³¼ ë”í•¨</li>
  <li>ì´ ê°’ì´ pro1ì˜ ì„¸í„°ì˜ ì¸ìë¡œ ì „ë‹¬ë˜ì–´ pro1ì˜ ê°’ì´ ë³€ê²½ë¨</li>
  <li>pro1 ê²Œí„°ì—ì„œ ë°˜í™˜ëœ ê°’ì„ ì¶œë ¥</li>
</ul>

<p>í”„ë¡œí¼í‹°ì— <code class="highlighter-rouge">=</code> ì„ ì´ìš©í•´ì„œ í• ë‹¹í•˜ëŠ”ê±°ë‘ getì„ ì‚¬ìš©í•´ì„œ</p>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">val</span> <span class="py">shouldDraw</span>  <span class="p">=</span> <span class="n">cards</span><span class="p">.</span><span class="n">score</span><span class="p">()</span>
<span class="kd">val</span> <span class="py">shouldDraw2</span> <span class="p">:</span> <span class="n">Boolean</span>
<span class="k">get</span><span class="p">()</span> <span class="p">=</span> <span class="n">cards</span><span class="p">.</span><span class="n">scroe</span><span class="p">()</span>
</code></pre></div></div>

<ul>
  <li>getì„ ì“°ëŠ” ê²ƒì€ ë§¤ë²ˆ ëŒë•Œë§ˆë‹¤ ê³„ì‚°ì´ ë¨</li>
  <li>í”„ë¡œí¼í‹°ì— ì ‘ê·¼ì€ ê³„ì‚°ë˜ì–´ ìˆëŠ” ê°’ì„ ì”€</li>
</ul>

<h3 id="backing-fields">Backing fieldsï»¿</h3>

<ul>
  <li>ì»¤ìŠ¤í…€ getterì™€ setterë¥¼ ì œê³µí•  ê²½ìš° ì‚¬ìš©</li>
  <li>ì†ì„±ì´ í•„ë“œì˜ ê°’ì„ í•„ìš”ë¡œ í•  ë•Œ ì½”í‹€ë¦°ì€ ì§€ì› í•„ë“œ í‚¤ì›Œë“œë¥¼ ì œê³µ</li>
  <li>getterì™€ setter ë²”ìœ„ì—ì„œë§Œ ì‚¬ìš© ê°€ëŠ¥</li>
  <li><code class="highlighter-rouge">field</code> ì§€ì‹œìë¥¼ í†µí•´ ì†ì„±ì˜ ê²Œí„°ë‚˜ ì„¸í„°ì—ì„œ ì‚¬ìš©</li>
</ul>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">var</span> <span class="py">counter</span> <span class="p">=</span> <span class="m">0</span> <span class="c1">// the initializer assigns the backing field directly
</span>    <span class="k">set</span><span class="p">(</span><span class="n">value</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">value</span> <span class="p">&gt;=</span> <span class="m">0</span><span class="p">)</span>
            <span class="n">field</span> <span class="p">=</span> <span class="n">value</span>
            <span class="c1">// counter = value // ERROR StackOverflow: Using actual name 'counter' would make setter recursive
</span>    <span class="p">}</span>
</code></pre></div></div>

<p>ì•„ë˜ ì˜ˆì œì˜ <code class="highlighter-rouge">this</code>ëŠ” backing fieldê°€ ì•„ë‹˜</p>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">val</span> <span class="py">isEmpty</span><span class="p">:</span> <span class="n">Boolean</span>
    <span class="k">get</span><span class="p">()</span> <span class="p">=</span> <span class="k">this</span><span class="p">.</span><span class="n">size</span> <span class="p">==</span> <span class="m">0</span>
</code></pre></div></div>

<h3 id="backing-properties">Backing propertiesï»¿</h3>

<ul>
  <li>Backing fieldsï»¿ì˜ ì²´ê³„ì— ë§ì§€ ì•ŠëŠ” ì‘ì—…ì„ ìˆ˜í–‰í•  ê²½ìš° ì´ëŠ” Backing propertiesï»¿ê°€ ë¨</li>
</ul>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">class</span> <span class="nc">Skills</span><span class="p">(</span><span class="n">skills</span><span class="p">:</span> <span class="n">List</span><span class="p">&lt;</span><span class="n">String</span><span class="p">&gt;</span> <span class="p">=</span> <span class="n">mutableListOf</span><span class="p">())</span> <span class="p">{</span>
    <span class="k">private</span> <span class="kd">val</span> <span class="py">_skills</span><span class="p">:</span> <span class="n">MutableList</span><span class="p">&lt;</span><span class="n">String</span><span class="p">&gt;</span> <span class="p">=</span> <span class="n">skills</span><span class="p">.</span><span class="n">toMutableList</span><span class="p">()</span>
    <span class="kd">val</span> <span class="py">skills</span><span class="p">:</span> <span class="n">List</span><span class="p">&lt;</span><span class="n">String</span><span class="p">&gt;</span>
        <span class="k">get</span><span class="p">()</span> <span class="p">=</span> <span class="n">_skills</span><span class="p">.</span><span class="n">toList</span><span class="p">()</span>

    <span class="k">fun</span> <span class="nf">soft</span><span class="p">(</span><span class="n">soft</span><span class="p">:</span> <span class="n">String</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="n">_skills</span><span class="p">.</span><span class="n">add</span><span class="p">(</span><span class="n">soft</span><span class="p">)</span>
    <span class="p">}</span>

    <span class="k">fun</span> <span class="nf">hard</span><span class="p">(</span><span class="n">hard</span><span class="p">:</span> <span class="n">String</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="n">_skills</span><span class="p">.</span><span class="n">add</span><span class="p">(</span><span class="n">hard</span><span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<h3 id="as-í‚¤ì›Œë“œ-ì‚¬ìš©í•´ë„-ë˜ë‚˜ì—¬"><code class="highlighter-rouge">as</code> í‚¤ì›Œë“œ ì‚¬ìš©í•´ë„ ë˜ë‚˜ì—¬?</h3>

<ul>
  <li><code class="highlighter-rouge">val results = resultBoard.values as List&lt;GameResult&gt;</code></li>
  <li>ìë°”ì˜ íƒ€ì… ë³€í™˜ê³¼ ê°™ì€ ê²ƒ</li>
</ul>

<hr />

<h3 id="ì°¸ê³ -ìë£Œ">ì°¸ê³  ìë£Œ</h3>

<ul>
  <li><a href="https://itandhumanities.tistory.com/28">ì½”í‹€ë¦° ìˆ˜ì‹  ê°ì²´ ì§€ì • ëŒë‹¤ : withì™€ apply</a></li>
</ul>


	  ]]></description>
	</item>

	<item>
	  <title>ğŸ“‹ í…ŒìŠ¤íŠ¸ë¡œ ë°°ìš°ëŠ” Spring Configuration ê°•ì˜</title>
	  <link>//spring-configuration-lec</link>
	  <author></author>
	  <pubDate>2021-05-25T19:18:00+09:00</pubDate>
	  <guid>//spring-configuration-lec</guid>
	  <description><![CDATA[
	     <h2 id="ë°°ê²½-ì§€ì‹-ê°•ì˜">ë°°ê²½ ì§€ì‹ ê°•ì˜</h2>

<p>ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì™€ ìŠ¤í”„ë§ë¹ˆ</p>

<h3 id="ì»¨í…Œì´ë„ˆ">ì»¨í…Œì´ë„ˆ</h3>

<p>ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì— ë¹ˆì„ ë“±ë¡í•˜ê¸° ìœ„í•´ì„œëŠ” Configurationì´ í•„ìš”í•˜ë‹¤.</p>

<ul>
  <li>XML</li>
  <li>Annotation ê¸°ë°˜ì˜ configuration</li>
  <li>java bean  configuration</li>
</ul>

<h3 id="xmlë¡œ-configuration-ì„¤ì •í•˜ëŠ”-ì˜ˆì‹œ">XMLë¡œ Configuration ì„¤ì •í•˜ëŠ” ì˜ˆì‹œ</h3>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="nt">&lt;beans</span> <span class="na">xmlns=</span><span class="s">"http://www.springframework.org/schema/beans"</span>
       <span class="na">xmlns:xsi=</span><span class="s">"http://www.w3.org/2001/XMLSchema-instance"</span>
       <span class="na">xsi:schemaLocation=</span><span class="s">"http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd"</span><span class="nt">&gt;</span>

    <span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">"userRepository"</span> <span class="na">class=</span><span class="s">"nextstep.helloworld.core.xmlConfig.UserRepository"</span><span class="nt">/&gt;</span>

    <span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">"userService"</span> <span class="na">class=</span><span class="s">"nextstep.helloworld.core.xmlConfig.UserService"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"userRepository"</span> <span class="na">ref=</span><span class="s">"userRepository"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;/bean&gt;</span>
<span class="nt">&lt;/beans&gt;</span>
</code></pre></div></div>

<ul>
  <li>userRepositoryì™€ userServiceë¥¼ ë¹ˆìœ¼ë¡œ ë“±ë¡í•¨</li>
</ul>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">ApplicationContext</span> <span class="n">context</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ClassPathXmlApplicationContext</span><span class="o">(</span><span class="s">"application-config.xml"</span><span class="o">);</span>

<span class="n">String</span><span class="o">[]</span> <span class="n">beanDefinitionNames</span> <span class="o">=</span> <span class="n">context</span><span class="o">.</span><span class="na">getBeanDefinitionNames</span><span class="o">();</span>
</code></pre></div></div>

<ul>
  <li><code class="highlighter-rouge">ClassPathXmlApplicationContext</code>ë¡œ í•´ë‹¹ XMLíŒŒì¼ì„ ë¡œë“œí•´ì˜¨ë‹¤.</li>
  <li><code class="highlighter-rouge">getBeanDefinitionNames()</code> : ë“±ë¡ëœ ë¹ˆì´ë¦„ì„ ê°€ì ¸ì˜¨ë‹¤.</li>
</ul>

<h3 id="java-bean-configuration">java bean configuration</h3>

<h4 id="í•™ìŠµ-í…ŒìŠ¤íŠ¸-ì½”ë“œ">í•™ìŠµ í…ŒìŠ¤íŠ¸ ì½”ë“œ</h4>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">class</span> <span class="nc">JavaConfigTest</span> <span class="o">{</span>
    <span class="nd">@Test</span>
    <span class="kt">void</span> <span class="nf">javaConfig</span><span class="o">()</span> <span class="o">{</span>
        <span class="n">ApplicationContext</span> <span class="n">context</span> <span class="o">=</span> <span class="k">new</span> <span class="n">AnnotationConfigApplicationContext</span><span class="o">(</span><span class="n">HelloApplication</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
        <span class="n">String</span><span class="o">[]</span> <span class="n">beanDefinitionNames</span> <span class="o">=</span> <span class="n">context</span><span class="o">.</span><span class="na">getBeanDefinitionNames</span><span class="o">();</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">Arrays</span><span class="o">.</span><span class="na">toString</span><span class="o">(</span><span class="n">beanDefinitionNames</span><span class="o">));</span>

        <span class="n">AuthService</span> <span class="n">authService</span> <span class="o">=</span> <span class="n">context</span><span class="o">.</span><span class="na">getBean</span><span class="o">(</span><span class="n">AuthService</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
        <span class="n">assertThat</span><span class="o">(</span><span class="n">authService</span><span class="o">).</span><span class="na">isNotNull</span><span class="o">();</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<ul>
  <li>HelloApplication í´ë˜ìŠ¤ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ë¹ˆ ë“±ë¡ì„ í•  ê²ƒì´ë‹¤.</li>
</ul>

<h4 id="authenticationprincipalconfig">AuthenticationPrincipalConfig</h4>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Java-based Configurationì„ í•˜ê¸° ìœ„í•œ í´ë˜ìŠ¤ë¡œ ì§€ì •í•˜ê¸°</span>
<span class="nd">@Configuration</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">AuthenticationPrincipalConfig</span> <span class="o">{</span>

    <span class="c1">// AuthService ë¹ˆì„ ë“±ë¡í•˜ê¸°</span>
    <span class="nd">@Bean</span>
    <span class="kd">public</span> <span class="n">AuthService</span> <span class="nf">authService</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="k">new</span> <span class="nf">AuthService</span><span class="o">();</span>
    <span class="o">}</span>

    <span class="c1">// AuthenticationPrincipalArgumentResolverë¥¼ ë¹ˆ ë“±ë¡í•˜ê³  authServiceì— ëŒ€í•œ ì˜ì¡´ì„±ì„ ì£¼ì…í•˜ê¸°</span>
    <span class="nd">@Bean</span>
    <span class="kd">public</span> <span class="n">AuthenticationPrincipalArgumentResolver</span> <span class="nf">authenticationPrincipalArgumentResolver</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="k">new</span> <span class="nf">AuthenticationPrincipalArgumentResolver</span><span class="o">(</span><span class="n">authService</span><span class="o">());</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<ul>
  <li><code class="highlighter-rouge">@Configuration</code> : ë©”íƒ€ ë°ì´í„°ë¥¼ ì„¤ì •í•  ìˆ˜ ìˆëŠ” í´ë˜ìŠ¤ê°€ ëœë‹¤.</li>
  <li><code class="highlighter-rouge"> @Bean</code> ê³¼ íŠ¹ì • ê°ì²´ë¥¼ ë°˜í™˜í•˜ëŠ” ë©”ì„œë“œë¡œ í•´ë‹¹ ê°ì²´ë¥¼ ë¹ˆìœ¼ë¡œ ë“±ë¡í•  ìˆ˜ ìˆë‹¤.</li>
  <li>ë¹ˆë“¤ì˜ ì˜ì¡´ì„± ë˜í•œ ì§ì ‘ ë§ºì–´ì¤„ ìˆ˜ ìˆë‹¤.</li>
</ul>

<p><strong>@Configuration í´ë˜ìŠ¤ë„ ë¹ˆ ë“±ë¡ì´ ë˜ë‚˜ìš”?</strong></p>

<p>ğŸ™†â€â™€ï¸</p>

<p><strong>@Configuration í´ë˜ìŠ¤ì˜ ë©”ì„œë“œ ìˆœì„œì™€ ë¹ˆ ë“±ë¡ ìˆœì„œëŠ” ìƒê´€ì´ ì—†ë‚˜ìš”?</strong></p>

<p>ğŸ™†â€â™€ï¸</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Test</span>
<span class="kt">void</span> <span class="nf">useSpringBean</span><span class="o">()</span> <span class="o">{</span>
    <span class="n">ApplicationContext</span> <span class="n">context</span> <span class="o">=</span> <span class="k">new</span> <span class="n">AnnotationConfigApplicationContext</span><span class="o">(</span><span class="n">HelloApplication</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
    <span class="n">String</span><span class="o">[]</span> <span class="n">beanDefinitionNames</span> <span class="o">=</span> <span class="n">context</span><span class="o">.</span><span class="na">getBeanDefinitionNames</span><span class="o">();</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">Arrays</span><span class="o">.</span><span class="na">toString</span><span class="o">(</span><span class="n">beanDefinitionNames</span><span class="o">));</span>

    <span class="n">AuthService</span> <span class="n">authService</span> <span class="o">=</span> <span class="n">context</span><span class="o">.</span><span class="na">getBean</span><span class="o">(</span><span class="n">AuthService</span><span class="o">.</span><span class="na">class</span><span class="o">);</span> <span class="c1">// ì‹±ê¸€í†¤ // new AuthService()ì´ë‹ˆê¹Œ</span>
    <span class="n">AuthenticationPrincipalArgumentResolver</span> <span class="n">resolver</span> <span class="o">=</span> <span class="n">context</span><span class="o">.</span><span class="na">getBean</span><span class="o">(</span><span class="n">AuthenticationPrincipalArgumentResolver</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
    <span class="n">assertThat</span><span class="o">(</span><span class="n">resolver</span><span class="o">.</span><span class="na">getAuthService</span><span class="o">()).</span><span class="na">isEqualTo</span><span class="o">(</span><span class="n">authService</span><span class="o">);</span>
<span class="o">}</span>
</code></pre></div></div>

<p><strong>resolverì— ìˆëŠ” AuthService ê°ì²´ì™€ ë¹ˆìœ¼ë¡œ ë“±ë¡ëœ AuthServiceê°€ ê°™ì€ ê°ì²´ì¸ê°€?</strong></p>

<p>ğŸ™†â€â™€ï¸</p>

<hr />

<h2 id="ì™¸ë¶€-íŒŒì¼ì˜-ê°’ì„-ì´ìš©í•˜ê¸°">ì™¸ë¶€ íŒŒì¼ì˜ ê°’ì„ ì´ìš©í•˜ê¸°</h2>

<h3 id="properties-íŒŒì¼-ì ‘ê·¼">properties íŒŒì¼ ì ‘ê·¼</h3>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Java-based Configurationì„ í•˜ê¸° ìœ„í•œ í´ë˜ìŠ¤ë¡œ ì§€ì •í•˜ê¸°</span>
<span class="c1">// application.properties íŒŒì¼ì„ í™œìš©í•˜ê¸° ìœ„í•œ ì„¤ì • ì¶”ê°€í•˜ê¸°</span>
<span class="nd">@Configuration</span>
<span class="nd">@PropertySource</span><span class="o">(</span><span class="s">"classpath:application.properties"</span><span class="o">)</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">PropertySourceConfig</span> <span class="o">{</span>

    <span class="kd">private</span> <span class="kd">final</span> <span class="n">Environment</span> <span class="n">env</span><span class="o">;</span>

    <span class="kd">public</span> <span class="nf">PropertySourceConfig</span><span class="o">(</span><span class="n">Environment</span> <span class="n">env</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">env</span> <span class="o">=</span> <span class="n">env</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="c1">// application.propertiesì˜ security-jwt-token-secret-key ê°’ì„ í™œìš©í•˜ì—¬ JwtTokenKeyProviderë¥¼ ë¹ˆìœ¼ë¡œ ë“±ë¡í•˜ê¸°</span>
    <span class="nd">@Bean</span>
    <span class="kd">public</span> <span class="n">JwtTokenKeyProvider</span> <span class="nf">jwtTokenKeyProvider</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="k">new</span> <span class="nf">JwtTokenKeyProvider</span><span class="o">(</span><span class="s">"security-jwt-token-secret-key"</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<ul>
  <li>Environment ë¼ëŠ” í•„ë“œê°€ ìˆë‹¤.</li>
</ul>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Test</span>
<span class="kt">void</span> <span class="nf">key</span><span class="o">()</span> <span class="o">{</span>
    <span class="n">ApplicationContext</span> <span class="n">context</span> <span class="o">=</span> <span class="k">new</span> <span class="n">AnnotationConfigApplicationContext</span><span class="o">(</span><span class="n">PropertySourceConfig</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
    <span class="n">String</span><span class="o">[]</span> <span class="n">beanDefinitionNames</span> <span class="o">=</span> <span class="n">context</span><span class="o">.</span><span class="na">getBeanDefinitionNames</span><span class="o">();</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">Arrays</span><span class="o">.</span><span class="na">toString</span><span class="o">(</span><span class="n">beanDefinitionNames</span><span class="o">));</span>

    <span class="n">JwtTokenKeyProvider</span> <span class="n">jwtTokenKeyProvider</span> <span class="o">=</span> <span class="n">context</span><span class="o">.</span><span class="na">getBean</span><span class="o">(</span><span class="n">JwtTokenKeyProvider</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
    <span class="n">assertThat</span><span class="o">(</span><span class="n">jwtTokenKeyProvider</span><span class="o">.</span><span class="na">getSecretKey</span><span class="o">()).</span><span class="na">isEqualTo</span><span class="o">(</span><span class="s">"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIiLCJuYW1lIjoiSm9obiBEb2UiLCJpYXQiOjE1MTYyMzkwMjJ9.ih1aovtQShabQ7l0cINw4k1fagApg3qLWiB8Kt59Lno"</span><span class="o">);</span>
<span class="o">}</span>
</code></pre></div></div>

<ul>
  <li><code class="highlighter-rouge">PropertySourceConfig</code> í´ë˜ìŠ¤ë¡œ ì»¨í…ìŠ¤íŠ¸ë¥¼ ë§Œë“ ë‹¤.</li>
  <li>ì‚¬ì‹¤ ì´ propertiesë¥¼ ê°ì²´ë¡œ ë§Œë“¤ì–´ ì ‘ê·¼í•  ìˆ˜ë„ ìˆë‹¤.</li>
</ul>

<h3 id="value-ì£¼ì…">@Value ì£¼ì…</h3>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// ì»´í¬ë„ŒíŠ¸ ìŠ¤ìº”ì„ í†µí•œ ë¹ˆ ë“±ë¡</span>
<span class="nd">@Component</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">JwtTokenExpireProvider</span> <span class="o">{</span>
    <span class="c1">// application.propertiesì˜ security-jwt-token-expire-length ê°’ì„ í™œìš©í•˜ì—¬ validityInMillisecondsê°’ ì´ˆê¸°í™” í•˜ê¸°</span>
    <span class="kd">private</span> <span class="kt">long</span> <span class="n">validityInMilliseconds</span><span class="o">;</span>

    <span class="kd">public</span> <span class="nf">JwtTokenExpireProvider</span><span class="o">(</span><span class="nd">@Value</span><span class="o">(</span><span class="s">"${security-jwt-token-expire-length}"</span><span class="o">)</span> <span class="kt">long</span> <span class="n">validityInMilliseconds</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">validityInMilliseconds</span> <span class="o">=</span> <span class="n">validityInMilliseconds</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kt">long</span> <span class="nf">getValidityInMilliseconds</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">validityInMilliseconds</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Java-based Configurationì„ í•˜ê¸° ìœ„í•œ í´ë˜ìŠ¤ë¡œ ì§€ì •í•˜ê¸°</span>
<span class="c1">// application.properties íŒŒì¼ì„ í™œìš©í•˜ê¸° ìœ„í•œ ì„¤ì • ì¶”ê°€í•˜ê¸°</span>
<span class="c1">// nextstep.helloworld.core.environment ë‚´ì— ìˆëŠ” ìŠ¤í”„ë§ ë¹ˆì„ ìŠ¤ìº”í•˜ê¸°</span>
<span class="nd">@Configuration</span>
<span class="nd">@PropertySource</span><span class="o">(</span><span class="s">"classpath:application.properties"</span><span class="o">)</span>
<span class="nd">@ComponentScan</span><span class="o">(</span><span class="s">"nextstep.helloworld.core.environment"</span><span class="o">)</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">ValueConfig</span> <span class="o">{</span>
<span class="o">}</span>
</code></pre></div></div>

<p><strong>í™˜ê²½ì— ë”°ë¼ properties ì„¤ì •ì´ ê°€ëŠ¥í•œê°€ìš”?</strong></p>

<p>ğŸ™†â€â™€ï¸ í™˜ê²½ì— ë§ê²Œ deployí•˜ê¸° - profile</p>

<hr />

<h2 id="ìŠ¤í”„ë§-ì»¨í…Œì´ë„ˆ-ì„¤ì •-ë°©ë²•-íˆìŠ¤í† ë¦¬">ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆ ì„¤ì • ë°©ë²• íˆìŠ¤í† ë¦¬</h2>

<p><img src="https://images.velog.io/images/new_wisdom/post/55f6f1f7-1e78-4099-814c-d884510efb89/image.png" style="zoom:67%;" /></p>

<p>ì»¨í…Œì´ë„ˆ ì„¤ì •ì„ í•  ë•ŒëŠ” ë©”íƒ€ì •ë³´ë¥¼ í†µí•´ ì´ë£¨ì–´ì§„ë‹¤.</p>

<p>ë§¨ ì²˜ìŒì—ëŠ” <strong>XMLê¸°ë°˜</strong>ìœ¼ë¡œ ì§„í–‰ë˜ì—ˆë‹¤.<br />
ì´ëŸ¬ë©´ í”„ë¡œë•ì…˜ ì½”ë“œì™€ ì˜ì¡´ ê´€ê³„, ë¹ˆ ë“±ë¡ ì •ë³´ë¥¼ ë¶„ë¦¬í•  ìˆ˜ ìˆì—ˆë‹¤.</p>

<p>ì´í›„ <strong>ì–´ë…¸í…Œì´ì…˜ ê¸°ë°˜</strong>ì´ ë“±ì¥í•˜ë©´ì„œ XMLê³¼ í˜¼ìš©í•˜ì—¬ ì‚¬ìš©í•˜ì˜€ë‹¤.<br />
ë“±ë¡í•  ë¹ˆë“¤ì„ ì–´ë…¸í…Œì´ì…˜ìœ¼ë¡œ ê´€ë¦¬í•˜ì˜€ë‹¤.</p>

<p>Spring 3.0ë¶€í„°ëŠ” <strong>Java Bean ê¸°ë°˜</strong>ìœ¼ë¡œ ì´ë£¨ì–´ì¡Œë‹¤.<br />
XMLë¡œ ê´€ë¦¬í•˜ë˜ ë‚´ìš©ë“¤ì„ Bean ë“±ë¡ì„ í†µí•´ ê´€ë¦¬í•˜ì˜€ë‹¤.</p>

<hr />

<h3 id="auto-configuration">Auto Configuration?</h3>

<ul>
  <li><strong>jar dependency ê¸°ë°˜</strong>ìœ¼ë¡œ ìŠ¤í”„ë§ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ìë™ìœ¼ë¡œ ì„¤ì •í•´ì¤€ë‹¤.</li>
</ul>

<p>ë³„ë‹¤ë¥¸ ì„¤ì •ì„ í•˜ì§€ ì•Šì•˜ëŠ”ë°ë„, DB ë“±ì— ê´€ë ¨í•œ ê²ƒë“¤ì„ ë§ˆìŒ ê» ì“¸ ìˆ˜ ìˆì—ˆë‹¤.</p>

<p><img src="https://images.velog.io/images/new_wisdom/post/01ebb7bc-6306-49f3-9b00-5f4e9e62682e/image.png" style="zoom:67%;" /></p>

<p>ê·¸ ì´ìœ ëŠ” <code class="highlighter-rouge">@SpringBootApplication</code> ì— ìˆëŠ” <code class="highlighter-rouge">@EnableAutoConfiguration</code> ë•ë¶„ì´ë‹¤.</p>

<p><img src="https://images.velog.io/images/new_wisdom/post/b2b3a167-8bab-45e0-ae77-20ac1ee0521e/image.png" style="zoom:33%;" /></p>

<p>ì»¨í…ìŠ¤íŠ¸ë¥¼ ë¡œë“œí•˜ë©´ ì´ì •ë„ì˜ AutoConfigurationë“¤ì´ ë“±ë¡ëœë‹¤.</p>

<p>ex) jdbcTemplateì„ ìƒì„±í•´ì£¼ì§€ ì•Šì•˜ëŠ”ë°ë„ ìë™ìœ¼ë¡œ ì£¼ì…ëœë‹¤.</p>

<p><img src="https://images.velog.io/images/new_wisdom/post/a4b8b58e-311e-4c72-8f15-8f3c3287666d/image.png" style="zoom:50%;" /></p>

<p><strong>ë¹ˆìœ¼ë¡œ ë“±ë¡ë˜ì§€ ì•Šì€ í´ë˜ìŠ¤ë¥¼ ì‚¬ìš©í•˜ë©´ ì»´íŒŒì¼ ì—ëŸ¬ê°€ ë– ì•¼í•˜ëŠ”ë° ë‚˜ì§€ ì•ŠëŠ” ì´ìœ ëŠ”?</strong></p>

<p><code class="highlighter-rouge">@ConditionalOnClass</code> ë•ë¶„ì´ë‹¤.</p>

<p><img src="https://images.velog.io/images/new_wisdom/post/a24ebfbc-d8dd-4cca-9e92-07163b4e6e85/image.png" style="zoom:50%;" /></p>

<ul>
  <li>DataSource, JdbcTemplateì´ ë¡œë“œê°€ ë˜ë©´ ë™ì‘í•œë‹¤.</li>
</ul>

<h4 id="h2consoleautoconfiguration">H2ConsoleAutoConfiguration</h4>

<p>h2 DBì„¤ì •ì„ í•´ì£¼ì§€ ì•Šì•˜ëŠ”ë°ë„ h2ì™€ ê´€ë ¨ëœ ì„¤ì •ì´ ìë™ìœ¼ë¡œ ëœë‹¤.</p>

<p><img src="https://images.velog.io/images/new_wisdom/post/95850513-5786-4b7a-b2e0-efc5d5680cf2/image.png" style="zoom:67%;" /></p>

<p>ì´ê²ƒë„ ì´ë¯¸ ë“±ë¡ë˜ì–´ìˆê¸° ë•Œë¬¸ì— ê°€ëŠ¥í•˜ë‹¤.</p>

	  ]]></description>
	</item>

	<item>
	  <title>ğŸ“‹ Kotlinì„ ì •ë³µí•´ë´…ì‹œë‹¤ 1</title>
	  <link>//kotlin1</link>
	  <author></author>
	  <pubDate>2021-05-16T19:18:00+09:00</pubDate>
	  <guid>//kotlin1</guid>
	  <description><![CDATA[
	     <h2 id="ì½”í‹€ë¦°ì´ë€">ì½”í‹€ë¦°ì´ë€?</h2>

<ul>
  <li>ìë°” í”Œë«í¼ì—ì„œ ëŒì•„ê°€ëŠ” ìƒˆë¡œìš´ í”„ë¡œê·¸ë˜ë° ì–¸ì–´</li>
  <li>ê°„ê²°í•˜ê³  ì‹¤ìš©ì </li>
  <li>ìë°” ì½”ë“œì™€ì˜ ìƒí˜¸ ìš´ìš©ì„±ì„ ì¤‘ì‹œ</li>
  <li>ì½”í‹€ë¦° ì»´íŒŒì¼ëŸ¬ê°€ ìƒì„±í•œ ë°”ì´íŠ¸ì½”ë“œëŠ” ì¼ë°˜ì ì¸ ìë°” ì½”ë“œì™€ ë˜‘ê°™ì´ íš¨ìœ¨ì ìœ¼ë¡œ ì‹¤í–‰</li>
</ul>

<h3 id="ì •ì -íƒ€ì…-ì§€ì •-ì–¸ì–´">ì •ì  íƒ€ì… ì§€ì • ì–¸ì–´</h3>

<p>ì •ì  íƒ€ì… ì§€ì •ì´ë€ ëª¨ë“  í”„ë¡œê·¸ë¨ êµ¬ì„± ìš”ì†Œì˜ íƒ€ì…ì„ ì»´íŒŒì¼ ì‹œì ì— ì•Œ ìˆ˜ ìˆë‹¤.<br />
í”„ë¡œê·¸ë¨ ì•ˆì—ì„œ ê°ì²´ì˜ í•„ë“œë‚˜ ë©”ì„œë“œë¥¼ ì‚¬ìš©í•  ë•Œë§ˆë‹¤ ì»´íŒŒì¼ëŸ¬ê°€ íƒ€ì…ì„ ê²€ì¦í•´ì¤€ë‹¤.</p>

<p>ì½”í‹€ë¦°ì€ íƒ€ì…ì¶”ë¡ ì„ ì§€ì›í•˜ì—¬ ê°œë°œìê°€ íƒ€ì… ì„ ì–¸í•´ì•¼í•˜ëŠ” ë¶ˆí¸í•¨ì´ ì¤„ì–´ë“ ë‹¤.<br />
ë§¤ê°œ ë³€ìˆ˜ ì´ë¦„ ë’¤ì— ë§¤ê°œ ë³€ìˆ˜ì˜ ìë£Œí˜•ì„ ì“´ë‹¤.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">private</span> <span class="n">val</span> <span class="n">PATTERN</span> <span class="o">=</span> <span class="n">Pattern</span><span class="o">.</span><span class="na">compile</span><span class="o">(</span><span class="s">"//(.)\n(.*)"</span><span class="o">)</span>
<span class="kd">private</span> <span class="kd">const</span> <span class="n">val</span> <span class="n">FIRST_TARGET_STRING</span> <span class="o">=</span> <span class="s">"//"</span>
<span class="kd">private</span> <span class="kd">const</span> <span class="n">val</span> <span class="n">LAST_TARGET_STRING</span> <span class="o">=</span> <span class="s">"\n"</span>
</code></pre></div></div>

<h3 id="ë³€ìˆ˜-ì„ ì–¸">ë³€ìˆ˜ ì„ ì–¸</h3>

<ul>
  <li>val : ê°’ì´ ë³€ê²½ë˜ì§€ ì•ŠëŠ” ë³€ìˆ˜</li>
  <li>var : ê°’ì´ ë³€ê²½ë  ìˆ˜ ìˆëŠ” ë³€ìˆ˜</li>
</ul>

<h4 id="ë¸”ë¡ì´-ë³¸ë¬¸ì¸-í•¨ìˆ˜">ë¸”ë¡ì´ ë³¸ë¬¸ì¸ í•¨ìˆ˜</h4>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">fun</span> <span class="nf">max</span><span class="p">(</span><span class="n">a</span><span class="p">:</span> <span class="n">Int</span><span class="p">,</span> <span class="n">b</span><span class="p">:</span> <span class="n">Int</span><span class="p">)</span> <span class="p">:</span> <span class="n">Int</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">if</span> <span class="p">(</span><span class="n">a</span> <span class="p">&gt;</span> <span class="n">b</span><span class="p">)</span> <span class="n">a</span> <span class="k">else</span> <span class="n">b</span>
<span class="p">}</span>
</code></pre></div></div>

<h4 id="ì‹ì´-ë³¸ë¬¸ì¸-í•¨ìˆ˜">ì‹ì´ ë³¸ë¬¸ì¸ í•¨ìˆ˜</h4>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">fun</span> <span class="nf">max</span><span class="p">(</span><span class="n">a</span><span class="p">:</span> <span class="n">Int</span><span class="p">,</span> <span class="n">b</span><span class="p">:</span> <span class="n">Int</span><span class="p">)</span> <span class="p">:</span> <span class="n">Int</span> <span class="p">=</span> <span class="k">if</span> <span class="p">(</span><span class="n">a</span> <span class="p">&gt;</span> <span class="n">b</span><span class="p">)</span> <span class="n">a</span> <span class="k">else</span> <span class="n">b</span>
</code></pre></div></div>

<hr />

<h2 id="ì½”í‹€ë¦°-í•™ìŠµ-í…ŒìŠ¤íŠ¸">ì½”í‹€ë¦° í•™ìŠµ í…ŒìŠ¤íŠ¸</h2>

<h3 id="named-arguments">named arguments</h3>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">Crew</span><span class="p">(</span><span class="s">"ì‹ ì§€í˜œ"</span><span class="p">,</span> <span class="m">20</span><span class="p">,</span> <span class="s">"ì•„ë§ˆì°Œ"</span><span class="p">)</span>
</code></pre></div></div>

<p>Crew ê°ì²´ì— nameê³¼ nickname í•„ë“œê°€ ìˆì„ ë•Œ ìƒì„±ìì— ì „ë‹¬í•˜ëŠ” ì¸ìë§Œì„ ë³´ê³ ëŠ” ì–´ë–¤ ë¬¸ìì—´ì´ ì–´ë–¤ ì—­í• ì¸ì§€ í—·ê°ˆë¦´ ìˆ˜ ìˆë‹¤.<br />
ì´ëŠ” í•¨ìˆ˜ì˜ ì‹œê·¸ë‹ˆì²˜ë¥¼ ì‚´í´ë³´ì§€ ì•Šê³ ëŠ” ì•Œì•„ë‚´ê¸° ì–´ë ¤ìš´ë°,<br />
ì½”í‹€ë¦°ìœ¼ë¡œ ì‘ì„±í•œ í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•  ë•ŒëŠ” ê°€ë…ì„±ì„ ë†’ì´ê¸° ìœ„í•´ ì „ë‹¬í•˜ëŠ” ì¸ìì˜ ì´ë¦„ì„ ëª…ì‹œí•´ì¤„ ìˆ˜ ìˆë‹¤.  <br />
ì´ë•Œ ì¸ì ì¤‘ ì–´ëŠ í•˜ë‚˜ë¼ë„ ì´ë¦„ì„ ëª…ì‹œí•˜ë©´ ê·¸ ë’¤ë¡œ ì˜¤ëŠ” ëª¨ë“  ì¸ìëŠ” ì´ë¦„ì„ ëª…ì‹œí•´ì•¼ í•œë‹¤.</p>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">Person</span><span class="p">(</span><span class="s">"ì‹ ì§€í˜œ"</span><span class="p">,</span> <span class="m">20</span><span class="p">,</span> <span class="n">nickname</span> <span class="p">=</span> <span class="s">"ì•„ë§ˆì°Œ"</span><span class="p">),</span>
<span class="n">Person</span><span class="p">(</span><span class="n">name</span> <span class="p">=</span> <span class="s">"ì‹ ì§€í˜œ"</span><span class="p">,</span> <span class="n">nickname</span> <span class="p">=</span> <span class="s">"ì•„ë§ˆì°Œ"</span><span class="p">,</span> <span class="n">age</span> <span class="p">=</span> <span class="m">20</span><span class="p">)</span>
</code></pre></div></div>

<h3 id="nullable-types">nullable types</h3>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">class</span> <span class="nc">Person</span><span class="p">(</span><span class="kd">val</span> <span class="py">name</span><span class="p">:</span> <span class="n">String</span><span class="p">,</span> <span class="kd">val</span> <span class="py">age</span><span class="p">:</span> <span class="n">Int</span><span class="p">?,</span> <span class="kd">var</span> <span class="py">nickname</span><span class="p">:</span> <span class="n">String</span><span class="p">?)</span>
</code></pre></div></div>

<p>nullì´ ë ìˆ˜ ìˆëŠ” typeì„ ëª…ì‹œì ìœ¼ë¡œ í‘œì‹œí•  ìˆ˜ ìˆë‹¤. <br />
typeì— ?ë¥¼ ë¶™ì„ìœ¼ë¡œì„œ nullì´ ê°€ëŠ¥í•œ ë³€ìˆ˜ì„ì„ ëª…ì‹œì ìœ¼ë¡œ í‘œí˜„í•œë‹¤.</p>

<h3 id="default-arguments">default arguments</h3>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">class</span> <span class="nc">Person</span><span class="p">(</span><span class="kd">val</span> <span class="py">name</span><span class="p">:</span> <span class="n">String</span><span class="p">,</span> <span class="kd">val</span> <span class="py">age</span><span class="p">:</span> <span class="n">Int</span><span class="p">?</span> <span class="p">=</span> <span class="k">null</span><span class="p">,</span> <span class="kd">var</span> <span class="py">nickname</span><span class="p">:</span> <span class="n">String</span><span class="p">?</span> <span class="p">=</span><span class="k">null</span><span class="p">)</span>
</code></pre></div></div>

<p>ìë°”ëŠ”ì˜¤ë²„ë¡œë”©ì„ í•˜ì—¬ ì¸ìê°€ ë‹¤ë¥¸ ê°™ì€ ë©”ì„œë“œë¥¼ ë§Œë“ ë‹¤.</p>

<p>í•˜ì§€ë§Œ ì½”í‹€ë¦°ì€ ê¸°ë³¸ ì¸ìë¥¼ ì§€ì›í•˜ê¸° ë•Œë¬¸ì—, 1ê°œì˜ ë©”ì†Œë“œë§Œ ì •ì˜í•˜ì—¬ ë©”ì„œë“œ ì˜¤ë²„ë¡œë”© ê¸°ëŠ¥ì„ í•œë‹¤. 
ê¸°ë³¸ ì¸ìë¥¼ ì„¤ì •í•˜ëŠ” ë°©ë²•ì€, ë‹¤ìŒê³¼ ê°™ì´ ì¸ì ì´ë¦„ ë‹¤ìŒì— <code class="highlighter-rouge">ì¸ì = ê¸°ë³¸ê°’</code>ì²˜ëŸ¼ ì •ì˜í•˜ë©´ ëœë‹¤.</p>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">fun</span> <span class="nf">add</span><span class="p">(</span><span class="n">num1</span><span class="p">,</span> <span class="n">num2</span><span class="p">:</span> <span class="n">Int</span> <span class="p">=</span> <span class="m">0</span><span class="p">)</span>
</code></pre></div></div>

<p>ìœ„ì˜ ë©”ì†Œë“œëŠ” ì•„ë˜ì²˜ëŸ¼ ì¸ìì˜ ê°œìˆ˜ê°€ ë‹¤ë¥´ê²Œ í˜¸ì¶œë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">add</span><span class="p">(</span><span class="m">1</span><span class="p">)</span>      <span class="c1">// num2 = 0 ì€ ê¸°ë³¸ì¸ìë¡œ ì „ë‹¬
</span><span class="n">add</span><span class="p">(</span><span class="m">1</span><span class="p">,</span> <span class="m">2</span><span class="p">)</span>
</code></pre></div></div>

<h3 id="data-classe">data classe</h3>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">data class</span> <span class="nc">Person</span><span class="p">(</span><span class="kd">val</span> <span class="py">name</span><span class="p">:</span> <span class="n">String</span><span class="p">,</span> <span class="kd">val</span> <span class="py">age</span><span class="p">:</span> <span class="n">Int</span><span class="p">?</span> <span class="p">=</span> <span class="k">null</span><span class="p">,</span> <span class="kd">var</span> <span class="py">nickname</span><span class="p">:</span> <span class="n">String</span><span class="p">?</span> <span class="p">=</span><span class="k">null</span><span class="p">)</span>
</code></pre></div></div>

<ul>
  <li>ìˆ˜ë¦¬ í”¼ì…œ ë°ì´í„° í´ë˜ìŠ¤ëŠ” DTOë‹¤.</li>
  <li>ë”±íˆ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì„ ê°–ê³  ìˆì§€ì•Šë‹¤.</li>
  <li>ìƒì„±ìë¶€í„° getter &amp; setter, ì‹¬ì§€ì–´ canonical methodsê¹Œì§€ ì•Œì•„ì„œ ìƒì„±í•´ì¤€ë‹¤.</li>
</ul>

<h4 id="ì œí•œ-ì‚¬í•­">ì œí•œ ì‚¬í•­</h4>

<ul>
  <li>ê¸°ë³¸ ìƒì„±ìì—ëŠ” ìµœì†Œ í•˜ë‚˜ì˜ íŒŒë¼ë¯¸í„°ê°€ ìˆì–´ì•¼ í•œë‹¤.</li>
  <li>ê¸°ë³¸ ìƒì„±ìì˜ íŒŒë¼ë¯¸í„°ëŠ” valì´ë‚˜ varì—¬ì•¼ë§Œ í•œë‹¤.</li>
  <li>ë°ì´í„° í´ë˜ìŠ¤ëŠ” abstract, open, sealed, innerê°€ ë˜ë©´ ì•ˆ ëœë‹¤.</li>
</ul>

<h4 id="-canonical-methods">ğŸ¤” Canonical Methods?</h4>

<p>ìºë…¸ë‹ˆì»¬ ë©”ì†Œë“œëŠ” Anyì— ì„ ì–¸ëœ ë©”ì†Œë“œ (AnyëŠ” ìë°”ì˜ Objectì²˜ëŸ¼ ì½”í‹€ë¦°ì—ì„œ ëª¨ë“  ê°ì²´ì˜ ì¡°ìƒì´ ë˜ëŠ” ê°ì²´)<br />
ë”°ë¼ì„œ ì½”í‹€ë¦°ì˜ ëª¨ë“  ì¸ìŠ¤í„´ìŠ¤ê°€ ê°–ê³  ìˆëŠ” ë©”ì†Œë“œë¥¼ ëœ»í•œë‹¤.</p>

<p>ì½”í‹€ë¦°ì˜ data classëŠ” ëª¨ë“  Canonical ë©”ì„œë“œë¥¼ ì˜¬ë°”ë¥´ê²Œ êµ¬í˜„í•˜ê³  ìˆë‹¤.</p>

<ul>
  <li><strong>equlas(other: Any?): Boolean</strong> - ì´ ë©”ì†Œë“œëŠ” ì°¸ì¡°ê°€ ì•„ë‹ˆë¼ ë°ì´í„° í´ë˜ìŠ¤ ê°„ ê°’ì˜ ì¼ì¹˜ë¥¼ ë¹„êµí•œë‹¤.</li>
  <li><strong>hashCode(): Int</strong> - í•´ì‰¬ì½”ë“œëŠ” ì¸ìŠ¤í„´ìŠ¤ì˜ ìˆ«ì í‘œí˜„ì´ë‹¤. hashCode()ê°€ ê°™ì€ ì¸ìŠ¤í„´ìŠ¤ì—ì„œ ì—¬ëŸ¬ ë²ˆ í˜¸ì¶œë  ë•Œ í•­ìƒ ë™ì¼í•œ ê°’ì„ ë°˜í™˜í•´ì•¼ í•œë‹¤. equals()ë¡œ ë¹„êµí•  ë•Œ ì°¸ì„ ë°˜í™˜í•˜ëŠ” ë‘ ì¸ìŠ¤í„´ìŠ¤ëŠ” ê°™ì€ hashCode()ë¥¼ ê°€ì ¸ì•¼ë§Œ í•œë‹¤.</li>
  <li><strong>toString(): String</strong> - ì¸ìŠ¤í„´ìŠ¤ì˜ ë¬¸ìì—´ í‘œí˜„ì´ë‹¤. ë°ì´í„° í´ë˜ìŠ¤ëŠ” ì´ë¥¼ ë©¤ë²„ ë³€ìˆ˜ì˜ ê°’ì„ ë‚˜ì—´í•˜ë„ë¡ ìë™ìœ¼ë¡œ ì¬ì •ì˜ í•œë‹¤.</li>
  <li><strong>copy()</strong> : ê°ì²´ë¥¼ ë³µì‚¬í•˜ì—¬ ìƒˆ ê°ì²´ ìƒì„±</li>
  <li><strong>componentsN()</strong> : ì†ì„±ì„ ìˆœì„œëŒ€ë¡œ ë°˜í™˜</li>
</ul>

<hr />

<h2 id="2ë‹¨ê³„-ë¬¸ìì—´-ê³„ì‚°ê¸°-êµ¬í˜„í•˜ë©´ì„œ-ë°°ìš´-ì‚¬ì‹¤ë“¤">2ë‹¨ê³„ ë¬¸ìì—´ ê³„ì‚°ê¸° êµ¬í˜„í•˜ë©´ì„œ ë°°ìš´ ì‚¬ì‹¤ë“¤</h2>

<h3 id="ë©”ì„œë“œ-ì •ì˜">ë©”ì„œë“œ ì •ì˜</h3>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">fun</span> <span class="err">ë©”ì„œë“œëª…(</span><span class="nf">x</span><span class="p">:</span> <span class="n">Int</span><span class="p">):</span> <span class="err">ë°˜í™˜íƒ€ì…</span> <span class="p">{</span>
    <span class="n">retunr</span> <span class="m">2</span> <span class="p">*</span> <span class="n">x</span>
<span class="p">}</span>
</code></pre></div></div>

<h3 id="unit--nothing">Unit / Nothing</h3>

<p>ì½”í‹€ë¦°ì€ ì›ì‹œíƒ€ì…ê³¼ wrapper typeì„ êµ¬ë¶„í•˜ì§€ ì•ŠëŠ”ë‹¤.</p>

<h4 id="unit">Unit</h4>

<p>í•¨ìˆ˜ì˜ ë°˜í™˜ êµ¬ë¬¸ì´ ì—†ë‹¤ëŠ” ê²ƒì„ í‘œí˜„í•œë‹¤. (ìë°”ì˜ voidì— í•´ë‹¹).<br />
voidì™€ëŠ” ë‹¤ë¥´ê²Œ ì¸ìë¡œë„ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.</p>

<h4 id="nothing">Nothing</h4>

<p>í•¨ìˆ˜ê°€ ì •ìƒì ìœ¼ë¡œ ëë‚˜ì§€ ì•ŠëŠ”ë‹¤ë¼ëŠ”ê±¸ ëª…ì‹œì ìœ¼ë¡œ í‘œí˜„í•œë‹¤.</p>

<h4 id="firstornull">firstOrNull</h4>

<p>ì»¬ë ‰ì…˜ ë‚´ ì²« ë²ˆì§¸ ì¸ìë¥¼ ë°˜í™˜í•œë‹¤. ë‹¨ìˆœíˆ ë¦¬ìŠ¤íŠ¸ ë‚´ì—ì„œ ì²« ë²ˆì§¸ì— ìœ„ì¹˜í•˜ëŠ” ì¸ìë¥¼ ë°˜í™˜í•˜ëŠ” ê²ƒë¿ ì•„ë‹ˆë¼, íŠ¹ì • ì¡°ê±´ì„ ë§Œì¡±í•˜ëŠ” ì²« ë²ˆì§¸ ì¸ìë¥¼ ë°˜í™˜í•˜ë„ë¡ êµ¬ì„±í•˜ëŠ” ê²ƒë„ ê°€ëŠ¥í•˜ë‹¤.</p>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">val</span> <span class="py">operator</span> <span class="p">=</span> <span class="n">values</span><span class="p">().</span><span class="n">firstOrNull</span> <span class="p">{</span> <span class="n">item</span> <span class="p">-&gt;</span> <span class="n">item</span><span class="p">.</span><span class="n">op</span> <span class="p">==</span> <span class="n">op</span> <span class="p">}</span>
    <span class="o">?:</span> <span class="k">throw</span> <span class="n">IllegalArgumentException</span><span class="p">(</span><span class="s">"ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ì—°ì‚°ìì…ë‹ˆë‹¤."</span><span class="p">)</span>
</code></pre></div></div>

<hr />

<h2 id="ìë™ì°¨-ê²½ì£¼-í”¼ë“œë°±">ìë™ì°¨ ê²½ì£¼ í”¼ë“œë°±</h2>

<h3 id="ì½”í‹€ë¦°ì˜-ì½”ë”©-ì»¨ë²¤ì…˜">ì½”í‹€ë¦°ì˜ ì½”ë”© ì»¨ë²¤ì…˜</h3>

<h4 id="í´ë˜ìŠ¤">í´ë˜ìŠ¤</h4>

<ul>
  <li>í”„ë¡œí¼í‹°</li>
  <li>ì´ˆê¸°í™” ë¸”ë¡</li>
  <li>ë¶€ ìƒì„±ì</li>
  <li>í•¨ìˆ˜</li>
  <li>ë™ë°˜ ê°ì²´</li>
</ul>

<p>ìˆœìœ¼ë¡œ ì‘ì„±í•œë‹¤.</p>

<h4 id="-ktlint-ì ìš©í•˜ê¸°">â• ktlint ì ìš©í•˜ê¸°</h4>

<p><strong>ktlint</strong>ë€ ì½”í‹€ë¦°ì„ ìœ„í•œ ì •ì  ë¶„ì„ ë„êµ¬ë¡œ, ì½”í‹€ë¦°ìœ¼ë¡œ ì‘ì„±í•œ ì½”ë“œì˜ ìŠ¤íƒ€ì¼ ê²€ì‚¬ì™€, í˜•ì‹ì— ë§ì§€ ì•ŠëŠ” ë¶€ë¶„ì„ ìˆ˜ì •í•˜ëŠ” ê¸°ëŠ¥ì„ ì œê³µí•œë‹¤.</p>

<p>ì‚¬ìš©í•˜ê¸° ìœ„í•´ì„œëŠ” ë‹¤ìŒê³¼ ê°™ì´ í”ŒëŸ¬ê·¸ì¸ì„ ì¶”ê°€í•´ì¤€ë‹¤.</p>

<div class="language-gradle highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">plugins</span> <span class="o">{</span>
    <span class="n">id</span> <span class="s1">'org.jetbrains.kotlin.jvm'</span> <span class="n">version</span> <span class="s1">'1.3.72'</span>
    <span class="n">id</span> <span class="s1">'org.jmailen.kotlinter'</span> <span class="n">version</span> <span class="s2">"3.2.0"</span> <span class="c1">// ì¶”ê°€</span>
<span class="o">}</span>
</code></pre></div></div>

<p><img src="https://images.velog.io/images/new_wisdom/post/709c90c9-2cac-4eb0-8a48-a20ec4156ed6/image.png" style="zoom:33%;" /></p>

<p>í”ŒëŸ¬ê·¸ì¸ì„ ì¶”ê°€í•˜ë©´ gradle-Tasks-formatingì´ ìƒì„±ë˜ëŠ”ë° lintKotlinì„ ëˆŒëŸ¬ì£¼ë©´ lintë¡œ ì½”í‹€ë¦° ì»¨ë²¤ì…˜ì´ í‹€ë¦° ë¶€ë¶„ì„ ì¡ì•„ì¤€ë‹¤.</p>

<h3 id="ì£¼ìƒì„±ì-ë¶€-ìƒì„±ì">ì£¼ìƒì„±ì, ë¶€ ìƒì„±ì</h3>

<h4 id="ì£¼-ìƒì„±ì">ì£¼ ìƒì„±ì</h4>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">class</span> <span class="nc">Car</span><span class="p">(</span><span class="kd">val</span> <span class="py">name</span><span class="p">:</span> <span class="n">String</span><span class="p">,</span> <span class="kd">val</span> <span class="py">position</span><span class="p">:</span> <span class="n">Int</span> <span class="p">=</span> <span class="m">0</span><span class="p">)</span>
</code></pre></div></div>

<p>í´ë˜ìŠ¤ ì´ë¦„ ë’¤ì— ì˜¤ëŠ” ìƒì„±ìê°€ ë°”ë¡œ ì£¼ ìƒì„±ìì´ë‹¤.<br />
ì£¼ ìƒì„±ìëŠ” ìƒì„±ì íŒŒë¼ë¯¸í„°ë¥¼ ì§€ì •í•˜ê³ , ì´ì— ì˜í•´ ì´ˆê¸°í™”ë˜ëŠ” í”„ë¡œí¼í‹°ë¥¼ ì •ì˜í•˜ëŠ”ë° ì‚¬ìš©ëœë‹¤.<br />
ë˜í•œ ì£¼ ìƒì„±ìëŠ” ê°ì²´ ì´ˆê¸°í™”ë¥¼ ì‹œì‘í•˜ëŠ” ìœ ì¼í•œ ê³³ì´ê¸° ë•Œë¬¸ì— ì œê³µë˜ëŠ” ì¸ìë“¤ì´ ì™„ì „í•´ì•¼ í•œë‹¤.</p>

<p>ì£¼ ìƒì„±ìì—ëŠ” ë³„ë„ì˜ ì½”ë“œë¥¼ í¬í•¨ì‹œí‚¬ ìˆ˜ ì—†ë‹¤.<br />
ì´ë•Œ ì½”í‹€ë¦°ì€ <code class="highlighter-rouge">init</code> í‚¤ì›Œë“œë¡œ ì´ˆê¸°í™” ë¸”ë¡ì„ ì„ ì–¸í•  ìˆ˜ ìˆë‹¤.</p>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">class</span> <span class="nc">Car</span><span class="p">(</span><span class="kd">val</span> <span class="py">name</span><span class="p">:</span> <span class="n">String</span><span class="p">,</span> <span class="kd">val</span> <span class="py">position</span><span class="p">:</span> <span class="n">Int</span> <span class="p">=</span> <span class="m">0</span><span class="p">)</span> <span class="p">{</span>

    <span class="n">init</span> <span class="p">{</span>
        <span class="n">require</span><span class="p">(</span><span class="n">name</span><span class="p">.</span><span class="n">length</span> <span class="p">&lt;=</span> <span class="n">MAX_NAME_LENGTH</span><span class="p">)</span> <span class="p">{</span>
            <span class="s">"ìë™ì°¨ì˜ ì´ë¦„ì€ 5ê¸€ìë¥¼ ì´ˆê³¼í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤."</span>
        <span class="p">}</span>
    <span class="c1">// ...
</span></code></pre></div></div>

<h4 id="ë¶€-ìƒì„±ì">ë¶€ ìƒì„±ì</h4>

<p>íŒŒë¼ë¯¸í„° ëª©ë¡ì´ ë‹¤ë¥¸ ì—¬ëŸ¬ ìƒì„±ìë¥¼ ë§Œë“¤ ê²½ìš° ë¶€ ìƒì„±ìë¥¼ ë‘˜ ìˆ˜ ìˆë‹¤.<br />
ë¶€ ìƒì„±ìì—ì„œëŠ” <code class="highlighter-rouge">this</code> í‚¤ì›Œë“œë¥¼ ì‚¬ìš©í•´ ì£¼ ìƒì„±ìë¥¼ í˜¸ì¶œí•˜ë„ë¡ í•œë‹¤.</p>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">class</span> <span class="nc">Car</span><span class="p">(</span><span class="kd">val</span> <span class="py">name</span><span class="p">:</span> <span class="n">String</span><span class="p">,</span> <span class="kd">var</span> <span class="py">position</span><span class="p">:</span> <span class="n">Int</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">constructor</span><span class="p">(</span><span class="n">name</span><span class="p">:</span> <span class="n">String</span><span class="p">)</span> <span class="p">:</span> <span class="k">this</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="m">0</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div></div>

<p>í•˜ì§€ë§Œ ì´ ê²½ìš°ë³´ë‹¤ëŠ” <strong><code class="highlighter-rouge">default</code>í‚¤ì›Œë“œë¥¼ ì‚¬ìš©í•˜ì—¬ ë§¤ê°œë³€ìˆ˜ì˜ ê¸°ë³¸ê°’ì„ ì‚¬ìš©</strong>í•˜ì.</p>

<p><strong>ì£¼ ìƒì„±ì í˜¸ì¶œ ì‹œì </strong></p>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">constructor</span><span class="p">(</span><span class="n">carNUm</span> <span class="p">:</span> <span class="n">Int</span><span class="p">)</span> <span class="p">:</span> <span class="k">this</span><span class="p">(</span><span class="n">ArryaList</span><span class="p">())</span> <span class="p">{</span>
	<span class="n">createList</span><span class="p">(</span><span class="n">carName</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div></div>

<p>ìœ„ì™€ ê°™ì´ ë¶€ ìƒì„±ìì—ì„œ ì£¼ ìƒì„±ìë¥¼ í˜¸ì¶œí•  ë•Œ <code class="highlighter-rouge">createList()</code>ê°€ ì‹¤í–‰ë˜ëŠ” ìˆœì„œëŠ” ë‹¤ìŒê³¼ ê°™ë‹¤.</p>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">public</span> <span class="n">Cars</span><span class="p">(</span><span class="n">int</span> <span class="n">carNUm</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">this</span><span class="p">(</span><span class="n">new</span> <span class="n">ArrayList</span><span class="p">())</span>
  <span class="k">this</span><span class="p">.</span><span class="n">createList</span><span class="p">(</span><span class="n">carNum</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div></div>

<h3 id="require-check---ì¡°ê±´-í™•ì¸-í•¨ìˆ˜">require(), check() - ì¡°ê±´ í™•ì¸ í•¨ìˆ˜</h3>

<ul>
  <li>
    <p><strong>require()</strong> : ì‹ì´ ì°¸ì´ ì•„ë‹ ê²½ìš° <code class="highlighter-rouge">IllegalArgumentException</code> ë°œìƒ</p>
  </li>
  <li>
    <p><strong>check()</strong> : ì‹ì´ ì°¸ì´ ì•„ë‹ ê²½ìš° <code class="highlighter-rouge">IllegalStateException</code> ë°œìƒ</p>

    <p>ìœ„ ì˜ˆì œì²˜ëŸ¼ <code class="highlighter-rouge">{}</code> ë¸”ë¡ì— ì˜ˆì™¸ ë©”ì‹œì§€ë¥¼ ì‘ì„±í•  ìˆ˜ë„ ìˆë‹¤.</p>
  </li>
</ul>

<h3 id="setterë§Œ-privateìœ¼ë¡œ---ê°€ì‹œì„±-ë³€ê²½ì">setterë§Œ privateìœ¼ë¡œ - ê°€ì‹œì„± ë³€ê²½ì</h3>

<p>ìë°”ë¥¼ ìƒê°í•˜ë©´ í•„ë“œë¥¼ <code class="highlighter-rouge">private</code> ë¡œ ë§Œë“¤ê³ ,  getterë¥¼ í†µí•´ ê°’ì„ êº¼ë‚´ë„ë¡ í•˜ì˜€ì§€ë§Œ,<br />
ì½”í‹€ë¦°ì—ì„œëŠ” í•„ë“œë¥¼ privateìœ¼ë¡œ ë‘ê¸°ë³´ë‹¤ëŠ” setter í•¨ìˆ˜ë§Œ privateìœ¼ë¡œ ì§€ì •í•œë‹¤.</p>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">class</span> <span class="nc">Car</span><span class="p">(</span><span class="kd">val</span> <span class="py">name</span><span class="p">:</span> <span class="n">String</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="py">position</span><span class="p">:</span> <span class="n">Int</span> <span class="p">=</span> <span class="m">0</span>
        <span class="k">private</span> <span class="k">set</span>
<span class="p">}</span>
</code></pre></div></div>

<p>ìë°”ëŠ” í•„ë“œ ê¸°ë°˜  ì–¸ì–´ì¸ë° ì½”í‹€ë¦°ì€ í”„ë¡œí¼í‹° ê¸°ë°˜ ì–¸ì–´ì´ë‹¤.<br />
íŒì„ ì¤€ë‹¤ë©´ ì½”í‹€ë¦°ì—ì„œ í”„ë¡œí¼í‹°ì— ë¬´ì–¸ê°€ ì—°ì‚°ì´ ë“¤ì–´ê°„ë‹¤ë©´ í•¨ìˆ˜ë¥¼ ë§Œë“¤ê³ ,<br />
ê°’ ìì²´ë§Œ ë°˜í™˜í•œë‹¤ë©´ ìœ„ì™€ ê°™ì´ ì“°ì.</p>

<h3 id="ìƒìˆ˜">ìƒìˆ˜</h3>

<p>ê¸°ë³¸ ìë£Œí˜•ì˜ ìƒìˆ˜ëŠ” <code class="highlighter-rouge">const val</code> í‚¤ì›Œë“œë¡œ í‘œí˜„í•œë‹¤.<br />
ê¸°ë³¸ ìë£Œí˜• ì™¸ì—ëŠ” <code class="highlighter-rouge">const</code> í‚¤ì›Œë“œë¥¼ ì‚¬ìš©í•  ìˆ˜ ì—†ë‹¤.</p>

<p>ìƒìˆ˜ëŠ” í´ë˜ìŠ¤ ì™¸ë¶€ì—ë‹¤ê°€ë„ ì„ ì–¸í•  ìˆ˜ ìˆë‹¤.<br />
í•˜ì§€ë§Œ ì´ ê²½ìš° í™•ì¥ìê°€ íŒŒì¼ë¡œ ë³€ê²½ë˜ë‹ˆ ì‚¬ëŒ ì·¨í–¥ê» í•˜ë©´ ëœë‹¤.</p>

<h4 id="companion-object---ë™ë°˜-ê°ì²´">companion object - ë™ë°˜ ê°ì²´</h4>

<p>ì½”í‹€ë¦°ì—ì„œëŠ” <code class="highlighter-rouge">static</code> í‚¤ì›Œë“œê°€ ì—†ëŠ”ë°, ì´ ëŒ€ì‹  ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ê²ƒì´ companion object ì´ë‹¤.<br />
ì´ëŠ” ê°ì²´ì´ë©°, <code class="highlighter-rouge">companion object</code> ë‚´ì— ì„ ì–¸ëœ ì†ì„±ê³¼ í•¨ìˆ˜ëŠ” <code class="highlighter-rouge">{í´ë˜ìŠ¤ ì´ë¦„}.{í•„ë“œ/í•¨ìˆ˜ ì´ë¦„}</code> í˜•íƒœë¡œ ë°”ë¡œ í˜¸ì¶œí•  ìˆ˜ ìˆë‹¤.  <br />
í´ë˜ìŠ¤ì˜ ë§¨ í•˜ë‹¨ì— ì‘ì„±í•œë‹¤.</p>

<h4 id="jvmstatic">@JvmStatic</h4>

<p><code class="highlighter-rouge">ompanion object</code>ë¥¼ ì‚¬ìš©í•˜ì—¬ êµ¬ì„±í•œ ì½”ë“œë¥¼ ìë°”ì—ì„œ ì‚¬ìš©í•˜ë ¤ë©´ ì†ì„± ë° í•¨ìˆ˜ê°€ ìë°”ì˜ í•„ë“œ/ë©”ì„œë“œë¡œ í•´ì„ë˜ë„ë¡ ì•Œë ¤ì£¼ì–´ì•¼ í•œë‹¤.</p>

<p><code class="highlighter-rouge">const</code> ì„ ì–¸ì´ ë˜ì–´ ìˆëŠ” í”„ë¡œí¼í‹°ëŠ” ë³„ë„ì˜ ì²˜ë¦¬ ì—†ì´ ìë°”ì—ì„œë„ ì‚¬ìš© ê°€ëŠ¥í•˜ë©°, 
í•¨ìˆ˜ëŠ” <code class="highlighter-rouge">@JvmStatic</code> ì–´ë…¸í…Œì´ì…˜ì„ ì‚¬ìš©í•˜ì—¬ ìë°”ì—ì„œ ì •ì  ë©”ì„œë“œë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆê²Œ í•œë‹¤.</p>

<h4 id="jvmfield">@JvmField</h4>

<p><code class="highlighter-rouge">const</code> í‚¤ì›Œë“œëŠ” ê¸°ë³¸ ìë£Œí˜•ì—ë§Œ ì‚¬ìš©ì´ ê°€ëŠ¥í•˜ë‹¤.<br />
ì´ì™¸ì˜ íƒ€ì… ê°ì²´ë¥¼ ìë°”ì—ì„œ ì •ì  í•„ë“œì²˜ëŸ¼ ì‚¬ìš©í•˜ë ¤ë©´ <code class="highlighter-rouge">@JvmField</code> ì–´ë…¸í…Œì´ì…˜ì„ ì‚¬ìš©í•´ì•¼ í•œë‹¤.</p>

<h3 id="utility-í´ë˜ìŠ¤">Utility í´ë˜ìŠ¤</h3>

<p>ìë°”ì—ì„œëŠ” ëª¨ë“  ë©”ì„œë“œë¥¼ í´ë˜ìŠ¤ ë‚´ë¶€ì— ì‘ì„±í•´ì•¼í–ˆì§€ë§Œ, ì½”í‹€ë¦°ì—ì„œëŠ” ê·¸ëŸ´ í•„ìš”ê°€ ì—†ë‹¤.<br />
í•„ìš”í•œ ìœ í‹¸ë¦¬í‹° ë©”ì„œë“œë§Œ ëª¨ì•„ë†“ì€ íŒŒì¼ë§Œì„ ë§Œë“¤ê³  ì´ë¥¼ íŒŒì¼ ìµœìƒìœ„ì— ìœ„ì¹˜ì‹œí‚¤ë©´ ëœë‹¤.</p>

<h3 id="ìŠ¤ë§ˆíŠ¸-ìºìŠ¤íŠ¸">ìŠ¤ë§ˆíŠ¸ ìºìŠ¤íŠ¸</h3>

<p>ì½”í‹€ë¦°ì—ì„œëŠ” ì»´íŒŒì¼ëŸ¬ê°€ ëŒ€ì‹  ìºìŠ¤íŒ…ì„ í•´ì¤€ë‹¤.<br />
ì›í•˜ëŠ” íƒ€ì…ì„ ê²€ì‚¬í•˜ê³  ë‚˜ë©´, ê°œë°œìê°€ ë³€ìˆ˜ë¥¼ ì›í•˜ëŠ” íƒ€ì…ìœ¼ë¡œ ìºìŠ¤íŒ…í•˜ì§€ ì•Šì•„ë„ í•´ë‹¹ ë³€ìˆ˜ê°€ ì›í•˜ëŠ” íƒ€ì…ìœ¼ë¡œ ì„ ì–¸ëœ ê²ƒì²˜ëŸ¼ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.<br />
ì´ëŠ” ì»´íŒŒì¼ëŸ¬ê°€ ìºìŠ¤íŒ…ì„ ìˆ˜í–‰í•´ì£¼ì–´ ê°€ëŠ¥í•œ ì¼ì´ë‹¤.</p>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">fun</span> <span class="nf">calculate</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="n">String</span><span class="p">?):</span> <span class="n">Int</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">text</span><span class="p">.</span><span class="n">isNullOrBlank</span><span class="p">())</span> <span class="p">{</span>
        <span class="k">throw</span> <span class="n">IllegalArgumentException</span><span class="p">()</span>
    <span class="p">}</span>
    <span class="kd">val</span> <span class="py">tokens</span> <span class="p">=</span> <span class="n">text</span><span class="p">.</span><span class="n">split</span><span class="p">(</span><span class="s">" "</span><span class="p">)</span>
    <span class="c1">// ...
</span><span class="p">}</span>
</code></pre></div></div>

<hr />

<h2 id="ì½”ë“œ-ë¦¬ë·°-ì¤‘-ì§¤ë§‰í•œ-ë°°ì›€">ì½”ë“œ ë¦¬ë·° ì¤‘ ì§¤ë§‰í•œ ë°°ì›€</h2>

<h4 id="maxby">maxBy{}</h4>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">fun</span> <span class="nf">findMaxPosition</span><span class="p">():</span> <span class="n">Int</span> <span class="p">{</span>
        <span class="k">return</span> <span class="n">cars</span><span class="p">.</span><span class="n">maxBy</span> <span class="p">{</span> <span class="n">it</span><span class="p">.</span><span class="n">position</span> <span class="p">}</span><span class="o">!!</span><span class="p">.</span><span class="n">position</span>
    <span class="p">}</span>
</code></pre></div></div>

<p>ê°€ì¥ í° ì›ì†Œë¥¼ ì°¾ê¸° ìœ„í•´ ë¹„êµì— ì‚¬ìš©í•  ê°’ì„ ì¸ìë¡œ ë°›ëŠ”ë‹¤. <br />
ëª¨ë“  ì»¬ë ‰ì…˜ì— ëŒ€í•´ maxBy í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•  ìˆ˜ ìˆë‹¤.</p>

<p><code class="highlighter-rouge">{ it.position }</code> ëŠ” ë¹„êµì— ì‚¬ìš©í•  ê°’ì„ ëŒë ¤ì£¼ëŠ” í•¨ìˆ˜ì´ë‹¤.<br />
<code class="highlighter-rouge">maxBy{}</code> ì˜ ë°˜í™˜ ê°’ì€ nullableì¸ë°, ë°˜í™˜ëœ ê°’ì˜ í”„ë¡œí¼í‹°ë¥¼ ì‚¬ìš©í•˜ê³  ì‹¶ì€ ê²½ìš° <code class="highlighter-rouge">!!</code> í‚¤ì›Œë“œë¥¼ í†µí•´ nullì´ ì•„ë‹˜ì„ ì„ ì–¸í•˜ì—¬ êº¼ë‚¸ë‹¤.</p>

<p><strong>ì°¸ê³ </strong></p>

<p><code class="highlighter-rouge">?:</code>(ì—˜ë¹„ìŠ¤ ì˜¤í¼ë ˆì´í„° ) : nullì¸ ê²½ìš° ì„¤ì •í•œ default ê°’ì„ ë„£ëŠ”ë‹¤.</p>

<h4 id="pair">Pair</h4>

<p>Kotlinì—ì„œ ì œê³µí•˜ëŠ” ê°ì²´ íƒ€ì… ì¤‘ ì—°ê´€ íƒ€ì…ë¼ë¦¬ ê´€ê³„ê°€ ì—†ì–´ë„ 2ê°œë¥¼ ìŒìœ¼ë¡œ ê°€ì§€ê³  ìˆëŠ” ê°ì²´</p>

<p><strong>getter</strong>ëŠ” <strong>.first  .second</strong> ë˜ëŠ” <strong>.component1() / .component2()</strong>ë¡œ ì ‘ê·¼í•  ìˆ˜ ìˆë‹¤.</p>

<p><strong>RacingCar ì¼ë¶€</strong></p>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">fun</span> <span class="nf">race</span><span class="p">(</span><span class="n">moveStrategy</span><span class="p">:</span> <span class="n">MoveStrategy</span><span class="p">):</span> <span class="n">Pair</span><span class="p">&lt;</span><span class="n">List</span><span class="p">&lt;</span><span class="n">Cars</span><span class="p">&gt;,</span> <span class="n">List</span><span class="p">&lt;</span><span class="n">Car</span><span class="p">&gt;&gt;</span> <span class="p">{</span>
    <span class="kd">val</span> <span class="py">carsGroup</span> <span class="p">=</span> <span class="n">arrayListOf</span><span class="p">&lt;</span><span class="n">Cars</span><span class="p">&gt;()</span>
    <span class="k">for</span> <span class="p">(</span><span class="n">i</span> <span class="k">in</span> <span class="m">0</span> <span class="n">until</span> <span class="n">tryNumber</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="n">cars</span> <span class="p">=</span> <span class="k">this</span><span class="p">.</span><span class="n">cars</span><span class="p">.</span><span class="n">moveAll</span><span class="p">(</span><span class="n">moveStrategy</span><span class="p">)</span>
        <span class="n">carsGroup</span><span class="p">.</span><span class="n">add</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="n">cars</span><span class="p">)</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="n">Pair</span><span class="p">(</span><span class="n">carsGroup</span><span class="p">,</span> <span class="n">findWinners</span><span class="p">())</span>
<span class="p">}</span>

<span class="k">private</span> <span class="k">fun</span> <span class="nf">findWinners</span><span class="p">():</span> <span class="n">List</span><span class="p">&lt;</span><span class="n">Car</span><span class="p">&gt;</span> <span class="p">{</span>
    <span class="kd">val</span> <span class="py">maxPosition</span> <span class="p">=</span> <span class="n">cars</span><span class="p">.</span><span class="n">findMaxPosition</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">cars</span><span class="p">.</span><span class="n">findCarsBySamePosition</span><span class="p">(</span><span class="n">maxPosition</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div></div>

<h4 id="ê³¼-">==ê³¼ ===</h4>

<ul>
  <li>
    <p><code class="highlighter-rouge">==</code> ì—°ì‚°ìëŠ” ìë°”ì˜ equalì™€ ê°™ë‹¤.</p>
  </li>
  <li>
    <p><code class="highlighter-rouge">===</code> ì—°ì‚°ìëŠ” ìë°”ì˜ <code class="highlighter-rouge">==</code>ì™€ ê°™ë‹¤.</p>
  </li>
</ul>

<h4 id="list-mutablelist">List, MutableList</h4>

<p>ì½”í‹€ë¦°ì—ì„œëŠ” ì½ê¸° ì „ìš© ë¦¬ìŠ¤íŠ¸(List)ì™€ ìˆ˜ì •í•  ìˆ˜ ìˆëŠ” ë¦¬ìŠ¤íŠ¸(MutableList)ê°€ ìˆë‹¤.<br />
<code class="highlighter-rouge">arrayListOf()</code> ë¥¼ ì“°ê¸°ë³´ë‹¤ëŠ” ì½”í‹€ë¦°ì´ ì œê³µí•˜ëŠ” List ë˜ëŠ” MutableListë¥¼ ì‚¬ìš©í•˜ì</p>

<p><strong>List</strong></p>

<p>ë°ì´í„°ë¥¼ ì½ê¸°ë§Œ ê°€ëŠ¥í•˜ê³  ë¦¬ìŠ¤íŠ¸ë¥¼ ì„ ì–¸í•  ë•Œ ë„£ì€ ë°ì´í„°ë“¤ì„ ìˆ˜ì •, ì‚­ì œ, ë³€ê²½í•  ìˆ˜ ì—†ë‹¤.</p>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">var</span> <span class="py">cars</span> <span class="p">=</span> <span class="n">listOf</span><span class="p">(</span><span class="n">Car</span><span class="p">(</span><span class="s">"ama"</span><span class="p">),</span> <span class="n">Car</span><span class="p">(</span><span class="s">"mazzi"</span><span class="p">))</span>

<span class="n">println</span><span class="p">(</span><span class="n">cars</span><span class="p">[</span><span class="m">0</span><span class="p">])</span> <span class="c1">// O
</span>
<span class="n">cars</span><span class="p">.</span><span class="n">add</span><span class="p">(</span><span class="n">Car</span><span class="p">(</span><span class="s">"new"</span><span class="p">))</span> <span class="c1">// X ì»´íŒŒì¼ì—ëŸ¬
</span><span class="n">cars</span><span class="p">.</span><span class="n">remove</span><span class="p">(</span><span class="m">1</span><span class="p">)</span>   <span class="c1">// X ì»´íŒŒì¼ì—ëŸ¬
</span></code></pre></div></div>

<p><strong>MutableList</strong></p>

<p>ê¸°ì¡´ ìë°”ì—ì„œ ì‚¬ìš©í•˜ë˜ ArrayListì™€ ìœ ì‚¬í•˜ë¯€ë¡œ ArrayListì˜ í•¨ìˆ˜ë“¤ì„ ëª¨ë‘ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.</p>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">var</span> <span class="py">carsMutable</span> <span class="p">=</span> <span class="n">mutableListOf</span><span class="p">&lt;</span><span class="n">Car</span><span class="p">&gt;()</span>
<span class="n">carsMutable</span><span class="p">.</span><span class="n">add</span><span class="p">(</span><span class="n">Car</span><span class="p">(</span><span class="s">"ama"</span><span class="p">))</span> <span class="c1">// O
</span><span class="n">carsMutable</span><span class="p">.</span><span class="n">add</span><span class="p">(</span><span class="n">Car</span><span class="p">(</span><span class="s">"mazzi"</span><span class="p">))</span> <span class="c1">// O
</span><span class="n">carsMutable</span><span class="p">.</span><span class="n">remove</span><span class="p">(</span><span class="m">0</span><span class="p">)</span> <span class="c1">// O
</span><span class="n">println</span><span class="p">(</span><span class="n">carsMutable</span><span class="p">[</span><span class="m">0</span><span class="p">])</span> <span class="c1">// O
</span></code></pre></div></div>

<p>Listì™€ MutalbeList ì„œë¡œì˜ íƒ€ì…ìœ¼ë¡œ ë³€ê²½ë„ ê°€ëŠ¥í•˜ë‹¤. ì´ ë•Œ ì„œë¡œ ìƒˆë¡œìš´ ë¦¬ìŠ¤íŠ¸ë¥¼ ë°˜í™˜í•œë‹¤.</p>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">var</span> <span class="py">carsMutable</span> <span class="p">=</span> <span class="n">mutableListOf</span><span class="p">&lt;</span><span class="n">Car</span><span class="p">&gt;()</span>
<span class="n">carsMutable</span><span class="p">.</span><span class="n">add</span><span class="p">(</span><span class="n">Car</span><span class="p">(</span><span class="s">"ama"</span><span class="p">))</span> 
<span class="n">carsMutable</span><span class="p">.</span><span class="n">add</span><span class="p">(</span><span class="n">Car</span><span class="p">(</span><span class="s">"mazzi"</span><span class="p">))</span> 

<span class="kd">var</span> <span class="py">arrNotMutable</span> <span class="p">=</span> <span class="n">carsMutable</span><span class="p">.</span><span class="n">toList</span><span class="p">()</span> <span class="c1">//mutable -&gt; list ë³€ê²½
</span>
<span class="kd">var</span> <span class="py">arrReMutable</span> <span class="p">=</span> <span class="n">arrNotMutable</span><span class="p">.</span><span class="n">toMutableList</span><span class="p">()</span> <span class="c1">// list -&gt; mutable ë³€ê²½
</span><span class="n">arrReMutable</span><span class="p">.</span><span class="n">add</span><span class="p">(</span><span class="n">Car</span><span class="p">(</span><span class="s">"new"</span><span class="p">))</span>
<span class="n">println</span><span class="p">(</span><span class="n">arrReMutable</span><span class="p">)</span>
</code></pre></div></div>

<h4 id="assertthrows">assertThrows</h4>

<p>ìë°”ì²˜ëŸ¼ <code class="highlighter-rouge">assertThatThrownBy</code> ë¥¼ ì“°ì§€ ë§ê³  ì•„ë˜ì™€ ê°™ì´ ì“°ì.<br />
ì´ìœ ëŠ” <code class="highlighter-rouge">assertThatThrownBy</code> ë¥¼ ì‚¬ìš©í•  ê²½ìš° <code class="highlighter-rouge">isInstanceOf()</code> ë¥¼ ì‚¬ìš©í•˜ëŠ”ë° ì—¬ê¸°ì—ëŠ” <code class="highlighter-rouge">.java.class</code> ë¥¼ ë¶™ì—¬ì£¼ì–´ì•¼ í•´ ì½”í‹€ë¦° ìŠ¤ëŸ½ì§€ ëª»í•˜ê¸° ë•Œë¬¸ì´ë‹¤.</p>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">&lt;</span><span class="n">IllegalArgumentException</span><span class="p">&gt;</span> <span class="p">{</span><span class="n">Car</span><span class="p">(</span><span class="n">name</span> <span class="p">=</span> <span class="n">input</span><span class="p">)}</span>
</code></pre></div></div>

<h4 id="object">object</h4>

<p>í´ë˜ìŠ¤ë¥¼ ë§Œë“¦ê³¼ ë™ì‹œì— ì¸ìŠ¤í„´ìŠ¤ë¡œ ë§Œë“ ë‹¤. (ì‹±ê¸€í„´)</p>

<h4 id="ëŒë‹¤-ì‘ì„±">ëŒë‹¤ ì‘ì„±</h4>

<p>ì½”í‹€ë¦°ì€ ëŒë‹¤ì‹ì„ ì‘ì„±í•  ë•Œ <code class="highlighter-rouge">{}</code>ë¡œ í‘œí˜„í•œë‹¤. <br />
ëŒë‹¤ì˜ ì¸ìê°€ í•˜ë‚˜ë¼ë©´ ëŒë‹¤ì‹ ë‚´ë¶€ì—ì„œ <code class="highlighter-rouge">it</code>ìœ¼ë¡œ ë°›ì„ ìˆ˜ ìˆë‹¤.<br />
í•¨ìˆ˜ì˜ ì¸ìë¡œ ëŒë‹¤ê°€ ë„˜ì–´ì˜¬ ë•Œ, ë§¨ ë§ˆì§€ë§‰ ìˆœë²ˆì´ë¼ë©´ <code class="highlighter-rouge">()</code> ë°–ì— ì“¸ ìˆ˜ ìˆë‹¤.<br />
ë§Œì•½ ëŒë‹¤ í•˜ë‚˜ë§Œ ë°›ëŠ” ê±°ë¼ë©´ <code class="highlighter-rouge">()</code>ë¥¼ ìƒëµí•  ìˆ˜ ìˆê² ì£ ?</p>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">val</span> <span class="py">newCars</span> <span class="p">=</span> <span class="n">cars</span><span class="p">.</span><span class="n">map</span> <span class="p">{</span> <span class="n">it</span><span class="p">.</span><span class="n">move</span><span class="p">(</span><span class="n">moveStrategy</span><span class="p">)</span> <span class="p">}</span>
</code></pre></div></div>

<h4 id="associate"><code class="highlighter-rouge">associate{}</code></h4>

<p>mapì„ ê¸°ë³¸ì ìœ¼ë¡œ ë°˜í™˜í•œë‹¤.</p>

<h4 id="inputì„-ì¬ê·€ì ìœ¼ë¡œ">Inputì„ ì¬ê·€ì ìœ¼ë¡œ</h4>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">tailrec</span> <span class="k">fun</span> <span class="nf">inputCarNames</span><span class="p">():</span> <span class="n">List</span><span class="p">&lt;</span><span class="n">String</span><span class="p">&gt;</span> <span class="p">{</span>
    <span class="n">println</span><span class="p">(</span><span class="s">"ê²½ì£¼í•  ìë™ì°¨ ì´ë¦„ì„ ì…ë ¥í•˜ì„¸ìš”(ì´ë¦„ì€ ì‰¼í‘œ(,)ë¥¼ ê¸°ì¤€ìœ¼ë¡œ êµ¬ë¶„)."</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">readLine</span><span class="p">()</span><span class="o">?.</span><span class="n">replace</span><span class="p">(</span><span class="s">" "</span><span class="p">,</span> <span class="s">""</span><span class="p">)</span><span class="o">?.</span><span class="n">split</span><span class="p">(</span><span class="s">","</span><span class="p">)</span> <span class="o">?:</span> <span class="n">inputCarNames</span><span class="p">()</span>
<span class="p">}</span>

<span class="k">tailrec</span> <span class="k">fun</span> <span class="nf">inputTryNumber</span><span class="p">():</span> <span class="n">Int</span> <span class="p">{</span>
    <span class="n">println</span><span class="p">(</span><span class="s">"ì‹œë„í•  íšŸìˆ˜ëŠ” ëª‡ íšŒì¸ê°€ìš”?"</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">readLine</span><span class="p">()</span><span class="o">?.</span><span class="n">toIntOrNull</span><span class="p">()</span> <span class="o">?:</span> <span class="n">inputTryNumber</span><span class="p">()</span>
<span class="p">}</span>
</code></pre></div></div>

<ul>
  <li><strong><code class="highlighter-rouge">tailrec</code></strong> : ê¼¬ë¦¬ì¬ê·€(tail recursive)ë¼ëŠ” ì˜ë¯¸ë¡œ, ì¶”ê°€ì ì¸ ì—°ì‚°ì´ ì—†ì´ ìì‹  ìŠ¤ìŠ¤ë¡œ ì¬ê·€ì ìœ¼ë¡œ í˜¸ì¶œí•˜ë‹¤ê°€ ì–´ë–¤ ê°’ì„ ë¦¬í„´í•˜ëŠ” í•¨ìˆ˜
    <ul>
      <li>í•´ë‹¹ í‚¤ì›Œë“œë¥¼ ë¶™ì´ë©´ ì¬ê·€ì ì¸ í•¨ìˆ˜ í˜¸ì¶œì˜ ìµœì í™”ê°€(?) ì¼ì–´ë‚¨</li>
    </ul>
  </li>
</ul>

<h4 id="ì¤‘ìœ„-í•¨ìˆ˜-to-í‚¤ì›Œë“œ">ì¤‘ìœ„ í•¨ìˆ˜ (to í‚¤ì›Œë“œ)</h4>

<ul>
  <li><strong>ì¤‘ìœ„ í‘œí˜„ë²•</strong> : ë³€ìˆ˜ì™€ ë³€ìˆ˜ì‚¬ì´ì— í•¨ìˆ˜ë¥¼ ë„£ì–´ ì—°ì‚°ì ì²˜ëŸ¼ ì‚¬ìš©í•˜ëŠ” ê²ƒ</li>
</ul>

<p><strong>ì¡°ê±´</strong></p>

<ul>
  <li>ë©¤ë²„ ë©”ì„œë“œ ë˜ëŠ” í™•ì¥ í•¨ìˆ˜ì—¬ì•¼ í•¨</li>
  <li>í•˜ë‚˜ì˜ ë§¤ê°œë³€ìˆ˜ë¥¼ ê°€ì ¸ì•¼í•¨</li>
  <li><strong>infix</strong> í‚¤ì›Œë“œë¥¼ ì‚¬ìš©í•˜ì—¬ ì •ì˜</li>
</ul>

<p><strong>ex) Pair ê°ì²´ë¥¼ ìƒì„±í•  ë•Œ to</strong></p>

<p><img src="https://images.velog.io/images/new_wisdom/post/7377057b-c283-4102-8e00-d704ae58d308/image.png" style="zoom:33%;" /></p>

<h4 id="by-í‚¤ì›Œë“œ">by í‚¤ì›Œë“œ</h4>

<p><img src="https://images.velog.io/images/new_wisdom/post/da1ab914-04bb-4128-ae3d-3393fa9ec579/image.png" style="zoom:33%;" /></p>

<p>ìœ„ ì½”ë“œì—ì„œ Carì˜ ì¼ê¸‰ ì»¬ë ‰ì…˜ì¸ Carsë¥¼ ìˆœíšŒí•  ë•Œ í˜„ì¬ëŠ” <code class="highlighter-rouge">List&lt;Car&gt;</code>ì— ì ‘ê·¼í•˜ì—¬ ìˆœíšŒí•˜ê³  ìˆë‹¤.<br />
í•˜ì§€ë§Œ ì½”í‹€ë¦°ì—ì„œëŠ” ë‹¤ìŒê³¼ ê°™ì´ ë³€ê²½í•  ìˆ˜ ìˆë‹¤.</p>

<p><img src="https://images.velog.io/images/new_wisdom/post/4ed5d81e-1003-4aaa-aead-6cfe5f7cc4df/image.png" style="zoom:33%;" /></p>

<p>ìœ„ì™€ ê°™ì´ cars ì¼ê¸‰ ì»¬ë ‰ì…˜ì„ ë°”ë¡œ ìˆœíšŒí•  ìˆ˜ ìˆëŠ” ì´ìœ ëŠ” Carsê°€ ë‹¤ìŒê³¼ ê°™ì´ <code class="highlighter-rouge">List&lt;Car&gt;</code> ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•˜ê³  ìˆê¸° ë•Œë¬¸ì´ë‹¤.</p>

<p><img src="https://images.velog.io/images/new_wisdom/post/4ebb7070-a1b5-4d4b-a5b7-0d2c56524246/image.png" style="zoom:33%;" /></p>

<p>ë­ì•¼ ì™„ì „ ì‹ ê¸°í•´â€¦.  <br />
ì œì´ìŠ¨ì´ ì¼ë‹¨ ì§€ê¸ˆì€ â€œì™€ ë­ì•¼â€ ì´ì •ë„ê¹Œì§€ë§Œ ì•Œì•„ë‘ì–´ë„ ëœë‹¤ê³  í•˜ì˜€ë‹¤.<br />
ì½”í‹€ë¦° ì§±</p>

	  ]]></description>
	</item>

	<item>
	  <title>ğŸ“‹ Spring MVC - 4. MVC í”„ë ˆì„ì›Œí¬ ë§Œë“¤ê¸°</title>
	  <link>//spring-mvc-4</link>
	  <author></author>
	  <pubDate>2021-05-04T19:18:00+09:00</pubDate>
	  <guid>//spring-mvc-4</guid>
	  <description><![CDATA[
	     <h2 id="mvc-í”„ë ˆì„ì›Œí¬-ë§Œë“¤ê¸°">MVC í”„ë ˆì„ì›Œí¬ ë§Œë“¤ê¸°</h2>

<h2 id="í”„ë¡ íŠ¸-ì»¨íŠ¸ë¡¤ëŸ¬-íŒ¨í„´">í”„ë¡ íŠ¸ ì»¨íŠ¸ë¡¤ëŸ¬ íŒ¨í„´</h2>

<p>í”„ë¡ íŠ¸ ì»¨íŠ¸ë¡¤ëŸ¬ë„ ì„œë¸”ë¦¿ì´ë‹¤.<br />
ìš”ì²­ì„ ëª¨ë‘ ë°›ê³  ìš”ì²­ì— ë§ëŠ” ì»¨íŠ¸ë¡¤ëŸ¬ë¥¼ í˜¸ì¶œí•œë‹¤.</p>

<h3 id="íŠ¹ì§•">íŠ¹ì§•</h3>

<p>í”„ë¡ íŠ¸ ì»¨íŠ¸ë¡¤ëŸ¬ ì„œë¸”ë¦¿ í•˜ë‚˜ë¡œ í´ë¼ì´ì–¸íŠ¸ì˜ ìš”ì²­ì„ ë°›ê³ , ìš”ì²­ì— ë§ëŠ” ì»¨íŠ¸ë¡¤ëŸ¬ë¥¼ ì°¾ì•„ì„œ í˜¸ì¶œí•œë‹¤.<br />
ì…êµ¬ë¥¼ í•˜ë‚˜ë¡œ ë¬¶ëŠ”ë‹¤.<br />
í”„ë¡ íŠ¸ ì»¨íŠ¸ë¡¤ëŸ¬ë¥¼ ì œì™¸í•œ ë‚˜ë¨¸ì§€ ì»¨íŠ¸ë¡¤ëŸ¬ëŠ” ì„œë¸”ë¦¿ì„ ì‚¬ìš©í•˜ì§€ ì•Šì•„ë„ ëœë‹¤.</p>

<h3 id="ìŠ¤í”„ë§-ì›¹-mvcì™€-í”„ë¡ íŠ¸-ì»¨íŠ¸ë¡¤ëŸ¬">ìŠ¤í”„ë§ ì›¹ MVCì™€ í”„ë¡ íŠ¸ ì»¨íŠ¸ë¡¤ëŸ¬</h3>

<p>ìŠ¤í”„ë§ ì›¹ MVCì˜ í•µì‹¬ë„ ë°”ë¡œ FrontControllerì´ë‹¤. (DispatcherServletì´ í”„ë¡ íŠ¸ ì»¨íŠ¸ë¡¤ëŸ¬ íŒ¨í„´ìœ¼ë¡œ ë˜ì–´ìˆë‹¤.)</p>

<p><img src="https://images.velog.io/images/new_wisdom/post/b2493682-0c37-4a1c-93c4-f2ffd02e7862/image.png" style="zoom: 67%;" /></p>

<p>ControllerV1ì„ ì¸í„°í˜ì´ìŠ¤ë¡œ ë§Œë“¤ê³  ì´ë¥¼ êµ¬í˜„í•œ Controllerë“¤ì„ ë§Œë“ ë‹¤.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">MemberFormControllerV1</span> <span class="kd">implements</span> <span class="n">ControllerV1</span> <span class="o">{</span>
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">process</span><span class="o">(</span><span class="n">HttpServletRequest</span> <span class="n">request</span><span class="o">,</span> <span class="n">HttpServletResponse</span> <span class="n">response</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">ServletException</span><span class="o">,</span> <span class="n">IOException</span> <span class="o">{</span>
        <span class="n">String</span> <span class="n">viewPath</span> <span class="o">=</span> <span class="s">"/WEB-INF/views/new-form.jsp"</span><span class="o">;</span>
        <span class="n">RequestDispatcher</span> <span class="n">requestDispatcher</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="na">getRequestDispatcher</span><span class="o">(</span><span class="n">viewPath</span><span class="o">);</span> <span class="c1">// ì»¨íŠ¸ë¡¤ëŸ¬ì—ì„œ ë·°ë¡œ ì´ë™</span>
        <span class="n">requestDispatcher</span><span class="o">.</span><span class="na">forward</span><span class="o">(</span><span class="n">request</span><span class="o">,</span> <span class="n">response</span><span class="o">);</span> <span class="c1">// ì„œë¸”ë¦¿ì—ì„œ JSPë¥¼ í˜¸ì¶œí•œë‹¤.</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<h4 id="frontcontrollerservletv1">FrontControllerServletV1</h4>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@WebServlet</span><span class="o">(</span><span class="n">name</span> <span class="o">=</span> <span class="s">"frontControllerServletV1"</span><span class="o">,</span> <span class="n">urlPatterns</span> <span class="o">=</span> <span class="s">"/front-controller/v1/*"</span><span class="o">)</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">FrontControllerServletV1</span> <span class="kd">extends</span> <span class="n">HttpServlet</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">ControllerV1</span><span class="o">&gt;</span> <span class="n">controllerMap</span> <span class="o">=</span> <span class="k">new</span> <span class="n">HashMap</span><span class="o">&lt;&gt;();</span>

    <span class="kd">public</span> <span class="nf">FrontControllerServletV1</span><span class="o">(</span><span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">ControllerV1</span><span class="o">&gt;</span> <span class="n">controllerMap</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">controllerMap</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"/front-controller/v1/members/new-form"</span><span class="o">,</span>
                <span class="k">new</span> <span class="nf">MemberFormControllerV1</span><span class="o">());</span>
        <span class="n">controllerMap</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"/front-controller/v1/members/save"</span><span class="o">,</span>
                <span class="k">new</span> <span class="nf">MemberSaveControllerV1</span><span class="o">());</span>
        <span class="n">controllerMap</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"/front-controller/v1/members"</span><span class="o">,</span>
                <span class="k">new</span> <span class="nf">MemberListControllerV1</span><span class="o">());</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">protected</span> <span class="kt">void</span> <span class="nf">service</span><span class="o">(</span><span class="n">HttpServletRequest</span> <span class="n">req</span><span class="o">,</span> <span class="n">HttpServletResponse</span> <span class="n">resp</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">ServletException</span><span class="o">,</span> <span class="n">IOException</span> <span class="o">{</span>
        <span class="n">String</span> <span class="n">requestURI</span> <span class="o">=</span> <span class="n">req</span><span class="o">.</span><span class="na">getRequestURI</span><span class="o">();</span>
        <span class="n">ControllerV1</span> <span class="n">controller</span> <span class="o">=</span> <span class="n">controllerMap</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">requestURI</span><span class="o">);</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">controller</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">resp</span><span class="o">.</span><span class="na">setStatus</span><span class="o">(</span><span class="n">HttpServletResponse</span><span class="o">.</span><span class="na">SC_NOT_FOUND</span><span class="o">);</span>
            <span class="k">return</span><span class="o">;</span>
        <span class="o">}</span>
        <span class="n">controller</span><span class="o">.</span><span class="na">process</span><span class="o">(</span><span class="n">req</span><span class="o">,</span> <span class="n">resp</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<p>Controller ì •ë³´ë¥¼ ê°€ì§„ ì„œë¸”ë¦¿ì¸ FrontContollerë¥¼ êµ¬í˜„í•œë‹¤.</p>

<ul>
  <li><strong>urlPatterns</strong> :  â€œ/front-controller/v1/â€ë¥¼ í¬í•¨í•œ í•˜ìœ„ ëª¨ë“  ìš”ì²­ì„ í•˜ë‚˜ì˜ ì„œë¸”ë¦¿ì—ì„œ ë°›ì•„ë“¤ì¸ë‹¤.</li>
  <li><strong>controllerMap</strong> : key-ë§¤í•‘ URL, value-í˜¸ì¶œë  ì»¨íŠ¸ë¡¤ëŸ¬</li>
  <li><strong>service()</strong> : reqeustURIë¥¼ ì¡°íšŒí•˜ì—¬ ì‹¤ì œ í˜¸ì¶œí•  ì»¨íŠ¸ë¡¤ëŸ¬ë¥¼ ì°¾ê³  í•´ë‹¹ ì»¨íŠ¸ë¡¤ëŸ¬ë¥¼ ì‹¤í–‰(<code class="highlighter-rouge">process()</code>)í•œë‹¤.</li>
</ul>

<p>ì—¬ëŸ¬ Controllerì™€ ì„œë¸”ë¦¿ì´ í•˜ë‚˜ì˜ JSPë¥¼ ì¬ì‚¬ìš©í•˜ê³  ìˆë‹¤.</p>

<hr />

<h2 id="view-ë¶„ë¦¬">View ë¶„ë¦¬</h2>

<p>Controllerì—ì„œ Viewë¡œ ì´ë™í•˜ëŠ” ë¶€ë¶„ì´ ì¤‘ë³µëœë‹¤.<br />
ControllerëŠ” MyViewë§Œ ë°˜í™˜í•´ì£¼ë©´ ëœë‹¤.</p>

<h4 id="controllerv2">ControllerV2</h4>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">interface</span> <span class="nc">ControllerV2</span> <span class="o">{</span>
    <span class="n">MyView</span> <span class="nf">process</span><span class="o">(</span><span class="n">HttpServletRequest</span> <span class="n">request</span><span class="o">,</span> <span class="n">HttpServletResponse</span> <span class="n">response</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">ServletException</span><span class="o">,</span> <span class="n">IOException</span><span class="o">;</span>
<span class="o">}</span>
</code></pre></div></div>

<ul>
  <li>ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•˜ë¯€ë¡œ ë°˜í™˜ íƒ€ì…ì„ ë§ì¶œ ìˆ˜ ìˆë‹¤.</li>
</ul>

<h4 id="myview">MyView</h4>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">MyView</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="n">String</span> <span class="n">viewPath</span><span class="o">;</span>

    <span class="kd">public</span> <span class="nf">MyView</span><span class="o">(</span><span class="n">String</span> <span class="n">viewPath</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">viewPath</span> <span class="o">=</span> <span class="n">viewPath</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">render</span><span class="o">(</span><span class="n">HttpServletRequest</span> <span class="n">request</span><span class="o">,</span> <span class="n">HttpServletResponse</span> <span class="n">response</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">ServletException</span><span class="o">,</span> <span class="n">IOException</span> <span class="o">{</span>
        <span class="n">RequestDispatcher</span> <span class="n">dispatcher</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="na">getRequestDispatcher</span><span class="o">(</span><span class="n">viewPath</span><span class="o">);</span>
        <span class="n">dispatcher</span><span class="o">.</span><span class="na">forward</span><span class="o">(</span><span class="n">request</span><span class="o">,</span> <span class="n">response</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<h4 id="memberformcontrollerv2">MemberFormControllerV2</h4>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">MemberFormControllerV2</span> <span class="kd">implements</span> <span class="n">ControllerV2</span> <span class="o">{</span>
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="n">MyView</span> <span class="nf">process</span><span class="o">(</span><span class="n">HttpServletRequest</span> <span class="n">request</span><span class="o">,</span> <span class="n">HttpServletResponse</span> <span class="n">response</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">ServletException</span><span class="o">,</span> <span class="n">IOException</span> <span class="o">{</span>
        <span class="k">return</span> <span class="k">new</span> <span class="nf">MyView</span><span class="o">(</span><span class="s">"/WEB-INF/views/new-form.jsp"</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<ul>
  <li>viewPathë¥¼ ê°€ì§€ê³  ìˆëŠ” MyView ê°ì²´ë¥¼ ë°˜í™˜í•œë‹¤.</li>
</ul>

<h4 id="frontcontrollerservletv2">FrontControllerServletV2</h4>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@WebServlet</span><span class="o">(</span><span class="n">name</span> <span class="o">=</span> <span class="s">"frontControllerServletV2"</span><span class="o">,</span> <span class="n">urlPatterns</span> <span class="o">=</span> <span class="s">"/front-controller/v2/*"</span><span class="o">)</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">FrontControllerServletV2</span> <span class="kd">extends</span> <span class="n">HttpServlet</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">ControllerV2</span><span class="o">&gt;</span> <span class="n">controllerMap</span> <span class="o">=</span> <span class="k">new</span> <span class="n">HashMap</span><span class="o">&lt;&gt;();</span>

    <span class="kd">public</span> <span class="nf">FrontControllerServletV2</span><span class="o">(</span><span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">ControllerV2</span><span class="o">&gt;</span> <span class="n">controllerMap</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">controllerMap</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"/front-controller/v2/members/new-form"</span><span class="o">,</span>
                <span class="k">new</span> <span class="nf">MemberFormControllerV2</span><span class="o">());</span>
        <span class="n">controllerMap</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"/front-controller/v2/members/save"</span><span class="o">,</span>
                <span class="k">new</span> <span class="nf">MemberSaveControllerV2</span><span class="o">());</span>
        <span class="n">controllerMap</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"/front-controller/v2/members"</span><span class="o">,</span>
                <span class="k">new</span> <span class="nf">MemberListControllerV2</span><span class="o">());</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">protected</span> <span class="kt">void</span> <span class="nf">service</span><span class="o">(</span><span class="n">HttpServletRequest</span> <span class="n">req</span><span class="o">,</span> <span class="n">HttpServletResponse</span> <span class="n">resp</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">ServletException</span><span class="o">,</span> <span class="n">IOException</span> <span class="o">{</span>
        <span class="n">String</span> <span class="n">requestURI</span> <span class="o">=</span> <span class="n">req</span><span class="o">.</span><span class="na">getRequestURI</span><span class="o">();</span>
        <span class="n">ControllerV2</span> <span class="n">controller</span> <span class="o">=</span> <span class="n">controllerMap</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">requestURI</span><span class="o">);</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">controller</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">resp</span><span class="o">.</span><span class="na">setStatus</span><span class="o">(</span><span class="n">HttpServletResponse</span><span class="o">.</span><span class="na">SC_NOT_FOUND</span><span class="o">);</span>
            <span class="k">return</span><span class="o">;</span>
        <span class="o">}</span>
        <span class="n">MyView</span> <span class="n">view</span> <span class="o">=</span> <span class="n">controller</span><span class="o">.</span><span class="na">process</span><span class="o">(</span><span class="n">req</span><span class="o">,</span> <span class="n">resp</span><span class="o">);</span>
        <span class="n">view</span><span class="o">.</span><span class="na">render</span><span class="o">(</span><span class="n">req</span><span class="o">,</span> <span class="n">resp</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<hr />

<h2 id="model-ì¶”ê°€">Model ì¶”ê°€</h2>

<p><img src="https://images.velog.io/images/new_wisdom/post/9a6ede47-f242-4b1f-a88e-08f055df0508/image.png" style="zoom:67%;" /></p>

<h3 id="ì„œë¸”ë¦¿-ì¢…ì†ì„±-ì¶”ê°€">ì„œë¸”ë¦¿ ì¢…ì†ì„± ì¶”ê°€</h3>

<p>ì»¨íŠ¸ë¡¤ëŸ¬ ì…ì¥ì—ì„œ <code class="highlighter-rouge">HttpServletRequest</code>, <code class="highlighter-rouge">HttpServletResponse</code>ê°€ í•„ìš”í•˜ì§€ ì•Šë‹¤.<br />
ìš”ì²­ íŒŒë¼ë¯¸í„°ë¥¼ Mapìœ¼ë¡œ ë„˜ê¸°ë©´ ì»¨íŠ¸ë¡¤ëŸ¬ê°€ ì„œë¸”ë¦¿ì´ ì•„ë‹ˆì–´ë„ ë™ì‘í•  ìˆ˜ ìˆë‹¤.</p>

<h3 id="ë·°-ì´ë¦„-ì¤‘ë³µ-ì œê±°">ë·° ì´ë¦„ ì¤‘ë³µ ì œê±°</h3>

<p>í˜„ì¬ ì»¨íŠ¸ë¡¤ëŸ¬ì—ì„œ ì§€ì •í•˜ëŠ” ë·° ì´ë¦„ì—ëŠ” ì¤‘ë³µ(<code class="highlighter-rouge">/WEB-INF/views/</code>)ì´ ì¡´ì¬í•œë‹¤.<br />
ì»¨íŠ¸ë¡¤ëŸ¬ëŠ” ë·°ì˜ ë…¼ë¦¬ ì´ë¦„ì„ ë°˜í™˜í•˜ê³ , ë¬¼ë¦¬ ì´ë¦„ì€ í”„ë¡ íŠ¸ ì»¨íŠ¸ë¡¤ëŸ¬ì—ì„œ ì²˜ë¦¬í•˜ë„ë¡ ë³€ê²½í•´ë³´ì.<br />
ë…¼ë¦¬ì  ë¬¼ë¦¬ì  ì´ë¦„ì„ êµ¬ë¶„í•˜ë©´ ë‚˜ì¤‘ì— ë³€ê²½í•  ë•Œ ì»¨íŠ¸ë¡¤ëŸ¬ë¥¼ ë³€ê²½í•  ì¼ì´ ì—†ë‹¤.</p>

<h3 id="modelview">ModelView</h3>

<p>Modelì„ ì „ë‹¬í•˜ê¸° ìœ„í•´ì„œ <code class="highlighter-rouge">request.setAttribute()</code> ë¥¼ ì‚¬ìš©í•˜ì—¬ ë°ì´í„°ë¥¼ ì €ì¥í•˜ê³  ë·°ì— ì „ë‹¬í–ˆë‹¤.<br />
ì„œë¸”ë¦¿ì˜ ì¢…ì†ì„±ì„ ì œê±°í•˜ê¸° ìœ„í•´, Modelì„ ë”°ë¡œ ë§Œë“¤ê³  View ì´ë¦„ê¹Œì§€ ì „ë‹¬í•˜ëŠ” ê°ì²´ë¥¼ ë§Œë“ ë‹¤.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">ModelView</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="n">String</span> <span class="n">viewName</span><span class="o">;</span>
    <span class="kd">private</span> <span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">Object</span><span class="o">&gt;</span> <span class="n">model</span> <span class="o">=</span> <span class="k">new</span> <span class="n">HashMap</span><span class="o">&lt;&gt;();</span>

    <span class="kd">public</span> <span class="nf">ModelView</span><span class="o">(</span><span class="n">String</span> <span class="n">viewName</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">viewName</span> <span class="o">=</span> <span class="n">viewName</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="c1">// ...</span>
<span class="o">}</span>
</code></pre></div></div>

<h4 id="controllerv3">ControllerV3</h4>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">interface</span> <span class="nc">ControllerV3</span> <span class="o">{</span>
    <span class="n">ModelView</span> <span class="nf">process</span><span class="o">(</span><span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">paramMap</span><span class="o">);</span>
<span class="o">}</span>
</code></pre></div></div>

<ul>
  <li>ModelViewë¥¼ ë°˜í™˜í•˜ë„ë¡ í•œë‹¤.</li>
</ul>

<h4 id="membersavecontrollerv3">MemberSaveControllerV3</h4>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">MemberSaveControllerV3</span> <span class="kd">implements</span> <span class="n">ControllerV3</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="n">MemberRepository</span> <span class="n">memberRepository</span> <span class="o">=</span> <span class="n">MemberRepository</span><span class="o">.</span><span class="na">getInstance</span><span class="o">();</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="n">ModelView</span> <span class="nf">process</span><span class="o">(</span><span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">paramMap</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">String</span> <span class="n">username</span> <span class="o">=</span> <span class="n">paramMap</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="s">"username"</span><span class="o">);</span>
        <span class="kt">int</span> <span class="n">age</span> <span class="o">=</span> <span class="n">Integer</span><span class="o">.</span><span class="na">parseInt</span><span class="o">(</span><span class="n">paramMap</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="s">"age"</span><span class="o">));</span>

        <span class="n">Member</span> <span class="n">member</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Member</span><span class="o">(</span><span class="n">username</span><span class="o">,</span> <span class="n">age</span><span class="o">);</span>
        <span class="n">memberRepository</span><span class="o">.</span><span class="na">save</span><span class="o">(</span><span class="n">member</span><span class="o">);</span>

        <span class="n">ModelView</span> <span class="n">mv</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ModelView</span><span class="o">(</span><span class="s">"save-result"</span><span class="o">);</span>
        <span class="n">mv</span><span class="o">.</span><span class="na">getModel</span><span class="o">().</span><span class="na">put</span><span class="o">(</span><span class="s">"member"</span><span class="o">,</span> <span class="n">member</span><span class="o">);</span>
        <span class="k">return</span> <span class="n">mv</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<ul>
  <li>ë…¼ë¦¬ ì´ë¦„ì„ ModelView ê°ì²´ì— ë„£ì–´ ìƒì„±í•˜ë„ë¡ í•œë‹¤.</li>
  <li>ëª¨ë¸ì— ë·°ì— í•„ìš”í•œ ê°ì²´ë¥¼ ë‹´ê³  ModelView ê°ì²´ë¥¼ ë°˜í™˜í•œë‹¤.</li>
</ul>

<h4 id="frontcontrollerservletv3-ì¼ë¶€">FrontControllerServletV3 ì¼ë¶€</h4>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Override</span>
<span class="kd">protected</span> <span class="kt">void</span> <span class="nf">service</span><span class="o">(</span><span class="n">HttpServletRequest</span> <span class="n">req</span><span class="o">,</span> <span class="n">HttpServletResponse</span> <span class="n">resp</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">ServletException</span><span class="o">,</span> <span class="n">IOException</span> <span class="o">{</span>
        <span class="n">String</span> <span class="n">requestURI</span> <span class="o">=</span> <span class="n">req</span><span class="o">.</span><span class="na">getRequestURI</span><span class="o">();</span>
        <span class="n">ControllerV3</span> <span class="n">controller</span> <span class="o">=</span> <span class="n">controllerMap</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">requestURI</span><span class="o">);</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">controller</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">resp</span><span class="o">.</span><span class="na">setStatus</span><span class="o">(</span><span class="n">HttpServletResponse</span><span class="o">.</span><span class="na">SC_NOT_FOUND</span><span class="o">);</span>
            <span class="k">return</span><span class="o">;</span>
        <span class="o">}</span>

        <span class="c1">// param Map</span>
        <span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">paramMap</span> <span class="o">=</span> <span class="n">createParamMap</span><span class="o">(</span><span class="n">req</span><span class="o">);</span>
        <span class="n">ModelView</span> <span class="n">mv</span> <span class="o">=</span> <span class="n">controller</span><span class="o">.</span><span class="na">process</span><span class="o">(</span><span class="n">paramMap</span><span class="o">);</span>

        <span class="n">String</span> <span class="n">viewName</span> <span class="o">=</span> <span class="n">mv</span><span class="o">.</span><span class="na">getViewName</span><span class="o">();</span> <span class="c1">// ë…¼ë¦¬ ì´ë¦„ ex) new-form</span>
        <span class="n">MyView</span> <span class="n">view</span> <span class="o">=</span> <span class="n">viewResolver</span><span class="o">(</span><span class="n">viewName</span><span class="o">);</span>
        <span class="n">view</span><span class="o">.</span><span class="na">render</span><span class="o">(</span><span class="n">mv</span><span class="o">.</span><span class="na">getModel</span><span class="o">(),</span> <span class="n">req</span><span class="o">,</span> <span class="n">resp</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="kd">private</span> <span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="nf">createParamMap</span><span class="o">(</span><span class="n">HttpServletRequest</span> <span class="n">req</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">paramMap</span> <span class="o">=</span> <span class="k">new</span> <span class="n">HashMap</span><span class="o">&lt;&gt;();</span>
        <span class="n">req</span><span class="o">.</span><span class="na">getParameterNames</span><span class="o">().</span><span class="na">asIterator</span><span class="o">()</span>
                <span class="o">.</span><span class="na">forEachRemaining</span><span class="o">(</span><span class="n">paramName</span> <span class="o">-&gt;</span> <span class="n">paramMap</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="n">paramName</span><span class="o">,</span> <span class="n">req</span><span class="o">.</span><span class="na">getParameter</span><span class="o">(</span><span class="n">paramName</span><span class="o">)));</span>
        <span class="k">return</span> <span class="n">paramMap</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">private</span> <span class="n">MyView</span> <span class="nf">viewResolver</span><span class="o">(</span><span class="n">String</span> <span class="n">viewName</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">MyView</span> <span class="n">view</span> <span class="o">=</span> <span class="k">new</span> <span class="n">MyView</span><span class="o">(</span><span class="s">"/WEB-INF/views/"</span> <span class="o">+</span> <span class="n">viewName</span> <span class="o">+</span> <span class="s">".jsp"</span><span class="o">);</span>
        <span class="k">return</span> <span class="n">view</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<ul>
  <li><code class="highlighter-rouge">createParamMap()</code> : HttpServletRequestì˜ íŒŒë¼ë¯¸í„° ì •ë³´ë¥¼ Mapìœ¼ë¡œ ë³€ê²½í•œë‹¤.</li>
  <li><code class="highlighter-rouge">viewResolver()</code> : ì»¨íŠ¸ë¡¤ëŸ¬ê°€ ë°˜í™˜í•œ ë…¼ë¦¬ ë·° ì´ë¦„ì„ ì‹¤ì œ ë¬¼ë¦¬ ë·° ê²½ë¡œë¡œ ë³€ê²½í•œë‹¤.</li>
  <li><code class="highlighter-rouge">view.render(mv.getModel(), req, resp)</code> : ë·° ê°ì²´ë¥¼ í†µí•´  HTML í™”ë©´ì„ ë Œë”ë§í•œë‹¤.</li>
</ul>

<h4 id="myview-1">MyView</h4>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kt">void</span> <span class="nf">render</span><span class="o">(</span><span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">Object</span><span class="o">&gt;</span> <span class="n">model</span><span class="o">,</span> <span class="n">HttpServletRequest</span> <span class="n">req</span><span class="o">,</span> <span class="n">HttpServletResponse</span> <span class="n">resp</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">ServletException</span><span class="o">,</span> <span class="n">IOException</span> <span class="o">{</span>
    <span class="n">modelToRequestAttribute</span><span class="o">(</span><span class="n">model</span><span class="o">,</span> <span class="n">req</span><span class="o">);</span>
    <span class="n">RequestDispatcher</span> <span class="n">dispatcher</span> <span class="o">=</span> <span class="n">req</span><span class="o">.</span><span class="na">getRequestDispatcher</span><span class="o">(</span><span class="n">viewPath</span><span class="o">);</span>
    <span class="n">dispatcher</span><span class="o">.</span><span class="na">forward</span><span class="o">(</span><span class="n">req</span><span class="o">,</span> <span class="n">resp</span><span class="o">);</span>
<span class="o">}</span>
</code></pre></div></div>

<hr />

<h2 id="ë‹¨ìˆœí•˜ê³ -ì‹¤ìš©ì ì¸-ì»¨íŠ¸ë¡¤ëŸ¬">ë‹¨ìˆœí•˜ê³  ì‹¤ìš©ì ì¸ ì»¨íŠ¸ë¡¤ëŸ¬</h2>

<p>ì»¨íŠ¸ë¡¤ëŸ¬ ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•˜ë©´ì„œ í•­ìƒ ModelView ê°ì²´ë¥¼ ìƒì„±í•˜ê³  ë°˜í™˜í•´ì•¼ í•˜ëŠ” ë¶€ë¶„ì´ ë²ˆê±°ë¡­ë‹¤.<br />
ì»¨íŠ¸ë¡¤ëŸ¬ëŠ” Viewì˜ ì´ë¦„ë§Œ ë³€ê²½í•˜ë„ë¡, ì‹¤ìš©ì„± ìˆë„ë¡ ë³€ê²½í•œë‹¤.</p>

<h4 id="controllerv4">ControllerV4</h4>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">interface</span> <span class="nc">ControllerV4</span> <span class="o">{</span>
    <span class="cm">/**
     *
     * @param paramMap
     * @param model
     * @return viewName
     */</span>

    <span class="n">String</span> <span class="nf">process</span><span class="o">(</span><span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">paramMap</span><span class="o">,</span> <span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">Object</span><span class="o">&gt;</span> <span class="n">model</span><span class="o">);</span>
<span class="o">}</span>
</code></pre></div></div>

<ul>
  <li>view ì´ë¦„ì„ ë°˜í™˜í•˜ë„ë¡ ë³€ê²½í•œë‹¤.</li>
</ul>

<p>####</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">MemberSaveControllerV4</span> <span class="kd">implements</span> <span class="n">ControllerV4</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="n">MemberRepository</span> <span class="n">memberRepository</span> <span class="o">=</span> <span class="n">MemberRepository</span><span class="o">.</span><span class="na">getInstance</span><span class="o">();</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="n">String</span> <span class="nf">process</span><span class="o">(</span><span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">paramMap</span><span class="o">,</span> <span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">Object</span><span class="o">&gt;</span> <span class="n">model</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">String</span> <span class="n">username</span> <span class="o">=</span> <span class="n">paramMap</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="s">"username"</span><span class="o">);</span>
        <span class="kt">int</span> <span class="n">age</span> <span class="o">=</span> <span class="n">Integer</span><span class="o">.</span><span class="na">parseInt</span><span class="o">(</span><span class="n">paramMap</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="s">"age"</span><span class="o">));</span>
        <span class="n">Member</span> <span class="n">member</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Member</span><span class="o">(</span><span class="n">username</span><span class="o">,</span> <span class="n">age</span><span class="o">);</span>
        <span class="n">memberRepository</span><span class="o">.</span><span class="na">save</span><span class="o">(</span><span class="n">member</span><span class="o">);</span>
        <span class="n">model</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"member"</span><span class="o">,</span> <span class="n">member</span><span class="o">);</span>
        <span class="k">return</span> <span class="s">"save-result"</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<ul>
  <li>Controllerì—ì„œëŠ” í•„ìš”í•œ ê°’ì„ êº¼ë‚´ê³ , ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì„ í˜¸ì¶œí•œ í›„ viewNameë§Œì„ ë°˜í™˜í•œë‹¤.</li>
</ul>

<h4 id="frontcontrollerservletv4">FrontControllerServletV4</h4>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@WebServlet</span><span class="o">(</span><span class="n">name</span> <span class="o">=</span> <span class="s">"frontControllerServletV4"</span><span class="o">,</span> <span class="n">urlPatterns</span> <span class="o">=</span> <span class="s">"/front-controller/v2/*"</span><span class="o">)</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">FrontControllerServletV4</span> <span class="kd">extends</span> <span class="n">HttpServlet</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">ControllerV4</span><span class="o">&gt;</span> <span class="n">controllerMap</span> <span class="o">=</span> <span class="k">new</span> <span class="n">HashMap</span><span class="o">&lt;&gt;();</span>

    <span class="kd">public</span> <span class="nf">FrontControllerServletV4</span><span class="o">(</span><span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">ControllerV4</span><span class="o">&gt;</span> <span class="n">controllerMap</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">controllerMap</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"/front-controller/v2/members/new-form"</span><span class="o">,</span>
                <span class="k">new</span> <span class="nf">MemberFormControllerV4</span><span class="o">());</span>
        <span class="n">controllerMap</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"/front-controller/v2/members/save"</span><span class="o">,</span>
                <span class="k">new</span> <span class="nf">MemberSaveControllerV4</span><span class="o">());</span>
        <span class="n">controllerMap</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"/front-controller/v2/members"</span><span class="o">,</span>
                <span class="k">new</span> <span class="nf">MemberListControllerV4</span><span class="o">());</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">protected</span> <span class="kt">void</span> <span class="nf">service</span><span class="o">(</span><span class="n">HttpServletRequest</span> <span class="n">req</span><span class="o">,</span> <span class="n">HttpServletResponse</span> <span class="n">resp</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">ServletException</span><span class="o">,</span> <span class="n">IOException</span> <span class="o">{</span>
        <span class="n">String</span> <span class="n">requestURI</span> <span class="o">=</span> <span class="n">req</span><span class="o">.</span><span class="na">getRequestURI</span><span class="o">();</span>
        <span class="n">ControllerV4</span> <span class="n">controller</span> <span class="o">=</span> <span class="n">controllerMap</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">requestURI</span><span class="o">);</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">controller</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">resp</span><span class="o">.</span><span class="na">setStatus</span><span class="o">(</span><span class="n">HttpServletResponse</span><span class="o">.</span><span class="na">SC_NOT_FOUND</span><span class="o">);</span>
            <span class="k">return</span><span class="o">;</span>
        <span class="o">}</span>

        <span class="c1">// param Map</span>
        <span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">paramMap</span> <span class="o">=</span> <span class="n">createParamMap</span><span class="o">(</span><span class="n">req</span><span class="o">);</span>
      	<span class="c1">// model </span>
        <span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">Object</span><span class="o">&gt;</span> <span class="n">model</span> <span class="o">=</span> <span class="k">new</span> <span class="n">HashMap</span><span class="o">&lt;&gt;();</span>
        <span class="n">String</span> <span class="n">viewName</span> <span class="o">=</span> <span class="n">controller</span><span class="o">.</span><span class="na">process</span><span class="o">(</span><span class="n">paramMap</span><span class="o">,</span> <span class="n">model</span><span class="o">);</span>

        <span class="n">MyView</span> <span class="n">view</span> <span class="o">=</span> <span class="n">viewResolver</span><span class="o">(</span><span class="n">viewName</span><span class="o">);</span>
        <span class="n">view</span><span class="o">.</span><span class="na">render</span><span class="o">(</span><span class="n">model</span><span class="o">,</span> <span class="n">req</span><span class="o">,</span> <span class="n">resp</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="kd">private</span> <span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="nf">createParamMap</span><span class="o">(</span><span class="n">HttpServletRequest</span> <span class="n">req</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">paramMap</span> <span class="o">=</span> <span class="k">new</span> <span class="n">HashMap</span><span class="o">&lt;&gt;();</span>
        <span class="n">req</span><span class="o">.</span><span class="na">getParameterNames</span><span class="o">().</span><span class="na">asIterator</span><span class="o">()</span>
                <span class="o">.</span><span class="na">forEachRemaining</span><span class="o">(</span><span class="n">paramName</span> <span class="o">-&gt;</span> <span class="n">paramMap</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="n">paramName</span><span class="o">,</span> <span class="n">req</span><span class="o">.</span><span class="na">getParameter</span><span class="o">(</span><span class="n">paramName</span><span class="o">)));</span>
        <span class="k">return</span> <span class="n">paramMap</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">private</span> <span class="n">MyView</span> <span class="nf">viewResolver</span><span class="o">(</span><span class="n">String</span> <span class="n">viewName</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">MyView</span> <span class="n">view</span> <span class="o">=</span> <span class="k">new</span> <span class="n">MyView</span><span class="o">(</span><span class="s">"/WEB-INF/views/"</span> <span class="o">+</span> <span class="n">viewName</span> <span class="o">+</span> <span class="s">".jsp"</span><span class="o">);</span>
        <span class="k">return</span> <span class="n">view</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<ul>
  <li>í”„ë¡ íŠ¸ ì»¨íŠ¸ë¡¤ëŸ¬ì—ì„œ modelì„ ë§Œë“¤ê³  ê° Controllerì— paramMapê³¼ modelì„ ë„˜ê²¨ ì²˜ë¦¬ë¥¼ í•˜ê³ , viewNameì„ ë°˜í™˜ë°›ëŠ”ë‹¤.</li>
  <li>modelViewì—ì„œ modelì„ êº¼ë‚¼ í•„ìš”ê°€ ì—†ë‹¤.</li>
</ul>

<p>í•˜ì§€ë§Œ, ì§€ê¸ˆ ControllerV4 ì¸í„°í˜ì´ìŠ¤ë¡œ ë°›ì„ ìˆ˜ ìˆëŠ” ì»¨íŠ¸ë¡¤ëŸ¬ë¥¼ ì œí•œí•˜ê³  ìˆë‹¤.</p>

<hr />

<h2 id="ìœ ì—°í•œ-controller---ì–´ëŒ‘í„°-íŒ¨í„´">ìœ ì—°í•œ Controller - ì–´ëŒ‘í„° íŒ¨í„´</h2>

<p>ì§€ê¸ˆê¹Œì§€ì˜ í”„ë¡ íŠ¸ ì»¨íŠ¸ë¡¤ëŸ¬ëŠ” í•œê°€ì§€ ì¸í„°í˜ì´ìŠ¤ë§Œ ì‚¬ìš©ì´ ê°€ëŠ¥í–ˆì—ˆë‹¤. <br />
ì–´ë– í•œ ì»¨íŠ¸ë¡¤ëŸ¬ë„ í˜¸í™˜ì´ ê°€ëŠ¥í•˜ë„ë¡ ì–´ëŒ‘í„° íŒ¨í„´ì„ ì‚¬ìš©í•œë‹¤.</p>

<p><img src="https://images.velog.io/images/new_wisdom/post/0f169df9-469c-4e38-b61c-2cf42f872444/image.png" alt="" /></p>

<ul>
  <li>í•¸ë“¤ëŸ¬ ì–´ëŒ‘í„° : ì¤‘ê°„ì— ì–´ëŒ‘í„° ì—­í• ì„ í•˜ëŠ” ì–´ëŒ‘í„°ê°€ ì¶”ê°€ë˜ì—ˆë‹¤. ì´ ë•ë¶„ì— ë‹¤ì–‘í•œ ì¢…ë¥˜ì˜ ì»¨íŠ¸ë¡¤ëŸ¬ë¥¼ í˜¸ì¶œí•  ìˆ˜ ìˆë‹¤.</li>
  <li>ê¸°ì¡´ì—ëŠ” í”„ë¡ íŠ¸ ì»¨íŠ¸ë¡¤ëŸ¬ê°€ ë°”ë¡œ ì»¨íŠ¸ë¡¤ëŸ¬ë¥¼ í˜¸ì¶œí•˜ì˜€ì§€ë§Œ, ì´ì œëŠ” ì–´ëŒ‘í„°ë¥¼ í†µí•´ì„œ í˜¸ì¶œí•œë‹¤.</li>
  <li>í•¸ë“¤ëŸ¬ : ì»¨íŠ¸ë¡¤ëŸ¬ì˜ ì¢€ ë” ë„“ì€ ë²”ìœ„. ì–´ëŒ‘í„°ê°€ ìˆê¸° ë•Œë¬¸ì— ì»¨íŠ¸ë¡¤ëŸ¬ ê°œë… ë¿ë§Œ ì•„ë‹ˆë¼ í•´ë‹¹í•˜ëŠ” ì–´ëŒ‘í„°ë§Œ ìˆìœ¼ë©´ ì²˜ë¦¬ê°€ ê°€ëŠ¥í•˜ë‹¤.</li>
</ul>

<h4 id="myhandleradapter">MyHandlerAdapter</h4>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">interface</span> <span class="nc">MyHandlerAdapter</span> <span class="o">{</span>
    <span class="kt">boolean</span> <span class="nf">supports</span><span class="o">(</span><span class="n">Object</span> <span class="n">handler</span><span class="o">);</span>
    <span class="n">ModelView</span> <span class="nf">handle</span><span class="o">(</span><span class="n">HttpServletRequest</span> <span class="n">request</span><span class="o">,</span> <span class="n">HttpServletResponse</span> <span class="n">response</span><span class="o">,</span> <span class="n">Object</span> <span class="n">handler</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">ServletException</span><span class="o">,</span> <span class="n">IOException</span><span class="o">;</span>
<span class="o">}</span>
</code></pre></div></div>

<ul>
  <li><code class="highlighter-rouge">supports(Object handler)</code> : ì–´ëŒ‘í„°ê°€ í•´ë‹¹ ì»¨íŠ¸ë¡¤ëŸ¬ë¥¼ ì²˜ë¦¬í•  ìˆ˜ ìˆëŠ”ì§€ ë°˜í™˜</li>
  <li><code class="highlighter-rouge">handle(...)</code> : ì–´ëŒ‘í„°ëŠ” ì‹¤ì œ ì»¨íŠ¸ë¡¤ëŸ¬ë¥¼ í˜¸ì¶œí•˜ê³  ê²°ê³¼ë¡œ ModelViewë¥¼ ë°˜í™˜í•œë‹¤.</li>
  <li>ë§Œì•½ ì»¨íŠ¸ë¡¤ëŸ¬ê°€ ModelViewë¥¼ ë°˜í™˜í•˜ì§€ ëª»í•˜ë©´, ì–´ëŒ‘í„°ê°€ ì§ì ‘ ìƒì„±í•œë‹¤.</li>
  <li>í”„ë¡ íŠ¸ ì»¨íŠ¸ë¡¤ëŸ¬ê°€ ì•„ë‹Œ ì–´ëŒ‘í„°ê°€ ì‹¤ì œ ì»¨íŠ¸ë¡¤ëŸ¬ë¥¼ í˜¸ì¶œí•œë‹¤.</li>
</ul>

<h4 id="controllerv3handleradapter">ControllerV3HandlerAdapter</h4>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">ControllerV3HandlerAdapter</span> <span class="kd">implements</span> <span class="n">MyHandlerAdapter</span> <span class="o">{</span>
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">supports</span><span class="o">(</span><span class="n">Object</span> <span class="n">handler</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="o">(</span><span class="n">handler</span> <span class="k">instanceof</span> <span class="n">ControllerV3</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="n">ModelView</span> <span class="nf">handle</span><span class="o">(</span><span class="n">HttpServletRequest</span> <span class="n">request</span><span class="o">,</span> <span class="n">HttpServletResponse</span> <span class="n">response</span><span class="o">,</span> <span class="n">Object</span> <span class="n">handler</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">ServletException</span><span class="o">,</span> <span class="n">IOException</span> <span class="o">{</span>
        <span class="n">ControllerV3</span> <span class="n">controller</span> <span class="o">=</span> <span class="o">(</span><span class="n">ControllerV3</span><span class="o">)</span> <span class="n">handler</span><span class="o">;</span>
        <span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">paramMap</span> <span class="o">=</span> <span class="n">createParamMap</span><span class="o">(</span><span class="n">request</span><span class="o">);</span>
        <span class="n">ModelView</span> <span class="n">mv</span> <span class="o">=</span> <span class="n">controller</span><span class="o">.</span><span class="na">process</span><span class="o">(</span><span class="n">paramMap</span><span class="o">);</span>
        <span class="k">return</span> <span class="n">mv</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">private</span> <span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="nf">createParamMap</span><span class="o">(</span><span class="n">HttpServletRequest</span> <span class="n">request</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">paramMap</span> <span class="o">=</span> <span class="k">new</span> <span class="n">HashMap</span><span class="o">&lt;&gt;();</span>
        <span class="n">request</span><span class="o">.</span><span class="na">getParameterNames</span><span class="o">().</span><span class="na">asIterator</span><span class="o">()</span>
                <span class="o">.</span><span class="na">forEachRemaining</span><span class="o">(</span><span class="n">paramName</span> <span class="o">-&gt;</span> <span class="n">paramMap</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="n">paramName</span><span class="o">,</span>
                        <span class="n">request</span><span class="o">.</span><span class="na">getParameter</span><span class="o">(</span><span class="n">paramName</span><span class="o">)));</span>
        <span class="k">return</span> <span class="n">paramMap</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<ul>
  <li>supports()ë¡œ ControllerV3 íƒ€ì…ì¸ì§€ í™•ì¸í•˜ê³  ë§ë‹¤ë©´ í˜¸ì¶œí•œë‹¤.</li>
</ul>

<p>####</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@WebServlet</span><span class="o">(</span><span class="n">name</span> <span class="o">=</span> <span class="s">"frontControllerServletV5"</span><span class="o">,</span> <span class="n">urlPatterns</span> <span class="o">=</span> <span class="s">"/front-controller/v5/*"</span><span class="o">)</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">FrontControllerServletV5</span> <span class="kd">extends</span> <span class="n">HttpServlet</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">Object</span><span class="o">&gt;</span> <span class="n">handlerMappingMap</span> <span class="o">=</span> <span class="k">new</span> <span class="n">HashMap</span><span class="o">&lt;&gt;();</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">MyHandlerAdapter</span><span class="o">&gt;</span> <span class="n">handlerAdapters</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ArrayList</span><span class="o">&lt;&gt;();</span>

    <span class="kd">public</span> <span class="nf">FrontControllerServletV5</span><span class="o">()</span> <span class="o">{</span>
        <span class="n">initHandlerMappingMap</span><span class="o">();</span>
        <span class="n">initHandlerAdapters</span><span class="o">();</span>
    <span class="o">}</span>

    <span class="kd">private</span> <span class="kt">void</span> <span class="nf">initHandlerMappingMap</span><span class="o">()</span> <span class="o">{</span>
        <span class="n">handlerMappingMap</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"/front-controller/v5/v3/members/new-form"</span><span class="o">,</span>
                <span class="k">new</span> <span class="nf">MemberFormControllerV3</span><span class="o">());</span>
        <span class="n">handlerMappingMap</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"/front-controller/v5/v3/members/save"</span><span class="o">,</span>
                <span class="k">new</span> <span class="nf">MemberSaveControllerV3</span><span class="o">());</span>
        <span class="n">handlerMappingMap</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"/front-controller/v5/v3/members"</span><span class="o">,</span>
                <span class="k">new</span> <span class="nf">MemberListControllerV3</span><span class="o">());</span>
    <span class="o">}</span>

    <span class="kd">private</span> <span class="kt">void</span> <span class="nf">initHandlerAdapters</span><span class="o">()</span> <span class="o">{</span>
        <span class="n">handlerAdapters</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="k">new</span> <span class="n">ControllerV3HandlerAdapter</span><span class="o">());</span>

    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">protected</span> <span class="kt">void</span> <span class="nf">service</span><span class="o">(</span><span class="n">HttpServletRequest</span> <span class="n">req</span><span class="o">,</span> <span class="n">HttpServletResponse</span> <span class="n">resp</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">ServletException</span><span class="o">,</span> <span class="n">IOException</span> <span class="o">{</span>
        <span class="c1">// ìš”ì²­ ì •ë³´ë¡œ í•¸ë“¤ëŸ¬ë¥¼ ê°€ì ¸ì˜¨ë‹¤.</span>
        <span class="n">Object</span> <span class="n">handler</span> <span class="o">=</span> <span class="n">getHandler</span><span class="o">(</span><span class="n">req</span><span class="o">);</span>

        <span class="k">if</span> <span class="o">(</span><span class="n">handler</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">resp</span><span class="o">.</span><span class="na">setStatus</span><span class="o">(</span><span class="n">HttpServletResponse</span><span class="o">.</span><span class="na">SC_NOT_FOUND</span><span class="o">);</span>
            <span class="k">return</span><span class="o">;</span>
        <span class="o">}</span>

        <span class="c1">// ì–´ëŒ‘í„°ë¥¼ ì°¾ëŠ”ë‹¤.</span>
        <span class="n">MyHandlerAdapter</span> <span class="n">adapter</span> <span class="o">=</span> <span class="n">getHandlerAdapter</span><span class="o">(</span><span class="n">handler</span><span class="o">);</span>

        <span class="n">ModelView</span> <span class="n">mv</span> <span class="o">=</span> <span class="n">adapter</span><span class="o">.</span><span class="na">handle</span><span class="o">(</span><span class="n">req</span><span class="o">,</span> <span class="n">resp</span><span class="o">,</span> <span class="n">handler</span><span class="o">);</span>

        <span class="n">String</span> <span class="n">viewName</span> <span class="o">=</span> <span class="n">mv</span><span class="o">.</span><span class="na">getViewName</span><span class="o">();</span> <span class="c1">// ë…¼ë¦¬ ì´ë¦„ ex) new-form</span>
        <span class="n">MyView</span> <span class="n">view</span> <span class="o">=</span> <span class="n">viewResolver</span><span class="o">(</span><span class="n">viewName</span><span class="o">);</span>
        
        <span class="n">view</span><span class="o">.</span><span class="na">render</span><span class="o">(</span><span class="n">mv</span><span class="o">.</span><span class="na">getModel</span><span class="o">(),</span> <span class="n">req</span><span class="o">,</span> <span class="n">resp</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="kd">private</span> <span class="n">MyHandlerAdapter</span> <span class="nf">getHandlerAdapter</span><span class="o">(</span><span class="n">Object</span> <span class="n">handler</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">for</span> <span class="o">(</span><span class="n">MyHandlerAdapter</span> <span class="n">adapter</span> <span class="o">:</span> <span class="n">handlerAdapters</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">if</span> <span class="o">(</span><span class="n">adapter</span><span class="o">.</span><span class="na">supports</span><span class="o">(</span><span class="n">handler</span><span class="o">))</span> <span class="o">{</span>
                <span class="k">return</span> <span class="n">adapter</span><span class="o">;</span>
            <span class="o">}</span>
        <span class="o">}</span>
        <span class="k">throw</span> <span class="k">new</span> <span class="nf">IllegalArgumentException</span><span class="o">(</span><span class="s">"handler adapterë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤. handler "</span> <span class="o">+</span> <span class="n">handler</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="kd">private</span> <span class="n">Object</span> <span class="nf">getHandler</span><span class="o">(</span><span class="n">HttpServletRequest</span> <span class="n">req</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">String</span> <span class="n">requestURI</span> <span class="o">=</span> <span class="n">req</span><span class="o">.</span><span class="na">getRequestURI</span><span class="o">();</span>
        <span class="n">Object</span> <span class="n">handler</span> <span class="o">=</span> <span class="n">handlerMappingMap</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">requestURI</span><span class="o">);</span>
        <span class="k">return</span> <span class="n">handler</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">private</span> <span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="nf">createParamMap</span><span class="o">(</span><span class="n">HttpServletRequest</span> <span class="n">req</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">paramMap</span> <span class="o">=</span> <span class="k">new</span> <span class="n">HashMap</span><span class="o">&lt;&gt;();</span>
        <span class="n">req</span><span class="o">.</span><span class="na">getParameterNames</span><span class="o">().</span><span class="na">asIterator</span><span class="o">()</span>
                <span class="o">.</span><span class="na">forEachRemaining</span><span class="o">(</span><span class="n">paramName</span> <span class="o">-&gt;</span> <span class="n">paramMap</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="n">paramName</span><span class="o">,</span> <span class="n">req</span><span class="o">.</span><span class="na">getParameter</span><span class="o">(</span><span class="n">paramName</span><span class="o">)));</span>
        <span class="k">return</span> <span class="n">paramMap</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">private</span> <span class="n">MyView</span> <span class="nf">viewResolver</span><span class="o">(</span><span class="n">String</span> <span class="n">viewName</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">MyView</span> <span class="n">view</span> <span class="o">=</span> <span class="k">new</span> <span class="n">MyView</span><span class="o">(</span><span class="s">"/WEB-INF/views/"</span> <span class="o">+</span> <span class="n">viewName</span> <span class="o">+</span> <span class="s">".jsp"</span><span class="o">);</span>
        <span class="k">return</span> <span class="n">view</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<ul>
  <li>ìƒì„±ì : í•¸ë“¤ëŸ¬ ë§¤í•‘ê³¼ ì–´ëŒ‘í„°ë¥¼ ì´ˆê¸°í™”í•œë‹¤.</li>
  <li>ë§¤í•‘ ì •ë³´ì¸ handlerMappingMap ì´ Object Mapìœ¼ë¡œ ì•„ë¬´ íƒ€ì…ì´ë‚˜ ë°›ì„ ìˆ˜ ìˆë‹¤.</li>
  <li>í•¸ë“¤ëŸ¬ ë§¤í•‘</li>
  <li>í•¸ë“¤ëŸ¬ë¥¼ ì²˜ë¦¬í•  ìˆ˜ ìˆëŠ” ì–´ëŒ‘í„° ì¡°íšŒ</li>
  <li>ì–´ëŒ‘í„° í˜¸ì¶œ</li>
</ul>

<h4 id="controllerv4handleradapter-ì˜ˆì œ">ControllerV4HandlerAdapter ì˜ˆì œ</h4>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">ControllerV4HandlerAdapter</span> <span class="kd">implements</span> <span class="n">MyHandlerAdapter</span> <span class="o">{</span>
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">supports</span><span class="o">(</span><span class="n">Object</span> <span class="n">handler</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="o">(</span><span class="n">handler</span> <span class="k">instanceof</span> <span class="n">ControllerV4</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="n">ModelView</span> <span class="nf">handle</span><span class="o">(</span><span class="n">HttpServletRequest</span> <span class="n">request</span><span class="o">,</span> <span class="n">HttpServletResponse</span> <span class="n">response</span><span class="o">,</span> <span class="n">Object</span> <span class="n">handler</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">ServletException</span><span class="o">,</span> <span class="n">IOException</span> <span class="o">{</span>
        <span class="n">ControllerV4</span> <span class="n">controller</span> <span class="o">=</span> <span class="o">(</span><span class="n">ControllerV4</span><span class="o">)</span> <span class="n">handler</span><span class="o">;</span>
        <span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">paramMap</span> <span class="o">=</span> <span class="n">createParamMap</span><span class="o">(</span><span class="n">request</span><span class="o">);</span>
        <span class="n">HashMap</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">Object</span><span class="o">&gt;</span> <span class="n">model</span> <span class="o">=</span> <span class="k">new</span> <span class="n">HashMap</span><span class="o">&lt;&gt;();</span>
      
        <span class="c1">//  viewNameë§Œ ë°˜í™˜í•  ê²½ìš° ModelView ê°ì²´ë¡œ ë§Œë“¤ì–´ì£¼ëŠ” ì—­í• ë„ í•œë‹¤.</span>
        <span class="n">String</span> <span class="n">viewName</span> <span class="o">=</span> <span class="n">controller</span><span class="o">.</span><span class="na">process</span><span class="o">(</span><span class="n">paramMap</span><span class="o">,</span> <span class="n">model</span><span class="o">);</span>

        <span class="n">ModelView</span> <span class="n">mv</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ModelView</span><span class="o">(</span><span class="n">viewName</span><span class="o">);</span>
        <span class="n">mv</span><span class="o">.</span><span class="na">setModel</span><span class="o">(</span><span class="n">model</span><span class="o">);</span>
        <span class="k">return</span> <span class="n">mv</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">private</span> <span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="nf">createParamMap</span><span class="o">(</span><span class="n">HttpServletRequest</span> <span class="n">request</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">paramMap</span> <span class="o">=</span> <span class="k">new</span> <span class="n">HashMap</span><span class="o">&lt;&gt;();</span>
        <span class="n">request</span><span class="o">.</span><span class="na">getParameterNames</span><span class="o">().</span><span class="na">asIterator</span><span class="o">()</span>
                <span class="o">.</span><span class="na">forEachRemaining</span><span class="o">(</span><span class="n">paramName</span> <span class="o">-&gt;</span> <span class="n">paramMap</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="n">paramName</span><span class="o">,</span>
                        <span class="n">request</span><span class="o">.</span><span class="na">getParameter</span><span class="o">(</span><span class="n">paramName</span><span class="o">)));</span>
        <span class="k">return</span> <span class="n">paramMap</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<ul>
  <li>ì–´ëŒ‘í„°ê°€ í˜¸ì¶œí•˜ëŠ” ControllerV4ëŠ” viewNameë§Œ ë°˜í™˜í•˜ëŠ”ë°, ì´ë•Œ ì–´ëŒ‘í„°ì—ì„œ ì´ë¥¼ ModelView ê°ì²´ë¡œ ë§Œë“¤ì–´ ë°˜í™˜í•œë‹¤.</li>
</ul>

<p>í”„ë¡ íŠ¸ ì»¨íŠ¸ë¡¤ëŸ¬ ì…ì¥ì—ì„œëŠ” í•¸ë“¤ëŸ¬ ì–´ëŒ‘í„°ì—ë§Œ ì˜ì¡´í•˜ê³  ìˆë‹¤.</p>

<p>ì´ MVC í”„ë ˆì„ ì›Œí¬ëŠ” ì—­í• ê³¼ êµ¬í˜„ì´ ë¶„ë¦¬ë˜ì–´ ìˆë‹¤.  <br />
ëª¨ë“  ê²ƒì„ ì¸í„°í˜ì´ìŠ¤ë¡œ ë§Œë“¤ê³  êµ¬í˜„í•˜ê³  ì‹¶ì€ ë¶€ë¶„ë§Œ ì£¼ì…í•˜ë©´ ì™„ë²½! (ìŠ¤í”„ë§ MVCëŠ” ë·°ì™€ ë·°ë¦¬ì¡¸ë²„ ë‹¤ ì¸í„°í˜ì´ìŠ¤ë¡œ êµ¬í˜„ë˜ì–´ìˆë‹¤.)
ì–´ë–¤ í•¸ë“¤ëŸ¬ë¥¼ ì¶”ê°€í•˜ê³  ì‹¶ì–´ë„ ìš°ë¦¬ëŠ” í•¸ë“¤ëŸ¬ì–´ëŒ‘í„°ë§Œ êµ¬í˜„í•´ì£¼ë©´ ëœë‹¤!</p>

<h4 id="ex-requestmapping">ex) @RequestMapping()</h4>

<p>RequestMappingHandlerAdapter : ìœ„ ì–´ë…¸í…Œì´ì…˜ì´ ë¶™ì€ í•¸ë“¤ëŸ¬ë¥¼ ì²˜ë¦¬í•´ì£¼ëŠ” ì–´ëŒ‘í„°</p>


	  ]]></description>
	</item>


</channel>
</rss>
